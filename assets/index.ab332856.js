function xI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}const i6=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}};i6();var s6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function o6(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ie={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xh=Symbol.for("react.element"),a6=Symbol.for("react.portal"),l6=Symbol.for("react.fragment"),c6=Symbol.for("react.strict_mode"),u6=Symbol.for("react.profiler"),A6=Symbol.for("react.provider"),f6=Symbol.for("react.context"),h6=Symbol.for("react.forward_ref"),d6=Symbol.for("react.suspense"),p6=Symbol.for("react.memo"),g6=Symbol.for("react.lazy"),WT=Symbol.iterator;function m6(t){return t===null||typeof t!="object"?null:(t=WT&&t[WT]||t["@@iterator"],typeof t=="function"?t:null)}var CI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},PI=Object.assign,MI={};function Uu(t,e,n){this.props=t,this.context=e,this.refs=MI,this.updater=n||CI}Uu.prototype.isReactComponent={};Uu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Uu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function II(){}II.prototype=Uu.prototype;function $2(t,e,n){this.props=t,this.context=e,this.refs=MI,this.updater=n||CI}var X2=$2.prototype=new II;X2.constructor=$2;PI(X2,Uu.prototype);X2.isPureReactComponent=!0;var QT=Array.isArray,BI=Object.prototype.hasOwnProperty,J2={current:null},LI={key:!0,ref:!0,__self:!0,__source:!0};function RI(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)BI.call(e,r)&&!LI.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),f=0;f<a;f++)l[f]=arguments[f+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:xh,type:t,key:s,ref:o,props:i,_owner:J2.current}}function y6(t,e){return{$$typeof:xh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function K2(t){return typeof t=="object"&&t!==null&&t.$$typeof===xh}function v6(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $T=/\/+/g;function Ey(t,e){return typeof t=="object"&&t!==null&&t.key!=null?v6(""+t.key):e.toString(36)}function Y0(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case xh:case a6:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Ey(o,0):r,QT(i)?(n="",t!=null&&(n=t.replace($T,"$&/")+"/"),Y0(i,e,n,"",function(f){return f})):i!=null&&(K2(i)&&(i=y6(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace($T,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",QT(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Ey(s,a);o+=Y0(s,e,n,l,i)}else if(l=m6(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Ey(s,a++),o+=Y0(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ud(t,e,n){if(t==null)return t;var r=[],i=0;return Y0(t,r,"","",function(s){return e.call(n,s,i++)}),r}function _6(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Lr={current:null},q0={transition:null},b6={ReactCurrentDispatcher:Lr,ReactCurrentBatchConfig:q0,ReactCurrentOwner:J2};ut.Children={map:Ud,forEach:function(t,e,n){Ud(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ud(t,function(){e++}),e},toArray:function(t){return Ud(t,function(e){return e})||[]},only:function(t){if(!K2(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ut.Component=Uu;ut.Fragment=l6;ut.Profiler=u6;ut.PureComponent=$2;ut.StrictMode=c6;ut.Suspense=d6;ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b6;ut.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=PI({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=J2.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)BI.call(e,l)&&!LI.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var f=0;f<l;f++)a[f]=arguments[f+2];r.children=a}return{$$typeof:xh,type:t.type,key:i,ref:s,props:r,_owner:o}};ut.createContext=function(t){return t={$$typeof:f6,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:A6,_context:t},t.Consumer=t};ut.createElement=RI;ut.createFactory=function(t){var e=RI.bind(null,t);return e.type=t,e};ut.createRef=function(){return{current:null}};ut.forwardRef=function(t){return{$$typeof:h6,render:t}};ut.isValidElement=K2;ut.lazy=function(t){return{$$typeof:g6,_payload:{_status:-1,_result:t},_init:_6}};ut.memo=function(t,e){return{$$typeof:p6,type:t,compare:e===void 0?null:e}};ut.startTransition=function(t){var e=q0.transition;q0.transition={};try{t()}finally{q0.transition=e}};ut.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ut.useCallback=function(t,e){return Lr.current.useCallback(t,e)};ut.useContext=function(t){return Lr.current.useContext(t)};ut.useDebugValue=function(){};ut.useDeferredValue=function(t){return Lr.current.useDeferredValue(t)};ut.useEffect=function(t,e){return Lr.current.useEffect(t,e)};ut.useId=function(){return Lr.current.useId()};ut.useImperativeHandle=function(t,e,n){return Lr.current.useImperativeHandle(t,e,n)};ut.useInsertionEffect=function(t,e){return Lr.current.useInsertionEffect(t,e)};ut.useLayoutEffect=function(t,e){return Lr.current.useLayoutEffect(t,e)};ut.useMemo=function(t,e){return Lr.current.useMemo(t,e)};ut.useReducer=function(t,e,n){return Lr.current.useReducer(t,e,n)};ut.useRef=function(t){return Lr.current.useRef(t)};ut.useState=function(t){return Lr.current.useState(t)};ut.useSyncExternalStore=function(t,e,n){return Lr.current.useSyncExternalStore(t,e,n)};ut.useTransition=function(){return Lr.current.useTransition()};ut.version="18.2.0";(function(t){t.exports=ut})(ie);const rl=o6(ie.exports),XT=xI({__proto__:null,default:rl},[ie.exports]);var I_={},Ch={exports:{}},yi={},OI={exports:{}},DI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(le,be){var Pe=le.length;le.push(be);e:for(;0<Pe;){var Fe=Pe-1>>>1,Ge=le[Fe];if(0<i(Ge,be))le[Fe]=be,le[Pe]=Ge,Pe=Fe;else break e}}function n(le){return le.length===0?null:le[0]}function r(le){if(le.length===0)return null;var be=le[0],Pe=le.pop();if(Pe!==be){le[0]=Pe;e:for(var Fe=0,Ge=le.length,lt=Ge>>>1;Fe<lt;){var kn=2*(Fe+1)-1,Yr=le[kn],rr=kn+1,Dt=le[rr];if(0>i(Yr,Pe))rr<Ge&&0>i(Dt,Yr)?(le[Fe]=Dt,le[rr]=Pe,Fe=rr):(le[Fe]=Yr,le[kn]=Pe,Fe=kn);else if(rr<Ge&&0>i(Dt,Pe))le[Fe]=Dt,le[rr]=Pe,Fe=rr;else break e}}return be}function i(le,be){var Pe=le.sortIndex-be.sortIndex;return Pe!==0?Pe:le.id-be.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],f=[],d=1,g=null,y=3,b=!1,E=!1,S=!1,M=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(le){for(var be=n(f);be!==null;){if(be.callback===null)r(f);else if(be.startTime<=le)r(f),be.sortIndex=be.expirationTime,e(l,be);else break;be=n(f)}}function L(le){if(S=!1,I(le),!E)if(n(l)!==null)E=!0,Oe(F);else{var be=n(f);be!==null&&He(L,be.startTime-le)}}function F(le,be){E=!1,S&&(S=!1,C(Y),Y=-1),b=!0;var Pe=y;try{for(I(be),g=n(l);g!==null&&(!(g.expirationTime>be)||le&&!k());){var Fe=g.callback;if(typeof Fe=="function"){g.callback=null,y=g.priorityLevel;var Ge=Fe(g.expirationTime<=be);be=t.unstable_now(),typeof Ge=="function"?g.callback=Ge:g===n(l)&&r(l),I(be)}else r(l);g=n(l)}if(g!==null)var lt=!0;else{var kn=n(f);kn!==null&&He(L,kn.startTime-be),lt=!1}return lt}finally{g=null,y=Pe,b=!1}}var z=!1,X=null,Y=-1,Q=5,N=-1;function k(){return!(t.unstable_now()-N<Q)}function te(){if(X!==null){var le=t.unstable_now();N=le;var be=!0;try{be=X(!0,le)}finally{be?oe():(z=!1,X=null)}}else z=!1}var oe;if(typeof P=="function")oe=function(){P(te)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,Re=ae.port2;ae.port1.onmessage=te,oe=function(){Re.postMessage(null)}}else oe=function(){M(te,0)};function Oe(le){X=le,z||(z=!0,oe())}function He(le,be){Y=M(function(){le(t.unstable_now())},be)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(le){le.callback=null},t.unstable_continueExecution=function(){E||b||(E=!0,Oe(F))},t.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<le?Math.floor(1e3/le):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(le){switch(y){case 1:case 2:case 3:var be=3;break;default:be=y}var Pe=y;y=be;try{return le()}finally{y=Pe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(le,be){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var Pe=y;y=le;try{return be()}finally{y=Pe}},t.unstable_scheduleCallback=function(le,be,Pe){var Fe=t.unstable_now();switch(typeof Pe=="object"&&Pe!==null?(Pe=Pe.delay,Pe=typeof Pe=="number"&&0<Pe?Fe+Pe:Fe):Pe=Fe,le){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=Pe+Ge,le={id:d++,callback:be,priorityLevel:le,startTime:Pe,expirationTime:Ge,sortIndex:-1},Pe>Fe?(le.sortIndex=Pe,e(f,le),n(l)===null&&le===n(f)&&(S?(C(Y),Y=-1):S=!0,He(L,Pe-Fe))):(le.sortIndex=Ge,e(l,le),E||b||(E=!0,Oe(F))),le},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(le){var be=y;return function(){var Pe=y;y=be;try{return le.apply(this,arguments)}finally{y=Pe}}}})(DI);(function(t){t.exports=DI})(OI);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FI=ie.exports,gi=OI.exports;function Ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kI=new Set,Bf={};function Gl(t,e){uu(t,e),uu(t+"Capture",e)}function uu(t,e){for(Bf[t]=e,t=0;t<e.length;t++)kI.add(e[t])}var _o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),B_=Object.prototype.hasOwnProperty,w6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,JT={},KT={};function E6(t){return B_.call(KT,t)?!0:B_.call(JT,t)?!1:w6.test(t)?KT[t]=!0:(JT[t]=!0,!1)}function T6(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function S6(t,e,n,r){if(e===null||typeof e>"u"||T6(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Zn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Zn[t]=new Rr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Zn[e]=new Rr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Zn[t]=new Rr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Zn[t]=new Rr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Zn[t]=new Rr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Zn[t]=new Rr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Zn[t]=new Rr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Zn[t]=new Rr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Zn[t]=new Rr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Y2=/[\-:]([a-z])/g;function q2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Y2,q2);Zn[e]=new Rr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Y2,q2);Zn[e]=new Rr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Y2,q2);Zn[e]=new Rr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Zn[t]=new Rr(t,1,!1,t.toLowerCase(),null,!1,!1)});Zn.xlinkHref=new Rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Zn[t]=new Rr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Z2(t,e,n,r){var i=Zn.hasOwnProperty(e)?Zn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(S6(e,n,i,r)&&(n=null),r||i===null?E6(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ro=FI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gd=Symbol.for("react.element"),Sc=Symbol.for("react.portal"),xc=Symbol.for("react.fragment"),eb=Symbol.for("react.strict_mode"),L_=Symbol.for("react.profiler"),NI=Symbol.for("react.provider"),UI=Symbol.for("react.context"),tb=Symbol.for("react.forward_ref"),R_=Symbol.for("react.suspense"),O_=Symbol.for("react.suspense_list"),nb=Symbol.for("react.memo"),qo=Symbol.for("react.lazy"),GI=Symbol.for("react.offscreen"),YT=Symbol.iterator;function wA(t){return t===null||typeof t!="object"?null:(t=YT&&t[YT]||t["@@iterator"],typeof t=="function"?t:null)}var un=Object.assign,Ty;function JA(t){if(Ty===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ty=e&&e[1]||""}return`
`+Ty+t}var Sy=!1;function xy(t,e){if(!t||Sy)return"";Sy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){r=f}t.call(e.prototype)}else{try{throw Error()}catch(f){r=f}t()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Sy=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?JA(t):""}function x6(t){switch(t.tag){case 5:return JA(t.type);case 16:return JA("Lazy");case 13:return JA("Suspense");case 19:return JA("SuspenseList");case 0:case 2:case 15:return t=xy(t.type,!1),t;case 11:return t=xy(t.type.render,!1),t;case 1:return t=xy(t.type,!0),t;default:return""}}function D_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xc:return"Fragment";case Sc:return"Portal";case L_:return"Profiler";case eb:return"StrictMode";case R_:return"Suspense";case O_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case UI:return(t.displayName||"Context")+".Consumer";case NI:return(t._context.displayName||"Context")+".Provider";case tb:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case nb:return e=t.displayName||null,e!==null?e:D_(t.type)||"Memo";case qo:e=t._payload,t=t._init;try{return D_(t(e))}catch{}}return null}function C6(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D_(e);case 8:return e===eb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ba(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function P6(t){var e=zI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zd(t){t._valueTracker||(t._valueTracker=P6(t))}function VI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=zI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Dp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function F_(t,e){var n=e.checked;return un({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function qT(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ba(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jI(t,e){e=e.checked,e!=null&&Z2(t,"checked",e,!1)}function k_(t,e){jI(t,e);var n=ba(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?N_(t,e.type,n):e.hasOwnProperty("defaultValue")&&N_(t,e.type,ba(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ZT(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function N_(t,e,n){(e!=="number"||Dp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var KA=Array.isArray;function Jc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ba(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function U_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ae(91));return un({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function eS(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ae(92));if(KA(n)){if(1<n.length)throw Error(Ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ba(n)}}function HI(t,e){var n=ba(e.value),r=ba(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tS(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function WI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function G_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?WI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vd,QI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vd=Vd||document.createElement("div"),Vd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Lf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var lf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},M6=["Webkit","ms","Moz","O"];Object.keys(lf).forEach(function(t){M6.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),lf[e]=lf[t]})});function $I(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||lf.hasOwnProperty(t)&&lf[t]?(""+e).trim():e+"px"}function XI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=$I(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var I6=un({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function z_(t,e){if(e){if(I6[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ae(62))}}function V_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var j_=null;function rb(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var H_=null,Kc=null,Yc=null;function nS(t){if(t=Ih(t)){if(typeof H_!="function")throw Error(Ae(280));var e=t.stateNode;e&&(e=rm(e),H_(t.stateNode,t.type,e))}}function JI(t){Kc?Yc?Yc.push(t):Yc=[t]:Kc=t}function KI(){if(Kc){var t=Kc,e=Yc;if(Yc=Kc=null,nS(t),e)for(t=0;t<e.length;t++)nS(e[t])}}function YI(t,e){return t(e)}function qI(){}var Cy=!1;function ZI(t,e,n){if(Cy)return t(e,n);Cy=!0;try{return YI(t,e,n)}finally{Cy=!1,(Kc!==null||Yc!==null)&&(qI(),KI())}}function Rf(t,e){var n=t.stateNode;if(n===null)return null;var r=rm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ae(231,e,typeof n));return n}var W_=!1;if(_o)try{var EA={};Object.defineProperty(EA,"passive",{get:function(){W_=!0}}),window.addEventListener("test",EA,EA),window.removeEventListener("test",EA,EA)}catch{W_=!1}function B6(t,e,n,r,i,s,o,a,l){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(d){this.onError(d)}}var cf=!1,Fp=null,kp=!1,Q_=null,L6={onError:function(t){cf=!0,Fp=t}};function R6(t,e,n,r,i,s,o,a,l){cf=!1,Fp=null,B6.apply(L6,arguments)}function O6(t,e,n,r,i,s,o,a,l){if(R6.apply(this,arguments),cf){if(cf){var f=Fp;cf=!1,Fp=null}else throw Error(Ae(198));kp||(kp=!0,Q_=f)}}function zl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function eB(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rS(t){if(zl(t)!==t)throw Error(Ae(188))}function D6(t){var e=t.alternate;if(!e){if(e=zl(t),e===null)throw Error(Ae(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return rS(i),t;if(s===r)return rS(i),e;s=s.sibling}throw Error(Ae(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Ae(189))}}if(n.alternate!==r)throw Error(Ae(190))}if(n.tag!==3)throw Error(Ae(188));return n.stateNode.current===n?t:e}function tB(t){return t=D6(t),t!==null?nB(t):null}function nB(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=nB(t);if(e!==null)return e;t=t.sibling}return null}var rB=gi.unstable_scheduleCallback,iS=gi.unstable_cancelCallback,F6=gi.unstable_shouldYield,k6=gi.unstable_requestPaint,gn=gi.unstable_now,N6=gi.unstable_getCurrentPriorityLevel,ib=gi.unstable_ImmediatePriority,iB=gi.unstable_UserBlockingPriority,Np=gi.unstable_NormalPriority,U6=gi.unstable_LowPriority,sB=gi.unstable_IdlePriority,Zg=null,zs=null;function G6(t){if(zs&&typeof zs.onCommitFiberRoot=="function")try{zs.onCommitFiberRoot(Zg,t,void 0,(t.current.flags&128)===128)}catch{}}var as=Math.clz32?Math.clz32:j6,z6=Math.log,V6=Math.LN2;function j6(t){return t>>>=0,t===0?32:31-(z6(t)/V6|0)|0}var jd=64,Hd=4194304;function YA(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Up(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=YA(a):(s&=o,s!==0&&(r=YA(s)))}else o=n&~i,o!==0?r=YA(o):s!==0&&(r=YA(s));if(r===0)return 0;if(e!==0&&e!==r&&(e&i)===0&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if((r&4)!==0&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-as(e),i=1<<n,r|=t[n],e&=~i;return r}function H6(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function W6(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-as(s),a=1<<o,l=i[o];l===-1?((a&n)===0||(a&r)!==0)&&(i[o]=H6(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function $_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function oB(){var t=jd;return jd<<=1,(jd&4194240)===0&&(jd=64),t}function Py(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ph(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-as(e),t[e]=n}function Q6(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-as(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function sb(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-as(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ot=0;function aB(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var lB,ob,cB,uB,AB,X_=!1,Wd=[],ua=null,Aa=null,fa=null,Of=new Map,Df=new Map,ta=[],$6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sS(t,e){switch(t){case"focusin":case"focusout":ua=null;break;case"dragenter":case"dragleave":Aa=null;break;case"mouseover":case"mouseout":fa=null;break;case"pointerover":case"pointerout":Of.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Df.delete(e.pointerId)}}function TA(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ih(e),e!==null&&ob(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function X6(t,e,n,r,i){switch(e){case"focusin":return ua=TA(ua,t,e,n,r,i),!0;case"dragenter":return Aa=TA(Aa,t,e,n,r,i),!0;case"mouseover":return fa=TA(fa,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Of.set(s,TA(Of.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Df.set(s,TA(Df.get(s)||null,t,e,n,r,i)),!0}return!1}function fB(t){var e=sl(t.target);if(e!==null){var n=zl(e);if(n!==null){if(e=n.tag,e===13){if(e=eB(n),e!==null){t.blockedOn=e,AB(t.priority,function(){cB(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Z0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=J_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);j_=r,n.target.dispatchEvent(r),j_=null}else return e=Ih(n),e!==null&&ob(e),t.blockedOn=n,!1;e.shift()}return!0}function oS(t,e,n){Z0(t)&&n.delete(e)}function J6(){X_=!1,ua!==null&&Z0(ua)&&(ua=null),Aa!==null&&Z0(Aa)&&(Aa=null),fa!==null&&Z0(fa)&&(fa=null),Of.forEach(oS),Df.forEach(oS)}function SA(t,e){t.blockedOn===e&&(t.blockedOn=null,X_||(X_=!0,gi.unstable_scheduleCallback(gi.unstable_NormalPriority,J6)))}function Ff(t){function e(i){return SA(i,t)}if(0<Wd.length){SA(Wd[0],t);for(var n=1;n<Wd.length;n++){var r=Wd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ua!==null&&SA(ua,t),Aa!==null&&SA(Aa,t),fa!==null&&SA(fa,t),Of.forEach(e),Df.forEach(e),n=0;n<ta.length;n++)r=ta[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ta.length&&(n=ta[0],n.blockedOn===null);)fB(n),n.blockedOn===null&&ta.shift()}var qc=Ro.ReactCurrentBatchConfig,Gp=!0;function K6(t,e,n,r){var i=Ot,s=qc.transition;qc.transition=null;try{Ot=1,ab(t,e,n,r)}finally{Ot=i,qc.transition=s}}function Y6(t,e,n,r){var i=Ot,s=qc.transition;qc.transition=null;try{Ot=4,ab(t,e,n,r)}finally{Ot=i,qc.transition=s}}function ab(t,e,n,r){if(Gp){var i=J_(t,e,n,r);if(i===null)Ny(t,e,r,zp,n),sS(t,r);else if(X6(i,t,e,n,r))r.stopPropagation();else if(sS(t,r),e&4&&-1<$6.indexOf(t)){for(;i!==null;){var s=Ih(i);if(s!==null&&lB(s),s=J_(t,e,n,r),s===null&&Ny(t,e,r,zp,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ny(t,e,r,null,n)}}var zp=null;function J_(t,e,n,r){if(zp=null,t=rb(r),t=sl(t),t!==null)if(e=zl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=eB(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return zp=t,null}function hB(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(N6()){case ib:return 1;case iB:return 4;case Np:case U6:return 16;case sB:return 536870912;default:return 16}default:return 16}}var ia=null,lb=null,ep=null;function dB(){if(ep)return ep;var t,e=lb,n=e.length,r,i="value"in ia?ia.value:ia.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ep=i.slice(t,1<r?1-r:void 0)}function tp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qd(){return!0}function aS(){return!1}function vi(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Qd:aS,this.isPropagationStopped=aS,this}return un(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qd)},persist:function(){},isPersistent:Qd}),e}var Gu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cb=vi(Gu),Mh=un({},Gu,{view:0,detail:0}),q6=vi(Mh),My,Iy,xA,em=un({},Mh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ub,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xA&&(xA&&t.type==="mousemove"?(My=t.screenX-xA.screenX,Iy=t.screenY-xA.screenY):Iy=My=0,xA=t),My)},movementY:function(t){return"movementY"in t?t.movementY:Iy}}),lS=vi(em),Z6=un({},em,{dataTransfer:0}),eU=vi(Z6),tU=un({},Mh,{relatedTarget:0}),By=vi(tU),nU=un({},Gu,{animationName:0,elapsedTime:0,pseudoElement:0}),rU=vi(nU),iU=un({},Gu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sU=vi(iU),oU=un({},Gu,{data:0}),cS=vi(oU),aU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uU(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=cU[t])?!!e[t]:!1}function ub(){return uU}var AU=un({},Mh,{key:function(t){if(t.key){var e=aU[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=tp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lU[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ub,charCode:function(t){return t.type==="keypress"?tp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?tp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fU=vi(AU),hU=un({},em,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uS=vi(hU),dU=un({},Mh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ub}),pU=vi(dU),gU=un({},Gu,{propertyName:0,elapsedTime:0,pseudoElement:0}),mU=vi(gU),yU=un({},em,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vU=vi(yU),_U=[9,13,27,32],Ab=_o&&"CompositionEvent"in window,uf=null;_o&&"documentMode"in document&&(uf=document.documentMode);var bU=_o&&"TextEvent"in window&&!uf,pB=_o&&(!Ab||uf&&8<uf&&11>=uf),AS=String.fromCharCode(32),fS=!1;function gB(t,e){switch(t){case"keyup":return _U.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mB(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Cc=!1;function wU(t,e){switch(t){case"compositionend":return mB(e);case"keypress":return e.which!==32?null:(fS=!0,AS);case"textInput":return t=e.data,t===AS&&fS?null:t;default:return null}}function EU(t,e){if(Cc)return t==="compositionend"||!Ab&&gB(t,e)?(t=dB(),ep=lb=ia=null,Cc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return pB&&e.locale!=="ko"?null:e.data;default:return null}}var TU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!TU[t.type]:e==="textarea"}function yB(t,e,n,r){JI(r),e=Vp(e,"onChange"),0<e.length&&(n=new cb("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Af=null,kf=null;function SU(t){MB(t,0)}function tm(t){var e=Ic(t);if(VI(e))return t}function xU(t,e){if(t==="change")return e}var vB=!1;if(_o){var Ly;if(_o){var Ry="oninput"in document;if(!Ry){var dS=document.createElement("div");dS.setAttribute("oninput","return;"),Ry=typeof dS.oninput=="function"}Ly=Ry}else Ly=!1;vB=Ly&&(!document.documentMode||9<document.documentMode)}function pS(){Af&&(Af.detachEvent("onpropertychange",_B),kf=Af=null)}function _B(t){if(t.propertyName==="value"&&tm(kf)){var e=[];yB(e,kf,t,rb(t)),ZI(SU,e)}}function CU(t,e,n){t==="focusin"?(pS(),Af=e,kf=n,Af.attachEvent("onpropertychange",_B)):t==="focusout"&&pS()}function PU(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tm(kf)}function MU(t,e){if(t==="click")return tm(e)}function IU(t,e){if(t==="input"||t==="change")return tm(e)}function BU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ds=typeof Object.is=="function"?Object.is:BU;function Nf(t,e){if(ds(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!B_.call(e,i)||!ds(t[i],e[i]))return!1}return!0}function gS(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mS(t,e){var n=gS(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gS(n)}}function bB(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?bB(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function wB(){for(var t=window,e=Dp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Dp(t.document)}return e}function fb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function LU(t){var e=wB(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&bB(n.ownerDocument.documentElement,n)){if(r!==null&&fb(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=mS(n,s);var o=mS(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var RU=_o&&"documentMode"in document&&11>=document.documentMode,Pc=null,K_=null,ff=null,Y_=!1;function yS(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Y_||Pc==null||Pc!==Dp(r)||(r=Pc,"selectionStart"in r&&fb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ff&&Nf(ff,r)||(ff=r,r=Vp(K_,"onSelect"),0<r.length&&(e=new cb("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Pc)))}function $d(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Mc={animationend:$d("Animation","AnimationEnd"),animationiteration:$d("Animation","AnimationIteration"),animationstart:$d("Animation","AnimationStart"),transitionend:$d("Transition","TransitionEnd")},Oy={},EB={};_o&&(EB=document.createElement("div").style,"AnimationEvent"in window||(delete Mc.animationend.animation,delete Mc.animationiteration.animation,delete Mc.animationstart.animation),"TransitionEvent"in window||delete Mc.transitionend.transition);function nm(t){if(Oy[t])return Oy[t];if(!Mc[t])return t;var e=Mc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in EB)return Oy[t]=e[n];return t}var TB=nm("animationend"),SB=nm("animationiteration"),xB=nm("animationstart"),CB=nm("transitionend"),PB=new Map,vS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ba(t,e){PB.set(t,e),Gl(e,[t])}for(var Dy=0;Dy<vS.length;Dy++){var Fy=vS[Dy],OU=Fy.toLowerCase(),DU=Fy[0].toUpperCase()+Fy.slice(1);Ba(OU,"on"+DU)}Ba(TB,"onAnimationEnd");Ba(SB,"onAnimationIteration");Ba(xB,"onAnimationStart");Ba("dblclick","onDoubleClick");Ba("focusin","onFocus");Ba("focusout","onBlur");Ba(CB,"onTransitionEnd");uu("onMouseEnter",["mouseout","mouseover"]);uu("onMouseLeave",["mouseout","mouseover"]);uu("onPointerEnter",["pointerout","pointerover"]);uu("onPointerLeave",["pointerout","pointerover"]);Gl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qA="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FU=new Set("cancel close invalid load scroll toggle".split(" ").concat(qA));function _S(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,O6(r,e,void 0,t),t.currentTarget=null}function MB(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,f=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;_S(i,a,f),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,f=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;_S(i,a,f),s=l}}}if(kp)throw t=Q_,kp=!1,Q_=null,t}function Jt(t,e){var n=e[n1];n===void 0&&(n=e[n1]=new Set);var r=t+"__bubble";n.has(r)||(IB(e,t,2,!1),n.add(r))}function ky(t,e,n){var r=0;e&&(r|=4),IB(n,t,r,e)}var Xd="_reactListening"+Math.random().toString(36).slice(2);function Uf(t){if(!t[Xd]){t[Xd]=!0,kI.forEach(function(n){n!=="selectionchange"&&(FU.has(n)||ky(n,!1,t),ky(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Xd]||(e[Xd]=!0,ky("selectionchange",!1,e))}}function IB(t,e,n,r){switch(hB(e)){case 1:var i=K6;break;case 4:i=Y6;break;default:i=ab}n=i.bind(null,e,n,t),i=void 0,!W_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ny(t,e,n,r,i){var s=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=sl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}ZI(function(){var f=s,d=rb(n),g=[];e:{var y=PB.get(t);if(y!==void 0){var b=cb,E=t;switch(t){case"keypress":if(tp(n)===0)break e;case"keydown":case"keyup":b=fU;break;case"focusin":E="focus",b=By;break;case"focusout":E="blur",b=By;break;case"beforeblur":case"afterblur":b=By;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=lS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=eU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=pU;break;case TB:case SB:case xB:b=rU;break;case CB:b=mU;break;case"scroll":b=q6;break;case"wheel":b=vU;break;case"copy":case"cut":case"paste":b=sU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=uS}var S=(e&4)!==0,M=!S&&t==="scroll",C=S?y!==null?y+"Capture":null:y;S=[];for(var P=f,I;P!==null;){I=P;var L=I.stateNode;if(I.tag===5&&L!==null&&(I=L,C!==null&&(L=Rf(P,C),L!=null&&S.push(Gf(P,L,I)))),M)break;P=P.return}0<S.length&&(y=new b(y,E,null,n,d),g.push({event:y,listeners:S}))}}if((e&7)===0){e:{if(y=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",y&&n!==j_&&(E=n.relatedTarget||n.fromElement)&&(sl(E)||E[bo]))break e;if((b||y)&&(y=d.window===d?d:(y=d.ownerDocument)?y.defaultView||y.parentWindow:window,b?(E=n.relatedTarget||n.toElement,b=f,E=E?sl(E):null,E!==null&&(M=zl(E),E!==M||E.tag!==5&&E.tag!==6)&&(E=null)):(b=null,E=f),b!==E)){if(S=lS,L="onMouseLeave",C="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(S=uS,L="onPointerLeave",C="onPointerEnter",P="pointer"),M=b==null?y:Ic(b),I=E==null?y:Ic(E),y=new S(L,P+"leave",b,n,d),y.target=M,y.relatedTarget=I,L=null,sl(d)===f&&(S=new S(C,P+"enter",E,n,d),S.target=I,S.relatedTarget=M,L=S),M=L,b&&E)t:{for(S=b,C=E,P=0,I=S;I;I=ic(I))P++;for(I=0,L=C;L;L=ic(L))I++;for(;0<P-I;)S=ic(S),P--;for(;0<I-P;)C=ic(C),I--;for(;P--;){if(S===C||C!==null&&S===C.alternate)break t;S=ic(S),C=ic(C)}S=null}else S=null;b!==null&&bS(g,y,b,S,!1),E!==null&&M!==null&&bS(g,M,E,S,!0)}}e:{if(y=f?Ic(f):window,b=y.nodeName&&y.nodeName.toLowerCase(),b==="select"||b==="input"&&y.type==="file")var F=xU;else if(hS(y))if(vB)F=IU;else{F=PU;var z=CU}else(b=y.nodeName)&&b.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(F=MU);if(F&&(F=F(t,f))){yB(g,F,n,d);break e}z&&z(t,y,f),t==="focusout"&&(z=y._wrapperState)&&z.controlled&&y.type==="number"&&N_(y,"number",y.value)}switch(z=f?Ic(f):window,t){case"focusin":(hS(z)||z.contentEditable==="true")&&(Pc=z,K_=f,ff=null);break;case"focusout":ff=K_=Pc=null;break;case"mousedown":Y_=!0;break;case"contextmenu":case"mouseup":case"dragend":Y_=!1,yS(g,n,d);break;case"selectionchange":if(RU)break;case"keydown":case"keyup":yS(g,n,d)}var X;if(Ab)e:{switch(t){case"compositionstart":var Y="onCompositionStart";break e;case"compositionend":Y="onCompositionEnd";break e;case"compositionupdate":Y="onCompositionUpdate";break e}Y=void 0}else Cc?gB(t,n)&&(Y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(Y="onCompositionStart");Y&&(pB&&n.locale!=="ko"&&(Cc||Y!=="onCompositionStart"?Y==="onCompositionEnd"&&Cc&&(X=dB()):(ia=d,lb="value"in ia?ia.value:ia.textContent,Cc=!0)),z=Vp(f,Y),0<z.length&&(Y=new cS(Y,t,null,n,d),g.push({event:Y,listeners:z}),X?Y.data=X:(X=mB(n),X!==null&&(Y.data=X)))),(X=bU?wU(t,n):EU(t,n))&&(f=Vp(f,"onBeforeInput"),0<f.length&&(d=new cS("onBeforeInput","beforeinput",null,n,d),g.push({event:d,listeners:f}),d.data=X))}MB(g,e)})}function Gf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vp(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Rf(t,n),s!=null&&r.unshift(Gf(t,s,i)),s=Rf(t,e),s!=null&&r.push(Gf(t,s,i))),t=t.return}return r}function ic(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function bS(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,f=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&f!==null&&(a=f,i?(l=Rf(n,s),l!=null&&o.unshift(Gf(n,l,a))):i||(l=Rf(n,s),l!=null&&o.push(Gf(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var kU=/\r\n?/g,NU=/\u0000|\uFFFD/g;function wS(t){return(typeof t=="string"?t:""+t).replace(kU,`
`).replace(NU,"")}function Jd(t,e,n){if(e=wS(e),wS(t)!==e&&n)throw Error(Ae(425))}function jp(){}var q_=null,Z_=null;function e1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var t1=typeof setTimeout=="function"?setTimeout:void 0,UU=typeof clearTimeout=="function"?clearTimeout:void 0,ES=typeof Promise=="function"?Promise:void 0,GU=typeof queueMicrotask=="function"?queueMicrotask:typeof ES<"u"?function(t){return ES.resolve(null).then(t).catch(zU)}:t1;function zU(t){setTimeout(function(){throw t})}function Uy(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ff(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ff(e)}function ha(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function TS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zu=Math.random().toString(36).slice(2),Ds="__reactFiber$"+zu,zf="__reactProps$"+zu,bo="__reactContainer$"+zu,n1="__reactEvents$"+zu,VU="__reactListeners$"+zu,jU="__reactHandles$"+zu;function sl(t){var e=t[Ds];if(e)return e;for(var n=t.parentNode;n;){if(e=n[bo]||n[Ds]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=TS(t);t!==null;){if(n=t[Ds])return n;t=TS(t)}return e}t=n,n=t.parentNode}return null}function Ih(t){return t=t[Ds]||t[bo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ic(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ae(33))}function rm(t){return t[zf]||null}var r1=[],Bc=-1;function La(t){return{current:t}}function Kt(t){0>Bc||(t.current=r1[Bc],r1[Bc]=null,Bc--)}function Ht(t,e){Bc++,r1[Bc]=t.current,t.current=e}var wa={},_r=La(wa),Wr=La(!1),vl=wa;function Au(t,e){var n=t.type.contextTypes;if(!n)return wa;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Qr(t){return t=t.childContextTypes,t!=null}function Hp(){Kt(Wr),Kt(_r)}function SS(t,e,n){if(_r.current!==wa)throw Error(Ae(168));Ht(_r,e),Ht(Wr,n)}function BB(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ae(108,C6(t)||"Unknown",i));return un({},n,r)}function Wp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wa,vl=_r.current,Ht(_r,t),Ht(Wr,Wr.current),!0}function xS(t,e,n){var r=t.stateNode;if(!r)throw Error(Ae(169));n?(t=BB(t,e,vl),r.__reactInternalMemoizedMergedChildContext=t,Kt(Wr),Kt(_r),Ht(_r,t)):Kt(Wr),Ht(Wr,n)}var ao=null,im=!1,Gy=!1;function LB(t){ao===null?ao=[t]:ao.push(t)}function HU(t){im=!0,LB(t)}function Ra(){if(!Gy&&ao!==null){Gy=!0;var t=0,e=Ot;try{var n=ao;for(Ot=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ao=null,im=!1}catch(i){throw ao!==null&&(ao=ao.slice(t+1)),rB(ib,Ra),i}finally{Ot=e,Gy=!1}}return null}var Lc=[],Rc=0,Qp=null,$p=0,Si=[],xi=0,_l=null,co=1,uo="";function el(t,e){Lc[Rc++]=$p,Lc[Rc++]=Qp,Qp=t,$p=e}function RB(t,e,n){Si[xi++]=co,Si[xi++]=uo,Si[xi++]=_l,_l=t;var r=co;t=uo;var i=32-as(r)-1;r&=~(1<<i),n+=1;var s=32-as(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,co=1<<32-as(e)+i|n<<i|r,uo=s+t}else co=1<<s|n<<i|r,uo=t}function hb(t){t.return!==null&&(el(t,1),RB(t,1,0))}function db(t){for(;t===Qp;)Qp=Lc[--Rc],Lc[Rc]=null,$p=Lc[--Rc],Lc[Rc]=null;for(;t===_l;)_l=Si[--xi],Si[xi]=null,uo=Si[--xi],Si[xi]=null,co=Si[--xi],Si[xi]=null}var fi=null,ci=null,Zt=!1,ts=null;function OB(t,e){var n=Ii(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function CS(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fi=t,ci=ha(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fi=t,ci=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_l!==null?{id:co,overflow:uo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ii(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,fi=t,ci=null,!0):!1;default:return!1}}function i1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function s1(t){if(Zt){var e=ci;if(e){var n=e;if(!CS(t,e)){if(i1(t))throw Error(Ae(418));e=ha(n.nextSibling);var r=fi;e&&CS(t,e)?OB(r,n):(t.flags=t.flags&-4097|2,Zt=!1,fi=t)}}else{if(i1(t))throw Error(Ae(418));t.flags=t.flags&-4097|2,Zt=!1,fi=t}}}function PS(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fi=t}function Kd(t){if(t!==fi)return!1;if(!Zt)return PS(t),Zt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!e1(t.type,t.memoizedProps)),e&&(e=ci)){if(i1(t))throw DB(),Error(Ae(418));for(;e;)OB(t,e),e=ha(e.nextSibling)}if(PS(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ci=ha(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ci=null}}else ci=fi?ha(t.stateNode.nextSibling):null;return!0}function DB(){for(var t=ci;t;)t=ha(t.nextSibling)}function fu(){ci=fi=null,Zt=!1}function pb(t){ts===null?ts=[t]:ts.push(t)}var WU=Ro.ReactCurrentBatchConfig;function Zi(t,e){if(t&&t.defaultProps){e=un({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Xp=La(null),Jp=null,Oc=null,gb=null;function mb(){gb=Oc=Jp=null}function yb(t){var e=Xp.current;Kt(Xp),t._currentValue=e}function o1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Zc(t,e){Jp=t,gb=Oc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(Hr=!0),t.firstContext=null)}function Fi(t){var e=t._currentValue;if(gb!==t)if(t={context:t,memoizedValue:e,next:null},Oc===null){if(Jp===null)throw Error(Ae(308));Oc=t,Jp.dependencies={lanes:0,firstContext:t}}else Oc=Oc.next=t;return e}var ol=null;function vb(t){ol===null?ol=[t]:ol.push(t)}function FB(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,vb(e)):(n.next=i.next,i.next=n),e.interleaved=n,wo(t,r)}function wo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zo=!1;function _b(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kB(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function fo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function da(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(bt&2)!==0){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,wo(t,n)}return i=r.interleaved,i===null?(e.next=e,vb(r)):(e.next=i.next,i.next=e),r.interleaved=e,wo(t,n)}function np(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sb(t,n)}}function MS(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Kp(t,e,n,r){var i=t.updateQueue;Zo=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,f=l.next;l.next=null,o===null?s=f:o.next=f,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=f:a.next=f,d.lastBaseUpdate=l))}if(s!==null){var g=i.baseState;o=0,d=f=l=null,a=s;do{var y=a.lane,b=a.eventTime;if((r&y)===y){d!==null&&(d=d.next={eventTime:b,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,S=a;switch(y=e,b=n,S.tag){case 1:if(E=S.payload,typeof E=="function"){g=E.call(b,g,y);break e}g=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=S.payload,y=typeof E=="function"?E.call(b,g,y):E,y==null)break e;g=un({},g,y);break e;case 2:Zo=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[a]:y.push(a))}else b={eventTime:b,lane:y,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(f=d=b,l=g):d=d.next=b,o|=y;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;y=a,a=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(1);if(d===null&&(l=g),i.baseState=l,i.firstBaseUpdate=f,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);wl|=o,t.lanes=o,t.memoizedState=g}}function IS(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ae(191,i));i.call(r)}}}var NB=new FI.Component().refs;function a1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:un({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sm={isMounted:function(t){return(t=t._reactInternals)?zl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ir(),i=ga(t),s=fo(r,i);s.payload=e,n!=null&&(s.callback=n),e=da(t,s,i),e!==null&&(ls(e,t,i,r),np(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ir(),i=ga(t),s=fo(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=da(t,s,i),e!==null&&(ls(e,t,i,r),np(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ir(),r=ga(t),i=fo(n,r);i.tag=2,e!=null&&(i.callback=e),e=da(t,i,r),e!==null&&(ls(e,t,r,n),np(e,t,r))}};function BS(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Nf(n,r)||!Nf(i,s):!0}function UB(t,e,n){var r=!1,i=wa,s=e.contextType;return typeof s=="object"&&s!==null?s=Fi(s):(i=Qr(e)?vl:_r.current,r=e.contextTypes,s=(r=r!=null)?Au(t,i):wa),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function LS(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&sm.enqueueReplaceState(e,e.state,null)}function l1(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=NB,_b(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Fi(s):(s=Qr(e)?vl:_r.current,i.context=Au(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(a1(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&sm.enqueueReplaceState(i,i.state,null),Kp(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function CA(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ae(309));var r=n.stateNode}if(!r)throw Error(Ae(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===NB&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ae(284));if(!n._owner)throw Error(Ae(290,t))}return t}function Yd(t,e){throw t=Object.prototype.toString.call(e),Error(Ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function RS(t){var e=t._init;return e(t._payload)}function GB(t){function e(C,P){if(t){var I=C.deletions;I===null?(C.deletions=[P],C.flags|=16):I.push(P)}}function n(C,P){if(!t)return null;for(;P!==null;)e(C,P),P=P.sibling;return null}function r(C,P){for(C=new Map;P!==null;)P.key!==null?C.set(P.key,P):C.set(P.index,P),P=P.sibling;return C}function i(C,P){return C=ma(C,P),C.index=0,C.sibling=null,C}function s(C,P,I){return C.index=I,t?(I=C.alternate,I!==null?(I=I.index,I<P?(C.flags|=2,P):I):(C.flags|=2,P)):(C.flags|=1048576,P)}function o(C){return t&&C.alternate===null&&(C.flags|=2),C}function a(C,P,I,L){return P===null||P.tag!==6?(P=$y(I,C.mode,L),P.return=C,P):(P=i(P,I),P.return=C,P)}function l(C,P,I,L){var F=I.type;return F===xc?d(C,P,I.props.children,L,I.key):P!==null&&(P.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===qo&&RS(F)===P.type)?(L=i(P,I.props),L.ref=CA(C,P,I),L.return=C,L):(L=lp(I.type,I.key,I.props,null,C.mode,L),L.ref=CA(C,P,I),L.return=C,L)}function f(C,P,I,L){return P===null||P.tag!==4||P.stateNode.containerInfo!==I.containerInfo||P.stateNode.implementation!==I.implementation?(P=Xy(I,C.mode,L),P.return=C,P):(P=i(P,I.children||[]),P.return=C,P)}function d(C,P,I,L,F){return P===null||P.tag!==7?(P=Al(I,C.mode,L,F),P.return=C,P):(P=i(P,I),P.return=C,P)}function g(C,P,I){if(typeof P=="string"&&P!==""||typeof P=="number")return P=$y(""+P,C.mode,I),P.return=C,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Gd:return I=lp(P.type,P.key,P.props,null,C.mode,I),I.ref=CA(C,null,P),I.return=C,I;case Sc:return P=Xy(P,C.mode,I),P.return=C,P;case qo:var L=P._init;return g(C,L(P._payload),I)}if(KA(P)||wA(P))return P=Al(P,C.mode,I,null),P.return=C,P;Yd(C,P)}return null}function y(C,P,I,L){var F=P!==null?P.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return F!==null?null:a(C,P,""+I,L);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Gd:return I.key===F?l(C,P,I,L):null;case Sc:return I.key===F?f(C,P,I,L):null;case qo:return F=I._init,y(C,P,F(I._payload),L)}if(KA(I)||wA(I))return F!==null?null:d(C,P,I,L,null);Yd(C,I)}return null}function b(C,P,I,L,F){if(typeof L=="string"&&L!==""||typeof L=="number")return C=C.get(I)||null,a(P,C,""+L,F);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case Gd:return C=C.get(L.key===null?I:L.key)||null,l(P,C,L,F);case Sc:return C=C.get(L.key===null?I:L.key)||null,f(P,C,L,F);case qo:var z=L._init;return b(C,P,I,z(L._payload),F)}if(KA(L)||wA(L))return C=C.get(I)||null,d(P,C,L,F,null);Yd(P,L)}return null}function E(C,P,I,L){for(var F=null,z=null,X=P,Y=P=0,Q=null;X!==null&&Y<I.length;Y++){X.index>Y?(Q=X,X=null):Q=X.sibling;var N=y(C,X,I[Y],L);if(N===null){X===null&&(X=Q);break}t&&X&&N.alternate===null&&e(C,X),P=s(N,P,Y),z===null?F=N:z.sibling=N,z=N,X=Q}if(Y===I.length)return n(C,X),Zt&&el(C,Y),F;if(X===null){for(;Y<I.length;Y++)X=g(C,I[Y],L),X!==null&&(P=s(X,P,Y),z===null?F=X:z.sibling=X,z=X);return Zt&&el(C,Y),F}for(X=r(C,X);Y<I.length;Y++)Q=b(X,C,Y,I[Y],L),Q!==null&&(t&&Q.alternate!==null&&X.delete(Q.key===null?Y:Q.key),P=s(Q,P,Y),z===null?F=Q:z.sibling=Q,z=Q);return t&&X.forEach(function(k){return e(C,k)}),Zt&&el(C,Y),F}function S(C,P,I,L){var F=wA(I);if(typeof F!="function")throw Error(Ae(150));if(I=F.call(I),I==null)throw Error(Ae(151));for(var z=F=null,X=P,Y=P=0,Q=null,N=I.next();X!==null&&!N.done;Y++,N=I.next()){X.index>Y?(Q=X,X=null):Q=X.sibling;var k=y(C,X,N.value,L);if(k===null){X===null&&(X=Q);break}t&&X&&k.alternate===null&&e(C,X),P=s(k,P,Y),z===null?F=k:z.sibling=k,z=k,X=Q}if(N.done)return n(C,X),Zt&&el(C,Y),F;if(X===null){for(;!N.done;Y++,N=I.next())N=g(C,N.value,L),N!==null&&(P=s(N,P,Y),z===null?F=N:z.sibling=N,z=N);return Zt&&el(C,Y),F}for(X=r(C,X);!N.done;Y++,N=I.next())N=b(X,C,Y,N.value,L),N!==null&&(t&&N.alternate!==null&&X.delete(N.key===null?Y:N.key),P=s(N,P,Y),z===null?F=N:z.sibling=N,z=N);return t&&X.forEach(function(te){return e(C,te)}),Zt&&el(C,Y),F}function M(C,P,I,L){if(typeof I=="object"&&I!==null&&I.type===xc&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Gd:e:{for(var F=I.key,z=P;z!==null;){if(z.key===F){if(F=I.type,F===xc){if(z.tag===7){n(C,z.sibling),P=i(z,I.props.children),P.return=C,C=P;break e}}else if(z.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===qo&&RS(F)===z.type){n(C,z.sibling),P=i(z,I.props),P.ref=CA(C,z,I),P.return=C,C=P;break e}n(C,z);break}else e(C,z);z=z.sibling}I.type===xc?(P=Al(I.props.children,C.mode,L,I.key),P.return=C,C=P):(L=lp(I.type,I.key,I.props,null,C.mode,L),L.ref=CA(C,P,I),L.return=C,C=L)}return o(C);case Sc:e:{for(z=I.key;P!==null;){if(P.key===z)if(P.tag===4&&P.stateNode.containerInfo===I.containerInfo&&P.stateNode.implementation===I.implementation){n(C,P.sibling),P=i(P,I.children||[]),P.return=C,C=P;break e}else{n(C,P);break}else e(C,P);P=P.sibling}P=Xy(I,C.mode,L),P.return=C,C=P}return o(C);case qo:return z=I._init,M(C,P,z(I._payload),L)}if(KA(I))return E(C,P,I,L);if(wA(I))return S(C,P,I,L);Yd(C,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,P!==null&&P.tag===6?(n(C,P.sibling),P=i(P,I),P.return=C,C=P):(n(C,P),P=$y(I,C.mode,L),P.return=C,C=P),o(C)):n(C,P)}return M}var hu=GB(!0),zB=GB(!1),Bh={},Vs=La(Bh),Vf=La(Bh),jf=La(Bh);function al(t){if(t===Bh)throw Error(Ae(174));return t}function bb(t,e){switch(Ht(jf,e),Ht(Vf,t),Ht(Vs,Bh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:G_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=G_(e,t)}Kt(Vs),Ht(Vs,e)}function du(){Kt(Vs),Kt(Vf),Kt(jf)}function VB(t){al(jf.current);var e=al(Vs.current),n=G_(e,t.type);e!==n&&(Ht(Vf,t),Ht(Vs,n))}function wb(t){Vf.current===t&&(Kt(Vs),Kt(Vf))}var on=La(0);function Yp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zy=[];function Eb(){for(var t=0;t<zy.length;t++)zy[t]._workInProgressVersionPrimary=null;zy.length=0}var rp=Ro.ReactCurrentDispatcher,Vy=Ro.ReactCurrentBatchConfig,bl=0,cn=null,Ln=null,Gn=null,qp=!1,hf=!1,Hf=0,QU=0;function ar(){throw Error(Ae(321))}function Tb(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ds(t[n],e[n]))return!1;return!0}function Sb(t,e,n,r,i,s){if(bl=s,cn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rp.current=t===null||t.memoizedState===null?KU:YU,t=n(r,i),hf){s=0;do{if(hf=!1,Hf=0,25<=s)throw Error(Ae(301));s+=1,Gn=Ln=null,e.updateQueue=null,rp.current=qU,t=n(r,i)}while(hf)}if(rp.current=Zp,e=Ln!==null&&Ln.next!==null,bl=0,Gn=Ln=cn=null,qp=!1,e)throw Error(Ae(300));return t}function xb(){var t=Hf!==0;return Hf=0,t}function Bs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gn===null?cn.memoizedState=Gn=t:Gn=Gn.next=t,Gn}function ki(){if(Ln===null){var t=cn.alternate;t=t!==null?t.memoizedState:null}else t=Ln.next;var e=Gn===null?cn.memoizedState:Gn.next;if(e!==null)Gn=e,Ln=t;else{if(t===null)throw Error(Ae(310));Ln=t,t={memoizedState:Ln.memoizedState,baseState:Ln.baseState,baseQueue:Ln.baseQueue,queue:Ln.queue,next:null},Gn===null?cn.memoizedState=Gn=t:Gn=Gn.next=t}return Gn}function Wf(t,e){return typeof e=="function"?e(t):e}function jy(t){var e=ki(),n=e.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=t;var r=Ln,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,f=s;do{var d=f.lane;if((bl&d)===d)l!==null&&(l=l.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:t(r,f.action);else{var g={lane:d,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};l===null?(a=l=g,o=r):l=l.next=g,cn.lanes|=d,wl|=d}f=f.next}while(f!==null&&f!==s);l===null?o=r:l.next=a,ds(r,e.memoizedState)||(Hr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,cn.lanes|=s,wl|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Hy(t){var e=ki(),n=e.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ds(s,e.memoizedState)||(Hr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function jB(){}function HB(t,e){var n=cn,r=ki(),i=e(),s=!ds(r.memoizedState,i);if(s&&(r.memoizedState=i,Hr=!0),r=r.queue,Cb($B.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Gn!==null&&Gn.memoizedState.tag&1){if(n.flags|=2048,Qf(9,QB.bind(null,n,r,i,e),void 0,null),Hn===null)throw Error(Ae(349));(bl&30)!==0||WB(n,e,i)}return i}function WB(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=cn.updateQueue,e===null?(e={lastEffect:null,stores:null},cn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function QB(t,e,n,r){e.value=n,e.getSnapshot=r,XB(e)&&JB(t)}function $B(t,e,n){return n(function(){XB(e)&&JB(t)})}function XB(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ds(t,n)}catch{return!0}}function JB(t){var e=wo(t,1);e!==null&&ls(e,t,1,-1)}function OS(t){var e=Bs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wf,lastRenderedState:t},e.queue=t,t=t.dispatch=JU.bind(null,cn,t),[e.memoizedState,t]}function Qf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=cn.updateQueue,e===null?(e={lastEffect:null,stores:null},cn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function KB(){return ki().memoizedState}function ip(t,e,n,r){var i=Bs();cn.flags|=t,i.memoizedState=Qf(1|e,n,void 0,r===void 0?null:r)}function om(t,e,n,r){var i=ki();r=r===void 0?null:r;var s=void 0;if(Ln!==null){var o=Ln.memoizedState;if(s=o.destroy,r!==null&&Tb(r,o.deps)){i.memoizedState=Qf(e,n,s,r);return}}cn.flags|=t,i.memoizedState=Qf(1|e,n,s,r)}function DS(t,e){return ip(8390656,8,t,e)}function Cb(t,e){return om(2048,8,t,e)}function YB(t,e){return om(4,2,t,e)}function qB(t,e){return om(4,4,t,e)}function ZB(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function eL(t,e,n){return n=n!=null?n.concat([t]):null,om(4,4,ZB.bind(null,e,t),n)}function Pb(){}function tL(t,e){var n=ki();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tb(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function nL(t,e){var n=ki();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tb(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function rL(t,e,n){return(bl&21)===0?(t.baseState&&(t.baseState=!1,Hr=!0),t.memoizedState=n):(ds(n,e)||(n=oB(),cn.lanes|=n,wl|=n,t.baseState=!0),e)}function $U(t,e){var n=Ot;Ot=n!==0&&4>n?n:4,t(!0);var r=Vy.transition;Vy.transition={};try{t(!1),e()}finally{Ot=n,Vy.transition=r}}function iL(){return ki().memoizedState}function XU(t,e,n){var r=ga(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},sL(t))oL(e,n);else if(n=FB(t,e,n,r),n!==null){var i=Ir();ls(n,t,r,i),aL(n,e,r)}}function JU(t,e,n){var r=ga(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(sL(t))oL(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ds(a,o)){var l=e.interleaved;l===null?(i.next=i,vb(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=FB(t,e,i,r),n!==null&&(i=Ir(),ls(n,t,r,i),aL(n,e,r))}}function sL(t){var e=t.alternate;return t===cn||e!==null&&e===cn}function oL(t,e){hf=qp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function aL(t,e,n){if((n&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sb(t,n)}}var Zp={readContext:Fi,useCallback:ar,useContext:ar,useEffect:ar,useImperativeHandle:ar,useInsertionEffect:ar,useLayoutEffect:ar,useMemo:ar,useReducer:ar,useRef:ar,useState:ar,useDebugValue:ar,useDeferredValue:ar,useTransition:ar,useMutableSource:ar,useSyncExternalStore:ar,useId:ar,unstable_isNewReconciler:!1},KU={readContext:Fi,useCallback:function(t,e){return Bs().memoizedState=[t,e===void 0?null:e],t},useContext:Fi,useEffect:DS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ip(4194308,4,ZB.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ip(4194308,4,t,e)},useInsertionEffect:function(t,e){return ip(4,2,t,e)},useMemo:function(t,e){var n=Bs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Bs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=XU.bind(null,cn,t),[r.memoizedState,t]},useRef:function(t){var e=Bs();return t={current:t},e.memoizedState=t},useState:OS,useDebugValue:Pb,useDeferredValue:function(t){return Bs().memoizedState=t},useTransition:function(){var t=OS(!1),e=t[0];return t=$U.bind(null,t[1]),Bs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=cn,i=Bs();if(Zt){if(n===void 0)throw Error(Ae(407));n=n()}else{if(n=e(),Hn===null)throw Error(Ae(349));(bl&30)!==0||WB(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,DS($B.bind(null,r,s,t),[t]),r.flags|=2048,Qf(9,QB.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Bs(),e=Hn.identifierPrefix;if(Zt){var n=uo,r=co;n=(r&~(1<<32-as(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Hf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=QU++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},YU={readContext:Fi,useCallback:tL,useContext:Fi,useEffect:Cb,useImperativeHandle:eL,useInsertionEffect:YB,useLayoutEffect:qB,useMemo:nL,useReducer:jy,useRef:KB,useState:function(){return jy(Wf)},useDebugValue:Pb,useDeferredValue:function(t){var e=ki();return rL(e,Ln.memoizedState,t)},useTransition:function(){var t=jy(Wf)[0],e=ki().memoizedState;return[t,e]},useMutableSource:jB,useSyncExternalStore:HB,useId:iL,unstable_isNewReconciler:!1},qU={readContext:Fi,useCallback:tL,useContext:Fi,useEffect:Cb,useImperativeHandle:eL,useInsertionEffect:YB,useLayoutEffect:qB,useMemo:nL,useReducer:Hy,useRef:KB,useState:function(){return Hy(Wf)},useDebugValue:Pb,useDeferredValue:function(t){var e=ki();return Ln===null?e.memoizedState=t:rL(e,Ln.memoizedState,t)},useTransition:function(){var t=Hy(Wf)[0],e=ki().memoizedState;return[t,e]},useMutableSource:jB,useSyncExternalStore:HB,useId:iL,unstable_isNewReconciler:!1};function pu(t,e){try{var n="",r=e;do n+=x6(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Wy(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function c1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ZU=typeof WeakMap=="function"?WeakMap:Map;function lL(t,e,n){n=fo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){tg||(tg=!0,v1=r),c1(t,e)},n}function cL(t,e,n){n=fo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){c1(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){c1(t,e),typeof r!="function"&&(pa===null?pa=new Set([this]):pa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function FS(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ZU;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=h5.bind(null,t,e,n),e.then(t,t))}function kS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function NS(t,e,n,r,i){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=fo(-1,1),e.tag=2,da(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var e5=Ro.ReactCurrentOwner,Hr=!1;function xr(t,e,n,r){e.child=t===null?zB(e,null,n,r):hu(e,t.child,n,r)}function US(t,e,n,r,i){n=n.render;var s=e.ref;return Zc(e,i),r=Sb(t,e,n,r,s,i),n=xb(),t!==null&&!Hr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Eo(t,e,i)):(Zt&&n&&hb(e),e.flags|=1,xr(t,e,r,i),e.child)}function GS(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Fb(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,uL(t,e,s,r,i)):(t=lp(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,(t.lanes&i)===0){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Nf,n(o,r)&&t.ref===e.ref)return Eo(t,e,i)}return e.flags|=1,t=ma(s,r),t.ref=e.ref,t.return=e,e.child=t}function uL(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Nf(s,r)&&t.ref===e.ref)if(Hr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)(t.flags&131072)!==0&&(Hr=!0);else return e.lanes=t.lanes,Eo(t,e,i)}return u1(t,e,n,r,i)}function AL(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ht(Fc,ai),ai|=n;else{if((n&1073741824)===0)return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ht(Fc,ai),ai|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ht(Fc,ai),ai|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ht(Fc,ai),ai|=r;return xr(t,e,i,n),e.child}function fL(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function u1(t,e,n,r,i){var s=Qr(n)?vl:_r.current;return s=Au(e,s),Zc(e,i),n=Sb(t,e,n,r,s,i),r=xb(),t!==null&&!Hr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Eo(t,e,i)):(Zt&&r&&hb(e),e.flags|=1,xr(t,e,n,i),e.child)}function zS(t,e,n,r,i){if(Qr(n)){var s=!0;Wp(e)}else s=!1;if(Zc(e,i),e.stateNode===null)sp(t,e),UB(e,n,r),l1(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,f=n.contextType;typeof f=="object"&&f!==null?f=Fi(f):(f=Qr(n)?vl:_r.current,f=Au(e,f));var d=n.getDerivedStateFromProps,g=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==f)&&LS(e,o,r,f),Zo=!1;var y=e.memoizedState;o.state=y,Kp(e,r,o,i),l=e.memoizedState,a!==r||y!==l||Wr.current||Zo?(typeof d=="function"&&(a1(e,n,d,r),l=e.memoizedState),(a=Zo||BS(e,n,a,r,y,l,f))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=f,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,kB(t,e),a=e.memoizedProps,f=e.type===e.elementType?a:Zi(e.type,a),o.props=f,g=e.pendingProps,y=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Fi(l):(l=Qr(n)?vl:_r.current,l=Au(e,l));var b=n.getDerivedStateFromProps;(d=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==g||y!==l)&&LS(e,o,r,l),Zo=!1,y=e.memoizedState,o.state=y,Kp(e,r,o,i);var E=e.memoizedState;a!==g||y!==E||Wr.current||Zo?(typeof b=="function"&&(a1(e,n,b,r),E=e.memoizedState),(f=Zo||BS(e,n,f,r,y,E,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=f):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return A1(t,e,n,r,s,i)}function A1(t,e,n,r,i,s){fL(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&xS(e,n,!1),Eo(t,e,s);r=e.stateNode,e5.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=hu(e,t.child,null,s),e.child=hu(e,null,a,s)):xr(t,e,a,s),e.memoizedState=r.state,i&&xS(e,n,!0),e.child}function hL(t){var e=t.stateNode;e.pendingContext?SS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&SS(t,e.context,!1),bb(t,e.containerInfo)}function VS(t,e,n,r,i){return fu(),pb(i),e.flags|=256,xr(t,e,n,r),e.child}var f1={dehydrated:null,treeContext:null,retryLane:0};function h1(t){return{baseLanes:t,cachePool:null,transitions:null}}function dL(t,e,n){var r=e.pendingProps,i=on.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ht(on,i&1),t===null)return s1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},(r&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=cm(o,r,0,null),t=Al(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=h1(n),e.memoizedState=f1,t):Mb(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return t5(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return(o&1)===0&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ma(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ma(a,s):(s=Al(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?h1(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=f1,r}return s=t.child,t=s.sibling,r=ma(s,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Mb(t,e){return e=cm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qd(t,e,n,r){return r!==null&&pb(r),hu(e,t.child,null,n),t=Mb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function t5(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Wy(Error(Ae(422))),qd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=cm({mode:"visible",children:r.children},i,0,null),s=Al(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,(e.mode&1)!==0&&hu(e,t.child,null,o),e.child.memoizedState=h1(o),e.memoizedState=f1,s);if((e.mode&1)===0)return qd(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ae(419)),r=Wy(s,r,void 0),qd(t,e,o,r)}if(a=(o&t.childLanes)!==0,Hr||a){if(r=Hn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|o))!==0?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,wo(t,i),ls(r,t,i,-1))}return Db(),r=Wy(Error(Ae(421))),qd(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=d5.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ci=ha(i.nextSibling),fi=e,Zt=!0,ts=null,t!==null&&(Si[xi++]=co,Si[xi++]=uo,Si[xi++]=_l,co=t.id,uo=t.overflow,_l=e),e=Mb(e,r.children),e.flags|=4096,e)}function jS(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),o1(t.return,e,n)}function Qy(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function pL(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(xr(t,e,r.children,n),r=on.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jS(t,n,e);else if(t.tag===19)jS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ht(on,r),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Yp(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Qy(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Yp(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Qy(e,!0,n,null,s);break;case"together":Qy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sp(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Eo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),wl|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(Ae(153));if(e.child!==null){for(t=e.child,n=ma(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ma(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function n5(t,e,n){switch(e.tag){case 3:hL(e),fu();break;case 5:VB(e);break;case 1:Qr(e.type)&&Wp(e);break;case 4:bb(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ht(Xp,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ht(on,on.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?dL(t,e,n):(Ht(on,on.current&1),t=Eo(t,e,n),t!==null?t.sibling:null);Ht(on,on.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&128)!==0){if(r)return pL(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ht(on,on.current),r)break;return null;case 22:case 23:return e.lanes=0,AL(t,e,n)}return Eo(t,e,n)}var gL,d1,mL,yL;gL=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};d1=function(){};mL=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,al(Vs.current);var s=null;switch(n){case"input":i=F_(t,i),r=F_(t,r),s=[];break;case"select":i=un({},i,{value:void 0}),r=un({},r,{value:void 0}),s=[];break;case"textarea":i=U_(t,i),r=U_(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=jp)}z_(n,r);var o;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var a=i[f];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Bf.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var l=r[f];if(a=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&l!==a&&(l!=null||a!=null))if(f==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(f,n)),n=l;else f==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(f,l)):f==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(f,""+l):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Bf.hasOwnProperty(f)?(l!=null&&f==="onScroll"&&Jt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(f,l))}n&&(s=s||[]).push("style",n);var f=s;(e.updateQueue=f)&&(e.flags|=4)}};yL=function(t,e,n,r){n!==r&&(e.flags|=4)};function PA(t,e){if(!Zt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function lr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function r5(t,e,n){var r=e.pendingProps;switch(db(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lr(e),null;case 1:return Qr(e.type)&&Hp(),lr(e),null;case 3:return r=e.stateNode,du(),Kt(Wr),Kt(_r),Eb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Kd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,ts!==null&&(w1(ts),ts=null))),d1(t,e),lr(e),null;case 5:wb(e);var i=al(jf.current);if(n=e.type,t!==null&&e.stateNode!=null)mL(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ae(166));return lr(e),null}if(t=al(Vs.current),Kd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Ds]=e,r[zf]=s,t=(e.mode&1)!==0,n){case"dialog":Jt("cancel",r),Jt("close",r);break;case"iframe":case"object":case"embed":Jt("load",r);break;case"video":case"audio":for(i=0;i<qA.length;i++)Jt(qA[i],r);break;case"source":Jt("error",r);break;case"img":case"image":case"link":Jt("error",r),Jt("load",r);break;case"details":Jt("toggle",r);break;case"input":qT(r,s),Jt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Jt("invalid",r);break;case"textarea":eS(r,s),Jt("invalid",r)}z_(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Jd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Jd(r.textContent,a,t),i=["children",""+a]):Bf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Jt("scroll",r)}switch(n){case"input":zd(r),ZT(r,s,!0);break;case"textarea":zd(r),tS(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=jp)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=WI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ds]=e,t[zf]=r,gL(t,e,!1,!1),e.stateNode=t;e:{switch(o=V_(n,r),n){case"dialog":Jt("cancel",t),Jt("close",t),i=r;break;case"iframe":case"object":case"embed":Jt("load",t),i=r;break;case"video":case"audio":for(i=0;i<qA.length;i++)Jt(qA[i],t);i=r;break;case"source":Jt("error",t),i=r;break;case"img":case"image":case"link":Jt("error",t),Jt("load",t),i=r;break;case"details":Jt("toggle",t),i=r;break;case"input":qT(t,r),i=F_(t,r),Jt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=un({},r,{value:void 0}),Jt("invalid",t);break;case"textarea":eS(t,r),i=U_(t,r),Jt("invalid",t);break;default:i=r}z_(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?XI(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&QI(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Lf(t,l):typeof l=="number"&&Lf(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Bf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Jt("scroll",t):l!=null&&Z2(t,s,l,o))}switch(n){case"input":zd(t),ZT(t,r,!1);break;case"textarea":zd(t),tS(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ba(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Jc(t,!!r.multiple,s,!1):r.defaultValue!=null&&Jc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=jp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return lr(e),null;case 6:if(t&&e.stateNode!=null)yL(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ae(166));if(n=al(jf.current),al(Vs.current),Kd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ds]=e,(s=r.nodeValue!==n)&&(t=fi,t!==null))switch(t.tag){case 3:Jd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Jd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ds]=e,e.stateNode=r}return lr(e),null;case 13:if(Kt(on),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Zt&&ci!==null&&(e.mode&1)!==0&&(e.flags&128)===0)DB(),fu(),e.flags|=98560,s=!1;else if(s=Kd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ae(317));s[Ds]=e}else fu(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;lr(e),s=!1}else ts!==null&&(w1(ts),ts=null),s=!0;if(!s)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(on.current&1)!==0?Rn===0&&(Rn=3):Db())),e.updateQueue!==null&&(e.flags|=4),lr(e),null);case 4:return du(),d1(t,e),t===null&&Uf(e.stateNode.containerInfo),lr(e),null;case 10:return yb(e.type._context),lr(e),null;case 17:return Qr(e.type)&&Hp(),lr(e),null;case 19:if(Kt(on),s=e.memoizedState,s===null)return lr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)PA(s,!1);else{if(Rn!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(o=Yp(t),o!==null){for(e.flags|=128,PA(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ht(on,on.current&1|2),e.child}t=t.sibling}s.tail!==null&&gn()>gu&&(e.flags|=128,r=!0,PA(s,!1),e.lanes=4194304)}else{if(!r)if(t=Yp(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),PA(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Zt)return lr(e),null}else 2*gn()-s.renderingStartTime>gu&&n!==1073741824&&(e.flags|=128,r=!0,PA(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=gn(),e.sibling=null,n=on.current,Ht(on,r?n&1|2:n&1),e):(lr(e),null);case 22:case 23:return Ob(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?(ai&1073741824)!==0&&(lr(e),e.subtreeFlags&6&&(e.flags|=8192)):lr(e),null;case 24:return null;case 25:return null}throw Error(Ae(156,e.tag))}function i5(t,e){switch(db(e),e.tag){case 1:return Qr(e.type)&&Hp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return du(),Kt(Wr),Kt(_r),Eb(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return wb(e),null;case 13:if(Kt(on),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ae(340));fu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Kt(on),null;case 4:return du(),null;case 10:return yb(e.type._context),null;case 22:case 23:return Ob(),null;case 24:return null;default:return null}}var Zd=!1,dr=!1,s5=typeof WeakSet=="function"?WeakSet:Set,Me=null;function Dc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){hn(t,e,r)}else n.current=null}function p1(t,e,n){try{n()}catch(r){hn(t,e,r)}}var HS=!1;function o5(t,e){if(q_=Gp,t=wB(),fb(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,f=0,d=0,g=t,y=null;t:for(;;){for(var b;g!==n||i!==0&&g.nodeType!==3||(a=o+i),g!==s||r!==0&&g.nodeType!==3||(l=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(b=g.firstChild)!==null;)y=g,g=b;for(;;){if(g===t)break t;if(y===n&&++f===i&&(a=o),y===s&&++d===r&&(l=o),(b=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=b}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Z_={focusedElem:t,selectionRange:n},Gp=!1,Me=e;Me!==null;)if(e=Me,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Me=t;else for(;Me!==null;){e=Me;try{var E=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var S=E.memoizedProps,M=E.memoizedState,C=e.stateNode,P=C.getSnapshotBeforeUpdate(e.elementType===e.type?S:Zi(e.type,S),M);C.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ae(163))}}catch(L){hn(e,e.return,L)}if(t=e.sibling,t!==null){t.return=e.return,Me=t;break}Me=e.return}return E=HS,HS=!1,E}function df(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&p1(e,n,s)}i=i.next}while(i!==r)}}function am(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function g1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function vL(t){var e=t.alternate;e!==null&&(t.alternate=null,vL(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ds],delete e[zf],delete e[n1],delete e[VU],delete e[jU])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _L(t){return t.tag===5||t.tag===3||t.tag===4}function WS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_L(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function m1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jp));else if(r!==4&&(t=t.child,t!==null))for(m1(t,e,n),t=t.sibling;t!==null;)m1(t,e,n),t=t.sibling}function y1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(y1(t,e,n),t=t.sibling;t!==null;)y1(t,e,n),t=t.sibling}var Jn=null,es=!1;function jo(t,e,n){for(n=n.child;n!==null;)bL(t,e,n),n=n.sibling}function bL(t,e,n){if(zs&&typeof zs.onCommitFiberUnmount=="function")try{zs.onCommitFiberUnmount(Zg,n)}catch{}switch(n.tag){case 5:dr||Dc(n,e);case 6:var r=Jn,i=es;Jn=null,jo(t,e,n),Jn=r,es=i,Jn!==null&&(es?(t=Jn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Jn.removeChild(n.stateNode));break;case 18:Jn!==null&&(es?(t=Jn,n=n.stateNode,t.nodeType===8?Uy(t.parentNode,n):t.nodeType===1&&Uy(t,n),Ff(t)):Uy(Jn,n.stateNode));break;case 4:r=Jn,i=es,Jn=n.stateNode.containerInfo,es=!0,jo(t,e,n),Jn=r,es=i;break;case 0:case 11:case 14:case 15:if(!dr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&p1(n,e,o),i=i.next}while(i!==r)}jo(t,e,n);break;case 1:if(!dr&&(Dc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){hn(n,e,a)}jo(t,e,n);break;case 21:jo(t,e,n);break;case 22:n.mode&1?(dr=(r=dr)||n.memoizedState!==null,jo(t,e,n),dr=r):jo(t,e,n);break;default:jo(t,e,n)}}function QS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new s5),e.forEach(function(r){var i=p5.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Yi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Jn=a.stateNode,es=!1;break e;case 3:Jn=a.stateNode.containerInfo,es=!0;break e;case 4:Jn=a.stateNode.containerInfo,es=!0;break e}a=a.return}if(Jn===null)throw Error(Ae(160));bL(s,o,i),Jn=null,es=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(f){hn(i,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)wL(e,t),e=e.sibling}function wL(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yi(e,t),xs(t),r&4){try{df(3,t,t.return),am(3,t)}catch(S){hn(t,t.return,S)}try{df(5,t,t.return)}catch(S){hn(t,t.return,S)}}break;case 1:Yi(e,t),xs(t),r&512&&n!==null&&Dc(n,n.return);break;case 5:if(Yi(e,t),xs(t),r&512&&n!==null&&Dc(n,n.return),t.flags&32){var i=t.stateNode;try{Lf(i,"")}catch(S){hn(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&jI(i,s),V_(a,o);var f=V_(a,s);for(o=0;o<l.length;o+=2){var d=l[o],g=l[o+1];d==="style"?XI(i,g):d==="dangerouslySetInnerHTML"?QI(i,g):d==="children"?Lf(i,g):Z2(i,d,g,f)}switch(a){case"input":k_(i,s);break;case"textarea":HI(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var b=s.value;b!=null?Jc(i,!!s.multiple,b,!1):y!==!!s.multiple&&(s.defaultValue!=null?Jc(i,!!s.multiple,s.defaultValue,!0):Jc(i,!!s.multiple,s.multiple?[]:"",!1))}i[zf]=s}catch(S){hn(t,t.return,S)}}break;case 6:if(Yi(e,t),xs(t),r&4){if(t.stateNode===null)throw Error(Ae(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){hn(t,t.return,S)}}break;case 3:if(Yi(e,t),xs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ff(e.containerInfo)}catch(S){hn(t,t.return,S)}break;case 4:Yi(e,t),xs(t);break;case 13:Yi(e,t),xs(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Lb=gn())),r&4&&QS(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(dr=(f=dr)||d,Yi(e,t),dr=f):Yi(e,t),xs(t),r&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!d&&(t.mode&1)!==0)for(Me=t,d=t.child;d!==null;){for(g=Me=d;Me!==null;){switch(y=Me,b=y.child,y.tag){case 0:case 11:case 14:case 15:df(4,y,y.return);break;case 1:Dc(y,y.return);var E=y.stateNode;if(typeof E.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(S){hn(r,n,S)}}break;case 5:Dc(y,y.return);break;case 22:if(y.memoizedState!==null){XS(g);continue}}b!==null?(b.return=y,Me=b):XS(g)}d=d.sibling}e:for(d=null,g=t;;){if(g.tag===5){if(d===null){d=g;try{i=g.stateNode,f?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=g.stateNode,l=g.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=$I("display",o))}catch(S){hn(t,t.return,S)}}}else if(g.tag===6){if(d===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(S){hn(t,t.return,S)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;d===g&&(d=null),g=g.return}d===g&&(d=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Yi(e,t),xs(t),r&4&&QS(t);break;case 21:break;default:Yi(e,t),xs(t)}}function xs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_L(n)){var r=n;break e}n=n.return}throw Error(Ae(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Lf(i,""),r.flags&=-33);var s=WS(t);y1(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=WS(t);m1(t,a,o);break;default:throw Error(Ae(161))}}catch(l){hn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function a5(t,e,n){Me=t,EL(t)}function EL(t,e,n){for(var r=(t.mode&1)!==0;Me!==null;){var i=Me,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Zd;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||dr;a=Zd;var f=dr;if(Zd=o,(dr=l)&&!f)for(Me=i;Me!==null;)o=Me,l=o.child,o.tag===22&&o.memoizedState!==null?JS(i):l!==null?(l.return=o,Me=l):JS(i);for(;s!==null;)Me=s,EL(s),s=s.sibling;Me=i,Zd=a,dr=f}$S(t)}else(i.subtreeFlags&8772)!==0&&s!==null?(s.return=i,Me=s):$S(t)}}function $S(t){for(;Me!==null;){var e=Me;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:dr||am(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Zi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&IS(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}IS(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var d=f.memoizedState;if(d!==null){var g=d.dehydrated;g!==null&&Ff(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ae(163))}dr||e.flags&512&&g1(e)}catch(y){hn(e,e.return,y)}}if(e===t){Me=null;break}if(n=e.sibling,n!==null){n.return=e.return,Me=n;break}Me=e.return}}function XS(t){for(;Me!==null;){var e=Me;if(e===t){Me=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Me=n;break}Me=e.return}}function JS(t){for(;Me!==null;){var e=Me;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{am(4,e)}catch(l){hn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){hn(e,i,l)}}var s=e.return;try{g1(e)}catch(l){hn(e,s,l)}break;case 5:var o=e.return;try{g1(e)}catch(l){hn(e,o,l)}}}catch(l){hn(e,e.return,l)}if(e===t){Me=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Me=a;break}Me=e.return}}var l5=Math.ceil,eg=Ro.ReactCurrentDispatcher,Ib=Ro.ReactCurrentOwner,Ri=Ro.ReactCurrentBatchConfig,bt=0,Hn=null,Tn=null,qn=0,ai=0,Fc=La(0),Rn=0,$f=null,wl=0,lm=0,Bb=0,pf=null,zr=null,Lb=0,gu=1/0,oo=null,tg=!1,v1=null,pa=null,e0=!1,sa=null,ng=0,gf=0,_1=null,op=-1,ap=0;function Ir(){return(bt&6)!==0?gn():op!==-1?op:op=gn()}function ga(t){return(t.mode&1)===0?1:(bt&2)!==0&&qn!==0?qn&-qn:WU.transition!==null?(ap===0&&(ap=oB()),ap):(t=Ot,t!==0||(t=window.event,t=t===void 0?16:hB(t.type)),t)}function ls(t,e,n,r){if(50<gf)throw gf=0,_1=null,Error(Ae(185));Ph(t,n,r),((bt&2)===0||t!==Hn)&&(t===Hn&&((bt&2)===0&&(lm|=n),Rn===4&&na(t,qn)),$r(t,r),n===1&&bt===0&&(e.mode&1)===0&&(gu=gn()+500,im&&Ra()))}function $r(t,e){var n=t.callbackNode;W6(t,e);var r=Up(t,t===Hn?qn:0);if(r===0)n!==null&&iS(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&iS(n),e===1)t.tag===0?HU(KS.bind(null,t)):LB(KS.bind(null,t)),GU(function(){(bt&6)===0&&Ra()}),n=null;else{switch(aB(r)){case 1:n=ib;break;case 4:n=iB;break;case 16:n=Np;break;case 536870912:n=sB;break;default:n=Np}n=BL(n,TL.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function TL(t,e){if(op=-1,ap=0,(bt&6)!==0)throw Error(Ae(327));var n=t.callbackNode;if(eu()&&t.callbackNode!==n)return null;var r=Up(t,t===Hn?qn:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=rg(t,r);else{e=r;var i=bt;bt|=2;var s=xL();(Hn!==t||qn!==e)&&(oo=null,gu=gn()+500,ul(t,e));do try{A5();break}catch(a){SL(t,a)}while(1);mb(),eg.current=s,bt=i,Tn!==null?e=0:(Hn=null,qn=0,e=Rn)}if(e!==0){if(e===2&&(i=$_(t),i!==0&&(r=i,e=b1(t,i))),e===1)throw n=$f,ul(t,0),na(t,r),$r(t,gn()),n;if(e===6)na(t,r);else{if(i=t.current.alternate,(r&30)===0&&!c5(i)&&(e=rg(t,r),e===2&&(s=$_(t),s!==0&&(r=s,e=b1(t,s))),e===1))throw n=$f,ul(t,0),na(t,r),$r(t,gn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ae(345));case 2:tl(t,zr,oo);break;case 3:if(na(t,r),(r&130023424)===r&&(e=Lb+500-gn(),10<e)){if(Up(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ir(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=t1(tl.bind(null,t,zr,oo),e);break}tl(t,zr,oo);break;case 4:if(na(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-as(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=gn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*l5(r/1960))-r,10<r){t.timeoutHandle=t1(tl.bind(null,t,zr,oo),r);break}tl(t,zr,oo);break;case 5:tl(t,zr,oo);break;default:throw Error(Ae(329))}}}return $r(t,gn()),t.callbackNode===n?TL.bind(null,t):null}function b1(t,e){var n=pf;return t.current.memoizedState.isDehydrated&&(ul(t,e).flags|=256),t=rg(t,e),t!==2&&(e=zr,zr=n,e!==null&&w1(e)),t}function w1(t){zr===null?zr=t:zr.push.apply(zr,t)}function c5(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ds(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function na(t,e){for(e&=~Bb,e&=~lm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-as(e),r=1<<n;t[n]=-1,e&=~r}}function KS(t){if((bt&6)!==0)throw Error(Ae(327));eu();var e=Up(t,0);if((e&1)===0)return $r(t,gn()),null;var n=rg(t,e);if(t.tag!==0&&n===2){var r=$_(t);r!==0&&(e=r,n=b1(t,r))}if(n===1)throw n=$f,ul(t,0),na(t,e),$r(t,gn()),n;if(n===6)throw Error(Ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,tl(t,zr,oo),$r(t,gn()),null}function Rb(t,e){var n=bt;bt|=1;try{return t(e)}finally{bt=n,bt===0&&(gu=gn()+500,im&&Ra())}}function El(t){sa!==null&&sa.tag===0&&(bt&6)===0&&eu();var e=bt;bt|=1;var n=Ri.transition,r=Ot;try{if(Ri.transition=null,Ot=1,t)return t()}finally{Ot=r,Ri.transition=n,bt=e,(bt&6)===0&&Ra()}}function Ob(){ai=Fc.current,Kt(Fc)}function ul(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,UU(n)),Tn!==null)for(n=Tn.return;n!==null;){var r=n;switch(db(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hp();break;case 3:du(),Kt(Wr),Kt(_r),Eb();break;case 5:wb(r);break;case 4:du();break;case 13:Kt(on);break;case 19:Kt(on);break;case 10:yb(r.type._context);break;case 22:case 23:Ob()}n=n.return}if(Hn=t,Tn=t=ma(t.current,null),qn=ai=e,Rn=0,$f=null,Bb=lm=wl=0,zr=pf=null,ol!==null){for(e=0;e<ol.length;e++)if(n=ol[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ol=null}return t}function SL(t,e){do{var n=Tn;try{if(mb(),rp.current=Zp,qp){for(var r=cn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}qp=!1}if(bl=0,Gn=Ln=cn=null,hf=!1,Hf=0,Ib.current=null,n===null||n.return===null){Rn=1,$f=e,Tn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=qn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var f=l,d=a,g=d.tag;if((d.mode&1)===0&&(g===0||g===11||g===15)){var y=d.alternate;y?(d.updateQueue=y.updateQueue,d.memoizedState=y.memoizedState,d.lanes=y.lanes):(d.updateQueue=null,d.memoizedState=null)}var b=kS(o);if(b!==null){b.flags&=-257,NS(b,o,a,s,e),b.mode&1&&FS(s,f,e),e=b,l=f;var E=e.updateQueue;if(E===null){var S=new Set;S.add(l),e.updateQueue=S}else E.add(l);break e}else{if((e&1)===0){FS(s,f,e),Db();break e}l=Error(Ae(426))}}else if(Zt&&a.mode&1){var M=kS(o);if(M!==null){(M.flags&65536)===0&&(M.flags|=256),NS(M,o,a,s,e),pb(pu(l,a));break e}}s=l=pu(l,a),Rn!==4&&(Rn=2),pf===null?pf=[s]:pf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var C=lL(s,l,e);MS(s,C);break e;case 1:a=l;var P=s.type,I=s.stateNode;if((s.flags&128)===0&&(typeof P.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(pa===null||!pa.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var L=cL(s,a,e);MS(s,L);break e}}s=s.return}while(s!==null)}PL(n)}catch(F){e=F,Tn===n&&n!==null&&(Tn=n=n.return);continue}break}while(1)}function xL(){var t=eg.current;return eg.current=Zp,t===null?Zp:t}function Db(){(Rn===0||Rn===3||Rn===2)&&(Rn=4),Hn===null||(wl&268435455)===0&&(lm&268435455)===0||na(Hn,qn)}function rg(t,e){var n=bt;bt|=2;var r=xL();(Hn!==t||qn!==e)&&(oo=null,ul(t,e));do try{u5();break}catch(i){SL(t,i)}while(1);if(mb(),bt=n,eg.current=r,Tn!==null)throw Error(Ae(261));return Hn=null,qn=0,Rn}function u5(){for(;Tn!==null;)CL(Tn)}function A5(){for(;Tn!==null&&!F6();)CL(Tn)}function CL(t){var e=IL(t.alternate,t,ai);t.memoizedProps=t.pendingProps,e===null?PL(t):Tn=e,Ib.current=null}function PL(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=r5(n,e,ai),n!==null){Tn=n;return}}else{if(n=i5(n,e),n!==null){n.flags&=32767,Tn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Rn=6,Tn=null;return}}if(e=e.sibling,e!==null){Tn=e;return}Tn=e=t}while(e!==null);Rn===0&&(Rn=5)}function tl(t,e,n){var r=Ot,i=Ri.transition;try{Ri.transition=null,Ot=1,f5(t,e,n,r)}finally{Ri.transition=i,Ot=r}return null}function f5(t,e,n,r){do eu();while(sa!==null);if((bt&6)!==0)throw Error(Ae(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ae(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Q6(t,s),t===Hn&&(Tn=Hn=null,qn=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||e0||(e0=!0,BL(Np,function(){return eu(),null})),s=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||s){s=Ri.transition,Ri.transition=null;var o=Ot;Ot=1;var a=bt;bt|=4,Ib.current=null,o5(t,n),wL(n,t),LU(Z_),Gp=!!q_,Z_=q_=null,t.current=n,a5(n),k6(),bt=a,Ot=o,Ri.transition=s}else t.current=n;if(e0&&(e0=!1,sa=t,ng=i),s=t.pendingLanes,s===0&&(pa=null),G6(n.stateNode),$r(t,gn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(tg)throw tg=!1,t=v1,v1=null,t;return(ng&1)!==0&&t.tag!==0&&eu(),s=t.pendingLanes,(s&1)!==0?t===_1?gf++:(gf=0,_1=t):gf=0,Ra(),null}function eu(){if(sa!==null){var t=aB(ng),e=Ri.transition,n=Ot;try{if(Ri.transition=null,Ot=16>t?16:t,sa===null)var r=!1;else{if(t=sa,sa=null,ng=0,(bt&6)!==0)throw Error(Ae(331));var i=bt;for(bt|=4,Me=t.current;Me!==null;){var s=Me,o=s.child;if((Me.flags&16)!==0){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var f=a[l];for(Me=f;Me!==null;){var d=Me;switch(d.tag){case 0:case 11:case 15:df(8,d,s)}var g=d.child;if(g!==null)g.return=d,Me=g;else for(;Me!==null;){d=Me;var y=d.sibling,b=d.return;if(vL(d),d===f){Me=null;break}if(y!==null){y.return=b,Me=y;break}Me=b}}}var E=s.alternate;if(E!==null){var S=E.child;if(S!==null){E.child=null;do{var M=S.sibling;S.sibling=null,S=M}while(S!==null)}}Me=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,Me=o;else e:for(;Me!==null;){if(s=Me,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:df(9,s,s.return)}var C=s.sibling;if(C!==null){C.return=s.return,Me=C;break e}Me=s.return}}var P=t.current;for(Me=P;Me!==null;){o=Me;var I=o.child;if((o.subtreeFlags&2064)!==0&&I!==null)I.return=o,Me=I;else e:for(o=P;Me!==null;){if(a=Me,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:am(9,a)}}catch(F){hn(a,a.return,F)}if(a===o){Me=null;break e}var L=a.sibling;if(L!==null){L.return=a.return,Me=L;break e}Me=a.return}}if(bt=i,Ra(),zs&&typeof zs.onPostCommitFiberRoot=="function")try{zs.onPostCommitFiberRoot(Zg,t)}catch{}r=!0}return r}finally{Ot=n,Ri.transition=e}}return!1}function YS(t,e,n){e=pu(n,e),e=lL(t,e,1),t=da(t,e,1),e=Ir(),t!==null&&(Ph(t,1,e),$r(t,e))}function hn(t,e,n){if(t.tag===3)YS(t,t,n);else for(;e!==null;){if(e.tag===3){YS(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pa===null||!pa.has(r))){t=pu(n,t),t=cL(e,t,1),e=da(e,t,1),t=Ir(),e!==null&&(Ph(e,1,t),$r(e,t));break}}e=e.return}}function h5(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ir(),t.pingedLanes|=t.suspendedLanes&n,Hn===t&&(qn&n)===n&&(Rn===4||Rn===3&&(qn&130023424)===qn&&500>gn()-Lb?ul(t,0):Bb|=n),$r(t,e)}function ML(t,e){e===0&&((t.mode&1)===0?e=1:(e=Hd,Hd<<=1,(Hd&130023424)===0&&(Hd=4194304)));var n=Ir();t=wo(t,e),t!==null&&(Ph(t,e,n),$r(t,n))}function d5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ML(t,n)}function p5(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ae(314))}r!==null&&r.delete(e),ML(t,n)}var IL;IL=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wr.current)Hr=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return Hr=!1,n5(t,e,n);Hr=(t.flags&131072)!==0}else Hr=!1,Zt&&(e.flags&1048576)!==0&&RB(e,$p,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;sp(t,e),t=e.pendingProps;var i=Au(e,_r.current);Zc(e,n),i=Sb(null,e,r,t,i,n);var s=xb();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qr(r)?(s=!0,Wp(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_b(e),i.updater=sm,e.stateNode=i,i._reactInternals=e,l1(e,r,t,n),e=A1(null,e,r,!0,s,n)):(e.tag=0,Zt&&s&&hb(e),xr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(sp(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=m5(r),t=Zi(r,t),i){case 0:e=u1(null,e,r,t,n);break e;case 1:e=zS(null,e,r,t,n);break e;case 11:e=US(null,e,r,t,n);break e;case 14:e=GS(null,e,r,Zi(r.type,t),n);break e}throw Error(Ae(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zi(r,i),u1(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zi(r,i),zS(t,e,r,i,n);case 3:e:{if(hL(e),t===null)throw Error(Ae(387));r=e.pendingProps,s=e.memoizedState,i=s.element,kB(t,e),Kp(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=pu(Error(Ae(423)),e),e=VS(t,e,r,n,i);break e}else if(r!==i){i=pu(Error(Ae(424)),e),e=VS(t,e,r,n,i);break e}else for(ci=ha(e.stateNode.containerInfo.firstChild),fi=e,Zt=!0,ts=null,n=zB(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fu(),r===i){e=Eo(t,e,n);break e}xr(t,e,r,n)}e=e.child}return e;case 5:return VB(e),t===null&&s1(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,e1(r,i)?o=null:s!==null&&e1(r,s)&&(e.flags|=32),fL(t,e),xr(t,e,o,n),e.child;case 6:return t===null&&s1(e),null;case 13:return dL(t,e,n);case 4:return bb(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=hu(e,null,r,n):xr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zi(r,i),US(t,e,r,i,n);case 7:return xr(t,e,e.pendingProps,n),e.child;case 8:return xr(t,e,e.pendingProps.children,n),e.child;case 12:return xr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ht(Xp,r._currentValue),r._currentValue=o,s!==null)if(ds(s.value,o)){if(s.children===i.children&&!Wr.current){e=Eo(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=fo(-1,n&-n),l.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var d=f.pending;d===null?l.next=l:(l.next=d.next,d.next=l),f.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),o1(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ae(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),o1(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}xr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Zc(e,n),i=Fi(i),r=r(i),e.flags|=1,xr(t,e,r,n),e.child;case 14:return r=e.type,i=Zi(r,e.pendingProps),i=Zi(r.type,i),GS(t,e,r,i,n);case 15:return uL(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zi(r,i),sp(t,e),e.tag=1,Qr(r)?(t=!0,Wp(e)):t=!1,Zc(e,n),UB(e,r,i),l1(e,r,i,n),A1(null,e,r,!0,t,n);case 19:return pL(t,e,n);case 22:return AL(t,e,n)}throw Error(Ae(156,e.tag))};function BL(t,e){return rB(t,e)}function g5(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ii(t,e,n,r){return new g5(t,e,n,r)}function Fb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function m5(t){if(typeof t=="function")return Fb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===tb)return 11;if(t===nb)return 14}return 2}function ma(t,e){var n=t.alternate;return n===null?(n=Ii(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function lp(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Fb(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case xc:return Al(n.children,i,s,e);case eb:o=8,i|=8;break;case L_:return t=Ii(12,n,e,i|2),t.elementType=L_,t.lanes=s,t;case R_:return t=Ii(13,n,e,i),t.elementType=R_,t.lanes=s,t;case O_:return t=Ii(19,n,e,i),t.elementType=O_,t.lanes=s,t;case GI:return cm(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case NI:o=10;break e;case UI:o=9;break e;case tb:o=11;break e;case nb:o=14;break e;case qo:o=16,r=null;break e}throw Error(Ae(130,t==null?t:typeof t,""))}return e=Ii(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Al(t,e,n,r){return t=Ii(7,t,r,e),t.lanes=n,t}function cm(t,e,n,r){return t=Ii(22,t,r,e),t.elementType=GI,t.lanes=n,t.stateNode={isHidden:!1},t}function $y(t,e,n){return t=Ii(6,t,null,e),t.lanes=n,t}function Xy(t,e,n){return e=Ii(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function y5(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Py(0),this.expirationTimes=Py(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Py(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function kb(t,e,n,r,i,s,o,a,l){return t=new y5(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ii(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_b(s),t}function v5(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function LL(t){if(!t)return wa;t=t._reactInternals;e:{if(zl(t)!==t||t.tag!==1)throw Error(Ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ae(171))}if(t.tag===1){var n=t.type;if(Qr(n))return BB(t,n,e)}return e}function RL(t,e,n,r,i,s,o,a,l){return t=kb(n,r,!0,t,i,s,o,a,l),t.context=LL(null),n=t.current,r=Ir(),i=ga(n),s=fo(r,i),s.callback=e!=null?e:null,da(n,s,i),t.current.lanes=i,Ph(t,i,r),$r(t,r),t}function um(t,e,n,r){var i=e.current,s=Ir(),o=ga(i);return n=LL(n),e.context===null?e.context=n:e.pendingContext=n,e=fo(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=da(i,e,o),t!==null&&(ls(t,i,o,s),np(t,i,o)),o}function ig(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Nb(t,e){qS(t,e),(t=t.alternate)&&qS(t,e)}function _5(){return null}var OL=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ub(t){this._internalRoot=t}Am.prototype.render=Ub.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ae(409));um(t,e,null,null)};Am.prototype.unmount=Ub.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;El(function(){um(null,t,null,null)}),e[bo]=null}};function Am(t){this._internalRoot=t}Am.prototype.unstable_scheduleHydration=function(t){if(t){var e=uB();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ta.length&&e!==0&&e<ta[n].priority;n++);ta.splice(n,0,t),n===0&&fB(t)}};function Gb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ZS(){}function b5(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var f=ig(o);s.call(f)}}var o=RL(e,r,t,0,null,!1,!1,"",ZS);return t._reactRootContainer=o,t[bo]=o.current,Uf(t.nodeType===8?t.parentNode:t),El(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var f=ig(l);a.call(f)}}var l=kb(t,0,!1,null,null,!1,!1,"",ZS);return t._reactRootContainer=l,t[bo]=l.current,Uf(t.nodeType===8?t.parentNode:t),El(function(){um(e,l,n,r)}),l}function hm(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=ig(o);a.call(l)}}um(e,o,t,i)}else o=b5(n,e,t,i,r);return ig(o)}lB=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=YA(e.pendingLanes);n!==0&&(sb(e,n|1),$r(e,gn()),(bt&6)===0&&(gu=gn()+500,Ra()))}break;case 13:El(function(){var r=wo(t,1);if(r!==null){var i=Ir();ls(r,t,1,i)}}),Nb(t,1)}};ob=function(t){if(t.tag===13){var e=wo(t,134217728);if(e!==null){var n=Ir();ls(e,t,134217728,n)}Nb(t,134217728)}};cB=function(t){if(t.tag===13){var e=ga(t),n=wo(t,e);if(n!==null){var r=Ir();ls(n,t,e,r)}Nb(t,e)}};uB=function(){return Ot};AB=function(t,e){var n=Ot;try{return Ot=t,e()}finally{Ot=n}};H_=function(t,e,n){switch(e){case"input":if(k_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=rm(r);if(!i)throw Error(Ae(90));VI(r),k_(r,i)}}}break;case"textarea":HI(t,n);break;case"select":e=n.value,e!=null&&Jc(t,!!n.multiple,e,!1)}};YI=Rb;qI=El;var w5={usingClientEntryPoint:!1,Events:[Ih,Ic,rm,JI,KI,Rb]},MA={findFiberByHostInstance:sl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},E5={bundleType:MA.bundleType,version:MA.version,rendererPackageName:MA.rendererPackageName,rendererConfig:MA.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ro.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tB(t),t===null?null:t.stateNode},findFiberByHostInstance:MA.findFiberByHostInstance||_5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var t0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t0.isDisabled&&t0.supportsFiber)try{Zg=t0.inject(E5),zs=t0}catch{}}yi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w5;yi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gb(e))throw Error(Ae(200));return v5(t,e,null,n)};yi.createRoot=function(t,e){if(!Gb(t))throw Error(Ae(299));var n=!1,r="",i=OL;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=kb(t,1,!1,null,null,n,!1,r,i),t[bo]=e.current,Uf(t.nodeType===8?t.parentNode:t),new Ub(e)};yi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ae(188)):(t=Object.keys(t).join(","),Error(Ae(268,t)));return t=tB(e),t=t===null?null:t.stateNode,t};yi.flushSync=function(t){return El(t)};yi.hydrate=function(t,e,n){if(!fm(e))throw Error(Ae(200));return hm(null,t,e,!0,n)};yi.hydrateRoot=function(t,e,n){if(!Gb(t))throw Error(Ae(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=OL;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=RL(e,null,t,1,n!=null?n:null,i,!1,s,o),t[bo]=e.current,Uf(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Am(e)};yi.render=function(t,e,n){if(!fm(e))throw Error(Ae(200));return hm(null,t,e,!1,n)};yi.unmountComponentAtNode=function(t){if(!fm(t))throw Error(Ae(40));return t._reactRootContainer?(El(function(){hm(null,null,t,!1,function(){t._reactRootContainer=null,t[bo]=null})}),!0):!1};yi.unstable_batchedUpdates=Rb;yi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!fm(n))throw Error(Ae(200));if(t==null||t._reactInternals===void 0)throw Error(Ae(38));return hm(t,e,n,!1,r)};yi.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=yi})(Ch);var ex=Ch.exports;I_.createRoot=ex.createRoot,I_.hydrateRoot=ex.hydrateRoot;const T5="modulepreload",S5=function(t,e){return new URL(t,e).href},tx={},x5=function(e,n,r){return!n||n.length===0?e():Promise.all(n.map(i=>{if(i=S5(i,r),i in tx)return;tx[i]=!0;const s=i.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${o}`))return;const a=document.createElement("link");if(a.rel=s?"stylesheet":T5,s||(a.as="script",a.crossOrigin=""),a.href=i,document.head.appendChild(a),s)return new Promise((l,f)=>{a.addEventListener("load",l),a.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())};var dm={exports:{}},pm={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C5=ie.exports,P5=Symbol.for("react.element"),M5=Symbol.for("react.fragment"),I5=Object.prototype.hasOwnProperty,B5=C5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,L5={key:!0,ref:!0,__self:!0,__source:!0};function DL(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)I5.call(e,r)&&!L5.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:P5,type:t,key:s,ref:o,props:i,_owner:B5.current}}pm.Fragment=M5;pm.jsx=DL;pm.jsxs=DL;(function(t){t.exports=pm})(dm);const R5=dm.exports.Fragment,Gt=dm.exports.jsx,Xf=dm.exports.jsxs,O5=ie.exports.createContext(null);function D5(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}function nx(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function rx(t,e){const n=e.viewState||e;let r=!1;if("longitude"in n&&"latitude"in n){const i=t.center;t.center=new i.constructor(n.longitude,n.latitude),r=r||i!==t.center}if("zoom"in n){const i=t.zoom;t.zoom=n.zoom,r=r||i!==t.zoom}if("bearing"in n){const i=t.bearing;t.bearing=n.bearing,r=r||i!==t.bearing}if("pitch"in n){const i=t.pitch;t.pitch=n.pitch,r=r||i!==t.pitch}return n.padding&&!t.isPaddingEqual(n.padding)&&(r=!0,t.padding=n.padding),r}const F5=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ix(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const r of t.layers)e[r.id]=r;const n=t.layers.map(r=>{const i=e[r.ref];let s=null;if("interactive"in r&&(s={...r},delete s.interactive),i){s=s||{...r},delete s.ref;for(const o of F5)o in i&&(s[o]=i[o])}return s||r});return{...t,layers:n}}function k5(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,i=Array.isArray(e)?e[0]:e?e.x:0,s=Array.isArray(e)?e[1]:e?e.y:0;return n===i&&r===s}function ra(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!ra(t[n],e[n]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n)if(!e.hasOwnProperty(i)||!ra(t[i],e[i]))return!1;return!0}return!1}const sx={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Jy={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},ox={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},N5=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],U5=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class mu{constructor(e,n,r){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=i=>{const s=this.props[ox[i.type]];s&&s(i)},this._onPointerEvent=i=>{(i.type==="mousemove"||i.type==="mouseout")&&this._updateHover(i);const s=this.props[sx[i.type]];if(s){if(this.props.interactiveLayerIds&&i.type!=="mouseover"&&i.type!=="mouseout"){const o=this._hoveredFeatures||this._map.queryRenderedFeatures(i.point,{layers:this.props.interactiveLayerIds});i.features=o}s(i),delete i.features}},this._onCameraEvent=i=>{if(!this._internalUpdate){const s=this.props[Jy[i.type]];s&&s(i)}i.type in this._deferredEvents&&(this._deferredEvents[i.type]=!1)},this._MapClass=e,this.props=n,this._initialize(r)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const n=this.props;this.props=e;const r=this._updateSettings(e,n);r&&this._createShadowTransform(this._map);const i=this._updateSize(e),s=this._updateViewState(e,!0);this._updateStyle(e,n),this._updateStyleComponents(e,n),this._updateHandlers(e,n),(r||i||s&&!this._map.isMoving())&&this.redraw()}static reuse(e,n){const r=mu.savedMaps.pop();if(!r)return null;const i=r.map,s=i.getContainer();for(n.className=s.className;s.childNodes.length>0;)n.appendChild(s.childNodes[0]);i._container=n,r.setProps({...e,styleDiffing:!1}),i.resize();const{initialViewState:o}=e;return o&&(o.bounds?i.fitBounds(o.bounds,{...o.fitBoundsOptions,duration:0}):r._updateViewState(o,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",()=>i.fire("load")),r}_initialize(e){const{props:n}=this,r={...n,...n.initialViewState,accessToken:n.mapboxAccessToken||G5()||null,container:e,style:ix(n.mapStyle)},i=r.initialViewState||r.viewState||r;if(Object.assign(r,{center:[i.longitude||0,i.latitude||0],zoom:i.zoom||0,pitch:i.pitch||0,bearing:i.bearing||0}),n.gl){const f=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=f,n.gl)}const s=new this._MapClass(r);i.padding&&s.setPadding(i.padding),n.cursor&&(s.getCanvas().style.cursor=n.cursor),this._createShadowTransform(s);const o=s._render;s._render=f=>{this._inRender=!0,o.call(s,f),this._inRender=!1};const a=s._renderTaskQueue.run;s._renderTaskQueue.run=f=>{a.call(s._renderTaskQueue,f),this._onBeforeRepaint()},s.on("render",()=>this._onAfterRepaint());const l=s.fire;s.fire=this._fireEvent.bind(this,l),s.on("resize",()=>{this._renderTransform.resize(s.transform.width,s.transform.height)}),s.on("styledata",()=>this._updateStyleComponents(this.props,{})),s.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const f in sx)s.on(f,this._onPointerEvent);for(const f in Jy)s.on(f,this._onCameraEvent);for(const f in ox)s.on(f,this._onEvent);this._map=s}recycle(){mu.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const n=D5(e.transform);e.painter.transform=n,this._renderTransform=n}_updateSize(e){const{viewState:n}=e;if(n){const r=this._map;if(n.width!==r.transform.width||n.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(e,n){if(this._internalUpdate)return!1;const r=this._map,i=this._renderTransform,{zoom:s,pitch:o,bearing:a}=i,l=r.isMoving();l&&(i.cameraElevationReference="sea");const f=rx(i,{...nx(r.transform),...e});if(l&&(i.cameraElevationReference="ground"),f&&n){const d=this._deferredEvents;d.move=!0,d.zoom||(d.zoom=s!==i.zoom),d.rotate||(d.rotate=a!==i.bearing),d.pitch||(d.pitch=o!==i.pitch)}return l||rx(r.transform,e),f}_updateSettings(e,n){const r=this._map;let i=!1;for(const s of N5)s in e&&!ra(e[s],n[s])&&(i=!0,r[`set${s[0].toUpperCase()}${s.slice(1)}`](e[s]));return i}_updateStyle(e,n){if(e.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=e.cursor),e.mapStyle!==n.mapStyle){const r={diff:e.styleDiffing};return"localIdeographFontFamily"in e&&(r.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(ix(e.mapStyle),r),!0}return!1}_updateStyleComponents(e,n){const r=this._map;let i=!1;return r.style.loaded()&&("light"in e&&!ra(e.light,n.light)&&(i=!0,r.setLight(e.light)),"fog"in e&&!ra(e.fog,n.fog)&&(i=!0,r.setFog(e.fog)),"terrain"in e&&!ra(e.terrain,n.terrain)&&(!e.terrain||r.getSource(e.terrain.source))&&(i=!0,r.setTerrain(e.terrain))),i}_updateHandlers(e,n){const r=this._map;let i=!1;for(const s of U5){const o=e[s];ra(o,n[s])||(i=!0,o?r[s].enable(o):r[s].disable())}return i}_updateHover(e){var n;const{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){const s=e.type,o=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0;let a;if(s==="mousemove")try{a=this._map.queryRenderedFeatures(e.point,{layers:r.interactiveLayerIds})}catch{a=[]}else a=[];const l=a.length>0;!l&&o&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=a,l&&!o&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=s}else this._hoveredFeatures=null}_fireEvent(e,n,r){const i=this._map,s=i.transform,o=typeof n=="string"?n:n.type;return o==="move"&&this._updateViewState(this.props,!1),o in Jy&&(typeof n=="object"&&(n.viewState=nx(s)),this._map.isMoving())?(i.transform=this._renderTransform,e.call(i,n,r),i.transform=s,i):(e.call(i,n,r),i)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const r in this._deferredEvents)this._deferredEvents[r]&&e.fire(r);this._internalUpdate=!1;const n=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=n}}}mu.savedMaps=[];function G5(){let t=null;if(typeof location<"u"){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||process.env.MapboxAccessToken}catch{}try{t=t||process.env.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const z5=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function V5(t,e){if(!t)return null;const n=t.map,r={getMap:()=>n,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:i=>t.transform.locationPoint(e.LngLat.convert(i)),unproject:i=>t.transform.pointLocation(e.Point.convert(i)),queryTerrainElevation:(i,s)=>{const o=n.transform;n.transform=t.transform;const a=n.queryTerrainElevation(i,s);return n.transform=o,a}};for(const i of j5(n))!(i in r)&&!z5.includes(i)&&(r[i]=n[i].bind(n));return r}function j5(t){const e=new Set;let n=t;for(;n;){for(const r of Object.getOwnPropertyNames(n))r[0]!=="_"&&typeof t[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&e.add(r);n=Object.getPrototypeOf(n)}return Array.from(e)}const H5=typeof document<"u"?ie.exports.useLayoutEffect:ie.exports.useEffect,W5=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function Q5(t,e){for(const n of W5)n in e&&(t[n]=e[n]);e.RTLTextPlugin&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(e.RTLTextPlugin,n=>{n&&console.error(n)},!1)}const gm=ie.exports.createContext(null),$5={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:t=>console.error(t.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},zb=ie.exports.forwardRef((t,e)=>{const n=ie.exports.useContext(O5),[r,i]=ie.exports.useState(null),s=ie.exports.useRef(),{current:o}=ie.exports.useRef({mapLib:null,map:null});ie.exports.useEffect(()=>{const l=t.mapLib;let f=!0,d;return Promise.resolve(l||x5(()=>import("./mapbox-gl.ce920e10.js").then(g=>g.m),[],import.meta.url)).then(g=>{if(!!f){if(g.Map||(g=g.default),!g||!g.Map)throw new Error("Invalid mapLib");if(g.supported(t))Q5(g,t),t.reuseMaps&&(d=mu.reuse(t,s.current)),d||(d=new mu(g.Map,t,s.current)),o.map=V5(d,g),o.mapLib=g,i(d),n==null||n.onMapMount(o.map,t.id);else throw new Error("Map is not supported by this browser")}}).catch(g=>{t.onError({type:"error",target:null,originalEvent:null,error:g})}),()=>{f=!1,d&&(n==null||n.onMapUnmount(t.id),t.reuseMaps?d.recycle():d.destroy())}},[]),H5(()=>{r&&r.setProps(t)}),ie.exports.useImperativeHandle(e,()=>o.map,[r]);const a=ie.exports.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]);return Gt("div",{id:t.id,ref:s,style:a,children:r&&Gt(gm.Provider,{value:o,children:t.children})})});zb.displayName="Map";zb.defaultProps=$5;const X5=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Vl(t,e){if(!t||!e)return;const n=t.style;for(const r in e){const i=e[r];Number.isFinite(i)&&!X5.test(r)?n[r]=`${i}px`:n[r]=i}}const J5={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};function FL(t){const{map:e,mapLib:n}=ie.exports.useContext(gm),r=ie.exports.useRef({props:t});r.current.props=t;const i=ie.exports.useMemo(()=>{let s=!1;ie.exports.Children.forEach(t.children,l=>{l&&(s=!0)});const o={...t,element:s?document.createElement("div"):null},a=new n.Marker(o).setLngLat([t.longitude,t.latitude]);return a.getElement().addEventListener("click",l=>{var f,d;(d=(f=r.current.props).onClick)===null||d===void 0||d.call(f,{type:"click",target:a,originalEvent:l})}),a.on("dragstart",l=>{var f,d;const g=l;g.lngLat=i.getLngLat(),(d=(f=r.current.props).onDragStart)===null||d===void 0||d.call(f,g)}),a.on("drag",l=>{var f,d;const g=l;g.lngLat=i.getLngLat(),(d=(f=r.current.props).onDrag)===null||d===void 0||d.call(f,g)}),a.on("dragend",l=>{var f,d;const g=l;g.lngLat=i.getLngLat(),(d=(f=r.current.props).onDragEnd)===null||d===void 0||d.call(f,g)}),a},[]);return ie.exports.useEffect(()=>(i.addTo(e.getMap()),()=>{i.remove()}),[]),ie.exports.useEffect(()=>{Vl(i.getElement(),t.style)},[t.style]),(i.getLngLat().lng!==t.longitude||i.getLngLat().lat!==t.latitude)&&i.setLngLat([t.longitude,t.latitude]),t.offset&&!k5(i.getOffset(),t.offset)&&i.setOffset(t.offset),i.isDraggable()!==t.draggable&&i.setDraggable(t.draggable),i.getRotation()!==t.rotation&&i.setRotation(t.rotation),i.getRotationAlignment()!==t.rotationAlignment&&i.setRotationAlignment(t.rotationAlignment),i.getPitchAlignment()!==t.pitchAlignment&&i.setPitchAlignment(t.pitchAlignment),i.getPopup()!==t.popup&&i.setPopup(t.popup),Ch.exports.createPortal(t.children,i.getElement())}FL.defaultProps=J5;ie.exports.memo(FL);function ax(t){return new Set(t?t.trim().split(/\s+/):[])}function K5(t){const{map:e,mapLib:n}=ie.exports.useContext(gm),r=ie.exports.useMemo(()=>document.createElement("div"),[]),i=ie.exports.useRef({props:t});i.current.props=t;const s=ie.exports.useMemo(()=>{const o={...t},a=new n.Popup(o).setLngLat([t.longitude,t.latitude]);return a.once("open",l=>{var f,d;(d=(f=i.current.props).onOpen)===null||d===void 0||d.call(f,l)}),a},[]);if(ie.exports.useEffect(()=>{const o=a=>{var l,f;(f=(l=i.current.props).onClose)===null||f===void 0||f.call(l,a)};return s.on("close",o),s.setDOMContent(r).addTo(e.getMap()),()=>{s.off("close",o),s.isOpen()&&s.remove()}},[]),ie.exports.useEffect(()=>{Vl(s.getElement(),t.style)},[t.style]),s.isOpen()&&((s.getLngLat().lng!==t.longitude||s.getLngLat().lat!==t.latitude)&&s.setLngLat([t.longitude,t.latitude]),t.offset&&!ra(s.options.offset,t.offset)&&s.setOffset(t.offset),(s.options.anchor!==t.anchor||s.options.maxWidth!==t.maxWidth)&&(s.options.anchor=t.anchor,s.setMaxWidth(t.maxWidth)),s.options.className!==t.className)){const o=ax(s.options.className),a=ax(t.className);for(const l of o)a.has(l)||s.removeClassName(l);for(const l of a)o.has(l)||s.addClassName(l);s.options.className=t.className}return Ch.exports.createPortal(t.children,r)}ie.exports.memo(K5);function Lh(t,e,n){const r=ie.exports.useContext(gm),i=ie.exports.useMemo(()=>t(r),[]);return ie.exports.useEffect(()=>{var s;const{map:o}=r;return o.hasControl(i)||o.addControl(i,(s=n||e)===null||s===void 0?void 0:s.position),()=>{typeof e=="function"&&e(r),o.hasControl(i)&&o.removeControl(i)}},[]),i}function Y5(t){const e=Lh(({mapLib:n})=>new n.AttributionControl(t),{position:t.position});return ie.exports.useEffect(()=>{Vl(e._container,t.style)},[t.style]),null}ie.exports.memo(Y5);function q5(t){const e=Lh(({mapLib:n})=>new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return ie.exports.useEffect(()=>{Vl(e._controlContainer,t.style)},[t.style]),null}ie.exports.memo(q5);const kL=ie.exports.forwardRef((t,e)=>{const n=ie.exports.useRef({props:t}),r=Lh(({mapLib:i})=>{const s=new i.GeolocateControl(t),o=s._setupUI;return s._setupUI=a=>{s._container.hasChildNodes()||o(a)},s.on("geolocate",a=>{var l,f;(f=(l=n.current.props).onGeolocate)===null||f===void 0||f.call(l,a)}),s.on("error",a=>{var l,f;(f=(l=n.current.props).onError)===null||f===void 0||f.call(l,a)}),s.on("outofmaxbounds",a=>{var l,f;(f=(l=n.current.props).onOutOfMaxBounds)===null||f===void 0||f.call(l,a)}),s.on("trackuserlocationstart",a=>{var l,f;(f=(l=n.current.props).onTrackUserLocationStart)===null||f===void 0||f.call(l,a)}),s.on("trackuserlocationend",a=>{var l,f;(f=(l=n.current.props).onTrackUserLocationEnd)===null||f===void 0||f.call(l,a)}),s},{position:t.position});return n.current.props=t,ie.exports.useImperativeHandle(e,()=>({trigger:()=>r.trigger()}),[]),ie.exports.useEffect(()=>{Vl(r._container,t.style)},[t.style]),null});kL.displayName="GeolocateControl";ie.exports.memo(kL);function Z5(t){const e=Lh(({mapLib:n})=>new n.NavigationControl(t),{position:t.position});return ie.exports.useEffect(()=>{Vl(e._container,t.style)},[t.style]),null}ie.exports.memo(Z5);const eG={unit:"metric",maxWidth:100};function NL(t){const e=Lh(({mapLib:n})=>new n.ScaleControl(t),{position:t.position});return(e.options.unit!==t.unit||e.options.maxWidth!==t.maxWidth)&&(e.options.maxWidth=t.maxWidth,e.setUnit(t.unit)),ie.exports.useEffect(()=>{Vl(e._container,t.style)},[t.style]),null}NL.defaultProps=eG;ie.exports.memo(NL);function Lt(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const yu=Boolean(typeof process!="object"||String(process)!=="[object process]"||process.browser),lx=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);lx&&parseFloat(lx[1]);const tG="3.2.6";function Qs(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const Ky={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},nG=Ky.global||Ky.self||Ky.window||{},vu=typeof process!="object"||String(process)!=="[object process]"||process.browser,Vb=typeof importScripts=="function",rG=typeof window<"u"&&typeof window.orientation<"u",cx=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);cx&&parseFloat(cx[1]);function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class iG{constructor(e,n){T(this,"name",void 0),T(this,"workerThread",void 0),T(this,"isRunning",!0),T(this,"result",void 0),T(this,"_resolve",()=>{}),T(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){Qs(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Qs(this.isRunning),this.isRunning=!1,this._reject(e)}}class Yy{}const qy=new Map;function sG(t){Qs(t.source&&!t.url||!t.source&&t.url);let e=qy.get(t.source||t.url);return e||(t.url&&(e=oG(t.url),qy.set(t.url,e)),t.source&&(e=UL(t.source),qy.set(t.source,e))),Qs(e),e}function oG(t){if(!t.startsWith("http"))return t;const e=aG(t);return UL(e)}function UL(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function aG(t){return`try {
  importScripts('`.concat(t,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function zL(t,e=!0,n){const r=n||new Set;if(t){if(ux(t))r.add(t);else if(ux(t.buffer))r.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const i in t)zL(t[i],e,r)}}return n===void 0?Array.from(r):[]}function ux(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const Zy=()=>{};class E1{static isSupported(){return typeof Worker<"u"&&vu||typeof Yy!==void 0}constructor(e){T(this,"name",void 0),T(this,"source",void 0),T(this,"url",void 0),T(this,"terminated",!1),T(this,"worker",void 0),T(this,"onMessage",void 0),T(this,"onError",void 0),T(this,"_loadableURL","");const{name:n,source:r,url:i}=e;Qs(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=Zy,this.onError=s=>console.log(s),this.worker=vu?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=Zy,this.onError=Zy,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,n){n=n||zL(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=sG({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new Yy(r,{eval:!1})}else if(this.source)e=new Yy(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class lG{static isSupported(){return E1.isSupported()}constructor(e){T(this,"name","unnamed"),T(this,"source",void 0),T(this,"url",void 0),T(this,"maxConcurrency",1),T(this,"maxMobileConcurrency",1),T(this,"onDebug",()=>{}),T(this,"reuseWorkers",!0),T(this,"props",{}),T(this,"jobQueue",[]),T(this,"idleQueue",[]),T(this,"count",0),T(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e,n=(i,s,o)=>i.done(o),r=(i,s)=>i.error(s)){const i=new Promise(s=>(this.jobQueue.push({name:e,onMessage:n,onError:r,onStart:s}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const r=new iG(n.name,e);e.onMessage=i=>n.onMessage(r,i.type,i.payload),e.onError=i=>n.onError(r,i),n.onStart(r);try{await r.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new E1({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return rG?this.maxMobileConcurrency:this.maxConcurrency}}const cG={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class lo{static isSupported(){return E1.isSupported()}static getWorkerFarm(e={}){return lo._workerFarm=lo._workerFarm||new lo({}),lo._workerFarm.setProps(e),lo._workerFarm}constructor(e){T(this,"props",void 0),T(this,"workerPools",new Map),this.props={...cG},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:r,url:i}=e;let s=this.workerPools.get(n);return s||(s=new lG({name:n,source:r,url:i}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}T(lo,"_workerFarm",void 0);const uG="latest";function AG(t,e={}){const n=e[t.id]||{},r="".concat(t.id,"-worker.js");let i=n.workerUrl;if(!i&&t.id==="compression"&&(i=e.workerUrl),e._workerType==="test"&&(i="modules/".concat(t.module,"/dist/").concat(r)),!i){let s=t.version;s==="latest"&&(s=uG);const o=s?"@".concat(s):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(o,"/dist/").concat(r)}return Qs(i),i}function fG(t,e=tG){Qs(t,"no worker provided");const n=t.version;return!(!e||!n)}const hG={},dG=Object.freeze(Object.defineProperty({__proto__:null,default:hG},Symbol.toStringTag,{value:"Module"})),pG="3.2.6",ev={};async function fl(t,e=null,n={}){return e&&(t=gG(t,e,n)),ev[t]=ev[t]||mG(t),await ev[t]}function gG(t,e,n){if(t.startsWith("http"))return t;const r=n.modules||{};return r[t]?r[t]:vu?n.CDN?(Qs(n.CDN.startsWith("http")),"".concat(n.CDN,"/").concat(e,"@").concat(pG,"/dist/libs/").concat(t)):Vb?"../src/libs/".concat(t):"modules/".concat(e,"/src/libs/").concat(t):"modules/".concat(e,"/dist/libs/").concat(t)}async function mG(t){if(t.endsWith("wasm"))return await(await fetch(t)).arrayBuffer();if(!vu)try{return dG&&void 0}catch{return null}if(Vb)return importScripts(t);const n=await(await fetch(t)).text();return yG(n,t)}function yG(t,e){if(!vu)return;if(Vb)return eval.call(nG,t),null;const n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch{n.text=t}return document.body.appendChild(n),null}function vG(t,e){return!lo.isSupported()||!vu&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function _G(t,e,n,r,i){const s=t.id,o=AG(t,n),l=lo.getWorkerFarm(n).getWorkerPool({name:s,url:o});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const f=await l.startJob("process-on-worker",bG.bind(null,i));return f.postMessage("process",{input:e,options:n,context:r}),await(await f.result).result}async function bG(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:i,input:s,options:o}=r;try{const a=await t(s,o);e.postMessage("done",{id:i,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:i,error:l})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}function wG(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?Ax(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?Ax(t,0,e):""}function Ax(t,e,n){if(t.byteLength<=e+n)return"";const r=new DataView(t);let i="";for(let s=0;s<n;s++)i+=String.fromCharCode(r.getUint8(e+s));return i}function EG(t){try{return JSON.parse(t)}catch{throw new Error('Failed to parse JSON from data starting with "'.concat(wG(t),'"'))}}function VL(t){return t&&typeof t=="object"&&t.isBuffer}function TG(t){return VL(t)?new Uint8Array(t.buffer,t.byteOffset,t.length).slice().buffer:t}function jL(t){if(VL(t))return TG(t);if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function SG(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}function xG(...t){const e=t.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),n=e.reduce((s,o)=>s+o.byteLength,0),r=new Uint8Array(n);let i=0;for(const s of e)r.set(s,i),i+=s.byteLength;return r.buffer}function tv(...t){const e=t,n=e&&e.length>1&&e[0].constructor||null;if(!n)throw new Error('"concatenateTypedArrays" - incorrect quantity of arguments or arguments have incompatible data types');const r=e.reduce((o,a)=>o+a.length,0),i=new n(r);let s=0;for(const o of e)i.set(o,s),s+=o.length;return i}function jb(t,e,n){const r=n!==void 0?new Uint8Array(t).subarray(e,e+n):new Uint8Array(t).subarray(e);return new Uint8Array(r).buffer}function Rh(t,e){return Lt(t>=0),Lt(e>0),t+(e-1)&~(e-1)}function CG(t,e,n){let r;if(t instanceof ArrayBuffer)r=new Uint8Array(t);else{const i=t.byteOffset,s=t.byteLength;r=new Uint8Array(t.buffer||t.arrayBuffer,i,s)}return e.set(r,n),n+Rh(r.byteLength,4)}async function PG(t){const e=[];for await(const n of t)e.push(n);return xG(...e)}function fx(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class hx{constructor(e,n){T(this,"name",void 0),T(this,"type",void 0),T(this,"sampleSize",1),T(this,"time",void 0),T(this,"count",void 0),T(this,"samples",void 0),T(this,"lastTiming",void 0),T(this,"lastSampleTime",void 0),T(this,"lastSampleCount",void 0),T(this,"_count",0),T(this,"_time",0),T(this,"_samples",0),T(this,"_startTime",0),T(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=fx(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(fx()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class Oh{constructor(e){T(this,"id",void 0),T(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:r}=e;return this.stats[n]||(e instanceof hx?this.stats[n]=e:this.stats[n]=new hx(n,r)),this.stats[n]}}const MG="Queued Requests",IG="Active Requests",BG="Cancelled Requests",LG="Queued Requests Ever",RG="Active Requests Ever",OG={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class HL{constructor(e={}){T(this,"props",void 0),T(this,"stats",void 0),T(this,"activeRequestCount",0),T(this,"requestQueue",[]),T(this,"requestMap",new Map),T(this,"deferredUpdate",null),this.props={...OG,...e},this.stats=new Oh({id:this.props.id}),this.stats.get(MG),this.stats.get(IG),this.stats.get(BG),this.stats.get(LG),this.stats.get(RG)}scheduleRequest(e,n=()=>0){if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(e))return this.requestMap.get(e);const r={handle:e,priority:0,getPriority:n},i=new Promise(s=>(r.resolve=s,r));return this.requestQueue.push(r),this.requestMap.set(e,i),this._issueNewRequests(),i}_issueRequest(e){const{handle:n,resolve:r}=e;let i=!1;const s=()=>{i||(i=!0,this.requestMap.delete(n),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,r?r({done:s}):Promise.resolve({done:s})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout(()=>this._issueNewRequestsAsync(),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(e!==0){this._updateAllRequests();for(let n=0;n<e;++n){const r=this.requestQueue.shift();r&&this._issueRequest(r)}}}_updateAllRequests(){const e=this.requestQueue;for(let n=0;n<e.length;++n){const r=e[n];this._updateRequest(r)||(e.splice(n,1),this.requestMap.delete(r.handle),n--)}e.sort((n,r)=>n.priority-r.priority)}_updateRequest(e){return e.priority=e.getPriority(e.handle),e.priority<0?(e.resolve(null),!1):!0}}let DG="";const dx={};function FG(t){for(const e in dx)if(t.startsWith(e)){const n=dx[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(DG).concat(t)),t}function kG(t){const e=t&&t.lastIndexOf("/");return e>=0?t.substr(e+1):""}function WL(t){const e=t&&t.lastIndexOf("/");return e>=0?t.substr(0,e):""}const NG=t=>typeof t=="boolean",mf=t=>typeof t=="function",Dh=t=>t!==null&&typeof t=="object",px=t=>Dh(t)&&t.constructor==={}.constructor,UG=t=>t&&typeof t[Symbol.iterator]=="function",GG=t=>t&&typeof t[Symbol.asyncIterator]=="function",Vu=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,ju=t=>typeof Blob<"u"&&t instanceof Blob,zG=t=>t&&typeof t=="object"&&t.isBuffer,VG=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||Dh(t)&&mf(t.tee)&&mf(t.cancel)&&mf(t.getReader),jG=t=>Dh(t)&&mf(t.read)&&mf(t.pipe)&&NG(t.readable),QL=t=>VG(t)||jG(t),HG=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,WG=/^([-\w.]+\/[-\w.+]+)/;function QG(t){const e=WG.exec(t);return e?e[1]:t}function gx(t){const e=HG.exec(t);return e?e[1]:""}const $G=/\?.*/;function mm(t){if(Vu(t)){const e=nv(t.url||""),n=t.headers.get("content-type")||"";return{url:e,type:QG(n)||gx(e)}}return ju(t)?{url:nv(t.name||""),type:t.type||""}:typeof t=="string"?{url:nv(t),type:gx(t)}:{url:"",type:""}}function XG(t){return Vu(t)?t.headers["content-length"]||-1:ju(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}function nv(t){return t.replace($G,"")}async function $L(t){if(Vu(t))return t;const e={},n=XG(t);n>=0&&(e["content-length"]=String(n));const{url:r,type:i}=mm(t);i&&(e["content-type"]=i);const s=await YG(t);s&&(e["x-first-bytes"]=s),typeof t=="string"&&(t=new TextEncoder().encode(t));const o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:r}),o}async function JG(t){if(!t.ok){const e=await KG(t);throw new Error(e)}}async function KG(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let r=t.statusText;n.includes("application/json")&&(r+=" ".concat(await t.text())),e+=r,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}async function YG(t){if(typeof t=="string")return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(r=>{const i=new FileReader;i.onload=s=>{var o;return r(s==null||(o=s.target)===null||o===void 0?void 0:o.result)},i.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5),r=qG(n);return"data:base64,".concat(r)}return null}function qG(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}async function T1(t,e){if(typeof t=="string"){t=FG(t);let n=e;return e!=null&&e.fetch&&typeof(e==null?void 0:e.fetch)!="function"&&(n=e.fetch),await fetch(t,n)}return await $L(t)}function XL(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&Boolean(process.versions.electron))return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function Oo(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||XL()}const cp={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},n0=cp.window||cp.self||cp.global,IA=cp.process||{},JL=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Oo();const rv=globalThis;function KL(t){if(!t&&!Oo())return"Node";if(XL(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i?"IE":rv.chrome?"Chrome":rv.safari?"Safari":rv.mozInnerScreenX?"Firefox":"Unknown"}function ZG(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class ez{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";T(this,"storage",void 0),T(this,"id",void 0),T(this,"config",{}),this.storage=ZG(r),this.id=e,this.config={},Object.assign(this.config,n),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){return this.config={},this.updateConfiguration(e)}updateConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}return this}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function tz(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function nz(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function iv(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const s=t.width*n,o=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let sg;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(sg||(sg={}));function mx(t){return typeof t=="string"?sg[t.toUpperCase()]||sg.WHITE:t}function rz(t,e,n){return!Oo&&typeof t=="string"&&(e&&(e=mx(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),n&&(e=mx(n),t="\x1B[".concat(n+10,"m").concat(t,"\x1B[49m"))),t}function iz(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const i of r)typeof t[i]=="function"&&(e.find(s=>i===s)||(t[i]=t[i].bind(t)))}function og(t,e){if(!t)throw new Error(e||"Assertion failed")}function sc(){let t;if(Oo&&"performance"in n0){var e,n;t=n0==null||(e=n0.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in IA){var r;const i=IA==null||(r=IA.hrtime)===null||r===void 0?void 0:r.call(IA);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const oc={debug:Oo&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},sz={enabled:!0,level:0};function Ti(){}const yx={},vx={once:!0};class Fh{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};T(this,"id",void 0),T(this,"VERSION",JL),T(this,"_startTs",sc()),T(this,"_deltaTs",sc()),T(this,"_storage",void 0),T(this,"userData",{}),T(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this._storage=new ez("__probe-".concat(this.id,"__"),sz),this.userData={},this.timeStamp("".concat(this.id," started")),iz(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((sc()-this._startTs).toPrecision(10))}getDelta(){return Number((sc()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:e}),this}setLevel(e){return this._storage.updateConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.updateConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){og(e,n)}warn(e){return this._getLogFunction(0,e,oc.warn,arguments,vx)}error(e){return this._getLogFunction(0,e,oc.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,oc.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,oc.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return this._getLogFunction(e,n,oc.debug||oc.info,arguments,vx)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||Ti,r&&[r],{tag:cz(n)}):Ti}image(e){let{logLevel:n,priority:r,image:i,message:s="",scale:o=1}=e;return this._shouldLog(n||r)?Oo?lz({image:i,message:s,scale:o}):az({image:i,message:s,scale:o}):Ti}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||Ti)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=_x({logLevel:e,message:n,opts:r}),{collapsed:s}=r;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Ti)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=YL(e)}_getLogFunction(e,n,r,i,s){if(this._shouldLog(e)){s=_x({logLevel:e,message:n,args:i,opts:s}),r=r||s.method,og(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=sc();const o=s.tag||s.message;if(s.once)if(!yx[o])yx[o]=sc();else return Ti;return n=oz(this.id,s.message,s),r.bind(console,n,...s.args)}return Ti}}T(Fh,"VERSION",JL);function YL(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return og(Number.isFinite(e)&&e>=0),e}function _x(t){const{logLevel:e,message:n}=t;t.logLevel=YL(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return og(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function oz(t,e,n){if(typeof e=="string"){const r=n.time?nz(tz(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=rz(e,n.color,n.background)}return e}function az(t){let{image:e,message:n="",scale:r=1}=t,i=null;try{i=module.require("asciify-image")}catch{}return i?()=>i(e,{fit:"box",width:"".concat(Math.round(80*r),"%")}).then(s=>console.log(s)):Ti}function lz(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const s=new Image;return s.onload=()=>{const o=iv(s,n,r);console.log(...o)},s.src=e,Ti}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...iv(e,n,r)),Ti;if(i.toLowerCase()==="canvas"){const s=new Image;return s.onload=()=>console.log(...iv(s,n,r)),s.src=e.toDataURL(),Ti}return Ti}function cz(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const bx=new Fh({id:"loaders.gl"});class uz{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class Az{constructor(){T(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}}const qL={fetch:null,mimeType:void 0,nothrow:!1,log:new Az,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:yu,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},fz={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function ZL(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const eR=()=>{const t=ZL();return t.globalOptions=t.globalOptions||{...qL},t.globalOptions};function hz(t,e,n,r){return n=n||[],n=Array.isArray(n)?n:[n],dz(t,n),gz(e,t,r)}function tR(t,e){const n=eR(),r=t||n;return typeof r.fetch=="function"?r.fetch:Dh(r.fetch)?i=>T1(i,r):e!=null&&e.fetch?e==null?void 0:e.fetch:T1}function dz(t,e){wx(t,null,qL,fz,e);for(const n of e){const r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},s=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};wx(r,n.id,i,s,e)}}function wx(t,e,n,r,i){const s=e||"Top level",o=e?"".concat(e,"."):"";for(const a in t){const l=!e&&Dh(t[a]),f=a==="baseUri"&&!e,d=a==="workerUrl"&&e;if(!(a in n)&&!f&&!d){if(a in r)bx.warn("".concat(s," loader option '").concat(o).concat(a,"' no longer supported, use '").concat(r[a],"'"))();else if(!l){const g=pz(a,i);bx.warn("".concat(s," loader option '").concat(o).concat(a,"' not recognized. ").concat(g))()}}}}function pz(t,e){const n=t.toLowerCase();let r="";for(const i of e)for(const s in i.options){if(t===s)return"Did you mean '".concat(i.id,".").concat(s,"'?");const o=s.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(r=r||"Did you mean '".concat(i.id,".").concat(s,"'?"))}return r}function gz(t,e,n){const i={...t.options||{}};return mz(i,n),i.log===null&&(i.log=new uz),Ex(i,eR()),Ex(i,e),i}function Ex(t,e){for(const n in e)if(n in e){const r=e[n];px(r)&&px(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function mz(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function Hb(t){var e;return t?(Array.isArray(t)&&(t=t[0]),Array.isArray((e=t)===null||e===void 0?void 0:e.extensions)):!1}function Wb(t){var e,n;Lt(t,"null loader"),Lt(Hb(t),"invalid loader");let r;return Array.isArray(t)&&(r=t[1],t=t[0],t={...t,options:{...t.options,...r}}),((e=t)!==null&&e!==void 0&&e.parseTextSync||(n=t)!==null&&n!==void 0&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const nR=()=>{const t=ZL();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function yz(t){const e=nR();t=Array.isArray(t)?t:[t];for(const n of t){const r=Wb(n);e.find(i=>r===i)||e.unshift(r)}}function vz(){return nR()}const _z=new Fh({id:"loaders.gl"}),bz=/\.([^.]+)$/;async function wz(t,e=[],n,r){if(!rR(t))return null;let i=Tx(t,e,{...n,nothrow:!0},r);if(i)return i;if(ju(t)&&(t=await t.slice(0,10).arrayBuffer(),i=Tx(t,e,n,r)),!i&&!(n!=null&&n.nothrow))throw new Error(iR(t));return i}function Tx(t,e=[],n,r){if(!rR(t))return null;if(e&&!Array.isArray(e))return Wb(e);let i=[];e&&(i=i.concat(e)),n!=null&&n.ignoreRegisteredLoaders||i.push(...vz()),Tz(i);const s=Ez(t,i,n,r);if(!s&&!(n!=null&&n.nothrow))throw new Error(iR(t));return s}function Ez(t,e,n,r){const{url:i,type:s}=mm(t),o=i||(r==null?void 0:r.url);let a=null,l="";if(n!=null&&n.mimeType&&(a=sv(e,n==null?void 0:n.mimeType),l="match forced by supplied MIME type ".concat(n==null?void 0:n.mimeType)),a=a||Sz(e,o),l=l||(a?"matched url ".concat(o):""),a=a||sv(e,s),l=l||(a?"matched MIME type ".concat(s):""),a=a||Cz(e,t),l=l||(a?"matched initial data ".concat(sR(t)):""),a=a||sv(e,n==null?void 0:n.fallbackMimeType),l=l||(a?"matched fallback MIME type ".concat(s):""),l){var f;_z.log(1,"selectLoader selected ".concat((f=a)===null||f===void 0?void 0:f.name,": ").concat(l,"."))}return a}function rR(t){return!(t instanceof Response&&t.status===204)}function iR(t){const{url:e,type:n}=mm(t);let r="No valid loader found (";r+=e?"".concat(kG(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const i=t?sR(t):"";return r+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",r+=")",r}function Tz(t){for(const e of t)Wb(e)}function Sz(t,e){const n=e&&bz.exec(e),r=n&&n[1];return r?xz(t,r):null}function xz(t,e){e=e.toLowerCase();for(const n of t)for(const r of n.extensions)if(r.toLowerCase()===e)return n;return null}function sv(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function Cz(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(Pz(e,n))return n}else if(ArrayBuffer.isView(e)){if(Sx(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&Sx(e,0,n))return n;return null}function Pz(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function Sx(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>Mz(t,e,n,i))}function Mz(t,e,n,r){if(r instanceof ArrayBuffer)return SG(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":const i=S1(t,e,r.length);return r===i;default:return!1}}function sR(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?S1(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?S1(t,0,e):""}function S1(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let i="";for(let s=0;s<n;s++)i+=String.fromCharCode(r.getUint8(e+s));return i}const Iz=256*1024;function*Bz(t,e){const n=(e==null?void 0:e.chunkSize)||Iz;let r=0;const i=new TextEncoder;for(;r<t.length;){const s=Math.min(t.length-r,n),o=t.slice(r,r+s);r+=s,yield i.encode(o)}}const Lz=256*1024;function*Rz(t,e={}){const{chunkSize:n=Lz}=e;let r=0;for(;r<t.byteLength;){const i=Math.min(t.byteLength-r,n),s=new ArrayBuffer(i),o=new Uint8Array(t,r,i);new Uint8Array(s).set(o),r+=i,yield s}}const Oz=1024*1024;async function*Dz(t,e){const n=(e==null?void 0:e.chunkSize)||Oz;let r=0;for(;r<t.size;){const i=r+n,s=await t.slice(r,i).arrayBuffer();r=i,yield s}}function xx(t,e){return yu?Fz(t,e):kz(t)}async function*Fz(t,e){const n=t.getReader();let r;try{for(;;){const i=r||n.read();e!=null&&e._streamReadAhead&&(r=n.read());const{done:s,value:o}=await i;if(s)return;yield jL(o)}}catch{n.releaseLock()}}async function*kz(t,e){for await(const n of t)yield jL(n)}function Nz(t,e){if(typeof t=="string")return Bz(t,e);if(t instanceof ArrayBuffer)return Rz(t,e);if(ju(t))return Dz(t,e);if(QL(t))return xx(t,e);if(Vu(t))return xx(t.body,e);throw new Error("makeIterator")}const oR="Cannot convert supplied data type";function Uz(t,e,n){if(e.text&&typeof t=="string")return t;if(zG(t)&&(t=t.buffer),t instanceof ArrayBuffer){const r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer;const i=t.byteLength||t.length;return(t.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(t.byteOffset,t.byteOffset+i)),r}throw new Error(oR)}async function Gz(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||r)return Uz(t,e);if(ju(t)&&(t=await $L(t)),Vu(t)){const i=t;return await JG(i),e.binary?await i.arrayBuffer():await i.text()}if(QL(t)&&(t=Nz(t,n)),UG(t)||GG(t))return PG(t);throw new Error(oR)}function zz(t,e,n=null){if(n)return n;const r={fetch:tR(e,t),...t};return Array.isArray(r.loaders)||(r.loaders=null),r}function Vz(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...r]:r}return n&&n.length?n:null}async function Qb(t,e,n,r){Qs(!r||typeof r=="object"),e&&!Array.isArray(e)&&!Hb(e)&&(r=void 0,n=e,e=void 0),t=await t,n=n||{};const{url:i}=mm(t),o=Vz(e,r),a=await wz(t,o,n);return a?(n=hz(n,a,o,i),r=zz({url:i,parse:Qb,loaders:o},n,r),await jz(a,t,n,r)):null}async function jz(t,e,n,r){if(fG(t),Vu(e)){const i=e,{ok:s,redirected:o,status:a,statusText:l,type:f,url:d}=i,g=Object.fromEntries(i.headers.entries());r.response={headers:g,ok:s,redirected:o,status:a,statusText:l,type:f,url:d}}if(e=await Gz(e,t,n),t.parseTextSync&&typeof e=="string")return n.dataType="text",t.parseTextSync(e,n,r,t);if(vG(t,n))return await _G(t,e,n,r,Qb);if(t.parseText&&typeof e=="string")return await t.parseText(e,n,r,t);if(t.parse)return await t.parse(e,n,r,t);throw Qs(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}async function To(t,e,n,r){!Array.isArray(e)&&!Hb(e)&&(n=e,e=void 0);const i=tR(n);let s=t;return typeof t=="string"&&(s=await i(t)),ju(t)&&(s=await i(t)),await Qb(s,e,n)}const Hz="3.2.6",{_parseImageNode:Wz}=globalThis,x1=typeof Image<"u",C1=typeof ImageBitmap<"u",Qz=Boolean(Wz),P1=yu?!0:Qz;function $z(t){switch(t){case"auto":return C1||x1||P1;case"imagebitmap":return C1;case"image":return x1;case"data":return P1;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function Xz(){if(C1)return"imagebitmap";if(x1)return"image";if(P1)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function Jz(t){const e=Yz(t);if(!e)throw new Error("Not an image");return e}function Kz(t){switch(Jz(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function Yz(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const qz=/^data:image\/svg\+xml/,Zz=/\.svg((\?|#).*)?$/;function $b(t){return t&&(qz.test(t)||Zz.test(t))}function eV(t,e){if($b(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(r))}return aR(t,e)}function aR(t,e){if($b(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function lR(t,e,n){const r=eV(t,n),i=self.URL||self.webkitURL,s=typeof r!="string"&&i.createObjectURL(r);try{return await tV(s||r,e)}finally{s&&i.revokeObjectURL(s)}}async function tV(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((r,i)=>{try{n.onload=()=>r(n),n.onerror=s=>i(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){i(s)}})}const nV={};let Cx=!0;async function rV(t,e,n){let r;$b(n)?r=await lR(t,e,n):r=aR(t,n);const i=e&&e.imagebitmap;return await iV(r,i)}async function iV(t,e=null){if((sV(e)||!Cx)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),Cx=!1}return await createImageBitmap(t)}function sV(t){for(const e in t||nV)return!1;return!0}const Fs=!1,yf=!0;function Xb(t){const e=kh(t);return oV(e)||cV(e)||aV(e)||lV(e)}function oV(t){const e=kh(t);return e.byteLength>=24&&e.getUint32(0,Fs)===2303741511?{mimeType:"image/png",width:e.getUint32(16,Fs),height:e.getUint32(20,Fs)}:null}function aV(t){const e=kh(t);return e.byteLength>=10&&e.getUint32(0,Fs)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,yf),height:e.getUint16(8,yf)}:null}function lV(t){const e=kh(t);return e.byteLength>=14&&e.getUint16(0,Fs)===16973&&e.getUint32(2,yf)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,yf),height:e.getUint32(22,yf)}:null}function cV(t){const e=kh(t);if(!(e.byteLength>=3&&e.getUint16(0,Fs)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:r,sofMarkers:i}=uV();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,Fs);if(i.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,Fs),width:e.getUint16(s+7,Fs)};if(!r.has(o))return null;s+=2,s+=e.getUint16(s,Fs)}return null}function uV(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function kh(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function AV(t,e){const{mimeType:n}=Xb(t)||{},r=globalThis._parseImageNode;return Lt(r),await r(t,n)}async function fV(t,e,n){e=e||{};const i=(e.image||{}).type||"auto",{url:s}=n||{},o=hV(i);let a;switch(o){case"imagebitmap":a=await rV(t,e,s);break;case"image":a=await lR(t,e,s);break;case"data":a=await AV(t);break;default:Lt(!1)}return i==="data"&&(a=Kz(a)),a}function hV(t){switch(t){case"auto":case"data":return Xz();default:return $z(t),t}}const dV=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],pV=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],gV={image:{type:"auto",decode:!0}},Jb={id:"image",module:"images",name:"Images",version:Hz,mimeTypes:pV,extensions:dV,parse:fV,tests:[t=>Boolean(Xb(new DataView(t)))],options:gV},mV=["image/png","image/jpeg","image/gif"],ov={};function yV(t){return ov[t]===void 0&&(ov[t]=vV(t)),ov[t]}function vV(t){switch(t){case"image/webp":return _V();case"image/svg":return yu;default:if(!yu){const{_parseImageNode:e}=globalThis;return Boolean(e)&&mV.includes(t)}return!0}}function _V(){if(!yu)return!1;try{return document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")===0}catch{return!1}}const je=new Fh({id:"deck"});let M1={};function bV(t){M1=t}function fr(t,e,n,r){je.level>0&&M1[t]&&M1[t].call(null,e,n,r)}function wV(t){const e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}const EV={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:wV,parseTextSync:JSON.parse},vf="8.8.6",up=globalThis.deck&&globalThis.deck.VERSION;if(up&&up!==vf)throw new Error("deck.gl - multiple versions detected: ".concat(up," vs ").concat(vf));up||(je.log(1,"deck.gl ".concat(vf))(),globalThis.deck={...globalThis.deck,VERSION:vf,version:vf,log:je,_registerLoggers:bV},yz([EV,[Jb,{imagebitmap:{premultiplyAlpha:"none"}}]]));const TV=globalThis.deck,Ie=new Fh({id:"luma.gl"});function Cr(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const SV="Invalid WebGLRenderingContext",xV="Requires WebGL2";function ym(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&Number.isFinite(t._version))}function it(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&t._version===2)}function CV(t){return it(t)?t:null}function vm(t){return Cr(ym(t),SV),t}function gr(t){return Cr(it(t),xV),t}const ZA={};function PV(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}function MV(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)}function IV(t,e){ZA[t]=!0,e!==void 0&&PV(e)}function BV(t){const e=t.getError;t.getError=function(){let r;do r=e.apply(t),r!==0&&(ZA[r]=!0);while(r!==0);for(r in ZA)if(ZA[r])return delete ZA[r],parseInt(r,10);return 0}}const Nh=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const i=new t.VertexAttrib(n);this.attribs[r]=i}this.maxAttrib=0};Nh.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};Nh.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const jl=function(e){const n=this;this.gl=e,BV(e);const r=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:r.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:n.currentArrayBuffer=o;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=o;break}return r.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const l=n.currentVertexArrayObject.attribs[s];switch(o){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,l,f,d){const g=n.currentVertexArrayObject;g.maxAttrib=Math.max(g.maxAttrib,s);const y=g.attribs[s];return y.buffer=n.currentArrayBuffer,y.size=o,y.type=a,y.normalized=l,y.stride=f,y.offset=d,y.recache(),r.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{MV("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};jl.prototype.VERTEX_ARRAY_BINDING_OES=34229;jl.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let r=0;r<this.vertexArrayObjects.length;++r)this.vertexArrayObjects.isAlive=!1;const n=this.gl;this.maxVertexAttribs=n.getParameter(34921),this.defaultVertexArrayObject=new Nh(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};jl.prototype.createVertexArrayOES=function(){const e=new Nh(this);return this.vertexArrayObjects.push(e),e};jl.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)};jl.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof Nh&&e.hasBeenBound&&e.ext===this)};jl.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive){IV(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const r=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(i===s)return;(!i||s.elementArrayBuffer!==i.elementArrayBuffer)&&r.bindBuffer.call(n,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(i?i.maxAttrib:0,s.maxAttrib);for(let l=0;l<=a;l++){const f=s.attribs[l],d=i?i.attribs[l]:null;if((!i||f.enabled!==d.enabled)&&(f.enabled?r.enableVertexAttribArray.call(n,l):r.disableVertexAttribArray.call(n,l)),f.enabled){let g=!1;(!i||f.buffer!==d.buffer)&&(o!==f.buffer&&(r.bindBuffer.call(n,34962,f.buffer),o=f.buffer),g=!0),(g||f.cached!==d.cached)&&r.vertexAttribPointer.call(n,l,f.size,f.type,f.normalized,f.stride,f.offset)}}this.currentArrayBuffer!==o&&r.bindBuffer.call(n,34962,this.currentArrayBuffer)};function LV(t){if(typeof t.createVertexArray=="function")return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const i=e.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const n=t.getExtension;t.getExtension=function(i){const s=n.call(this,i);return s||(i!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new jl(this)),this.__OESVertexArrayObject))}}const Px="OES_element_index",Mx="WEBGL_draw_buffers",RV="EXT_disjoint_timer_query",OV="EXT_disjoint_timer_query_webgl2",DV="EXT_texture_filter_anisotropic",Ix="WEBGL_debug_renderer_info",FV=35723,kV=4352,NV=36795,UV=34047,GV=37445,zV=37446,jt=t=>it(t)?void 0:0,VV={[3074]:t=>it(t)?void 0:36064,[FV]:t=>it(t)?void 0:kV,[35977]:jt,[32937]:jt,[NV]:(t,e)=>{const n=it(t)?t.getExtension(OV):t.getExtension(RV);return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},[GV]:(t,e)=>{const n=t.getExtension(Ix);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},[zV]:(t,e)=>{const n=t.getExtension(Ix);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},[UV]:(t,e)=>{const n=t.luma.extensions[DV];return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},[32883]:jt,[35071]:jt,[37447]:jt,[36063]:(t,e)=>{if(!it(t)){const n=t.getExtension(Mx);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},[35379]:jt,[35374]:jt,[35377]:jt,[34852]:t=>{if(!it(t)){const e=t.getExtension(Mx);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},[36203]:t=>t.getExtension(Px)?2147483647:65535,[33001]:t=>t.getExtension(Px)?16777216:65535,[33e3]:t=>16777216,[37157]:jt,[35373]:jt,[35657]:jt,[36183]:jt,[37137]:jt,[34045]:jt,[35978]:jt,[35979]:jt,[35968]:jt,[35376]:jt,[35375]:jt,[35659]:jt,[37154]:jt,[35371]:jt,[35658]:jt,[35076]:jt,[35077]:jt,[35380]:jt};function jV(t,e,n){const r=VV[n],i=typeof r=="function"?r(t,e,n):r;return i!==void 0?i:e(n)}const HV="OES_vertex_array_object",cR="ANGLE_instanced_arrays",WV="WEBGL_draw_buffers",QV="EXT_disjoint_timer_query",$V="EXT_texture_filter_anisotropic",XV="VertexArray requires WebGL2 or OES_vertex_array_object extension";function JV(t,e){return{webgl2:it(t),ext:t.getExtension(e)}}const uR={[HV]:{meta:{suffix:"OES"},createVertexArray:()=>{Cr(!1,XV)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[cR]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){Cr(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[WV]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Cr(!1)}},[QV]:{meta:{suffix:"EXT"},createQuery:()=>{Cr(!1)},deleteQuery:()=>{Cr(!1)},beginQuery:()=>{Cr(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},av={readBuffer:(t,e,n)=>{it(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{const{webgl2:i,ext:s}=JV(t,cR);let o;switch(r){case 35069:o=i?void 0:!1;break;case 35070:o=!i&&!s?0:void 0;break}return o!==void 0?o:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!it(t))switch(r){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,i)=>{if(!it(t))switch(i){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,i)},getTexParameter(t,e,n,r){switch(r){case 34046:const{extensions:i}=t.luma,s=i[$V];r=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return e(n,r)},getParameter:jV,hint(t,e,n,r){return e(n,r)}};function KV(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(LV(t),YV(t),ZV(t,uR),qV(t,{target:e,target2:t}),e.polyfilled=!0),t}globalThis.polyfillContext=KV;function YV(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}function qV(t,e){let{target:n,target2:r}=e;Object.keys(av).forEach(i=>{if(typeof av[i]=="function"){const s=t[i]?t[i].bind(t):()=>{},o=av[i].bind(null,t,s);n[i]=o,r[i]=o}})}function ZV(t,e){for(const n of Object.getOwnPropertyNames(e))n!=="overrides"&&e9(t,{extension:n,target:t.luma,target2:t})}function e9(t,e){let{extension:n,target:r,target2:i}=e;const s=uR[n];Cr(s);const{meta:o={}}=s,{suffix:a=""}=o,l=t.getExtension(n);for(const f of Object.keys(s)){const d="".concat(f).concat(a);let g=null;f==="meta"||typeof t[f]=="function"||(l&&typeof l[d]=="function"?g=function(){return l[d](...arguments)}:typeof s[f]=="function"&&(g=s[f].bind(r))),g&&(r[f]=g,i[f]=g)}}const Kb={[3042]:!1,[32773]:new Float32Array([0,0,0,0]),[32777]:32774,[34877]:32774,[32969]:1,[32968]:0,[32971]:1,[32970]:0,[3106]:new Float32Array([0,0,0,0]),[3107]:[!0,!0,!0,!0],[2884]:!1,[2885]:1029,[2929]:!1,[2931]:1,[2932]:513,[2928]:new Float32Array([0,1]),[2930]:!0,[3024]:!0,[36006]:null,[2886]:2305,[33170]:4352,[2849]:1,[32823]:!1,[32824]:0,[10752]:0,[32938]:1,[32939]:!1,[3089]:!1,[3088]:new Int32Array([0,0,1024,1024]),[2960]:!1,[2961]:0,[2968]:4294967295,[36005]:4294967295,[2962]:519,[2967]:0,[2963]:4294967295,[34816]:519,[36003]:0,[36004]:4294967295,[2964]:7680,[2965]:7680,[2966]:7680,[34817]:7680,[34818]:7680,[34819]:7680,[2978]:[0,0,1024,1024],[3333]:4,[3317]:4,[37440]:!1,[37441]:!1,[37443]:37444,[35723]:4352,[36010]:null,[35977]:!1,[3330]:0,[3332]:0,[3331]:0,[3314]:0,[32878]:0,[3316]:0,[3315]:0,[32877]:0},Ho=(t,e,n)=>e?t.enable(n):t.disable(n),Bx=(t,e,n)=>t.hint(n,e),ni=(t,e,n)=>t.pixelStorei(n,e),t9=(t,e)=>{const n=it(t)?36009:36160;return t.bindFramebuffer(n,e)},n9=(t,e)=>t.bindFramebuffer(36008,e);function BA(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const r9={[3042]:Ho,[32773]:(t,e)=>t.blendColor(...e),[32777]:"blendEquation",[34877]:"blendEquation",[32969]:"blendFunc",[32968]:"blendFunc",[32971]:"blendFunc",[32970]:"blendFunc",[3106]:(t,e)=>t.clearColor(...e),[3107]:(t,e)=>t.colorMask(...e),[2884]:Ho,[2885]:(t,e)=>t.cullFace(e),[2929]:Ho,[2931]:(t,e)=>t.clearDepth(e),[2932]:(t,e)=>t.depthFunc(e),[2928]:(t,e)=>t.depthRange(...e),[2930]:(t,e)=>t.depthMask(e),[3024]:Ho,[35723]:Bx,[36006]:t9,[2886]:(t,e)=>t.frontFace(e),[33170]:Bx,[2849]:(t,e)=>t.lineWidth(e),[32823]:Ho,[32824]:"polygonOffset",[10752]:"polygonOffset",[35977]:Ho,[32938]:"sampleCoverage",[32939]:"sampleCoverage",[3089]:Ho,[3088]:(t,e)=>t.scissor(...e),[2960]:Ho,[2961]:(t,e)=>t.clearStencil(e),[2968]:(t,e)=>t.stencilMaskSeparate(1028,e),[36005]:(t,e)=>t.stencilMaskSeparate(1029,e),[2962]:"stencilFuncFront",[2967]:"stencilFuncFront",[2963]:"stencilFuncFront",[34816]:"stencilFuncBack",[36003]:"stencilFuncBack",[36004]:"stencilFuncBack",[2964]:"stencilOpFront",[2965]:"stencilOpFront",[2966]:"stencilOpFront",[34817]:"stencilOpBack",[34818]:"stencilOpBack",[34819]:"stencilOpBack",[2978]:(t,e)=>t.viewport(...e),[3333]:ni,[3317]:ni,[37440]:ni,[37441]:ni,[37443]:ni,[3330]:ni,[3332]:ni,[3331]:ni,[36010]:n9,[3314]:ni,[32878]:ni,[3316]:ni,[3315]:ni,[32877]:ni,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=BA(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=BA(e)&&e.length===2?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=BA(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=BA(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,s,o,a)},stencilOp:(t,e)=>{e=BA(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,s,o,a)},viewport:(t,e)=>t.viewport(...e)};function fn(t,e,n){return e[t]!==void 0?e[t]:n[t]}const i9={blendEquation:(t,e,n)=>t.blendEquationSeparate(fn(32777,e,n),fn(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(fn(32969,e,n),fn(32968,e,n),fn(32971,e,n),fn(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(fn(32824,e,n),fn(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(fn(32938,e,n),fn(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,fn(2962,e,n),fn(2967,e,n),fn(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,fn(34816,e,n),fn(36003,e,n),fn(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,fn(2964,e,n),fn(2965,e,n),fn(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,fn(34817,e,n),fn(34818,e,n),fn(34819,e,n))},Lx={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({[36006]:n,[36010]:n});case 36009:return t({[36006]:n});case 36008:return t({[36010]:n});default:return null}},blendColor:(t,e,n,r,i)=>t({[32773]:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({[32777]:e,[34877]:e}),blendEquationSeparate:(t,e,n)=>t({[32777]:e,[34877]:n}),blendFunc:(t,e,n)=>t({[32969]:e,[32968]:n,[32971]:e,[32970]:n}),blendFuncSeparate:(t,e,n,r,i)=>t({[32969]:e,[32968]:n,[32971]:r,[32970]:i}),clearColor:(t,e,n,r,i)=>t({[3106]:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({[2931]:e}),clearStencil:(t,e)=>t({[2961]:e}),colorMask:(t,e,n,r,i)=>t({[3107]:[e,n,r,i]}),cullFace:(t,e)=>t({[2885]:e}),depthFunc:(t,e)=>t({[2932]:e}),depthRange:(t,e,n)=>t({[2928]:new Float32Array([e,n])}),depthMask:(t,e)=>t({[2930]:e}),frontFace:(t,e)=>t({[2886]:e}),lineWidth:(t,e)=>t({[2849]:e}),polygonOffset:(t,e,n)=>t({[32824]:e,[10752]:n}),sampleCoverage:(t,e,n)=>t({[32938]:e,[32939]:n}),scissor:(t,e,n,r,i)=>t({[3088]:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({[2968]:e,[36005]:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({[2962]:e,[2967]:n,[2963]:r,[34816]:e,[36003]:n,[36004]:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:r,[e===1028?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({[2964]:e,[2965]:n,[2966]:r,[34817]:e,[34818]:n,[34819]:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:r,[e===1028?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({[2978]:[e,n,r,i]})},Cs=(t,e)=>t.isEnabled(e),Rx={[3042]:Cs,[2884]:Cs,[2929]:Cs,[3024]:Cs,[32823]:Cs,[32926]:Cs,[32928]:Cs,[3089]:Cs,[2960]:Cs,[35977]:Cs};function AR(t){for(const e in t)return!1;return!0}function s9(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}function Ox(t,e){const n=t[e].bind(t);t[e]=function(){const i=arguments.length<=0?void 0:arguments[0];return i in t.state.cache?t.state.enable?t.state.cache[i]:n(...arguments):n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function o9(t,e,n){const r=t[e].bind(t);t[e]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];const{valueChanged:l,oldValue:f}=n(t.state._updateCache,...o);return l&&r(...o),f},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function a9(t){const e=t.useProgram.bind(t);t.useProgram=function(r){t.state.program!==r&&(e(r),t.state.program=r)}}class l9{constructor(e){let{copyState:n=!1,log:r=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?u9(e):Object.assign({},Kb),this.log=r,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Cr(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];So(this.gl,e),this.stateStack.pop()}_updateCache(e){let n=!1,r;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){Cr(s!==void 0);const o=e[s],a=this.cache[s];s9(o,a)||(n=!0,r=a,i&&!(s in i)&&(i[s]=a),this.cache[s]=o)}return{valueChanged:n,oldValue:r}}}function fR(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:n=!0,copyState:r}=e;if(Cr(r!==void 0),!t.state){const{polyfillContext:i}=globalThis;i&&i(t),t.state=new l9(t,{copyState:r}),a9(t);for(const s in Lx){const o=Lx[s];o9(t,s,o)}Ox(t,"getParameter"),Ox(t,"isEnabled")}return t.state.enable=n,t}function c9(t){t.state||fR(t,{copyState:!1}),t.state.push()}function Dx(t){Cr(t.state),t.state.pop()}function So(t,e){if(Cr(ym(t),"setParameters requires a WebGL context"),AR(e))return;const n={};for(const i in e){const s=Number(i),o=r9[i];o&&(typeof o=="string"?n[o]=!0:o(t,e[i],s))}const r=t.state&&t.state.cache;if(r)for(const i in n){const s=i9[i];s(t,e,r)}}function u9(t,e){if(e=e||Kb,typeof e=="number"){const i=e,s=Rx[i];return s?s(t,i):t.getParameter(i)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const i of n){const s=Rx[i];r[i]=s?s(t,Number(i)):t.getParameter(Number(i))}return r}function A9(t){So(t,Kb)}function Oi(t,e,n){if(AR(e))return n(t);const{nocatch:r=!0}=e;c9(t),So(t,e);let i;if(r)i=n(t),Dx(t);else try{i=n(t)}finally{Dx(t)}return i}function _u(t){const{luma:e}=t;if(t.canvas&&e){const{clientWidth:n}=e.canvasSizeInfo;return n?t.drawingBufferWidth/n:1}return 1}function lv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=_u(t),i=t.drawingBufferWidth,s=t.drawingBufferHeight;return h9(e,r,i,s,n)}function f9(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function h9(t,e,n,r,i){const s=Fx(t[0],e,n);let o=kx(t[1],e,r,i),a=Fx(t[0]+1,e,n);const l=a===n-1?a:a-1;a=kx(t[1]+1,e,r,i);let f;return i?(a=a===0?a:a+1,f=o,o=a):f=a===r-1?a:a-1,{x:s,y:o,width:Math.max(l-s+1,1),height:Math.max(f-o+1,1)}}function Fx(t,e,n){return Math.min(Math.round(t*e),n-1)}function kx(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const Yb=Oo(),d9=Yb&&typeof document<"u",hR={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function dR(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Cr(Yb,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),t=Object.assign({},hR,t);const{width:e,height:n}=t;function r(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}t.onError=r;let i;const{canvas:s}=t,o=y9({canvas:s,width:e,height:n,onError:r});return i=m9(o,t),i?(i=qb(i,t),v9(i),i):null}function qb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||_9(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},hR,e);const{manageState:n,debug:r}=e;return n&&fR(t,{copyState:!1,log:function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return Ie.log(1,...s)()}}),Yb&&r&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),Ie.level=Math.max(Ie.level,1)):Ie.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function p9(t){const e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info"),i=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),s=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||e,renderer:s||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function g9(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.canvas){const r=f9(e.useDevicePixels);b9(t,r,e);return}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}function m9(t,e){const{onError:n}=e;let r=null;const i=l=>r=l.statusMessage||r;t.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),s&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(o&&!s?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function y9(t){let{canvas:e,width:n=800,height:r=600,onError:i}=t,s;return typeof e=="string"?(d9&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(e,"' before page was loaded")),s=document.getElementById(e)):e?s=e:(s=document.createElement("canvas"),s.id="lumagl-canvas",s.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",s.style.height=Number.isFinite(r)?"".concat(r,"px"):"100%",document.body.insertBefore(s,document.body.firstChild)),s}function v9(t){const e=it(t)?"WebGL2":"WebGL1",n=p9(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";Ie.info(1,"".concat(e).concat(i," context ").concat(r))()}function _9(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}function b9(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;(!r||!i)&&(Ie.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const s=t.luma.canvasSizeInfo;if(s.clientWidth!==r||s.clientHeight!==i||s.devicePixelRatio!==e){let o=e;const a=Math.floor(r*o),l=Math.floor(i*o);t.canvas.width=a,t.canvas.height=l,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==l)&&(Ie.warn("Device pixel ratio clamped")(),o=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*o),t.canvas.height=Math.floor(i*o)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}const _f="8.5.16",w9="set luma.log.level=1 (or higher) to trace rendering";class pR{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new Oh({id:e})),this.stats.get(e)}}const ll=new pR;if(globalThis.luma&&globalThis.luma.VERSION!==_f)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(_f));globalThis.luma||(Oo()&&Ie.log(1,"luma.gl ".concat(_f," - ").concat(w9))(),globalThis.luma=globalThis.luma||{VERSION:_f,version:_f,log:Ie,stats:ll,globals:{modules:{},nodeIO:{}}});function E9(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function T9(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}function _e(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function cv(t,e){if(typeof e!="string")return e;const n=Number(e);if(!isNaN(n))return n;e=e.replace(/^.*\./,"");const r=t[e];return _e(r!==void 0,"Accessing undefined constant GL.".concat(e)),r}function ya(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}const uv={};function $s(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";uv[t]=uv[t]||1;const e=uv[t]++;return"".concat(t,"-").concat(e)}function Nx(t){return _e(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function bu(t){let e=!0;for(const n in t){e=!1;break}return e}function gR(t,e,n,r){const i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),s=Object.getPrototypeOf(t);r.forEach(o=>{s.methodName||(s[o]=()=>{throw Ie.removed("Calling removed method ".concat(e,".").concat(o,": "),i)(),new Error(o)})})}const ac="Resource subclass must define virtual methods";class Do{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};vm(e);const{id:r,userData:i={}}=n;this.gl=e,this.gl2=e,this.id=r||$s(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=n.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._initStats(),this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(r=>r.delete()),this}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof e!="function")return this._bindHandle(e),this;let n;return this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e=cv(this.gl,e),_e(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=it(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const a=i.webgl1,l="webgl2"in i?i.webgl2:i.webgl1;return s?l:a}}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:n,keys:r}=e,i=this.constructor.PARAMETERS||{},s=it(this.gl),o={},a=n||Object.keys(i);for(const l of a){const f=i[l];if(f&&(!("webgl2"in f)||s)&&(!("extension"in f)||this.gl.getExtension(f.extension))){const g=r?ya(this.gl,l):l;o[g]=this.getParameter(l,e),r&&f.type==="GLenum"&&(o[g]=ya(this.gl,o[g]))}}return o}setParameter(e,n){e=cv(this.gl,e),_e(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=it(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(n=cv(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,r){return gR(this,e,n,r)}initialize(e){}_createHandle(){throw new Error(ac)}_deleteHandle(){throw new Error(ac)}_bindHandle(e){throw new Error(ac)}_getOptsFromHandle(){throw new Error(ac)}_getParameter(e,n){throw new Error(ac)}_setParameter(e,n){throw new Error(ac)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_initStats(){this.gl.stats=this.gl.stats||new pR}_addStats(){const e=this[Symbol.toStringTag],n=ll.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];ll.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._doTrackAllocatedMemory(e,n),this._doTrackAllocatedMemory(e,n,this.gl.stats.get("Memory Usage"))}_doTrackAllocatedMemory(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ll.get("Memory Usage");r.get("GPU Memory").addCount(e),r.get("".concat(n," Memory")).addCount(e),this.byteLength=e}_trackDeallocatedMemory(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._doTrackDeallocatedMemory(e),this._doTrackDeallocatedMemory(e,this.gl.stats.get("Memory Usage"))}_doTrackDeallocatedMemory(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ll.get("Memory Usage");n.get("GPU Memory").subtractCount(this.byteLength),n.get("".concat(e," Memory")).subtractCount(this.byteLength),this.byteLength=0}}const S9="Failed to deduce GL constant from typed array";function I1(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(S9)}}function Jf(t){let{clamped:e=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function x9(t){let{data:e,width:n,height:r,bytesPerPixel:i=4,temp:s}=t;const o=n*i;s=s||new Uint8Array(o);for(let a=0;a<r/2;++a){const l=a*o,f=(r-a-1)*o;s.set(e.subarray(l,l+o)),e.copyWithin(l,f,f+o),e.set(s,f)}}function C9(t){let{data:e,width:n,height:r}=t;const i=Math.round(n/2),s=Math.round(r/2),o=new Uint8Array(i*s*4);for(let a=0;a<s;a++)for(let l=0;l<i;l++)for(let f=0;f<4;f++)o[(a*i+l)*4+f]=e[(a*2*n+l*2)*4+f];return{data:o,width:i,height:s}}function B1(t,e,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:s={}}=n;for(const a in r)if(a in e){const f=r[a]?"".concat(t,".").concat(r[a]):"N/A";Ie.removed("".concat(t,".").concat(a),f)()}for(const a in i)if(a in e){const l=i[a];Ie.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(l))()}let o=null;for(const a in s)if(a in e){const l=s[a];Ie.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(l))(),o=o||Object.assign({},e),o[l]=e[a],delete o[a]}return o||e}const P9={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},M9={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Vr{static getBytesPerElement(e){return Jf(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return _e(e.size),Jf(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return new Vr(P9,...n)}constructor(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Vr.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Vr.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e=B1("Accessor",e,M9),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}}const Ux=10,mR={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},I9={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:mR},B9={removedProps:mR};class Rt extends Do{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Vr.getBytesPerElement(e))}getVertexCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Vr.getBytesPerVertex(e))}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=B1("Buffer",e,I9),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return e=B1("Buffer",e,B9),"accessor"in e&&this.setAccessor(e.accessor),this}setAccessor(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new Vr(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:r=0,srcOffset:i=0}=e,s=e.byteLength||e.length;_e(n);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),i!==0||s!==void 0?(gr(this.gl),this.gl.bufferSubData(this.target,r,n,i,s)):this.gl.bufferSubData(o,r,n),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:r=0,writeOffset:i=0,size:s}=e;const{gl:o}=this;return gr(o),o.bindBuffer(36662,n.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,r,i,s),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:r=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};gr(this.gl);const s=Jf(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(n),a=r;let l,f;e?(f=e.length,l=f-a):(l=Math.min(o,i||o),f=a+l);const d=Math.min(o,l);return i=i||d,_e(i<=d),e=e||new s(f),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,r,i),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:r=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?i!==void 0?this.gl.bindBufferRange(e,n,this.handle,r,i):(_e(r===0),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(Ux,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.byteLength+n;_e(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,this.usage),this.gl.bufferSubData(i,n,e),this.gl.bindBuffer(i,null),this.debugData=e.slice(0,Ux),this.bytesUsed=r,this._trackAllocatedMemory(r);const s=I1(e);return _e(s),this.setAccessor(new Vr(this.accessor,{type:s})),this}_setByteLength(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;_e(e>=0),this._trackDeallocatedMemory();let r=e;e===0&&(r=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,n),this.gl.bindBuffer(i,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const n=Jf(this.accessor.type||5126,{clamped:!1}),r=e/n.BYTES_PER_ELEMENT;return this.getElementCount()-r}_inferType(e){this.accessor.type||this.setAccessor(new Vr(this.accessor,{type:I1(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return Ie.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Ie.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return Ie.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return Ie.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Vr(this.accessor,e),this}}const Zb={[6407]:{dataFormat:6407,types:[5121,33635]},[6408]:{dataFormat:6408,types:[5121,32819,32820]},[6406]:{dataFormat:6406,types:[5121]},[6409]:{dataFormat:6409,types:[5121]},[6410]:{dataFormat:6410,types:[5121]},[33326]:{dataFormat:6403,types:[5126],gl2:!0},[33328]:{dataFormat:33319,types:[5126],gl2:!0},[34837]:{dataFormat:6407,types:[5126],gl2:!0},[34836]:{dataFormat:6408,types:[5126],gl2:!0}},yR={[6403]:1,[36244]:1,[33319]:2,[33320]:2,[6407]:3,[36248]:3,[6408]:4,[36249]:4,[6402]:1,[34041]:1,[6406]:1,[6409]:1,[6410]:2},vR={[5126]:4,[5125]:4,[5124]:4,[5123]:2,[5122]:2,[5131]:2,[5120]:1,[5121]:1};function L9(t,e){const n=Zb[e];if(!n)return!1;if(n.gl1===void 0&&n.gl2===void 0)return!0;const r=it(t)&&n.gl2||n.gl1;return typeof r=="string"?t.getExtension(r):r}function R9(t,e){const n=Zb[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}const O9=[9729,9728],Gx=globalThis.WebGLBuffer||function(){};class Tl extends Do{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:r,linearFiltering:i}=n;let s=!0;return r&&(s=s&&L9(e,r),s=s&&(!i||R9(e,r))),s}constructor(e,n){const{id:r=$s("texture"),handle:i,target:s}=n;super(e,{id:r,handle:i}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(P=>this.initialize(Object.assign({},e,{pixels:P,data:P}))),this;const r=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(r&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:i=null,format:s=6408,border:o=0,recreate:a=!1,parameters:l={},pixelStore:f={},textureUnit:d=void 0}=e;n||(n=i);let{width:g,height:y,dataFormat:b,type:E,compressed:S=!1,mipmaps:M=!0}=e;const{depth:C=0}=e;return{width:g,height:y,compressed:S,dataFormat:b,type:E}=this._deduceParameters({format:s,type:E,dataFormat:b,compressed:S,data:n,width:g,height:y}),this.width=g,this.height=y,this.depth=C,this.format=s,this.type=E,this.dataFormat=b,this.border=o,this.textureUnit=d,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),M&&this._isNPOT()&&(Ie.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),M=!1,this._updateForNPOT(l)),this.mipmaps=M,this.setImageData({data:n,width:g,height:y,depth:C,format:s,type:E,dataFormat:b,border:o,mipmaps:M,parameters:f,compressed:S}),M&&this.generateMipmap(),this.setParameters(l),a&&(this.data=n),r&&(this._video={video:n,parameters:l,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:r}=this._video;if(r===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:r,mipmaps:i=!1}=e;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(Ie.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Oi(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:r=null,level:i=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:l={}}=e;let{data:f=null,type:d=this.type,width:g=this.width,height:y=this.height,dataFormat:b=this.dataFormat,compressed:E=!1}=e;f||(f=r),{type:d,dataFormat:b,compressed:E,width:g,height:y}=this._deduceParameters({format:s,type:d,dataFormat:b,compressed:E,data:f,width:g,height:y});const{gl:S}=this;S.bindTexture(this.target,this.handle);let M=null;({data:f,dataType:M}=this._getDataType({data:f,compressed:E}));let C,P=0;if(Oi(this.gl,l,()=>{switch(M){case"null":S.texImage2D(n,i,s,g,y,o,b,d,f);break;case"typed-array":S.texImage2D(n,i,s,g,y,o,b,d,f,a);break;case"buffer":C=gr(S),C.bindBuffer(35052,f.handle||f),C.texImage2D(n,i,s,g,y,o,b,d,a),C.bindBuffer(35052,null);break;case"browser-object":it(S)?S.texImage2D(n,i,s,g,y,o,b,d,f):S.texImage2D(n,i,s,b,d,f);break;case"compressed":for(const[I,L]of f.entries())S.compressedTexImage2D(n,I,L.format,L.width,L.height,o,L.data),P+=L.levelSize;break;default:_e(!1,"Unknown image data type")}}),M==="compressed")this._trackAllocatedMemory(P,"Texture");else if(f&&f.byteLength)this._trackAllocatedMemory(f.byteLength,"Texture");else{const I=yR[this.dataFormat]||4,L=vR[this.type]||1;this._trackAllocatedMemory(this.width*this.height*I*L,"Texture")}return this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:r=null,data:i=null,x:s=0,y:o=0,width:a=this.width,height:l=this.height,level:f=0,format:d=this.format,type:g=this.type,dataFormat:y=this.dataFormat,compressed:b=!1,offset:E=0,border:S=this.border,parameters:M={}}=e;if({type:g,dataFormat:y,compressed:b,width:a,height:l}=this._deduceParameters({format:d,type:g,dataFormat:y,compressed:b,data:i,width:a,height:l}),_e(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=r),i&&i.data){const C=i;i=C.data,a=C.shape[0],l=C.shape[1]}i instanceof Rt&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),Oi(this.gl,M,()=>{if(b)this.gl.compressedTexSubImage2D(n,f,s,o,a,l,d,i);else if(i===null)this.gl.texSubImage2D(n,f,s,o,a,l,y,g,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(n,f,s,o,a,l,y,g,i,E);else if(i instanceof Gx){const C=gr(this.gl);C.bindBuffer(35052,i),C.texSubImage2D(n,f,s,o,a,l,y,g,E),C.bindBuffer(35052,null)}else it(this.gl)?gr(this.gl).texSubImage2D(n,f,s,o,a,l,y,g,i):this.gl.texSubImage2D(n,f,s,o,y,g,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Ie.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:r=!1}=e;return r?{data:n,dataType:"compressed"}:n===null?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof Rt?{data:n.handle,dataType:"buffer"}:n instanceof Gx?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:r}=e;let{width:i,height:s,dataFormat:o,type:a,compressed:l}=e;const f=Zb[n];return o=o||f&&f.dataFormat,a=a||f&&f.types[0],l=l||f&&f.compressed,{width:i,height:s}=this._deduceImageSize(r,i,s),{dataFormat:o,type:a,compressed:l,width:i,height:s,format:n,data:r}}_deduceImageSize(e,n,r){let i;return typeof ImageData<"u"&&e instanceof ImageData?i={width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?i={width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement?i={width:e.width,height:e.height}:typeof ImageBitmap<"u"&&e instanceof ImageBitmap?i={width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?i={width:e.videoWidth,height:e.videoHeight}:e?i={width:n,height:r}:i={width:n>=0?n:1,height:r>=0?r:1},_e(i,"Could not deduced texture size"),_e(n===void 0||i.width===n,"Deduced texture width does not match supplied width"),_e(r===void 0||i.height===r,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:_e(!1);break;default:this.gl.texParameteri(this.target,e,n);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return it(this.gl)||!this.width||!this.height?!1:!Nx(this.width)||!Nx(this.height)}_updateForNPOT(e){e[this.gl.TEXTURE_MIN_FILTER]===void 0&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),e[this.gl.TEXTURE_WRAP_S]===void 0&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),e[this.gl.TEXTURE_WRAP_T]===void 0&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:O9.indexOf(n)===-1&&(n=9729);break;case 10242:case 10243:n!==33071&&(n=33071);break}return n}}let D9="";function F9(t,e){return _e(typeof t=="string"),t=D9+t,new Promise((n,r)=>{try{const i=new Image;i.onload=()=>n(i),i.onerror=()=>r(new Error("Could not load image ".concat(t,"."))),i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(i){r(i)}})}class br extends Tl{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return Tl.isSupported(e,n)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};vm(e),(n instanceof Promise||typeof n=="string")&&(n={data:n}),typeof n.data=="string"&&(n=Object.assign({},n,{data:F9(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const L1=[34069,34070,34071,34072,34073,34074];class _R extends Tl{get[Symbol.toStringTag](){return"TextureCube"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};vm(e),super(e,Object.assign({},n,{target:34067})),this.initialize(n),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:n=!0,parameters:r={}}=e;return this.opts=e,this.setCubeMapImageData(e).then(()=>{this.loaded=!0,n&&this.generateMipmap(e),this.setParameters(r)}),this}subImage(e){let{face:n,data:r,x:i=0,y:s=0,mipmapLevel:o=0}=e;return this._subImage({target:n,data:r,x:i,y:s,mipmapLevel:o})}async setCubeMapImageData(e){let{width:n,height:r,pixels:i,data:s,border:o=0,format:a=6408,type:l=5121}=e;const{gl:f}=this,d=i||s,g=await Promise.all(L1.map(y=>{const b=d[y];return Promise.all(Array.isArray(b)?b:[b])}));this.bind(),L1.forEach((y,b)=>{g[b].length>1&&this.opts.mipmaps!==!1&&Ie.warn("".concat(this.id," has mipmap and multiple LODs."))(),g[b].forEach((E,S)=>{n&&r?f.texImage2D(y,S,a,n,r,o,a,l,E):f.texImage2D(y,S,a,a,l,E)})}),this.unbind()}setImageDataForFace(e){const{face:n,width:r,height:i,pixels:s,data:o,border:a=0,format:l=6408,type:f=5121}=e,{gl:d}=this,g=s||o;return this.bind(),g instanceof Promise?g.then(y=>this.setImageDataForFace(Object.assign({},e,{face:n,data:y,pixels:y}))):this.width||this.height?d.texImage2D(n,0,l,r,i,a,l,f,g):d.texImage2D(n,0,l,l,f,g),this}}_R.FACES=L1;class k9 extends Tl{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return it(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};gr(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:r=6408,width:i,height:s,depth:o=1,border:a=0,format:l,type:f=5121,offset:d=0,data:g,parameters:y={}}=e;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Oi(this.gl,y,()=>{ArrayBuffer.isView(g)&&this.gl.texImage3D(this.target,n,r,i,s,o,a,l,f,g),g instanceof Rt&&(this.gl.bindBuffer(35052,g.handle),this.gl.texImage3D(this.target,n,r,i,s,o,a,l,f,d))}),g&&g.byteLength)this._trackAllocatedMemory(g.byteLength,"Texture");else{const b=yR[this.dataFormat]||4,E=vR[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*b*E,"Texture")}return this.loaded=!0,this}}const Xa="EXT_color_buffer_float",zx={[33189]:{bpp:2},[33190]:{gl2:!0,bpp:3},[36012]:{gl2:!0,bpp:4},[36168]:{bpp:1},[34041]:{bpp:4},[35056]:{gl2:!0,bpp:4},[36013]:{gl2:!0,bpp:5},[32854]:{bpp:2},[36194]:{bpp:2},[32855]:{bpp:2},[33321]:{gl2:!0,bpp:1},[33330]:{gl2:!0,bpp:1},[33329]:{gl2:!0,bpp:1},[33332]:{gl2:!0,bpp:2},[33331]:{gl2:!0,bpp:2},[33334]:{gl2:!0,bpp:4},[33333]:{gl2:!0,bpp:4},[33323]:{gl2:!0,bpp:2},[33336]:{gl2:!0,bpp:2},[33335]:{gl2:!0,bpp:2},[33338]:{gl2:!0,bpp:4},[33337]:{gl2:!0,bpp:4},[33340]:{gl2:!0,bpp:8},[33339]:{gl2:!0,bpp:8},[32849]:{gl2:!0,bpp:3},[32856]:{gl2:!0,bpp:4},[32857]:{gl2:!0,bpp:4},[36220]:{gl2:!0,bpp:4},[36238]:{gl2:!0,bpp:4},[36975]:{gl2:!0,bpp:4},[36214]:{gl2:!0,bpp:8},[36232]:{gl2:!0,bpp:8},[36226]:{gl2:!0,bpp:16},[36208]:{gl2:!0,bpp:16},[33325]:{gl2:Xa,bpp:2},[33327]:{gl2:Xa,bpp:4},[34842]:{gl2:Xa,bpp:8},[33326]:{gl2:Xa,bpp:4},[33328]:{gl2:Xa,bpp:8},[34836]:{gl2:Xa,bpp:16},[35898]:{gl2:Xa,bpp:4}};function N9(t,e,n){const r=n[e];if(!r)return!1;const i=it(t)&&r.gl2||r.gl1;return typeof i=="string"?t.getExtension(i):i}class kc extends Do{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!n||N9(e,n,zx)}static getSamplesForFormat(e,n){let{format:r}=n;return e.getInternalformatParameter(36161,r,32937)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:r=1,height:i=1,samples:s=0}=e;return _e(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),s!==0&&it(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,n,r,i):this.gl.renderbufferStorage(36161,n,r,i),this.format=n,this.width=r,this.height=i,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*zx[this.format].bpp),this}resize(e){let{width:n,height:r}=e;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const U9=256,G9=1024,z9=16384,Vx=6144,jx=6145,Hx=6146,Wx=34041,bR="clear: bad arguments";function ew(t){let{framebuffer:e=null,color:n=null,depth:r=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s={};e&&(s.framebuffer=e);let o=0;n&&(o|=z9,n!==!0&&(s.clearColor=n)),r&&(o|=U9,r!==!0&&(s.clearDepth=r)),i&&(o|=G9,r!==!0&&(s.clearStencil=r)),_e(o!==0,bR),Oi(t,s,()=>{t.clear(o)})}function V9(t){let{framebuffer:e=null,buffer:n=Vx,drawBuffer:r=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};gr(t),Oi(t,{framebuffer:e},()=>{switch(n){case Vx:switch(i.constructor){case Int32Array:t.clearBufferiv(n,r,i);break;case Uint32Array:t.clearBufferuiv(n,r,i);break;case Float32Array:default:t.clearBufferfv(n,r,i)}break;case jx:t.clearBufferfv(jx,0,[i]);break;case Hx:t.clearBufferiv(Hx,0,[i]);break;case Wx:const[s,o]=i;t.clearBufferfi(Wx,0,s,o);break;default:_e(!1,bR)}})}function j9(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return _e(!1),0}}function _m(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:l,sourceType:f}=e;const{framebuffer:d,deleteFramebuffer:g}=wR(t);_e(d);const{gl:y,handle:b,attachments:E}=d;a=a||d.width,l=l||d.height,s===36064&&b===null&&(s=1028),_e(E[s]),f=f||E[s].type,o=W9(o,f,i,a,l),f=f||I1(o);const S=y.bindFramebuffer(36160,b);return y.readPixels(n,r,a,l,i,f,o),y.bindFramebuffer(36160,S||null),g&&d.delete(),o}function Qx(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=_m(t,{sourceAttachment:e}),{width:i,height:s}=t;for(;s>n;)({data:r,width:i,height:s}=C9({data:r,width:i,height:s}));x9({data:r,width:i,height:s});const o=document.createElement("canvas");o.width=i,o.height=s;const a=o.getContext("2d"),l=a.createImageData(i,s);return l.data.set(r),a.putImageData(l,0,0),o.toDataURL()}function H9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{sourceX:r=0,sourceY:i=0,targetMipmaplevel:s=0,targetInternalFormat:o=6408}=n;let{targetX:a,targetY:l,targetZ:f,width:d,height:g}=n;const{framebuffer:y,deleteFramebuffer:b}=wR(t);_e(y);const{gl:E,handle:S}=y,M=typeof a<"u"||typeof l<"u"||typeof f<"u";a=a||0,l=l||0,f=f||0;const C=E.bindFramebuffer(36160,S);_e(e);let P=null;if(e instanceof Tl&&(P=e,d=Number.isFinite(d)?d:P.width,g=Number.isFinite(g)?g:P.height,P.bind(0),e=P.target),!M)E.copyTexImage2D(e,s,o,r,i,d,g,0);else switch(e){case 3553:case 34067:E.copyTexSubImage2D(e,s,a,l,r,i,d,g);break;case 35866:case 32879:gr(E).copyTexSubImage3D(e,s,a,l,f,r,i,d,g);break}return P&&P.unbind(),E.bindFramebuffer(36160,C||null),b&&y.delete(),P}function wR(t){return t instanceof xn?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:Z9(t),deleteFramebuffer:!0}}function W9(t,e,n,r,i){if(t)return t;e=e||5121;const s=Jf(e,{clamped:!1}),o=j9(n);return new s(r*i*o)}const kt={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function Q9(t){const e=new br(t,{format:6408,type:5126,dataFormat:6408}),n=new xn(t,{id:"test-framebuffer",check:!1,attachments:{[36064]:e}}),r=n.getStatus();return e.delete(),n.delete(),r===36053}const ER={[kt.WEBGL2]:[!1,!0],[kt.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[kt.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[kt.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[kt.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[kt.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[kt.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[kt.FLOAT_BLEND]:["EXT_float_blend"],[kt.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[kt.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[kt.TEXTURE_FLOAT]:["OES_texture_float",!0],[kt.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[kt.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[kt.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[kt.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[kt.COLOR_ATTACHMENT_RGBA32F]:[Q9,"EXT_color_buffer_float"],[kt.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[kt.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[kt.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[kt.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[kt.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[kt.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},$9=2;function bm(t,e){return tw(t,e)}function tw(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>TR(t,n))}function X9(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in ER)t.luma.caps[e]===void 0&&(t.luma.caps[e]=TR(t,e));return t.luma.caps}function TR(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[e]===void 0&&(t.luma.caps[e]=J9(t,e)),t.luma.caps[e]||Ie.log($9,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}function J9(t,e){const n=ER[e];_e(n,e);let r;const i=it(t)&&n[1]||n[0];if(typeof i=="function")r=i(t);else if(Array.isArray(i)){r=!0;for(const s of i)r=r&&Boolean(t.getExtension(s))}else typeof i=="string"?r=Boolean(t.getExtension(i)):typeof i=="boolean"?r=i:_e(!1);return r}const $x="Multiple render targets not supported";class xn extends Do{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:r,colorBufferHalfFloat:i}=n;let s=!0;return r&&(s=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),i&&(s=s&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new xn(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=gr(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=gr(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:r=1,attachments:i=null,color:s=!0,depth:o=!0,stencil:a=!1,check:l=!0,readBuffer:f=void 0,drawBuffers:d=void 0}=e;if(_e(n>=0&&r>=0,"Width and height need to be integers"),this.width=n,this.height=r,i)for(const g in i){const y=i[g];(Array.isArray(y)?y[0]:y).resize({width:n,height:r})}else i=this._createDefaultAttachments(s,o,a,n,r);this.update({clearAttachments:!0,attachments:i,readBuffer:f,drawBuffers:d}),i&&l&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:r,drawBuffers:i,clearAttachments:s=!1,resizeAttachments:o=!0}=e;this.attach(n,{clearAttachments:s,resizeAttachments:o});const{gl:a}=this,l=a.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),a.bindFramebuffer(36160,l||null),this}resize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:n,height:r}=e;if(this.handle===null)return _e(n===void 0&&r===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;n===void 0&&(n=this.gl.drawingBufferWidth),r===void 0&&(r=this.gl.drawingBufferHeight),n!==this.width&&r!==this.height&&Ie.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(r))();for(const i in this.attachments)this.attachments[i].resize({width:n,height:r});return this.width=n,this.height=r,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:r=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};n&&Object.keys(this.attachments).forEach(o=>{i[o]=null}),Object.assign(i,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in i){_e(o!==void 0,"Misspelled framebuffer binding point?");const a=Number(o),l=i[a];let f=l;if(!f)this._unattach(a);else if(f instanceof kc)this._attachRenderbuffer({attachment:a,renderbuffer:f});else if(Array.isArray(l)){const[d,g=0,y=0]=l;f=d,this._attachTexture({attachment:a,texture:d,layer:g,level:y})}else this._attachTexture({attachment:a,texture:f,layer:0,level:0});r&&f&&f.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const e=this.getStatus();if(e!==36053)throw new Error(Y9(e));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),r}clear(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:n,depth:r,stencil:i,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(n||r||i)&&ew(this.gl,{color:n,depth:r,stencil:i}),s.forEach((a,l)=>{V9(this.gl,{drawBuffer:l,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return Ie.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return Ie.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return Ie.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return Ie.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return Ie.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return Ie.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:r=0,y:i=0,width:s,height:o}=e;const a=gr(this.gl),l=a.bindFramebuffer(36008,this.handle);return r===0&&i===0&&s===void 0&&o===void 0?a.invalidateFramebuffer(36008,n):a.invalidateFramebuffer(36008,n,r,i,s,o),a.bindFramebuffer(36008,l),this}getAttachmentParameter(e,n,r){let i=this._getAttachmentParameterFallback(n);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),r&&i>1e3&&(i=ya(this.gl,i)),i}getAttachmentParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const s of r){const o=n?ya(this.gl,s):s;i[o]=this.getAttachmentParameter(e,s,n)}return i}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=Object.keys(this.attachments),r={};for(const i of n){const s=Number(i),o=e?ya(this.gl,s):s;r[o]=this.getAttachmentParameters(s,e)}return r}show(){return typeof window<"u"&&window.open(Qx(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e>Ie.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const r=Qx(this,{targetMaxHeight:100});return Ie.image({logLevel:e,message:n,image:r},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,r,i,s){let o=null;return e&&(o=o||{},o[36064]=new br(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:s,mipmaps:!1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.ownResources.push(o[36064])),n&&r?(o=o||{},o[33306]=new kc(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(o[33306])):n?(o=o||{},o[36096]=new kc(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:s}),this.ownResources.push(o[36096])):r&&_e(!1),o}_unattach(e){const n=this.attachments[e];!n||(n instanceof kc?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:r}=e;const{gl:i}=this;i.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}_attachTexture(e){let{attachment:n=36064,texture:r,layer:i,level:s}=e;const{gl:o}=this;switch(o.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:gr(o).framebufferTextureLayer(36160,n,r.target,s,i);break;case 34067:const l=K9(i);o.framebufferTexture2D(36160,n,l,r.handle,s);break;case 3553:o.framebufferTexture2D(36160,n,3553,r.handle,s);break;default:_e(!1,"Illegal texture type")}o.bindTexture(r.target,null),this.attachments[n]=r}_setReadBuffer(e){const n=CV(this.gl);n?n.readBuffer(e):_e(e===36064||e===1029,$x),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,r=gr(n);if(r)r.drawBuffers(e);else{const i=n.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(e):_e(e.length===1&&(e[0]===36064||e[0]===1029),$x)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=X9(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return!n.WEBGL2&&!n.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}function K9(t){return t<34069?t+34069:t}function Y9(t){return(xn.STATUS||{})[t]||"Framebuffer error ".concat(t)}const q9=[36049,36048,33296,33298,33299,33300,33301,33302,33303];xn.ATTACHMENT_PARAMETERS=q9;function SR(t,e){_e(t instanceof br||t instanceof _R||t instanceof k9);const n=t.constructor,{gl:r,width:i,height:s,format:o,type:a,dataFormat:l,border:f,mipmaps:d}=t,g=Object.assign({width:i,height:s,format:o,type:a,dataFormat:l,border:f,mipmaps:d},e);return new n(r,g)}function Z9(t,e){const{gl:n,width:r,height:i,id:s}=t;return new xn(n,Object.assign({},e,{id:"framebuffer-for-".concat(s),width:r,height:i,attachments:{[36064]:t}}))}function Ap(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}const ej=35632,tj=35633;function nj(t){switch(t){case ej:return"fragment";case tj:return"vertex";default:return"unknown type"}}function rj(t,e,n,r){const i=t.split(/\r?\n/),s={},o={},a=r||Ap(e)||"(unnamed)",l="".concat(nj(n)," shader ").concat(a);for(let d=0;d<i.length;d++){const g=i[d];if(g.length<=1)continue;const y=g.split(":"),b=y[0],E=parseInt(y[2],10);if(isNaN(E))throw new Error("GLSL compilation error in ".concat(l,": ").concat(t));b!=="WARNING"?s[E]=g:o[E]=g}const f=ij(e);return{shaderName:l,errors:Xx(s,f),warnings:Xx(o,f)}}function Xx(t,e){let n="";for(let r=0;r<e.length;r++){const i=e[r];if(!(!t[r+3]&&!t[r+2]&&!t[r+1])&&(n+="".concat(i,`
`),t[r+1])){const s=t[r+1],o=s.split(":",3),a=o[0],l=parseInt(o[1],10)||0,f=s.substring(o.join(":").length+1).trim();n+=xR("^^^ ".concat(a,": ").concat(f,`

`),l)}}return n}function ij(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((s,o)=>{const a=String(o+e),l=a.length;return xR(a,i-l)+n+s})}function xR(t,e){let n="";for(let r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}function CR(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&n[0]==="#version"){const r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}const sj="Shader: GLSL source code must be a JavaScript string";class Kf extends Do{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return _e(!1),"unknown"}}constructor(e,n){vm(e),_e(typeof n.source=="string",sj);const r=Ap(n.source,null)||n.id||$s("unnamed ".concat(Kf.getTypeName(n.shaderType)));super(e,{id:r}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const r=Ap(n,null);r&&(this.id=$s(r)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(Kf.getTypeName(this.shaderType),":").concat(this.id)}getName(){return Ap(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(e.startsWith("#version ")||(e=`#version 100
`.concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const r=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:s,warnings:o}=rj(r,this.source,this.shaderType,this.id);throw Ie.error("GLSL compilation errors in ".concat(i,`
`).concat(s))(),Ie.warn("GLSL compilation warnings in ".concat(i,`
`).concat(o))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class Av extends Kf{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class fv extends Kf{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const oj={[5126]:Xt.bind(null,"uniform1fv",ri,1,cr),[35664]:Xt.bind(null,"uniform2fv",ri,2,cr),[35665]:Xt.bind(null,"uniform3fv",ri,3,cr),[35666]:Xt.bind(null,"uniform4fv",ri,4,cr),[5124]:Xt.bind(null,"uniform1iv",Wo,1,cr),[35667]:Xt.bind(null,"uniform2iv",Wo,2,cr),[35668]:Xt.bind(null,"uniform3iv",Wo,3,cr),[35669]:Xt.bind(null,"uniform4iv",Wo,4,cr),[35670]:Xt.bind(null,"uniform1iv",Wo,1,cr),[35671]:Xt.bind(null,"uniform2iv",Wo,2,cr),[35672]:Xt.bind(null,"uniform3iv",Wo,3,cr),[35673]:Xt.bind(null,"uniform4iv",Wo,4,cr),[35674]:Xt.bind(null,"uniformMatrix2fv",ri,4,ro),[35675]:Xt.bind(null,"uniformMatrix3fv",ri,9,ro),[35676]:Xt.bind(null,"uniformMatrix4fv",ri,16,ro),[35678]:Xn,[35680]:Xn,[5125]:Xt.bind(null,"uniform1uiv",r0,1,cr),[36294]:Xt.bind(null,"uniform2uiv",r0,2,cr),[36295]:Xt.bind(null,"uniform3uiv",r0,3,cr),[36296]:Xt.bind(null,"uniform4uiv",r0,4,cr),[35685]:Xt.bind(null,"uniformMatrix2x3fv",ri,6,ro),[35686]:Xt.bind(null,"uniformMatrix2x4fv",ri,8,ro),[35687]:Xt.bind(null,"uniformMatrix3x2fv",ri,6,ro),[35688]:Xt.bind(null,"uniformMatrix3x4fv",ri,12,ro),[35689]:Xt.bind(null,"uniformMatrix4x2fv",ri,8,ro),[35690]:Xt.bind(null,"uniformMatrix4x3fv",ri,12,ro),[35678]:Xn,[35680]:Xn,[35679]:Xn,[35682]:Xn,[36289]:Xn,[36292]:Xn,[36293]:Xn,[36298]:Xn,[36299]:Xn,[36300]:Xn,[36303]:Xn,[36306]:Xn,[36307]:Xn,[36308]:Xn,[36311]:Xn},aj={},lj={},cj={},Jx=[0];function nw(t,e,n,r){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(Jx[0]=t,t=Jx);const i=t.length;if(i%e&&Ie.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let s=r[i];s||(s=new n(i),r[i]=s);for(let o=0;o<i;o++)s[o]=t[o];return s}function ri(t,e){return nw(t,e,Float32Array,aj)}function Wo(t,e){return nw(t,e,Int32Array,lj)}function r0(t,e){return nw(t,e,Uint32Array,cj)}function Kx(t,e,n){const r=oj[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function uj(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const e=/([^[]*)(\[[0-9]+\])?/,n=t.match(e);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:Boolean(n[2])}}function Aj(t,e,n){for(const r in t){const i=t[r];if((!n||Boolean(n[r]))&&!fj(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}return!0}function fj(t){return Array.isArray(t)||ArrayBuffer.isView(t)?dj(t):isFinite(t)||t===!0||t===!1||t instanceof Tl||t instanceof kc?!0:t instanceof xn?Boolean(t.texture):!1}function hj(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const r=t[e];for(let i=0,s=n.length;i<s;++i)r[i]=n[i]}else t[e]=n.slice();else t[e]=n}function dj(t){if(t.length===0)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}function Xn(){let t=null;return(e,n,r)=>{const i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function Xt(t,e,n,r){let i=null,s=null;return(o,a,l)=>{const f=e(l,n),d=f.length;let g=!1;if(i===null)i=new Float32Array(d),s=d,g=!0;else{_e(s===d,"Uniform length cannot change.");for(let y=0;y<d;++y)if(f[y]!==i[y]){g=!0;break}}return g&&(r(o,t,a,f),i.set(f)),g}}function cr(t,e,n,r){t[e](n,r)}function ro(t,e,n,r){t[e](n,!1,r)}const pj=5120,gj=5121,mj=5122,yj=5123,Yx=0,i0=1,vj=2,_j=3,s0=4,bj=5,wj=6,In=5126,Ej=35664,Tj=35665,Sj=35666,LA=5124,xj=35667,Cj=35668,Pj=35669,RA=5125,Mj=36294,Ij=36295,Bj=36296,Lj=35670,Rj=35671,Oj=35672,Dj=35673,Fj=35674,kj=35675,Nj=35676,Uj=35685,Gj=35686,zj=35687,Vj=35688,jj=35689,Hj=35690,R1={[In]:[In,1,"float"],[Ej]:[In,2,"vec2"],[Tj]:[In,3,"vec3"],[Sj]:[In,4,"vec4"],[LA]:[LA,1,"int"],[xj]:[LA,2,"ivec2"],[Cj]:[LA,3,"ivec3"],[Pj]:[LA,4,"ivec4"],[RA]:[RA,1,"uint"],[Mj]:[RA,2,"uvec2"],[Ij]:[RA,3,"uvec3"],[Bj]:[RA,4,"uvec4"],[Lj]:[In,1,"bool"],[Rj]:[In,2,"bvec2"],[Oj]:[In,3,"bvec3"],[Dj]:[In,4,"bvec4"],[Fj]:[In,8,"mat2"],[Uj]:[In,8,"mat2x3"],[Gj]:[In,8,"mat2x4"],[kj]:[In,12,"mat3"],[zj]:[In,12,"mat3x2"],[Vj]:[In,12,"mat3x4"],[Nj]:[In,16,"mat4"],[jj]:[In,16,"mat4x2"],[Hj]:[In,16,"mat4x3"]};function Wj(t){switch(t){case Yx:return Yx;case i0:return i0;case _j:return i0;case vj:return i0;case s0:return s0;case bj:return s0;case wj:return s0;default:return _e(!1),0}}function qx(t){const e=R1[t];if(!e)return null;const[n,r]=e;return{type:n,components:r}}function PR(t,e){switch(t){case pj:case gj:case mj:case yj:t=In;break}for(const n in R1){const[r,i,s]=R1[n];if(r===t&&i===e)return{glType:n,name:s}}return null}class Qj{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,r=n.getProgramParameter(e.handle,35721);for(let i=0;i<r;i++){const{name:s,type:o,size:a}=n.getActiveAttrib(e.handle,i),l=n.getAttribLocation(e.handle,s);l>=0&&this._addAttribute(l,s,o,a)}this.attributeInfos.sort((i,s)=>i.location-s.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!it(n))return;const r=n.getProgramParameter(e.handle,35971);for(let i=0;i<r;i++){const{name:s,type:o,size:a}=n.getTransformFeedbackVarying(e.handle,i);this._addVarying(i,s,o,a)}this.varyingInfos.sort((i,s)=>i.location-s.location)}_addAttribute(e,n,r,i){const{type:s,components:o}=qx(r),a={type:s,size:i*o};this._inferProperties(e,n,a);const l={location:e,name:n,accessor:new Vr(a)};this.attributeInfos.push(l),this.attributeInfosByLocation[e]=l,this.attributeInfosByName[l.name]=l}_inferProperties(e,n,r){/instance/i.test(n)&&(r.divisor=1)}_addVarying(e,n,r,i){const{type:s,components:o}=qx(r),a=new Vr({type:s,size:i*o}),l={location:e,name:n,accessor:a};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const Zx=4,$j=35981,Xj=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class MR extends Do{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",Xj),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:n,vs:r,fs:i,varyings:s,bufferMode:o=$j}=e;return this.hash=n||"",this.vs=typeof r=="string"?new Av(this.gl,{id:"".concat(e.id,"-vs"),source:r}):r,this.fs=typeof i=="string"?new fv(this.gl,{id:"".concat(e.id,"-fs"),source:i}):i,_e(this.vs instanceof Av),_e(this.fs instanceof fv),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(gr(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Qj(this),this.setProps(e)}delete(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:r=4,vertexCount:i,offset:s=0,start:o,end:a,isIndexed:l=!1,indexType:f=5123,instanceCount:d=0,isInstanced:g=d>0,vertexArray:y=null,transformFeedback:b,framebuffer:E,parameters:S={},uniforms:M,samplers:C}=e;if((M||C)&&(Ie.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(M||{})),Ie.priority>=n){const P=E?E.id:"default",I="mode=".concat(ya(this.gl,r)," verts=").concat(i," ")+"instances=".concat(d," indexType=").concat(ya(this.gl,f)," ")+"isInstanced=".concat(g," isIndexed=").concat(l," ")+"Framebuffer=".concat(P);Ie.log(n,I)()}return _e(y),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||g&&d===0?!1:(y.bindForDraw(i,d,()=>{if(E!==void 0&&(S=Object.assign({},S,{framebuffer:E})),b){const P=Wj(r);b.begin(P)}this._bindTextures(),Oi(this.gl,S,()=>{l&&g?this.gl2.drawElementsInstanced(r,i,f,s,d):l&&it(this.gl)&&!isNaN(o)&&!isNaN(a)?this.gl2.drawRangeElements(r,o,a,i,f,s):l?this.gl.drawElements(r,i,f,s):g?this.gl2.drawArraysInstanced(r,s,i,d):this.gl.drawArrays(r,s,i)}),b&&b.end()}),!0)}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ie.priority>=2&&Aj(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const r=e[n],i=this._uniformSetters[n];if(i){let s=r,o=!1;if(s instanceof xn&&(s=s.texture),s instanceof Tl)if(o=this.uniforms[n]!==r,o){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:l}=i;a.bind(l),s=l,this._textureUniforms[n]=a}else s=i.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(i(s)||o)&&hj(this.uniforms,n,r)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const r=this._textureUniforms[n];r.update(),e=e&&r.loaded}return e}_bindTextures(){for(const e in this._textureUniforms){const n=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(n)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),r={};for(const i of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new Av({handle:i});break;case 35632:r.fs=new fv({handle:i});break}return r}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=$s(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),Ie.time(Zx,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),Ie.timeEnd(Zx,"linkProgram for ".concat(this._getName()))(),e.debug||Ie.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const r=this.gl.getActiveUniform(this.handle,n),{name:i}=uj(r.name);let s=e.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=Kx(e,s,r),r.size>1)for(let o=0;o<r.size;o++)s=e.getUniformLocation(this.handle,"".concat(i,"[").concat(o,"]")),this._uniformSetters["".concat(i,"[").concat(o,"]")]=Kx(e,s,r)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}const Jj=34918,Kj=34919,Yj=35007,qj=36795,Zj=35976,eH=35887,tH=36202;class ag extends Do{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const r=it(e),i=tw(e,kt.TIMER_QUERY);let s=r||i;for(const o of n)switch(o){case"queries":s=s&&r;break;case"timers":s=s&&i;break;default:_e(!1)}return s}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(Yj)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(e?tH:eH)}beginTransformFeedbackQuery(){return this.begin(Zj)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,Kj);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(qj)}getResult(){return this.gl2.getQueryParameter(this.handle,Jj)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((r,i)=>{const s=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):n++>e?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return ag.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class IR extends Do{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return it(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};gr(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,bu(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const r=this._getVaryingIndex(e),{buffer:i,byteSize:s,byteOffset:o}=this._getBufferParams(n);return r<0?(this.unused[e]=i,Ie.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[r]=n,this.bindOnUse||this._bindBuffer(r,i,o,s),this)}begin(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,r,i;return e instanceof Rt?i=e:(i=e.buffer,r=e.byteSize,n=e.byteOffset),(n!==void 0||r!==void 0)&&(n=n||0,r=r||i.byteLength-n),{buffer:i,byteOffset:n,byteSize:r}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:r,byteOffset:i}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,i,r)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const s=n&&n.handle;return!s||i===void 0?this.gl.bindBufferBase(35982,e,s):this.gl.bindBufferRange(35982,e,s,r,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}let o0=null;function nH(t){return(!o0||o0.byteLength<t)&&(o0=new ArrayBuffer(t)),o0}function rH(t,e){const n=nH(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function iH(t){let{target:e,source:n,start:r=0,count:i=1}=t;const s=n.length,o=i*s;let a=0;for(let l=r;a<s;a++)e[l++]=n[a];for(;a<o;)a<o-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+o-a),a=o);return e}const sH="elements must be GL.ELEMENT_ARRAY_BUFFER";class oi extends Do{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?it(e)||KL()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new oi(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return oi.MAX_ATTRIBUTES=oi.MAX_ATTRIBUTES||e.getParameter(34921),oi.MAX_ATTRIBUTES}static setConstant(e,n,r){switch(r.constructor){case Float32Array:oi._setConstantFloatArray(e,n,r);break;case Int32Array:oi._setConstantIntArray(e,n,r);break;case Uint32Array:oi._setConstantUintArray(e,n,r);break;default:_e(!1)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;super(e,Object.assign({},n,{id:r})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return oi.getMaxAttributes(this.gl)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(e)}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return _e(!e||e.target===34963,sH),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,r){if(n.target===34963)return this.setElementBuffer(n,r);const{size:i,type:s,stride:o,offset:a,normalized:l,integer:f,divisor:d}=r,{gl:g,gl2:y}=this;return e=Number(e),this.bind(()=>{g.bindBuffer(34962,n.handle),f?(_e(it(g)),y.vertexAttribIPointer(e,i,s,o,a)):g.vertexAttribPointer(e,i,s,l,o,a),g.enableVertexAttribArray(e),y.vertexAttribDivisor(e,d||0)}),this}enable(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!n&&e===0&&!oi.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const r=this._normalizeConstantArrayValue(n),i=r.byteLength*e,s=r.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new Rt(this.gl,i),o=o||this.buffer.reallocate(i),o=o||!this._compareConstantArrayValues(r,this.bufferValue),o){const a=rH(n.constructor,s);iH({target:a,source:r,start:0,count:s}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let r=0;r<e.length;++r)if(e[r]!==n[r])return!1;return!0}static _setConstantFloatArray(e,n,r){switch(r.length){case 1:e.vertexAttrib1fv(n,r);break;case 2:e.vertexAttrib2fv(n,r);break;case 3:e.vertexAttrib3fv(n,r);break;case 4:e.vertexAttrib4fv(n,r);break;default:_e(!1)}}static _setConstantIntArray(e,n,r){switch(_e(it(e)),r.length){case 1:e.vertexAttribI1iv(n,r);break;case 2:e.vertexAttribI2iv(n,r);break;case 3:e.vertexAttribI3iv(n,r);break;case 4:e.vertexAttribI4iv(n,r);break;default:_e(!1)}}static _setConstantUintArray(e,n,r){switch(_e(it(e)),r.length){case 1:e.vertexAttribI1uiv(n,r);break;case 2:e.vertexAttribI2uiv(n,r);break;case 3:e.vertexAttribI3uiv(n,r);break;case 4:e.vertexAttribI4uiv(n,r);break;default:_e(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:r}=n;return _e(Number.isFinite(r)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(r,e);default:return this.gl.getVertexAttrib(r,e)}})}}const oH="VertexArray: attributes must be Buffers or constants (i.e. typed array)",aH=/^(.+)__LOCATION_([0-9]+)$/,lH=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class cH{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new oi(e),gR(this,"VertexArray","v6.0",lH),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e){const r=e[n];this._setAttribute(n,r)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n.target===34963)return this.setElementBuffer(n,r);const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,n,n.accessor,r);return i>=0&&(this.values[i]=n,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,n,s)),this}setConstant(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},r));return i>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[i]=n,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Rt(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof Rt&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof Rt&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,r){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),i=r()}),i}_resolveLocationAndAccessor(e,n,r,i){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=n,Ie.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),s;const l=this._getAttributeInfo(a||o);if(!l)return s;const f=this.accessors[o]||{},d=Vr.resolve(l.accessor,f,r,i),{size:g,type:y}=d;return _e(Number.isFinite(g)&&Number.isFinite(y)),{location:o,accessor:d}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const r=aH.exec(e),i=r?r[1]:e,s=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+s,name:i}:{location:-1}}_setAttribute(e,n){if(n instanceof Rt)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof Rt){const r=n[0],i=n[1];this.setBuffer(e,r,i)}else if(ArrayBuffer.isView(n)||Array.isArray(n)){const r=n;this.setConstant(e,r)}else if(n.buffer instanceof Rt){const r=n;this.setBuffer(e,r.buffer,r)}else throw new Error(oH)}_setConstantAttributes(e,n){const r=Math.max(e|0,n|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,r);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)i=this.values[s],ArrayBuffer.isView(i)&&this._setConstantAttribute(s,i)}_setConstantAttributeZero(e,n){if(oi.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}const r=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}_setConstantAttribute(e,n){oi.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const r=this.values[n],i=this.accessors[n];if(!r)return;const{divisor:s}=i,o=s>0;if(e.isInstanced=e.isInstanced||o,r instanceof Rt){const a=r;if(o){const l=a.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,l)}else{const l=a.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,l)}}}setElements(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ie.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function uH(t,e){const{maxElts:n=16,size:r=1}=e;let i="[";for(let o=0;o<t.length&&o<n;++o)o>0&&(i+=",".concat(o%r===0?" ":"")),i+=Yf(t[o],e);const s=t.length>n?"...":"]";return"".concat(i).concat(s)}function Yf(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=1e-16,{isInteger:r=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return uH(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return r?"0":"0.";if(r||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const i=t.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function eC(t){let{header:e="Uniforms",program:n,uniforms:r,undefinedOnly:i=!1}=t;_e(n);const s=".*_.*",o=".*Matrix",a=n._uniformSetters,l={},f=Object.keys(a).sort();let d=0;for(const b of f)!b.match(s)&&!b.match(o)&&hv({table:l,header:e,uniforms:r,uniformName:b,undefinedOnly:i})&&d++;for(const b of f)b.match(o)&&hv({table:l,header:e,uniforms:r,uniformName:b,undefinedOnly:i})&&d++;for(const b of f)l[b]||hv({table:l,header:e,uniforms:r,uniformName:b,undefinedOnly:i})&&d++;let g=0;const y={};if(!i)for(const b in r){const E=r[b];l[b]||(g++,y[b]={Type:"NOT USED: ".concat(E),[e]:Yf(E)})}return{table:l,count:d,unusedTable:y,unusedCount:g}}function hv(t){let{table:e,header:n,uniforms:r,uniformName:i,undefinedOnly:s}=t;const o=r[i],a=AH(o);return!s||!a?(e[i]={[n]:a?Yf(o):"N/A","Uniform Type":a?o:"NOT PROVIDED"},!0):!1}function AH(t){return t!=null}function fH(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=tC(e,e.elements,null,n));const i=e.values;for(const s in i){const o=e._getAttributeInfo(s);if(o){let a="".concat(s,": ").concat(o.name);const l=e.accessors[o.location];l&&(a="".concat(s,": ").concat(hH(o.name,l))),r[a]=tC(e,i[s],l,n)}}return r}function tC(t,e,n,r){const{gl:i}=t;if(!e)return{[r]:"null","Format ":"N/A"};let s="NOT PROVIDED",o=1,a=0,l=0,f,d,g;if(n&&(s=n.type,o=n.size,s=String(s).replace("Array",""),f=s.indexOf("nt")!==-1),e instanceof Rt){const y=e,{data:b,changed:E}=y.getDebugData();d=E?"*":"",g=b,l=y.byteLength,a=l/b.BYTES_PER_ELEMENT/o;let S;if(n){const M=n.divisor>0;S="".concat(M?"I ":"P "," ").concat(a," (x").concat(o,"=").concat(l," bytes ").concat(ya(i,s),")")}else f=!0,S="".concat(l," bytes");return{[r]:"".concat(d).concat(Yf(g,{size:o,isInteger:f})),"Format ":S}}return g=e,o=e.length,s=String(e.constructor.name).replace("Array",""),f=s.indexOf("nt")!==-1,{[r]:"".concat(Yf(g,{size:o,isInteger:f})," (constant)"),"Format ":"".concat(o,"x").concat(s," (constant)")}}function hH(t,e){const{type:n,size:r}=e,i=PR(n,r);return i?"".concat(t," (").concat(i.name,")"):t}function dH(t){const e={},n="Accessors for ".concat(t.id);for(const r of t.attributeInfos)if(r){const i=nC(r);e["in ".concat(i)]={[n]:JSON.stringify(r.accessor)}}for(const r of t.varyingInfos)if(r){const i=nC(r);e["out ".concat(i)]={[n]:JSON.stringify(r.accessor)}}return e}function nC(t){const{type:e,size:n}=t.accessor,r=PR(e,n);return r?"".concat(r.name," ").concat(t.name):t.name}const rC=Oo()&&typeof document<"u";let pH=0;class gH{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:n=M=>dR(M),onAddHTML:r=null,onInitialize:i=()=>{},onRender:s=()=>{},onFinalize:o=()=>{},onError:a,gl:l=null,glOptions:f={},debug:d=!1,createFramebuffer:g=!1,autoResizeViewport:y=!0,autoResizeDrawingBuffer:b=!0,stats:E=ll.get("animation-loop-".concat(pH++))}=e;let{useDevicePixels:S=!0}=e;"useDevicePixelRatio"in e&&(Ie.deprecated("useDevicePixelRatio","useDevicePixels")(),S=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:r,onInitialize:i,onRender:s,onFinalize:o,onError:a,gl:l,glOptions:f,debug:d,createFramebuffer:g},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=E,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:y,autoResizeDrawingBuffer:b,useDevicePixels:S}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return _e(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=ag.isSupported(this.gl,["timers"])?new ag(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(r=>{this._running&&(this._addCallbackData(r||{}),r!==!1&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const r=document.getElementById(e);return r?Number(r.value):n}setViewParameters(){return Ie.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=rC?new Promise((e,n)=>{if(rC&&document.readyState==="complete"){e(document);return}window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):T9(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):E9(e)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){typeof e=="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?qb(this.props.gl,e):this.onCreateContext(e),!ym(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");A9(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const r=this.props.onAddHTML(n);r&&(n.innerHTML=r)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let r=1;const{canvas:i}=this.gl;return i&&i.clientHeight?r=i.clientWidth/i.clientHeight:e>0&&n>0&&(r=e/n),{width:e,height:n,aspect:r}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&g9(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new xn(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}const Uh="vs",rw="fs";function hi(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const dv={number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function mH(t){const e={};for(const n in t){const r=t[n],i=yH(r);e[n]=i}return e}function yH(t){let e=iC(t);return e==="object"?t?"type"in t?Object.assign({},t,dv[t.type]):"value"in t?(e=iC(t.value),Object.assign({type:e},t,dv[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},dv[e])}function iC(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const vH="vs",_H="fs";class sC{constructor(e){let{name:n,vs:r,fs:i,dependencies:s=[],uniforms:o,getUniforms:a,deprecations:l=[],defines:f={},inject:d={},vertexShader:g,fragmentShader:y}=e;hi(typeof n=="string"),this.name=n,this.vs=r||g,this.fs=i||y,this.getModuleUniforms=a,this.dependencies=s,this.deprecations=this._parseDeprecationDefinitions(l),this.defines=f,this.injections=bH(d),o&&(this.uniforms=mH(o))}getModuleSource(e){let n;switch(e){case vH:n=this.vs||"";break;case _H:n=this.fs||"";break;default:hi(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(n,"// END MODULE_").concat(this.name,`

`)}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(r=>{r.regex.test(e)&&(r.deprecated?n.deprecated(r.old,r.new)():n.removed(r.old,r.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{switch(n.type){case"function":n.regex=new RegExp("\\b".concat(n.old,"\\("));break;default:n.regex=new RegExp("".concat(n.type," ").concat(n.old,";"))}}),e}_defaultGetUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={},r=this.uniforms;for(const i in r){const s=r[i];i in e&&!s.private?(s.validate&&hi(s.validate(e[i],s),"".concat(this.name,": invalid ").concat(i)),n[i]=e[i]):n[i]=s.value}return n}}function bH(t){const e={vs:{},fs:{}};for(const n in t){let r=t[n];const i=n.slice(0,2);typeof r=="string"&&(r={order:0,injection:r}),e[i][n]=r}return e}function wH(t){return EH(LR(t))}function EH(t){const e={},n={};return BR({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((r,i)=>n[i]-n[r]).map(r=>e[r])}function BR(t){let{modules:e,level:n,moduleMap:r,moduleDepth:i}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)r[s.name]=s,(i[s.name]===void 0||i[s.name]<n)&&(i[s.name]=n);for(const s of e)s.dependencies&&BR({modules:s.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}function LR(t,e){return t.map(n=>(n instanceof sC||(hi(typeof n!="string","Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),hi(n.name,"shader module has no name"),n=new sC(n),n.dependencies=LR(n.dependencies)),n))}function TH(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=typeof window<"u"?window.navigator||{}:{},n=t.userAgent||e.userAgent||"",r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i}const SH=7936,xH=7937,CH=7938,PH=35724,iw={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},nl={};Object.keys(iw).forEach(t=>{nl[t]=t});function MH(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&t._version===2)}function IH(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||SH),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||xH);return{gpuVendor:BH(n,r),vendor:n,renderer:r,version:t.getParameter(CH),shadingLanguageVersion:t.getParameter(PH)}}function BH(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const pv={};function oC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=iw[e];if(hi(r,e),!TH(n))return!0;if(e in pv)return pv[e];const i=r[0],s=n.behavior||"enable",o="#extension GL_".concat(i," : ").concat(s,`
void main(void) {}`),a=t.createShader(35633);t.shaderSource(a,o),t.compileShader(a);const l=t.getShaderParameter(a,35713);return t.deleteShader(a),pv[e]=l,l}function LH(t,e){const n=iw[e];hi(n,e);const r=MH(t)&&n[1]||n[0],i=typeof r=="string"?Boolean(t.getExtension(r)):r;return hi(i===!1||i===!0),i}function a0(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>LH(t,n))}function RH(t){switch(IH(t).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function OH(t,e,n){let r=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return a0(t,nl.GLSL_FRAG_DEPTH)&&(r+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),a0(t,nl.GLSL_DERIVATIVES)&&oC(t,nl.GLSL_DERIVATIVES)&&(r+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),a0(t,nl.GLSL_FRAG_DATA)&&oC(t,nl.GLSL_FRAG_DATA,{behavior:"require"})&&(r+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),a0(t,nl.GLSL_TEXTURE_LOD)&&(r+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),r}const DH=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,FH=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,kH={[Uh]:DH,[rw]:FH},fp="__LUMA_INJECT_DECLARATIONS__",aC=/void\s+main\s*\([^)]*\)\s*\{\n?/,lC=/}\n?[^{}]*$/,gv=[];function cC(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=e===Uh;for(const s in n){const o=n[s];o.sort((l,f)=>l.order-f.order),gv.length=o.length;for(let l=0,f=o.length;l<f;++l)gv[l]=o[l].injection;const a="".concat(gv.join(`
`),`
`);switch(s){case"vs:#decl":i&&(t=t.replace(fp,a));break;case"vs:#main-start":i&&(t=t.replace(aC,l=>l+a));break;case"vs:#main-end":i&&(t=t.replace(lC,l=>a+l));break;case"fs:#decl":i||(t=t.replace(fp,a));break;case"fs:#main-start":i||(t=t.replace(aC,l=>l+a));break;case"fs:#main-end":i||(t=t.replace(lC,l=>a+l));break;default:t=t.replace(s,l=>l+a)}}return t=t.replace(fp,""),r&&(t=t.replace(/\}\s*$/,s=>s+kH[e])),t}function O1(t){const e={};return hi(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const r in n)e[r]=e[r]?"".concat(e[r],`
`).concat(n[r]):n[r]}),e}function wu(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const RR=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],NH=[...RR,[wu("attribute"),"in $1"],[wu("varying"),"out $1"]],UH=[...RR,[wu("varying"),"in $1"]],OR=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],GH=[...OR,[wu("in"),"attribute $1"],[wu("out"),"varying $1"]],zH=[...OR,[wu("in"),"varying $1"]],D1="gl_FragColor",F1=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,VH=/void\s+main\s*\([^)]*\)\s*\{\n?/;function jH(t,e,n){switch(e){case 300:return n?lg(t,NH):HH(t);case 100:return n?lg(t,GH):WH(t);default:throw new Error("unknown GLSL version ".concat(e))}}function lg(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}function HH(t){t=lg(t,UH);const e=t.match(F1);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(D1,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(VH,r=>"out vec4 ".concat(n,`;
`).concat(r)).replace(new RegExp("\\b".concat(D1,"\\b"),"g"),n)}return t}function WH(t){t=lg(t,zH);const e=t.match(F1);if(e){const n=e[1];t=t.replace(F1,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),D1)}return t}const QH=`

`.concat(fp,`

`),DR={[Uh]:"vertex",[rw]:"fragment"},$H=`precision highp float;

`;function XH(t,e){const{vs:n,fs:r}=e,i=wH(e.modules||[]);return{gl:t,vs:uC(t,Object.assign({},e,{source:n,type:Uh,modules:i})),fs:uC(t,Object.assign({},e,{source:r,type:rw,modules:i})),getUniforms:JH(i)}}function uC(t,e){let{id:n,source:r,type:i,modules:s,defines:o={},hookFunctions:a=[],inject:l={},transpileToGLSL100:f=!1,prologue:d=!0,log:g}=e;hi(typeof r=="string","shader source must be a string");const y=i===Uh,b=r.split(`
`);let E=100,S="",M=r;b[0].indexOf("#version ")===0?(E=300,S=b[0],M=b.slice(1).join(`
`)):S="#version ".concat(E);const C={};s.forEach(X=>{Object.assign(C,X.getDefines())}),Object.assign(C,o);let P=d?"".concat(S,`
`).concat(YH({id:n,source:r,type:i}),`
`).concat(KH({type:i}),`
`).concat(RH(t),`
`).concat(OH(t),`
`).concat(qH(C),`
`).concat(y?"":$H,`
`):"".concat(S,`
`);const I=e7(a),L={},F={},z={};for(const X in l){const Y=typeof l[X]=="string"?{injection:l[X],order:0}:l[X],Q=X.match(/^(v|f)s:(#)?([\w-]+)$/);if(Q){const N=Q[2],k=Q[3];N?k==="decl"?F[X]=[Y]:z[X]=[Y]:L[X]=[Y]}else z[X]=[Y]}for(const X of s){g&&X.checkDeprecations(M,g),P+=X.getModuleSource(i,E);const Q=X.injections[i];for(const N in Q){const k=N.match(/^(v|f)s:#([\w-]+)$/);if(k){const oe=k[2]==="decl"?F:z;oe[N]=oe[N]||[],oe[N].push(Q[N])}else L[N]=L[N]||[],L[N].push(Q[N])}}return P+=QH,P=cC(P,i,F),P+=ZH(I[i],L),P+=M,P=cC(P,i,z),P=jH(P,f?100:E,y),P}function JH(t){return function(n){const r={};for(const i of t){const s=i.getUniforms(n,r);Object.assign(r,s)}return r}}function KH(t){let{type:e}=t;return`
#define SHADER_TYPE_`.concat(DR[e].toUpperCase(),`
`)}function YH(t){let{id:e,source:n,type:r}=t;return e&&typeof e=="string"&&n.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(e,"_").concat(DR[r],`

`):""}function qH(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=0,n="";for(const r in t){e===0&&(n+=`
// APPLICATION DEFINES
`),e++;const i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],`
`))}return e===0&&(n+=`
`),n}function ZH(t,e){let n="";for(const r in t){const i=t[r];if(n+="void ".concat(i.signature,` {
`),i.header&&(n+="  ".concat(i.header)),e[r]){const s=e[r];s.sort((o,a)=>o.order-a.order);for(const o of s)n+="  ".concat(o.injection,`
`)}i.footer&&(n+="  ".concat(i.footer)),n+=`}
`}return n}function e7(t){const e={vs:{},fs:{}};return t.forEach(n=>{let r;typeof n!="string"?(r=n,n=r.hook):r={},n=n.trim();const[i,s]=n.split(":"),o=n.replace(/\(.+/,"");e[i][o]=Object.assign(r,{signature:s})}),e}const t7="void main() {gl_FragColor = vec4(0);}",FR=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,n7=`#version 300 es
`.concat(FR);function kR(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[r,i,s]=n;if(!e.includes(r)||!i||!s)return null;const o=s.split(";")[0];return{qualifier:r,type:i,name:o}}function NR(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:e=100,input:n,inputType:r,output:i}=t;if(!n)return e===300?n7:e>300?"#version ".concat(e,`
`).concat(FR):t7;const s=s7(n,r);return e>=300?"#version ".concat(e," ").concat(e===300?"es":"",`
in `).concat(r," ").concat(n,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(s,`;
}`):"varying ".concat(r," ").concat(n,`;
void main() {
  gl_FragColor = `).concat(s,`;
}`)}function r7(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return hi(!1),null}}function i7(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return hi(!1),null}}function s7(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return hi(!1),null}}const o7=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,a7={name:"fp32",vs:o7,fs:null};function rs(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}const l7=1/Math.PI*180,c7=1/180*Math.PI,Sn={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function UR(t,{precision:e=Sn.precision}={}){return t=f7(t),"".concat(parseFloat(t.toPrecision(e)))}function Ea(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function u7(t){return ef(t)}function A7(t){return ns(t)}function ef(t,e){return sw(t,n=>n*c7,e)}function ns(t,e){return sw(t,n=>n*l7,e)}function dn(t,e,n){return sw(t,r=>Math.max(e,Math.min(n,r)))}function Ta(t,e,n){return Ea(t)?t.map((r,i)=>Ta(r,e[i],n)):n*e+(1-n)*t}function vr(t,e,n){const r=Sn.EPSILON;n&&(Sn.EPSILON=n);try{if(t===e)return!0;if(Ea(t)&&Ea(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!vr(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=Sn.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{Sn.EPSILON=r}}function f7(t){return Math.round(t/Sn.EPSILON)*Sn.EPSILON}function h7(t){return t.clone?t.clone():new Array(t.length)}function sw(t,e,n){if(Ea(t)){const r=t;n=n||h7(r);for(let i=0;i<n.length&&i<r.length;++i)n[i]=e(t[i],i,n);return n}return e(t)}function d7(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}class ow extends d7(Array){clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+n];return this.check()}toArray(e=[],n=0){for(let r=0;r<this.ELEMENTS;++r)e[n+r]=this[r];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Ea(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Sn)}formatString(e){let n="";for(let r=0;r<this.ELEMENTS;++r)n+=(r>0?", ":"")+UR(this[r],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!vr(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,r){if(r===void 0)return this.lerp(this,e,n);for(let i=0;i<this.ELEMENTS;++i){const s=e[i];this[i]=s+r*(n[i]-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),n[r]);return this.check()}add(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=n[r];return this.check()}subtract(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=n[r];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(Sn.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),n);return this.check()}get elements(){return this}}function p7(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function Ct(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function bf(t,e,n=""){if(Sn.debug&&!p7(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}class aw extends ow{get x(){return this[0]}set x(e){this[0]=Ct(e)}get y(){return this[1]}set y(e){this[1]=Ct(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let r=0;r<this.ELEMENTS;++r){const i=this[r]-e[r];n+=i*i}return Ct(n)}dot(e){let n=0;for(let r=0;r<this.ELEMENTS;++r)n+=this[r]*e[r];return Ct(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=n[r];return this.check()}divide(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=n[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return rs(e>=0&&e<this.ELEMENTS,"index is out of range"),Ct(this[e])}setComponent(e,n){return rs(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var wf=1e-6,ps=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function g7(){var t=new ps(2);return ps!=Float32Array&&(t[0]=0,t[1]=0),t}function cg(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function GR(t,e){return t[0]=-e[0],t[1]=-e[1],t}function zR(t,e,n,r){var i=e[0],s=e[1];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t}function m7(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function y7(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function VR(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function jR(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}(function(){var t=g7();return function(e,n,r,i,s,o){var a,l;for(n||(n=2),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}})();function HR(t,e,n){const r=e[0],i=e[1],s=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/s,t[1]=(n[1]*r+n[5]*i)/s,t}function WR(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s||1;return t[0]=(n[0]*r+n[4]*i+n[8]*s)/o,t[1]=(n[1]*r+n[5]*i+n[9]*s)/o,t[2]=(n[2]*r+n[6]*i+n[10]*s)/o,t}function v7(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t}function _7(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t[3]=e[3],t}function QR(t,e,n){const r=e[0],i=e[1],s=e[2];return t[0]=n[0]*r+n[3]*i+n[6]*s,t[1]=n[1]*r+n[4]*i+n[7]*s,t[2]=n[2]*r+n[5]*i+n[8]*s,t[3]=e[3],t}class lw extends aw{constructor(e=0,n=0){super(2),Ea(e)&&arguments.length===1?this.copy(e):(Sn.debug&&(Ct(e),Ct(n)),this[0]=e,this[1]=n)}set(e,n){return this[0]=e,this[1]=n,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this.check()}fromObject(e){return Sn.debug&&(Ct(e.x),Ct(e.y)),this[0]=e.x,this[1]=e.y,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e}get ELEMENTS(){return 2}horizontalAngle(){return Math.atan2(this.y,this.x)}verticalAngle(){return Math.atan2(this.x,this.y)}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return jR(this,this,e),this.check()}transformAsVector(e){return HR(this,this,e),this.check()}transformByMatrix3(e){return VR(this,this,e),this.check()}transformByMatrix2x3(e){return y7(this,this,e),this.check()}transformByMatrix2(e){return m7(this,this,e),this.check()}}function $R(){var t=new ps(3);return ps!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function cw(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function AC(t,e,n){var r=new ps(3);return r[0]=t,r[1]=e,r[2]=n,r}function b7(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function w7(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function E7(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function T7(t,e){var n=e[0],r=e[1],i=e[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function uw(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function hp(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],l=n[2];return t[0]=i*l-s*a,t[1]=s*o-r*l,t[2]=r*a-i*o,t}function S7(t,e,n,r){var i=e[0],s=e[1],o=e[2];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t[2]=o+r*(n[2]-o),t}function Aw(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/o,t}function XR(t,e,n){var r=e[0],i=e[1],s=e[2];return t[0]=r*n[0]+i*n[3]+s*n[6],t[1]=r*n[1]+i*n[4]+s*n[7],t[2]=r*n[2]+i*n[5]+s*n[8],t}function JR(t,e,n){var r=n[0],i=n[1],s=n[2],o=n[3],a=e[0],l=e[1],f=e[2],d=i*f-s*l,g=s*a-r*f,y=r*l-i*a,b=i*y-s*g,E=s*d-r*y,S=r*g-i*d,M=o*2;return d*=M,g*=M,y*=M,b*=2,E*=2,S*=2,t[0]=a+d+b,t[1]=l+g+E,t[2]=f+y+S,t}function x7(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function C7(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function P7(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function M7(t,e){var n=t[0],r=t[1],i=t[2],s=e[0],o=e[1],a=e[2],l=Math.sqrt(n*n+r*r+i*i),f=Math.sqrt(s*s+o*o+a*a),d=l*f,g=d&&uw(t,e)/d;return Math.acos(Math.min(Math.max(g,-1),1))}var KR=b7,YR=cw,mv=w7;(function(){var t=$R();return function(e,n,r,i,s,o){var a,l;for(n||(n=3),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}})();const yv=[0,0,0];let l0;class q extends aw{static get ZERO(){return l0||(l0=new q(0,0,0),Object.freeze(l0)),l0}constructor(e=0,n=0,r=0){super(-0,-0,-0),arguments.length===1&&Ea(e)?this.copy(e):(Sn.debug&&(Ct(e),Ct(n),Ct(r)),this[0]=e,this[1]=n,this[2]=r)}set(e,n,r){return this[0]=e,this[1]=n,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Sn.debug&&(Ct(e.x),Ct(e.y),Ct(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Ct(e)}angle(e){return M7(this,e)}cross(e){return hp(this,this,e),this.check()}rotateX({radians:e,origin:n=yv}){return x7(this,this,n,e),this.check()}rotateY({radians:e,origin:n=yv}){return C7(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=yv}){return P7(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return Aw(this,this,e),this.check()}transformAsVector(e){return WR(this,this,e),this.check()}transformByMatrix3(e){return XR(this,this,e),this.check()}transformByMatrix2(e){return v7(this,this,e),this.check()}transformByQuaternion(e){return JR(this,this,e),this.check()}}let c0;class fw extends aw{static get ZERO(){return c0||(c0=new fw(0,0,0,0),Object.freeze(c0)),c0}constructor(e=0,n=0,r=0,i=0){super(-0,-0,-0,-0),Ea(e)&&arguments.length===1?this.copy(e):(Sn.debug&&(Ct(e),Ct(n),Ct(r),Ct(i)),this[0]=e,this[1]=n,this[2]=r,this[3]=i)}set(e,n,r,i){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return Sn.debug&&(Ct(e.x),Ct(e.y),Ct(e.z),Ct(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=Ct(e)}get w(){return this[3]}set w(e){this[3]=Ct(e)}transform(e){return Aw(this,this,e),this.check()}transformByMatrix3(e){return QR(this,this,e),this.check()}transformByMatrix2(e){return _7(this,this,e),this.check()}transformByQuaternion(e){return JR(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}class qR extends ow{toString(){let e="[";if(Sn.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let r=0;r<this.RANK;++r)e+=" ".concat(this[r*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,r){return this[n*this.RANK+e]=Ct(r),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)n[i]=this[r+i];return n}setColumn(e,n){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)this[r+i]=n[i];return this}}function I7(){var t=new ps(9);return ps!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function B7(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function L7(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],f=e[7],d=e[8],g=d*o-a*f,y=-d*s+a*l,b=f*s-o*l,E=n*g+r*y+i*b;return E?(E=1/E,t[0]=g*E,t[1]=(-d*r+i*f)*E,t[2]=(a*r-i*o)*E,t[3]=y*E,t[4]=(d*n-i*l)*E,t[5]=(-a*n+i*s)*E,t[6]=b*E,t[7]=(-f*n+r*l)*E,t[8]=(o*n-r*s)*E,t):null}function R7(t){var e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],f=t[8];return e*(f*s-o*l)+n*(-f*i+o*a)+r*(l*i-s*a)}function fC(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],f=e[6],d=e[7],g=e[8],y=n[0],b=n[1],E=n[2],S=n[3],M=n[4],C=n[5],P=n[6],I=n[7],L=n[8];return t[0]=y*r+b*o+E*f,t[1]=y*i+b*a+E*d,t[2]=y*s+b*l+E*g,t[3]=S*r+M*o+C*f,t[4]=S*i+M*a+C*d,t[5]=S*s+M*l+C*g,t[6]=P*r+I*o+L*f,t[7]=P*i+I*a+L*d,t[8]=P*s+I*l+L*g,t}function O7(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],f=e[6],d=e[7],g=e[8],y=n[0],b=n[1];return t[0]=r,t[1]=i,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=y*r+b*o+f,t[7]=y*i+b*a+d,t[8]=y*s+b*l+g,t}function D7(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],f=e[6],d=e[7],g=e[8],y=Math.sin(n),b=Math.cos(n);return t[0]=b*r+y*o,t[1]=b*i+y*a,t[2]=b*s+y*l,t[3]=b*o-y*r,t[4]=b*a-y*i,t[5]=b*l-y*s,t[6]=f,t[7]=d,t[8]=g,t}function hC(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function F7(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,l=i+i,f=n*o,d=r*o,g=r*a,y=i*o,b=i*a,E=i*l,S=s*o,M=s*a,C=s*l;return t[0]=1-g-E,t[3]=d-C,t[6]=y+M,t[1]=d+C,t[4]=1-f-E,t[7]=b-S,t[2]=y-M,t[5]=b+S,t[8]=1-f-g,t}var k1;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2"})(k1||(k1={}));const k7=Object.freeze([1,0,0,0,1,0,0,0,1]);class On extends qR{static get IDENTITY(){return U7()}static get ZERO(){return N7()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return k1}constructor(e,...n){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):n.length>0?this.copy([e,...n]):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}identity(){return this.copy(k7)}fromObject(e){return this.check()}fromQuaternion(e){return F7(this,e),this.check()}set(e,n,r,i,s,o,a,l,f){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=f,this.check()}setRowMajor(e,n,r,i,s,o,a,l,f){return this[0]=e,this[1]=i,this[2]=a,this[3]=n,this[4]=s,this[5]=l,this[6]=r,this[7]=o,this[8]=f,this.check()}determinant(){return R7(this)}transpose(){return B7(this,this),this.check()}invert(){return L7(this,this),this.check()}multiplyLeft(e){return fC(this,e,this),this.check()}multiplyRight(e){return fC(this,this,e),this.check()}rotate(e){return D7(this,this,e),this.check()}scale(e){return Array.isArray(e)?hC(this,this,e):hC(this,this,[e,e]),this.check()}translate(e){return O7(this,this,e),this.check()}transform(e,n){let r;switch(e.length){case 2:r=VR(n||[-0,-0],e,this);break;case 3:r=XR(n||[-0,-0,-0],e,this);break;case 4:r=QR(n||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return bf(r,e.length),r}transformVector(e,n){return this.transform(e,n)}transformVector2(e,n){return this.transform(e,n)}transformVector3(e,n){return this.transform(e,n)}}let u0,A0;function N7(){return u0||(u0=new On([0,0,0,0,0,0,0,0,0]),Object.freeze(u0)),u0}function U7(){return A0||(A0=new On,Object.freeze(A0)),A0}function G7(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function z7(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function N1(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],f=e[7],d=e[8],g=e[9],y=e[10],b=e[11],E=e[12],S=e[13],M=e[14],C=e[15],P=n*a-r*o,I=n*l-i*o,L=n*f-s*o,F=r*l-i*a,z=r*f-s*a,X=i*f-s*l,Y=d*S-g*E,Q=d*M-y*E,N=d*C-b*E,k=g*M-y*S,te=g*C-b*S,oe=y*C-b*M,ae=P*oe-I*te+L*k+F*N-z*Q+X*Y;return ae?(ae=1/ae,t[0]=(a*oe-l*te+f*k)*ae,t[1]=(i*te-r*oe-s*k)*ae,t[2]=(S*X-M*z+C*F)*ae,t[3]=(y*z-g*X-b*F)*ae,t[4]=(l*N-o*oe-f*Q)*ae,t[5]=(n*oe-i*N+s*Q)*ae,t[6]=(M*L-E*X-C*I)*ae,t[7]=(d*X-y*L+b*I)*ae,t[8]=(o*te-a*N+f*Y)*ae,t[9]=(r*N-n*te-s*Y)*ae,t[10]=(E*z-S*L+C*P)*ae,t[11]=(g*L-d*z-b*P)*ae,t[12]=(a*Q-o*k-l*Y)*ae,t[13]=(n*k-r*Q+i*Y)*ae,t[14]=(S*I-E*F-M*P)*ae,t[15]=(d*F-g*I+y*P)*ae,t):null}function V7(t){var e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],f=t[8],d=t[9],g=t[10],y=t[11],b=t[12],E=t[13],S=t[14],M=t[15],C=e*o-n*s,P=e*a-r*s,I=e*l-i*s,L=n*a-r*o,F=n*l-i*o,z=r*l-i*a,X=f*E-d*b,Y=f*S-g*b,Q=f*M-y*b,N=d*S-g*E,k=d*M-y*E,te=g*M-y*S;return C*te-P*k+I*N+L*Q-F*Y+z*X}function hl(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],f=e[6],d=e[7],g=e[8],y=e[9],b=e[10],E=e[11],S=e[12],M=e[13],C=e[14],P=e[15],I=n[0],L=n[1],F=n[2],z=n[3];return t[0]=I*r+L*a+F*g+z*S,t[1]=I*i+L*l+F*y+z*M,t[2]=I*s+L*f+F*b+z*C,t[3]=I*o+L*d+F*E+z*P,I=n[4],L=n[5],F=n[6],z=n[7],t[4]=I*r+L*a+F*g+z*S,t[5]=I*i+L*l+F*y+z*M,t[6]=I*s+L*f+F*b+z*C,t[7]=I*o+L*d+F*E+z*P,I=n[8],L=n[9],F=n[10],z=n[11],t[8]=I*r+L*a+F*g+z*S,t[9]=I*i+L*l+F*y+z*M,t[10]=I*s+L*f+F*b+z*C,t[11]=I*o+L*d+F*E+z*P,I=n[12],L=n[13],F=n[14],z=n[15],t[12]=I*r+L*a+F*g+z*S,t[13]=I*i+L*l+F*y+z*M,t[14]=I*s+L*f+F*b+z*C,t[15]=I*o+L*d+F*E+z*P,t}function ug(t,e,n){var r=n[0],i=n[1],s=n[2],o,a,l,f,d,g,y,b,E,S,M,C;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],l=e[2],f=e[3],d=e[4],g=e[5],y=e[6],b=e[7],E=e[8],S=e[9],M=e[10],C=e[11],t[0]=o,t[1]=a,t[2]=l,t[3]=f,t[4]=d,t[5]=g,t[6]=y,t[7]=b,t[8]=E,t[9]=S,t[10]=M,t[11]=C,t[12]=o*r+d*i+E*s+e[12],t[13]=a*r+g*i+S*s+e[13],t[14]=l*r+y*i+M*s+e[14],t[15]=f*r+b*i+C*s+e[15]),t}function hw(t,e,n){var r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function j7(t,e,n,r){var i=r[0],s=r[1],o=r[2],a=Math.hypot(i,s,o),l,f,d,g,y,b,E,S,M,C,P,I,L,F,z,X,Y,Q,N,k,te,oe,ae,Re;return a<wf?null:(a=1/a,i*=a,s*=a,o*=a,l=Math.sin(n),f=Math.cos(n),d=1-f,g=e[0],y=e[1],b=e[2],E=e[3],S=e[4],M=e[5],C=e[6],P=e[7],I=e[8],L=e[9],F=e[10],z=e[11],X=i*i*d+f,Y=s*i*d+o*l,Q=o*i*d-s*l,N=i*s*d-o*l,k=s*s*d+f,te=o*s*d+i*l,oe=i*o*d+s*l,ae=s*o*d-i*l,Re=o*o*d+f,t[0]=g*X+S*Y+I*Q,t[1]=y*X+M*Y+L*Q,t[2]=b*X+C*Y+F*Q,t[3]=E*X+P*Y+z*Q,t[4]=g*N+S*k+I*te,t[5]=y*N+M*k+L*te,t[6]=b*N+C*k+F*te,t[7]=E*N+P*k+z*te,t[8]=g*oe+S*ae+I*Re,t[9]=y*oe+M*ae+L*Re,t[10]=b*oe+C*ae+F*Re,t[11]=E*oe+P*ae+z*Re,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ZR(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[4],o=e[5],a=e[6],l=e[7],f=e[8],d=e[9],g=e[10],y=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+f*r,t[5]=o*i+d*r,t[6]=a*i+g*r,t[7]=l*i+y*r,t[8]=f*i-s*r,t[9]=d*i-o*r,t[10]=g*i-a*r,t[11]=y*i-l*r,t}function H7(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],f=e[8],d=e[9],g=e[10],y=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-f*r,t[1]=o*i-d*r,t[2]=a*i-g*r,t[3]=l*i-y*r,t[8]=s*r+f*i,t[9]=o*r+d*i,t[10]=a*r+g*i,t[11]=l*r+y*i,t}function eO(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],f=e[4],d=e[5],g=e[6],y=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+f*r,t[1]=o*i+d*r,t[2]=a*i+g*r,t[3]=l*i+y*r,t[4]=f*i-s*r,t[5]=d*i-o*r,t[6]=g*i-a*r,t[7]=y*i-l*r,t}function W7(t,e){var n=e[0],r=e[1],i=e[2],s=e[4],o=e[5],a=e[6],l=e[8],f=e[9],d=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(s,o,a),t[2]=Math.hypot(l,f,d),t}function Q7(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,l=i+i,f=n*o,d=r*o,g=r*a,y=i*o,b=i*a,E=i*l,S=s*o,M=s*a,C=s*l;return t[0]=1-g-E,t[1]=d+C,t[2]=y-M,t[3]=0,t[4]=d-C,t[5]=1-f-E,t[6]=b+S,t[7]=0,t[8]=y+M,t[9]=b-S,t[10]=1-f-g,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function $7(t,e,n,r,i,s,o){var a=1/(n-e),l=1/(i-r),f=1/(s-o);return t[0]=s*2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*l,t[10]=(o+s)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*f,t[15]=0,t}function X7(t,e,n,r,i){var s=1/Math.tan(e/2),o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}var J7=X7;function K7(t,e,n,r,i,s,o){var a=1/(e-n),l=1/(r-i),f=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*l,t[14]=(o+s)*f,t[15]=1,t}var Y7=K7;function q7(t,e,n,r){var i,s,o,a,l,f,d,g,y,b,E=e[0],S=e[1],M=e[2],C=r[0],P=r[1],I=r[2],L=n[0],F=n[1],z=n[2];return Math.abs(E-L)<wf&&Math.abs(S-F)<wf&&Math.abs(M-z)<wf?G7(t):(d=E-L,g=S-F,y=M-z,b=1/Math.hypot(d,g,y),d*=b,g*=b,y*=b,i=P*y-I*g,s=I*d-C*y,o=C*g-P*d,b=Math.hypot(i,s,o),b?(b=1/b,i*=b,s*=b,o*=b):(i=0,s=0,o=0),a=g*o-y*s,l=y*i-d*o,f=d*s-g*i,b=Math.hypot(a,l,f),b?(b=1/b,a*=b,l*=b,f*=b):(a=0,l=0,f=0),t[0]=i,t[1]=a,t[2]=d,t[3]=0,t[4]=s,t[5]=l,t[6]=g,t[7]=0,t[8]=o,t[9]=f,t[10]=y,t[11]=0,t[12]=-(i*E+s*S+o*M),t[13]=-(a*E+l*S+f*M),t[14]=-(d*E+g*S+y*M),t[15]=1,t)}function Z7(){var t=new ps(4);return ps!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function eW(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function dw(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function tW(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function nW(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function rW(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n*n+r*r+i*i+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=s*o,t}function iW(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function sW(t,e,n,r){var i=e[0],s=e[1],o=e[2],a=e[3];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t[2]=o+r*(n[2]-o),t[3]=a+r*(n[3]-a),t}function Hu(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,t}function oW(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],l=n[2],f=n[3],d=f*r+a*s-l*i,g=f*i+l*r-o*s,y=f*s+o*i-a*r,b=-o*r-a*i-l*s;return t[0]=d*f+b*-o+g*-l-y*-a,t[1]=g*f+b*-a+y*-o-d*-l,t[2]=y*f+b*-l+d*-a-g*-o,t[3]=e[3],t}(function(){var t=Z7();return function(e,n,r,i,s,o){var a,l;for(n||(n=4),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}})();var U1;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(U1||(U1={}));const aW=45*Math.PI/180,lW=1,vv=.1,_v=500,cW=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class $e extends qR{static get IDENTITY(){return AW()}static get ZERO(){return uW()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return U1}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,r,i,s,o,a,l,f,d,g,y,b,E,S,M){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=f,this[9]=d,this[10]=g,this[11]=y,this[12]=b,this[13]=E,this[14]=S,this[15]=M,this.check()}setRowMajor(e,n,r,i,s,o,a,l,f,d,g,y,b,E,S,M){return this[0]=e,this[1]=s,this[2]=f,this[3]=b,this[4]=n,this[5]=o,this[6]=d,this[7]=E,this[8]=r,this[9]=a,this[10]=g,this[11]=S,this[12]=i,this[13]=l,this[14]=y,this[15]=M,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(cW)}fromObject(e){return this.check()}fromQuaternion(e){return Q7(this,e),this.check()}frustum(e){const{left:n,right:r,bottom:i,top:s,near:o=vv,far:a=_v}=e;return a===1/0?fW(this,n,r,i,s,o):$7(this,n,r,i,s,o,a),this.check()}lookAt(e){const{eye:n,center:r=[0,0,0],up:i=[0,1,0]}=e;return q7(this,n,r,i),this.check()}ortho(e){const{left:n,right:r,bottom:i,top:s,near:o=vv,far:a=_v}=e;return Y7(this,n,r,i,s,o,a),this.check()}orthographic(e){const{fovy:n=aW,aspect:r=lW,focalDistance:i=1,near:s=vv,far:o=_v}=e;dC(n);const a=n/2,l=i*Math.tan(a),f=l*r;return this.ortho({left:-f,right:f,bottom:-l,top:l,near:s,far:o})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:r=1,near:i=.1,far:s=500}=e;return dC(n),J7(this,n,r,i,s),this.check()}determinant(){return V7(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*i,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*i,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return z7(this,this),this.check()}invert(){return N1(this,this),this.check()}multiplyLeft(e){return hl(this,e,this),this.check()}multiplyRight(e){return hl(this,this,e),this.check()}rotateX(e){return ZR(this,this,e),this.check()}rotateY(e){return H7(this,this,e),this.check()}rotateZ(e){return eO(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return j7(this,this,e,n),this.check()}scale(e){return hw(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return ug(this,this,e),this.check()}transform(e,n){return e.length===4?(n=Hu(n||[-0,-0,-0,-0],e,this),bf(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:r}=e;let i;switch(r){case 2:i=jR(n||[-0,-0],e,this);break;case 3:i=Aw(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return bf(i,e.length),i}transformAsVector(e,n){let r;switch(e.length){case 2:r=HR(n||[-0,-0],e,this);break;case 3:r=WR(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return bf(r,e.length),r}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,r){return this.identity().translate([e,n,r])}}let f0,h0;function uW(){return f0||(f0=new $e([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(f0)),f0}function AW(){return h0||(h0=new $e,Object.freeze(h0)),h0}function dC(t){if(t>Math.PI*2)throw Error("expected radians")}function fW(t,e,n,r,i,s){const o=2*s/(n-e),a=2*s/(i-r),l=(n+e)/(n-e),f=(i+r)/(i-r),d=-1,g=-1,y=-2*s;return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=l,t[9]=f,t[10]=d,t[11]=g,t[12]=0,t[13]=0,t[14]=y,t[15]=0,t}function pC(){var t=new ps(4);return ps!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function hW(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function tO(t,e,n){n=n*.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function gC(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=n[0],l=n[1],f=n[2],d=n[3];return t[0]=r*d+o*a+i*f-s*l,t[1]=i*d+o*l+s*a-r*f,t[2]=s*d+o*f+r*l-i*a,t[3]=o*d-r*a-i*l-s*f,t}function dW(t,e,n){n*=.5;var r=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=r*l+o*a,t[1]=i*l+s*a,t[2]=s*l-i*a,t[3]=o*l-r*a,t}function pW(t,e,n){n*=.5;var r=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=r*l-s*a,t[1]=i*l+o*a,t[2]=s*l+r*a,t[3]=o*l-i*a,t}function gW(t,e,n){n*=.5;var r=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=r*l+i*a,t[1]=i*l-r*a,t[2]=s*l+o*a,t[3]=o*l-s*a,t}function mW(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function dp(t,e,n,r){var i=e[0],s=e[1],o=e[2],a=e[3],l=n[0],f=n[1],d=n[2],g=n[3],y,b,E,S,M;return b=i*l+s*f+o*d+a*g,b<0&&(b=-b,l=-l,f=-f,d=-d,g=-g),1-b>wf?(y=Math.acos(b),E=Math.sin(y),S=Math.sin((1-r)*y)/E,M=Math.sin(r*y)/E):(S=1-r,M=r),t[0]=S*i+M*l,t[1]=S*s+M*f,t[2]=S*o+M*d,t[3]=S*a+M*g,t}function yW(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n*n+r*r+i*i+s*s,a=o?1/o:0;return t[0]=-n*a,t[1]=-r*a,t[2]=-i*a,t[3]=s*a,t}function vW(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function nO(t,e){var n=e[0]+e[4]+e[8],r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var s=(i+1)%3,o=(i+2)%3;r=Math.sqrt(e[i*3+i]-e[s*3+s]-e[o*3+o]+1),t[i]=.5*r,r=.5/r,t[3]=(e[s*3+o]-e[o*3+s])*r,t[s]=(e[s*3+i]+e[i*3+s])*r,t[o]=(e[o*3+i]+e[i*3+o])*r}return t}var _W=eW,bW=dw,wW=iW,EW=sW,TW=tW,SW=nW,rO=rW,xW=function(){var t=$R(),e=AC(1,0,0),n=AC(0,1,0);return function(r,i,s){var o=uw(i,s);return o<-.999999?(hp(t,e,i),YR(t)<1e-6&&hp(t,n,i),T7(t,t),tO(r,t,Math.PI),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(hp(t,i,s),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+o,rO(r,r))}}();(function(){var t=pC(),e=pC();return function(n,r,i,s,o,a){return dp(t,r,o,a),dp(e,i,s,a),dp(n,t,e,2*a*(1-a)),n}})();(function(){var t=I7();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],rO(e,nO(e,t))}})();const CW=[0,0,0,1];class qf extends ow{constructor(e=0,n=0,r=0,i=1){super(-0,-0,-0,-0),Array.isArray(e)&&arguments.length===1?this.copy(e):this.set(e,n,r,i)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,n,r,i){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return nO(this,e),this.check()}fromAxisRotation(e,n){return tO(this,e,n),this.check()}identity(){return hW(this),this.check()}setAxisAngle(e,n){return this.fromAxisRotation(e,n)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=Ct(e)}get y(){return this[1]}set y(e){this[1]=Ct(e)}get z(){return this[2]}set z(e){this[2]=Ct(e)}get w(){return this[3]}set w(e){this[3]=Ct(e)}len(){return TW(this)}lengthSquared(){return SW(this)}dot(e){return wW(this,e)}rotationTo(e,n){return xW(this,e,n),this.check()}add(e){return _W(this,this,e),this.check()}calculateW(){return mW(this,this),this.check()}conjugate(){return vW(this,this),this.check()}invert(){return yW(this,this),this.check()}lerp(e,n,r){return r===void 0?this.lerp(this,e,n):(EW(this,e,n,r),this.check())}multiplyRight(e){return gC(this,this,e),this.check()}multiplyLeft(e){return gC(this,e,this),this.check()}normalize(){const e=this.len(),n=e>0?1/e:0;return this[0]=this[0]*n,this[1]=this[1]*n,this[2]=this[2]*n,this[3]=this[3]*n,e===0&&(this[3]=1),this.check()}rotateX(e){return dW(this,this,e),this.check()}rotateY(e){return pW(this,this,e),this.check()}rotateZ(e){return gW(this,this,e),this.check()}scale(e){return bW(this,this,e),this.check()}slerp(e,n,r){let i,s,o;switch(arguments.length){case 1:({start:i=CW,target:s,ratio:o}=e);break;case 2:i=this,s=e,o=n;break;default:i=e,s=n,o=r}return dp(this,i,s,o),this.check()}transformVector4(e,n=new fw){return oW(n,e,this),bf(n,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,n){return this.setAxisAngle(e,n)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}}const mC=1e-6,PW=6371e3;class wm{constructor({phi:e=0,theta:n=0,radius:r=1,bearing:i,pitch:s,altitude:o,radiusScale:a=PW}={}){T(this,"phi",void 0),T(this,"theta",void 0),T(this,"radius",void 0),T(this,"radiusScale",void 0),this.phi=e,this.theta=n,this.radius=r||o||1,this.radiusScale=a||1,i!==void 0&&(this.bearing=i),s!==void 0&&(this.pitch=s),this.check()}toString(){return this.formatString(Sn)}formatString({printTypes:e=!1}){const n=UR;return"".concat(e?"Spherical":"","[rho:").concat(n(this.radius),",theta:").concat(n(this.theta),",phi:").concat(n(this.phi),"]")}equals(e){return vr(this.radius,e.radius)&&vr(this.theta,e.theta)&&vr(this.phi,e.phi)}exactEquals(e){return this.radius===e.radius&&this.theta===e.theta&&this.phi===e.phi}get bearing(){return 180-ns(this.phi)}set bearing(e){this.phi=Math.PI-ef(e)}get pitch(){return ns(this.theta)}set pitch(e){this.theta=ef(e)}get longitude(){return ns(this.phi)}get latitude(){return ns(this.theta)}get lng(){return ns(this.phi)}get lat(){return ns(this.theta)}get z(){return(this.radius-1)*this.radiusScale}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this.check()}clone(){return new wm().copy(this)}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this.check()}fromLngLatZ([e,n,r]){return this.radius=1+r/this.radiusScale,this.phi=ef(n),this.theta=ef(e),this.check()}fromVector3(e){return this.radius=cw(e),this.radius>0&&(this.theta=Math.atan2(e[0],e[1]),this.phi=Math.acos(dn(e[2]/this.radius,-1,1))),this.check()}toVector3(){return new q(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}makeSafe(){return this.phi=Math.max(mC,Math.min(Math.PI-mC,this.phi)),this}check(){if(!Number.isFinite(this.phi)||!Number.isFinite(this.theta)||!(this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}}const Zf={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:Math.PI*2},yC=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`,MW={lightSources:{}};function bv(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.map(n=>n*e/255)}function IW(t){let{ambientLight:e,pointLights:n=[],directionalLights:r=[]}=t;const i={};return e?i["lighting_uAmbientLight.color"]=bv(e):i["lighting_uAmbientLight.color"]=[0,0,0],n.forEach((s,o)=>{i["lighting_uPointLight[".concat(o,"].color")]=bv(s),i["lighting_uPointLight[".concat(o,"].position")]=s.position,i["lighting_uPointLight[".concat(o,"].attenuation")]=s.attenuation||[1,0,0]}),i.lighting_uPointLightCount=n.length,r.forEach((s,o)=>{i["lighting_uDirectionalLight[".concat(o,"].color")]=bv(s),i["lighting_uDirectionalLight[".concat(o,"].direction")]=s.direction}),i.lighting_uDirectionalLightCount=r.length,i}function iO(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:MW;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:r}=t.lightSources||{};return e||n&&n.length>0||r&&r.length>0?Object.assign({},IW({ambientLight:e,pointLights:n,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const e={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n);break}return iO({lightSources:e})}return{}}const pw={name:"lights",vs:yC,fs:yC,getUniforms:iO,defines:{MAX_LIGHTS:3}},BW=new Uint8Array([0,255,255,255]),LW={pickingSelectedColor:null,pickingHighlightColor:BW,pickingActive:!1,pickingAttribute:!1};function RW(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:LW;const e={};if(t.pickingSelectedColor!==void 0)if(!t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,r=>r/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return t.pickingActive!==void 0&&(e.picking_uActive=Boolean(t.pickingActive),e.picking_uAttribute=Boolean(t.pickingAttribute)),e}const OW=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,DW=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,FW={name:"picking",vs:OW,fs:DW,getUniforms:RW},sO=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`,kW={};function NW(t){const{ambient:e=.35,diffuse:n=.6,shininess:r=32,specularColor:i=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:r,lighting_uSpecularColor:i.map(s=>s/255)}}function oO(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:kW;if(!("material"in t))return{};const{material:e}=t;return e?NW(e):{lighting_uEnabled:!1}}const gw={name:"gouraud-lighting",dependencies:[pw],vs:sO,defines:{LIGHTING_VERTEX:1},getUniforms:oO},aO={name:"phong-lighting",dependencies:[pw],fs:sO,defines:{LIGHTING_FRAGMENT:1},getUniforms:oO},UW=`uniform mat4 u_MVPMatrix;
uniform mat4 u_ModelMatrix;
uniform mat4 u_NormalMatrix;

varying vec3 pbr_vPosition;
varying vec2 pbr_vUV;

#ifdef HAS_NORMALS
# ifdef HAS_TANGENTS
varying mat3 pbr_vTBN;
# else
varying vec3 pbr_vNormal;
# endif
#endif

void pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)
{
  vec4 pos = u_ModelMatrix * position;
  pbr_vPosition = vec3(pos.xyz) / pos.w;

#ifdef HAS_NORMALS
#ifdef HAS_TANGENTS
  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));
  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));
  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;
  pbr_vTBN = mat3(tangentW, bitangentW, normalW);
#else
  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));
#endif
#endif

#ifdef HAS_UV
  pbr_vUV = uv;
#else
  pbr_vUV = vec2(0.,0.);
#endif
}
`,GW=`#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)
# error PBR fragment shader: Texture LOD is not available
#endif

#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)
# error PBR fragment shader: Derivatives are not available
#endif


#if (__VERSION__ < 300)
  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)
#else
  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)
#endif

precision highp float;

uniform bool pbr_uUnlit;

#ifdef USE_IBL
uniform samplerCube u_DiffuseEnvSampler;
uniform samplerCube u_SpecularEnvSampler;
uniform sampler2D u_brdfLUT;
uniform vec2 u_ScaleIBLAmbient;
#endif

#ifdef HAS_BASECOLORMAP
uniform sampler2D u_BaseColorSampler;
#endif
#ifdef HAS_NORMALMAP
uniform sampler2D u_NormalSampler;
uniform float u_NormalScale;
#endif
#ifdef HAS_EMISSIVEMAP
uniform sampler2D u_EmissiveSampler;
uniform vec3 u_EmissiveFactor;
#endif
#ifdef HAS_METALROUGHNESSMAP
uniform sampler2D u_MetallicRoughnessSampler;
#endif
#ifdef HAS_OCCLUSIONMAP
uniform sampler2D u_OcclusionSampler;
uniform float u_OcclusionStrength;
#endif

#ifdef ALPHA_CUTOFF
uniform float u_AlphaCutoff;
#endif

uniform vec2 u_MetallicRoughnessValues;
uniform vec4 u_BaseColorFactor;

uniform vec3 u_Camera;
#ifdef PBR_DEBUG
uniform vec4 u_ScaleDiffBaseMR;
uniform vec4 u_ScaleFGDSpec;
#endif

varying vec3 pbr_vPosition;

varying vec2 pbr_vUV;

#ifdef HAS_NORMALS
#ifdef HAS_TANGENTS
varying mat3 pbr_vTBN;
#else
varying vec3 pbr_vNormal;
#endif
#endif


struct PBRInfo
{
  float NdotL;
  float NdotV;
  float NdotH;
  float LdotH;
  float VdotH;
  float perceptualRoughness;
  float metalness;
  vec3 reflectance0;
  vec3 reflectance90;
  float alphaRoughness;
  vec3 diffuseColor;
  vec3 specularColor;
  vec3 n;
  vec3 v;
};

const float M_PI = 3.141592653589793;
const float c_MinRoughness = 0.04;

vec4 SRGBtoLINEAR(vec4 srgbIn)
{
#ifdef MANUAL_SRGB
#ifdef SRGB_FAST_APPROXIMATION
  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));
#else
  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);
  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );
#endif
  return vec4(linOut,srgbIn.w);;
#else
  return srgbIn;
#endif
}

vec3 getNormal()
{
#ifndef HAS_TANGENTS
  vec3 pos_dx = dFdx(pbr_vPosition);
  vec3 pos_dy = dFdy(pbr_vPosition);
  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));
  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));
  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);

#ifdef HAS_NORMALS
  vec3 ng = normalize(pbr_vNormal);
#else
  vec3 ng = cross(pos_dx, pos_dy);
#endif

  t = normalize(t - ng * dot(ng, t));
  vec3 b = normalize(cross(ng, t));
  mat3 tbn = mat3(t, b, ng);
#else
  mat3 tbn = pbr_vTBN;
#endif

#ifdef HAS_NORMALMAP
  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;
  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));
#else
  vec3 n = normalize(tbn[2].xyz);
#endif

  return n;
}


#ifdef USE_IBL
vec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)
{
  float mipCount = 9.0;
  float lod = (pbrInputs.perceptualRoughness * mipCount);
  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,
    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;
  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;

#ifdef USE_TEX_LOD
  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;
#else
  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;
#endif

  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;
  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);
  diffuse *= u_ScaleIBLAmbient.x;
  specular *= u_ScaleIBLAmbient.y;

  return diffuse + specular;
}
#endif


vec3 diffuse(PBRInfo pbrInputs)
{
  return pbrInputs.diffuseColor / M_PI;
}

vec3 specularReflection(PBRInfo pbrInputs)
{
  return pbrInputs.reflectance0 +
    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *
    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);
}



float geometricOcclusion(PBRInfo pbrInputs)
{
  float NdotL = pbrInputs.NdotL;
  float NdotV = pbrInputs.NdotV;
  float r = pbrInputs.alphaRoughness;

  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));
  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));
  return attenuationL * attenuationV;
}





float microfacetDistribution(PBRInfo pbrInputs)
{
  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;
  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;
  return roughnessSq / (M_PI * f * f);
}

void PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {
  pbrInputs.NdotL = 1.0;
  pbrInputs.NdotH = 0.0;
  pbrInputs.LdotH = 0.0;
  pbrInputs.VdotH = 1.0;
}

void PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {
  vec3 n = pbrInputs.n;
  vec3 v = pbrInputs.v;
  vec3 l = normalize(lightDirection);
  vec3 h = normalize(l+v);

  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);
  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);
  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);
  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);
}

void PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {
  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);
  PBRInfo_setDirectionalLight(pbrInputs, light_direction);
}

vec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {
  vec3 F = specularReflection(pbrInputs);
  float G = geometricOcclusion(pbrInputs);
  float D = microfacetDistribution(pbrInputs);
  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);
  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);
  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);
}

vec4 pbr_filterColor(vec4 colorUnused)
{
#ifdef HAS_BASECOLORMAP
  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;
#else
  vec4 baseColor = u_BaseColorFactor;
#endif

#ifdef ALPHA_CUTOFF
  if (baseColor.a < u_AlphaCutoff) {
    discard;
  }
#endif

  vec3 color = vec3(0, 0, 0);

  if(pbr_uUnlit){
    color.rgb = baseColor.rgb;
  }
  else{


    float perceptualRoughness = u_MetallicRoughnessValues.y;
    float metallic = u_MetallicRoughnessValues.x;
#ifdef HAS_METALROUGHNESSMAP

    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);
    perceptualRoughness = mrSample.g * perceptualRoughness;
    metallic = mrSample.b * metallic;
#endif
    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);
    metallic = clamp(metallic, 0.0, 1.0);

    float alphaRoughness = perceptualRoughness * perceptualRoughness;

    vec3 f0 = vec3(0.04);
    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);
    diffuseColor *= 1.0 - metallic;
    vec3 specularColor = mix(f0, baseColor.rgb, metallic);
    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);



    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);
    vec3 specularEnvironmentR0 = specularColor.rgb;
    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;

    vec3 n = getNormal();
    vec3 v = normalize(u_Camera - pbr_vPosition);

    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);
    vec3 reflection = -normalize(reflect(v, n));

    PBRInfo pbrInputs = PBRInfo(
      0.0,
      NdotV,
      0.0,
      0.0,
      0.0,
      perceptualRoughness,
      metallic,
      specularEnvironmentR0,
      specularEnvironmentR90,
      alphaRoughness,
      diffuseColor,
      specularColor,
      n,
      v
    );

#ifdef USE_LIGHTS
    PBRInfo_setAmbientLight(pbrInputs);
    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);
    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {
      if (i < lighting_uDirectionalLightCount) {
        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);
        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);
      }
    }
    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {
      if (i < lighting_uPointLightCount) {
        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);
        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));
        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);
      }
    }
#endif
#ifdef USE_IBL
    color += getIBLContribution(pbrInputs, n, reflection);
#endif
#ifdef HAS_OCCLUSIONMAP
    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;
    color = mix(color, color * ao, u_OcclusionStrength);
#endif

#ifdef HAS_EMISSIVEMAP
    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;
    color += emissive;
#endif

#ifdef PBR_DEBUG





    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);
    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);
    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);
#endif

  }

  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);
}
`,mw={name:"pbr",vs:UW,fs:GW,defines:{LIGHTING_FRAGMENT:1},dependencies:[pw]},zW=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,VW={name:"transform",vs:zW,fs:null};class Gh{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new Gh(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:n="",fs:r="",defines:i={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:l=!1}=e,f=this._getModuleList(e.modules),d=this._getHash(n),g=this._getHash(r),y=f.map(I=>this._getHash(I.name)).sort(),b=o.map(I=>this._getHash(I)),E=Object.keys(i).sort(),S=Object.keys(s).sort(),M=[],C=[];for(const I of E)M.push(this._getHash(I)),M.push(this._getHash(i[I]));for(const I of S)C.push(this._getHash(I)),C.push(this._getHash(s[I]));const P="".concat(d,"/").concat(g,"D").concat(M.join("/"),"M").concat(y.join("/"),"I").concat(C.join("/"),"V").concat(b.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(l?"T":"");if(!this._programCache[P]){const I=XH(this.gl,{vs:n,fs:r,modules:f,inject:s,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[P]=new MR(this.gl,{hash:P,vs:I.vs,fs:I.fs,varyings:o,bufferMode:a}),this._getUniforms[P]=I.getUniforms||(L=>{}),this._useCounts[P]=0}return this._useCounts[P]++,this._programCache[P]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,this._useCounts[n]===0&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),r={};let i=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],l=a.name;n[i++]=a,r[l]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],l=a.name;r[l]||(n[i++]=a,r[l]=!0)}return n.length=i,n}}const jW={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function HW(t,e,n){const r={};let i=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=WW(s,n);if(s==="indices")i=o;else if(o.constant)r[a]=o.value;else{const l=o.value,f={...o};delete f.value,r[a]=[new Rt(t,l),f],QW(s,f)}}if(i){const s=i.value||i;_e(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};r.indices=[new Rt(t,{data:s,target:34963}),o]}return r}function WW(t,e){const{attributeMap:n=jW}=e||{};return n&&n[t]||t}function QW(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors";break}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break}_e(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const lc=2,$W=1e4,XW="Model needs drawMode and vertexCount",vC=()=>{},JW={};class Xr{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:r=$s("model")}=n;_e(ym(e)),this.id=r,this.gl=e,this.id=n.id||$s("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||Gh.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:f,transpileToGLSL100:d}=e;this.programProps={program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:f,transpileToGLSL100:d},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},_e(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),XW)}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:f,transpileToGLSL100:d}=e;this.programProps={program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:f,transpileToGLSL100:d},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return _e(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return _e(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=HW(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(bu(e))return this;const n={};for(const r in e){const i=e[r];n[r]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(n),this}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return ew(this.program.gl,e),this}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:r,uniforms:i={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:l=this.vertexArray}=e;this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(i);let f;Ie.priority>=lc&&(f=this._logDrawCallStart(lc));const d=this.vertexArray.getDrawParams(),{isIndexed:g=d.isIndexed,indexType:y=d.indexType,indexOffset:b=d.indexOffset,vertexArrayInstanced:E=d.isInstanced}=this.props;E&&!this.isInstanced&&Ie.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:S,instanceCount:M}=this,{onBeforeRender:C=vC,onAfterRender:P=vC}=this.props;C(),this.program.setUniforms(this.uniforms);const I=this.program.draw(Object.assign(JW,e,{logPriority:f,uniforms:null,framebuffer:r,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:o,isIndexed:g,indexType:y,isInstanced:S,instanceCount:M,offset:g?b:0}));return P(),Ie.priority>=lc&&this._logDrawCallEnd(f,l,r),I}transform(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:n=!0,feedbackBuffers:r,unbindModels:i=[]}=e;let{parameters:s}=e;r&&this._setFeedbackBuffers(r),n&&(s=Object.assign({},s,{[35977]:n})),i.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{i.forEach(o=>o.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ie.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:r,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:f,transpileToGLSL100:d}=this.programProps;n=this.programManager.get({vs:r,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:f,transpileToGLSL100:d}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}_e(n instanceof MR,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new cH(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof Rt&&n.delete()}}_setAnimationProps(e){this.animated&&_e(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(bu(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new IR(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:$W;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),Ie.group(lc,">>> DRAWING MODEL ".concat(this.id),{collapsed:Ie.level<=2})(),e}_logDrawCallEnd(e,n,r,i){if(e===void 0)return;const s=fH({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:l}=eC({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),{table:f,count:d}=eC({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0});d>0&&Ie.log("MISSING UNIFORMS",Object.keys(f))(),l>0&&Ie.log("UNUSED UNIFORMS",Object.keys(a))();const g=dH(this.vertexArray.configuration);Ie.table(e,s)(),Ie.table(e,o)(),Ie.table(e+1,g)(),i&&i.log({logLevel:lc,message:"Rendered to ".concat(i.id)}),Ie.groupEnd(lc)()}}class KW{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:r,transformFeedback:i}=n;return{attributes:Object.assign({},r,e.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],r=e?n[e]:null;return r?r instanceof Rt?r:r.buffer:null}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:n}=e,r=this.getBuffer(n);return r?r.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&_e(it(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const s=this.feedbackMap[i];i in n&&(r[s]=i)}Object.assign(r,e.feedbackBuffers);for(const i in r){const s=r[i];if(typeof s=="string"){const o=n[s],{byteLength:a,usage:l,accessor:f}=o;r[i]=this._createNewBuffer(i,{byteLength:a,usage:l,accessor:f})}}return r}_setupBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}_setupTransformFeedback(e,n){let{model:r}=n;const{program:i}=r;e.transformFeedback=new IR(this.gl,{program:i,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:r}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),r=Object.assign({},e.feedbackBuffers);for(const i in this.feedbackMap){const s=this.feedbackMap[i];n[i]=e.feedbackBuffers[s],r[s]=e.sourceBuffers[i],_e(r[s]instanceof Rt)}return{sourceBuffers:n,feedbackBuffers:r}}_createNewBuffer(e,n){const r=new Rt(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}_getNextIndex(){return(this.currentIndex+1)%2}}const YW="transform_uSampler_",Ag="transform_uSize_",_C="transform_position";function qW(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:r,targetTexture:i}=t,o=Object.keys(n).length,a=null;const l={};let f=e,d={};if(o>0||r){const g=f.split(`
`),y=g.slice();if(g.forEach((b,E,S)=>{if(o>0){const M=rQ(b,n);if(M){const{updatedLine:C,inject:P}=M;y[E]=C,d=O1([d,P]),Object.assign(l,M.samplerTextureMap),o--}}r&&!a&&(a=nQ(b,r))}),r){_e(i);const b="".concat(Ag).concat(r),E="uniform vec2 ".concat(b,`;
`),S="     vec2 ".concat(_C," = transform_getPos(").concat(b,`);
     gl_Position = vec4(`).concat(_C,`, 0, 1.);
`);d=O1([d,{"vs:#decl":E,"vs:#main-start":S}])}f=y.join(`
`)}return{vs:f,targetTextureType:a,inject:d,samplerTextureMap:l}}function ZW(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}=t;const i={};let s,o;n&&({width:s,height:o}=r,i["".concat(Ag).concat(n)]=[s,o]);for(const a in e)({width:s,height:o}=e[a]),i["".concat(Ag).concat(a)]=[s,o];return i}function eQ(t){return kR(t,["attribute","in"])}function tQ(t){const e="".concat(YW).concat(t),n="".concat(Ag).concat(t),r="  uniform sampler2D ".concat(e,`;
  uniform vec2 `).concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}function nQ(t,e){const n=kR(t,["varying","out"]);return n&&n.name===e?n.type:null}function rQ(t,e){const n={},r=eQ(t);if(!r)return null;const{type:i,name:s}=r;if(s&&e[s]){const o="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:l,uniformDeclerations:f}=tQ(s),d=r7(i),g="  ".concat(i," ").concat(s," = transform_getInput(").concat(a,", ").concat(l,").").concat(d,`;
`);return n[a]=s,{updatedLine:o,inject:{"vs:#decl":f,"vs:#main-start":g},samplerTextureMap:n}}return null}const iQ={[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},sQ="transform_output";class oQ{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,sourceTextures:r,framebuffer:i,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},n,e.attributes),a=Object.assign({},e.uniforms),l=Object.assign({},e.parameters);let f=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const g in this.samplerTextureMap){const y=this.samplerTextureMap[g];a[g]=r[y]}this._setSourceTextureParameters();const d=ZW({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,d)}return this.hasTargetTexture&&(f=!1,l.viewport=[0,0,i.width,i.height]),{attributes:o,framebuffer:i,uniforms:a,discard:f,parameters:l}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],r=_m(n);if(!e)return r;const i=r.constructor,s=i7(this.targetTextureType),o=new i(r.length*s/4);let a=0;for(let l=0;l<r.length;l+=4)for(let f=0;f<s;f++)o[a++]=r[l+f];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:r}=e;this._swapTexture=r,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:r}=e;if(r instanceof br)return r;const i=n[r];return i?(this._targetRefTexName=r,this._createNewTexture(i)):null}_setupTextures(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:r={},_targetTexture:i}=e,s=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:r,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if(typeof e!="number"||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((r,i,s)=>{s[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new Rt(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:r}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}_updateBinding(e,n){const{sourceBuffers:r,sourceTextures:i,targetTexture:s}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,i),Object.assign(e.sourceBuffers,r),s){e.targetTexture=s;const{width:o,height:a}=s,{framebuffer:l}=e;l?(l.update({attachments:{[36064]:s},resizeAttachments:!1}),l.resize({width:o,height:a})):e.framebuffer=new xn(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{[36064]:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const r in n)n[r].setParameters(iQ)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);n[this._swapTexture]=e.targetTexture;const r=e.sourceTextures[this._swapTexture];return{sourceTextures:n,targetTexture:r}}_createNewTexture(e){const n=SR(e,{parameters:{[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},pixelStore:{[37440]:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:n,targetTexture:r}=this.bindings[this.currentIndex],{vs:i,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:l}=qW({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),f=O1([e.inject||{},a]);this.targetTextureType=o,this.samplerTextureMap=l;const d=e._fs||NR({version:CR(i),input:this.targetTextureVarying,inputType:o,output:sQ}),g=this.hasSourceTextures||this.targetTextureVarying?[VW].concat(e.modules||[]):e.modules;return{vs:i,fs:d,modules:g,uniforms:s,inject:f}}}class yw{static isSupported(e){return it(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:r}=this;e&&e.delete(),n&&n.delete(),r&&r.delete()}run(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:n=!0}=e,r=this._updateDrawOptions(e);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=e||r.swap();_e(e,"Nothing to swap")}getBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n){const i=r.getData(e);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)r.update(e)}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new Xr(n,Object.assign({},e,{fs:e.fs||NR({version:CR(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=i.updateModelProps(n);return n}_buildResourceTransforms(e,n){aQ(n)&&(this.bufferTransform=new KW(e,n)),lQ(n)&&(this.textureTransform=new oQ(e,n)),_e(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=Object.assign(n,i.getDrawOptions(n));return n}}function aQ(t){return!!(!bu(t.feedbackBuffers)||!bu(t.feedbackMap)||t.varyings&&t.varyings.length>0)}function lQ(t){return!!(!bu(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)}const bC={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Di{static get DRAW_MODE(){return bC}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:n=$s("geometry"),drawMode:r=bC.TRIANGLES,attributes:i={},indices:s=null,vertexCount:o=null}=e;this.id=n,this.drawMode=r|0,this.attributes={},this.userData={},this._setAttributes(i,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const r in e){let i=e[r];i=ArrayBuffer.isView(i)?{value:i}:i,_e(ArrayBuffer.isView(i.value),"".concat(this._print(r),": must be typed array or object with value as typed array")),(r==="POSITION"||r==="positions")&&!i.size&&(i.size=3),r==="indices"?(_e(!this.indices),this.indices=i):this.attributes[r]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let r=1/0;for(const i in e){const s=e[i],{value:o,size:a,constant:l}=s;!l&&o&&a>=1&&(r=Math.min(r,o.length/a))}return _e(Number.isFinite(r)),r}}let cQ=1,uQ=1;class lO{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:r=Number.POSITIVE_INFINITY,rate:i=1,repeat:s=1}=e,o=cQ++,a={time:0,delay:n,duration:r,rate:i,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[n,r]of this.animations)r.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;const n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const i of n)this._setChannelTime(i,this.time);const r=this.animations.values();for(const i of r){const{animation:s,channel:o}=i;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const r=uQ++;return this.animations.set(r,{animation:e,channel:n}),e.setTime(this.getTime(n)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const r=n-e.delay,i=e.duration*e.repeat;r>=i?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}const cO="#define SMOOTH_EDGE_RADIUS 0.5",AQ=`
`.concat(cO,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),fQ=`
`.concat(cO,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),hQ={name:"geometry",vs:AQ,fs:fQ},Ze={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Ze,"IDENTITY",{get:()=>(je.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const is={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},gs={common:0,meters:1,pixels:2},wC={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},zh={DRAW:"draw",MASK:"mask"},dQ=Object.keys(Ze).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(Ze[t],";")).join(""),pQ=Object.keys(is).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(is[t],";")).join(""),gQ=Object.keys(gs).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(gs[t],";")).join(""),mQ="".concat(dQ,`
`).concat(pQ,`
`).concat(gQ,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0; // meters
const float GLOBE_RADIUS = 256.0;

// returns an adjustment factor for uCommonUnitsPerMeter
float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {

    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear
    // Adjust by 1 / cos(latitude)
    // If geometry.position (vertex in common space) is populated, use it
    // Otherwise use geometry.worldPosition (anchor in world space)
    
    if (geometry.position.w == 0.0) {
      float y = clamp(geometry.worldPosition.y, -89.9, 89.9);
      return 1.0 / cos(radians(y));
    }

    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)
    // Taylor series of 1 / cos(latitude)
    // Max error < 0.003
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}
//
// Scaling offsets - scales meters to "world distance"
// Note the scalar version of project_size is for scaling the z component only
//
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}

// Get rotation matrix that aligns the z axis with the given up vector
// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  // Tangent on XY plane
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}

//
// Projecting normal - transform deltas from current coordinate system to
// normals in the worldspace
//
vec3 project_normal(vec3 vector) {
  // Apply model matrix
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}

//
// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]
//
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}

//
// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)
//
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;

  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size(position_world.z),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        // Too far from the projection center for offset mode to be accurate
        // Only use high parts
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.
    position_world.xyz -= project_uCoordinateOrigin;
  }

  // Translation is already added to the high parts
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}

//
// Projects from common space coordinates to clip space.
// Uses project_uViewProjectionMatrix
//
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}

// Returns a clip space offset that corresponds to a given number of screen pixels
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  // UNIT_PIXELS
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function yQ(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function Vh(t){let e={},n;return r=>{for(const i in r)if(!yQ(r[i],e[i])){n=t(r),e=r;break}return n}}const EC=[0,0,0,0],vQ=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],uO=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],_Q=[0,0,0],AO=[0,0,0],bQ=Vh(TQ);function fO(t,e,n=AO){n.length<3&&(n=[n[0],n[1],0]);let r=n,i,s=!0;switch(e===Ze.LNGLAT_OFFSETS||e===Ze.METER_OFFSETS?i=n:i=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case is.WEB_MERCATOR:(e===Ze.LNGLAT||e===Ze.CARTESIAN)&&(i=[0,0,0],s=!1);break;case is.WEB_MERCATOR_AUTO_OFFSET:e===Ze.LNGLAT?r=i:e===Ze.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case is.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case is.GLOBE:s=!1,i=null;break;default:s=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:s}}function wQ(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:i}=t;let{viewMatrix:s,viewProjectionMatrix:o}=t,a=EC,l=EC,f=t.cameraPosition;const{geospatialOrigin:d,shaderCoordinateOrigin:g,offsetMode:y}=fO(t,e,n);return y&&(l=t.projectPosition(d||g),f=[f[0]-l[0],f[1]-l[1],f[2]-l[2]],l[3]=1,a=Hu([],l,o),s=r||s,o=hl([],i,s),o=hl([],o,vQ)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:l,cameraPosCommon:f,shaderCoordinateOrigin:g,geospatialOrigin:d}}function EQ({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=Ze.DEFAULT,coordinateOrigin:i=AO,autoWrapLongitude:s=!1}){r===Ze.DEFAULT&&(r=t.isGeospatial?Ze.LNGLAT:Ze.CARTESIAN);const o=bQ({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:i});return o.project_uWrapLongitude=s,o.project_uModelMatrix=n||uO,o}function TQ({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r}){const{projectionCenter:i,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:l,geospatialOrigin:f}=wQ(t,n,r),d=t.getDistanceScales(),g=[t.width*e,t.height*e],y=Hu([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,b={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:o.slice(0,3),project_uCenter:i,project_uPseudoMeters:Boolean(t._pseudoMeters),project_uViewportSize:g,project_uDevicePixelRatio:e,project_uFocalDistance:y,project_uCommonUnitsPerMeter:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:_Q,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:uO,project_uCameraPosition:a};if(f){const E=t.getDistanceScales(f);switch(n){case Ze.METER_OFFSETS:b.project_uCommonUnitsPerWorldUnit=E.unitsPerMeter,b.project_uCommonUnitsPerWorldUnit2=E.unitsPerMeter2;break;case Ze.LNGLAT:case Ze.LNGLAT_OFFSETS:t._pseudoMeters||(b.project_uCommonUnitsPerMeter=E.unitsPerMeter),b.project_uCommonUnitsPerWorldUnit=E.unitsPerDegree,b.project_uCommonUnitsPerWorldUnit2=E.unitsPerDegree2;break;case Ze.CARTESIAN:b.project_uCommonUnitsPerWorldUnit=[1,1,E.unitsPerMeter[2]],b.project_uCommonUnitsPerWorldUnit2=[0,0,E.unitsPerMeter2[2]];break}}return b}const SQ={};function xQ(t=SQ){return"viewport"in t?EQ(t):{}}const vw={name:"project",dependencies:[a7,hQ],vs:mQ,getUniforms:xQ},CQ=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,Ys={name:"project32",dependencies:[vw],vs:CQ};function PQ(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function tu(t,e){const n=Hu([],e,t);return dw(n,n,1/n[3]),n}function TC(t,e){const n=t%e;return n<0?e+n:n}function G1(t,e,n){return t<e?e:t>n?n:t}function MQ(t){return Math.log(t)*Math.LOG2E}const _w=Math.log2||MQ;function xo(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const ss=Math.PI,hO=ss/4,cs=ss/180,z1=180/ss,eh=512,V1=4003e4,d0=85.051129,IQ=1.5;function BQ(t){return _w(t)}function Eu(t){const[e,n]=t;xo(Number.isFinite(e)),xo(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=e*cs,i=n*cs,s=eh*(r+ss)/(2*ss),o=eh*(ss+Math.log(Math.tan(hO+i*.5)))/(2*ss);return[s,o]}function Sa(t){const[e,n]=t,r=e/eh*(2*ss)-ss,i=2*(Math.atan(Math.exp(n/eh*(2*ss)-ss))-hO);return[r*z1,i*z1]}function dO(t){const{latitude:e}=t;xo(Number.isFinite(e));const n=Math.cos(e*cs);return BQ(V1*n)-9}function j1(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;xo(Number.isFinite(e)&&Number.isFinite(n));const i=eh,s=Math.cos(e*cs),o=i/360,a=o/s,l=i/V1/s,f={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[o,a,l],degreesPerUnit:[1/o,1/a,1/l]};if(r){const d=cs*Math.tan(e*cs)/s,g=o*d/2,y=i/V1*d,b=y/a*l;f.unitsPerDegree2=[0,g,y],f.unitsPerMeter2=[b,0,b]}return f}function pO(t,e){const[n,r,i]=t,[s,o,a]=e,{unitsPerMeter:l,unitsPerMeter2:f}=j1({longitude:n,latitude:r,highPrecision:!0}),d=Eu(t);d[0]+=s*(l[0]+f[0]*o),d[1]+=o*(l[1]+f[1]*o);const g=Sa(d),y=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[g[0],g[1],y]:g}function LQ(t){const{height:e,pitch:n,bearing:r,altitude:i,scale:s,center:o}=t,a=PQ();ug(a,a,[0,0,-i]),ZR(a,a,-n*cs),eO(a,a,r*cs);const l=s/e;return hw(a,a,[l,l,l]),o&&ug(a,a,E7([],o)),a}function RQ(t){const{width:e,height:n,altitude:r,pitch:i=0,offset:s,center:o,scale:a,nearZMultiplier:l=1,farZMultiplier:f=1}=t;let{fovy:d=fg(IQ)}=t;r!==void 0&&(d=fg(r));const g=d*cs,y=i*cs,b=bw(d);let E=b;o&&(E+=o[2]*a/Math.cos(y)/n);const S=g*(.5+(s?s[1]:0)/n),M=Math.sin(S)*E/Math.sin(G1(Math.PI/2-y-S,.01,Math.PI-.01)),C=Math.sin(y)*M+E,P=E*10,I=Math.min(C*f,P);return{fov:g,aspect:e/n,focalDistance:b,near:l,far:I}}function fg(t){return 2*Math.atan(.5/t)*z1}function bw(t){return .5/Math.tan(.5*t*cs)}function gO(t,e){const[n,r,i=0]=t;return xo(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),tu(e,[n,r,i,1])}function jh(t,e,n=0){const[r,i,s]=t;if(xo(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(s))return tu(e,[r,i,s,1]);const o=tu(e,[r,i,0,1]),a=tu(e,[r,i,1,1]),l=o[2],f=a[2],d=l===f?0:((n||0)-l)/(f-l);return zR([],o,a,d)}function mO(t){const{width:e,height:n,bounds:r,minExtent:i=0,maxZoom:s=24,offset:o=[0,0]}=t,[[a,l],[f,d]]=r,g=OQ(t.padding),y=Eu([a,G1(d,-d0,d0)]),b=Eu([f,G1(l,-d0,d0)]),E=[Math.max(Math.abs(b[0]-y[0]),i),Math.max(Math.abs(b[1]-y[1]),i)],S=[e-g.left-g.right-Math.abs(o[0])*2,n-g.top-g.bottom-Math.abs(o[1])*2];xo(S[0]>0&&S[1]>0);const M=S[0]/E[0],C=S[1]/E[1],P=(g.right-g.left)/2/M,I=(g.bottom-g.top)/2/C,L=[(b[0]+y[0])/2+P,(b[1]+y[1])/2+I],F=Sa(L),z=Math.min(s,_w(Math.abs(Math.min(M,C))));return xo(Number.isFinite(z)),{longitude:F[0],latitude:F[1],zoom:z}}function OQ(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(xo(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const SC=Math.PI/180;function DQ(t,e=0){const{width:n,height:r,unproject:i}=t,s={targetZ:e},o=i([0,r],s),a=i([n,r],s);let l,f;const d=t.fovy?.5*t.fovy*SC:Math.atan(.5/t.altitude),g=(90-t.pitch)*SC;return d>g-.01?(l=xC(t,0,e),f=xC(t,n,e)):(l=i([0,0],s),f=i([n,0],s)),[o,a,f,l]}function xC(t,e,n){const{pixelUnprojectionMatrix:r}=t,i=tu(r,[e,0,1,1]),s=tu(r,[e,t.height,1,1]),a=(n*t.distanceScales.unitsPerMeter[2]-i[2])/(s[2]-i[2]),l=zR([],i,s,a),f=Sa(l);return f.push(n),f}const CC=512;function FQ(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:i,latitude:s,zoom:o,bearing:a=0}=t;(i<-180||i>180)&&(i=TC(i+180,360)-180),(a<-180||a>180)&&(a=TC(a+180,360)-180);const l=_w(n/CC);if(o<=l)o=l,s=0;else{const f=n/2/Math.pow(2,o),d=Sa([0,f])[1];if(s<d)s=d;else{const g=Sa([0,CC-f])[1];s>g&&(s=g)}}return{width:e,height:n,longitude:i,latitude:s,zoom:o,pitch:r,bearing:a}}const kQ=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,NQ=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,UQ=Vh(HQ),GQ=Vh(WQ),zQ=[0,0,0,1],VQ=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function jQ(t,e){const[n,r,i]=t,s=jh([n,r,i],e);return Number.isFinite(i)?s:[s[0],s[1],0]}function HQ({viewport:t,center:e}){return new $e(t.viewProjectionMatrix).invert().transform(e)}function WQ({viewport:t,shadowMatrices:e}){const n=[],r=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,s=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(o=>jQ(o,r));for(const o of e){const a=o.clone().translate(new q(t.center).negate()),l=s.map(d=>a.transform(d)),f=new $e().ortho({left:Math.min(...l.map(d=>d[0])),right:Math.max(...l.map(d=>d[0])),bottom:Math.min(...l.map(d=>d[1])),top:Math.max(...l.map(d=>d[1])),near:Math.min(...l.map(d=>-d[2])),far:Math.max(...l.map(d=>-d[2]))});n.push(f.multiplyRight(o))}return n}function QQ(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const r={shadow_uDrawShadowMap:Boolean(t.drawToShadowMap),shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||zQ,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},i=UQ({viewport:t.viewport,center:e.project_uCenter}),s=[],o=GQ({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const l=o[a],f=l.clone().translate(new q(t.viewport.center).negate());e.project_uCoordinateSystem===Ze.LNGLAT&&e.project_uProjectionMode===is.WEB_MERCATOR?(o[a]=f,s[a]=i):(o[a]=l.clone().multiplyRight(VQ),s[a]=f.transform(i))}for(let a=0;a<o.length;a++)r["shadow_uViewProjectionMatrices[".concat(a,"]")]=o[a],r["shadow_uProjectCenters[".concat(a,"]")]=s[a],t.shadowMaps&&t.shadowMaps.length>0?r["shadow_uShadowMap".concat(a)]=t.shadowMaps[a]:r["shadow_uShadowMap".concat(a)]=t.dummyShadowMap;return r}const wv={name:"shadow",dependencies:[vw],vs:kQ,fs:NQ,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?QQ(t,e):{}},qs={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...FW},$Q=[vw],XQ=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function JQ(t){const e=Gh.getDefaultProgramManager(t);for(const n of $Q)e.addDefaultModule(n);for(const n of XQ)e.addShaderHook(n);return e}const KQ=[255,255,255],YQ=1;let qQ=0;class yO{constructor(e={}){T(this,"id",void 0),T(this,"color",void 0),T(this,"intensity",void 0),T(this,"type","ambient");const{color:n=KQ}=e,{intensity:r=YQ}=e;this.id=e.id||"ambient-".concat(qQ++),this.color=n,this.intensity=r}}const ZQ=[255,255,255],e$=1,t$=[0,0,-1];let n$=0;class PC{constructor(e={}){T(this,"id",void 0),T(this,"color",void 0),T(this,"intensity",void 0),T(this,"type","directional"),T(this,"direction",void 0),T(this,"shadow",void 0);const{color:n=ZQ}=e,{intensity:r=e$}=e,{direction:i=t$}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(n$++),this.color=n,this.intensity=r,this.type="directional",this.direction=new q(i).normalize().toArray(),this.shadow=s}getProjectedLight(e){return this}}class r${constructor(e,n={id:"pass"}){T(this,"id",void 0),T(this,"gl",void 0),T(this,"props",void 0);const{id:r}=n;this.id=r,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class Em extends r${constructor(...e){super(...e),T(this,"_lastRenderIndex",-1)}render(e){const n=this.gl;return So(n,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:r,viewports:i,views:s,onViewportActive:o,clearStack:a=!0,clearCanvas:l=!0}=e;e.pass=e.pass||"unknown";const f=this.gl;l&&s$(f),a&&(this._lastRenderIndex=-1);const d=[];for(const g of i){const y=s&&s[g.id];o(g);const b=this._getDrawLayerParams(g,e),E=g.subViewports||[g];for(const S of E){const M=this._drawLayersInViewport(f,{target:n,moduleParameters:r,viewport:S,view:y,pass:e.pass,layers:e.layers},b);d.push(M)}}return d}_getDrawLayerParams(e,{layers:n,pass:r,layerFilter:i,cullRect:s,effects:o,moduleParameters:a}){const l=[],f=vO(this._lastRenderIndex+1),d={layer:n[0],viewport:e,isPicking:r.startsWith("picking"),renderPass:r,cullRect:s},g={};for(let y=0;y<n.length;y++){const b=n[y],E=this._shouldDrawLayer(b,d,i,g),S={shouldDrawLayer:E};E&&(S.layerRenderIndex=f(b,E),S.moduleParameters=this._getModuleParameters(b,o,r,a),S.layerParameters=this.getLayerParameters(b,y,e)),l[y]=S}return l}_drawLayersInViewport(e,{layers:n,moduleParameters:r,pass:i,target:s,viewport:o,view:a},l){const f=i$(e,{moduleParameters:r,target:s,viewport:o});if(a&&a.props.clear){const g=a.props.clear===!0?{color:!0,depth:!0}:a.props.clear;Oi(e,{scissorTest:!0,scissor:f},()=>ew(e,g))}const d={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};So(e,{viewport:f});for(let g=0;g<n.length;g++){const y=n[g],{shouldDrawLayer:b,layerRenderIndex:E,moduleParameters:S,layerParameters:M}=l[g];if(b&&y.props.pickable&&d.pickableCount++,y.isComposite)d.compositeCount++;else if(b){d.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,E),S.viewport=o;try{y._drawLayer({moduleParameters:S,uniforms:{layerIndex:E},parameters:M})}catch(C){y.raiseError(C,"drawing ".concat(y," to ").concat(i))}}}return d}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,r){return e.props.parameters}_shouldDrawLayer(e,n,r,i){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;n.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(n))return!1;n.layer=o,o=o.parent}if(r){const a=n.layer.id;if(a in i||(i[a]=r(n)),!i[a])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,r,i){var s;const o=Object.assign(Object.create(((s=e.internalState)===null||s===void 0?void 0:s.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:_u(this.gl)});if(n)for(const l of n){var a;Object.assign(o,(a=l.getModuleParameters)===null||a===void 0?void 0:a.call(l,e))}return Object.assign(o,this.getModuleParameters(e,n),i)}}function vO(t=0,e={}){const n={},r=(i,s)=>{const o=i.props._offset,a=i.id,l=i.parent&&i.parent.id;let f;if(l&&!(l in e)&&r(i.parent,!1),l in n){const d=n[l]=n[l]||vO(e[l],e);f=d(i,s),n[a]=d}else Number.isFinite(o)?(f=o+(e[l]||0),n[a]=null):f=t;return s&&f>=t&&(t=f+1),e[a]=f,f};return r}function i$(t,{moduleParameters:e,target:n,viewport:r}){const i=n&&n.id!=="default-framebuffer",s=e&&e.devicePixelRatio||_u(t),o=i?n.height:t.drawingBufferHeight,a=r;return[a.x*s,o-(a.y+a.height)*s,a.width*s,a.height*s]}function s$(t){const e=t.drawingBufferWidth,n=t.drawingBufferHeight;So(t,{viewport:[0,0,e,n]}),t.clear(16640)}class o$ extends Em{constructor(e,n){super(e,n),T(this,"shadowMap",void 0),T(this,"depthBuffer",void 0),T(this,"fbo",void 0),this.shadowMap=new br(e,{width:1,height:1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.depthBuffer=new kc(e,{format:33189,width:1,height:1}),this.fbo=new xn(e,{id:"shadowmap",width:1,height:1,attachments:{[36064]:this.shadowMap,[36096]:this.depthBuffer}})}render(e){const n=this.fbo;Oi(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const r=e.viewports[0],i=_u(this.gl),s=r.width*i,o=r.height*i;(s!==n.width||o!==n.height)&&n.resize({width:s,height:o}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const a$={color:[255,255,255],intensity:1},MC=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],l$=[0,0,0,200/255];class ww{constructor(e={}){T(this,"id","lighting-effect"),T(this,"props",null),T(this,"shadowColor",l$),T(this,"shadow",void 0),T(this,"ambientLight",null),T(this,"directionalLights",[]),T(this,"pointLights",[]),T(this,"shadowPasses",[]),T(this,"shadowMaps",[]),T(this,"dummyShadowMap",null),T(this,"programManager",void 0),T(this,"shadowMatrices",void 0);for(const n in e){const r=e[n];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow)}preRender(e,{layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:o}){if(!!this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=Gh.getDefaultProgramManager(e),wv&&this.programManager.addDefaultModule(wv)),this.dummyShadowMap||(this.dummyShadowMap=new br(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:o,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(r=>r.getProjectedLight({layer:e})),pointLights:this.pointLights.map(r=>r.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(wv),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const r=new $e().lookAt({eye:new q(n.direction).negate()});e.push(r)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const r=new o$(e);this.shadowPasses[n]=r,this.shadowMaps[n]=r.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:r}=this;!e&&n.length===0&&r.length===0&&(this.ambientLight=new yO(a$),this.directionalLights.push(new PC(MC[0]),new PC(MC[1])))}}class c${constructor(e={}){T(this,"_pool",[]),T(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:r=1,type:i,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:l}){const f=i||e&&e.constructor||Float32Array,d=n*r+s;if(ArrayBuffer.isView(e)){if(d<=e.length)return e;if(d*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new f(e.buffer,0,d)}let g=1/0;l&&(g=l*r+s);const y=this._allocate(f,d,a,g);return e&&o?y.set(e):a||y.fill(0,0,4),this._release(e),y}release(e){this._release(e)}_allocate(e,n,r,i){let s=Math.max(Math.ceil(n*this.opts.overAlloc),1);s>i&&(s=i);const o=this._pool,a=e.BYTES_PER_ELEMENT*s,l=o.findIndex(f=>f.byteLength>=a);if(l>=0){const f=new e(o.splice(l,1)[0],0,s);return r&&f.fill(0),f}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:r}=e,{byteLength:i}=r,s=n.findIndex(o=>o.byteLength>=i);s<0?n.push(r):(s>0||n.length<this.opts.poolSize)&&n.splice(s,0,r),n.length>this.opts.poolSize&&n.shift()}}const Tu=new c$;function tf(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function hg(t,e){const n=t%e;return n<0?e+n:n}function u$(t){return[t[12],t[13],t[14]]}function A$(t){return{left:cc(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:cc(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:cc(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:cc(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:cc(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:cc(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const IC=new q;function cc(t,e,n,r){IC.set(t,e,n);const i=IC.len();return{distance:r/i,normal:new q(-t/i,-e/i,-n/i)}}function f$(t){return t-Math.fround(t)}let OA;function Ev(t,e){const{size:n=1,startIndex:r=0}=e,i=e.endIndex!==void 0?e.endIndex:t.length,s=(i-r)/n;OA=Tu.allocate(OA,s,{type:Float32Array,size:n*2});let o=r,a=0;for(;o<i;){for(let l=0;l<n;l++){const f=t[o++];OA[a+l]=f,OA[a+l+n]=f$(f)}a+=n*2}return OA.subarray(0,s*n*2)}const h$=Math.PI/180,d$=tf(),BC=[0,0,0],p$={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function g$({width:t,height:e,orthographic:n,fovyRadians:r,focalDistance:i,padding:s,near:o,far:a}){const l=t/e,f=n?new $e().orthographic({fovy:r,aspect:l,focalDistance:i,near:o,far:a}):new $e().perspective({fovy:r,aspect:l,near:o,far:a});if(s){const{left:d=0,right:g=0,top:y=0,bottom:b=0}=s,E=dn((d+t-g)/2,0,t)-t/2,S=dn((y+e-b)/2,0,e)-e/2;f[8]-=E*2/t,f[9]+=S*2/e}return f}class Zs{constructor(e={}){T(this,"id",void 0),T(this,"x",void 0),T(this,"y",void 0),T(this,"width",void 0),T(this,"height",void 0),T(this,"isGeospatial",void 0),T(this,"zoom",void 0),T(this,"focalDistance",void 0),T(this,"position",void 0),T(this,"modelMatrix",void 0),T(this,"distanceScales",void 0),T(this,"scale",void 0),T(this,"center",void 0),T(this,"cameraPosition",void 0),T(this,"projectionMatrix",void 0),T(this,"viewMatrix",void 0),T(this,"viewMatrixUncentered",void 0),T(this,"viewMatrixInverse",void 0),T(this,"viewProjectionMatrix",void 0),T(this,"pixelProjectionMatrix",void 0),T(this,"pixelUnprojectionMatrix",void 0),T(this,"resolution",void 0),T(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.distanceScales=e.distanceScales||p$,this.focalDistance=e.focalDistance||1,this.position=e.position||BC,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:r}=e;this.isGeospatial=Number.isFinite(r)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?is.WEB_MERCATOR:is.WEB_MERCATOR_AUTO_OFFSET:is.IDENTITY}equals(e){return e instanceof Zs?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&vr(e.projectionMatrix,this.projectionMatrix)&&vr(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){const r=this.projectPosition(e),i=gO(r,this.pixelProjectionMatrix),[s,o]=i,a=n?o:this.height-o;return e.length===2?[s,a]:[s,a,i[2]]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[i,s,o]=e,a=n?s:this.height-s,l=r&&r*this.distanceScales.unitsPerMeter[2],f=jh([i,a,o],this.pixelUnprojectionMatrix,l),[d,g,y]=this.unprojectPosition(f);return Number.isFinite(o)?[d,g,y]:Number.isFinite(r)?[d,g,r]:[d,g]}projectPosition(e){const[n,r]=this.projectFlat(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,r,i]}unprojectPosition(e){const[n,r]=this.unprojectFlat(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,r,i]}projectFlat(e){if(this.isGeospatial){const n=Eu(e);return n[1]=dn(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?Sa(e):e}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,0],n),i=this.unproject([this.width,0],n),s=this.unproject([0,this.height],n),o=this.unproject([this.width,this.height],n);return[Math.min(r[0],i[0],s[0],o[0]),Math.min(r[1],i[1],s[1],o[1]),Math.max(r[0],i[0],s[0],o[0]),Math.max(r[1],i[1],s[1],o[1])]}getDistanceScales(e){return e?j1({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:r=1,height:i=1}){return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,A$(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,r=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=dO({latitude:r})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||j1({latitude:r,longitude:n}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:s,modelMatrix:o}=e;let a=BC;if(s&&(a=o?new $e(o).transformAsVector(s,[]):s),this.isGeospatial){const l=this.projectPosition([n,r,0]);this.center=new q(a).scale(this.distanceScales.unitsPerMeter).add(l)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:n=d$,projectionMatrix:r=null,orthographic:i=!1,fovyRadians:s,fovy:o=75,near:a=.1,far:l=1e3,padding:f=null,focalDistance:d=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=new $e().multiplyRight(n).translate(new q(this.center).negate()),this.projectionMatrix=r||g$({width:this.width,height:this.height,orthographic:i,fovyRadians:s||o*h$,focalDistance:d,padding:f,near:a,far:l});const g=tf();hl(g,g,this.projectionMatrix),hl(g,g,this.viewMatrix),this.viewProjectionMatrix=g,this.viewMatrixInverse=N1([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=u$(this.viewMatrixInverse);const y=tf(),b=tf();hw(y,y,[this.width/2,-this.height/2,1]),ug(y,y,[1,-1,0]),hl(b,y,this.viewProjectionMatrix),this.pixelProjectionMatrix=b,this.pixelUnprojectionMatrix=N1(tf(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||je.warn("Pixel project matrix not invertible")()}}T(Zs,"displayName","Viewport");const m$=512,y$=4003e4,v$=Math.PI/180;function LC(t){const e=Math.cos(t*v$);return m$/y$/e}class Xs extends Zs{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:i=0,pitch:s=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:l=1.01,orthographic:f=!1,projectionMatrix:d,repeat:g=!1,worldOffset:y=0,legacyMeterSizes:b=!1}=e;let{width:E,height:S,altitude:M=1.5}=e;const C=Math.pow(2,i);E=E||1,S=S||1;let P,I=null;d?(M=d[5]/2,P=fg(M)):(e.fovy?(P=e.fovy,M=bw(P)):P=fg(M),I=RQ({width:E,height:S,pitch:s,fovy:P,nearZMultiplier:a,farZMultiplier:l}));let L=LQ({height:S,pitch:s,bearing:o,scale:C,altitude:M});y&&(L=new $e().translate([512*y,0,0]).multiplyLeft(L)),super({...e,width:E,height:S,viewMatrix:L,longitude:r,latitude:n,zoom:i,...I,fovy:P,focalDistance:M}),T(this,"longitude",void 0),T(this,"latitude",void 0),T(this,"pitch",void 0),T(this,"bearing",void 0),T(this,"altitude",void 0),T(this,"fovy",void 0),T(this,"orthographic",void 0),T(this,"_subViewports",void 0),T(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=r,this.zoom=i,this.pitch=s,this.bearing=o,this.altitude=M,this.fovy=P,this.orthographic=f,this._subViewports=g?[]:null,this._pseudoMeters=b,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360);for(let i=n;i<=r;i++){const s=i?new Xs({...this,worldOffset:i}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,r]=this.projectFlat(e),i=(e[2]||0)*LC(e[1]);return[n,r,i]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,r]=this.unprojectFlat(e),i=(e[2]||0)/LC(r);return[n,r,i]}addMetersToLngLat(e,n){return pO(e,n)}panByPosition(e,n){const r=jh(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),s=cg([],i,GR([],r)),o=cg([],this.center,s),[a,l]=this.unprojectFlat(o);return{longitude:a,latitude:l}}getBounds(e={}){const n=DQ(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:r,height:i}=this,{longitude:s,latitude:o,zoom:a}=mO({width:r,height:i,bounds:e,...n});return new Xs({width:r,height:i,longitude:s,latitude:o,zoom:a})}}T(Xs,"displayName","WebMercatorViewport");function Tv(t,e,n=!1){const r=e.projectPosition(t);if(n&&e instanceof Xs){const[i,s,o=0]=t,a=e.getDistanceScales([i,s]);r[2]=o*a.unitsPerMeter[2]}return r}function _$(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:i,fromCoordinateSystem:s,fromCoordinateOrigin:o}=t;return i===Ze.DEFAULT&&(i=e.isGeospatial?Ze.LNGLAT:Ze.CARTESIAN),s===void 0&&(s=i),o===void 0&&(o=r),{viewport:e,coordinateSystem:i,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:s,fromCoordinateOrigin:o}}function _O(t,{viewport:e,modelMatrix:n,coordinateSystem:r,coordinateOrigin:i,offsetMode:s}){let[o,a,l=0]=t;switch(n&&([o,a,l]=Hu([],[o,a,l,1],n)),r){case Ze.LNGLAT:return Tv([o,a,l],e,s);case Ze.LNGLAT_OFFSETS:return Tv([o+i[0],a+i[1],l+(i[2]||0)],e,s);case Ze.METER_OFFSETS:return Tv(pO(i,[o,a,l]),e,s);case Ze.CARTESIAN:default:return e.isGeospatial?[o+i[0],a+i[1],l+i[2]]:e.projectPosition([o,a,l])}}function bO(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=_$(e),{geospatialOrigin:l,shaderCoordinateOrigin:f,offsetMode:d}=fO(n,r,i),g=_O(t,{viewport:n,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:d});if(d){const y=n.projectPosition(l||f);KR(g,g,y)}return g}const b$=[255,255,255],w$=1,E$=[0,0,1],T$=[0,0,1];let S$=0;class x${constructor(e={}){T(this,"id",void 0),T(this,"color",void 0),T(this,"intensity",void 0),T(this,"type","point"),T(this,"position",void 0),T(this,"attenuation",void 0),T(this,"projectedLight",void 0);const{color:n=b$}=e,{intensity:r=w$}=e,{position:i=T$}=e;this.id=e.id||"point-".concat(S$++),this.color=n,this.intensity=r,this.type="point",this.position=i,this.attenuation=C$(e),this.projectedLight={...this}}getProjectedLight({layer:e}){const{projectedLight:n}=this,r=e.context.viewport,{coordinateSystem:i,coordinateOrigin:s}=e.props,o=bO(this.position,{viewport:r,coordinateSystem:i,coordinateOrigin:s,fromCoordinateSystem:r.isGeospatial?Ze.LNGLAT:Ze.CARTESIAN,fromCoordinateOrigin:[0,0,0]});return n.color=this.color,n.intensity=this.intensity,n.position=o,n}}function C$(t){return t.attenuation?t.attenuation:"intensity"in t?[0,0,t.intensity||0]:E$}const wc={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},dg=Symbol.for("component"),nu=Symbol.for("asyncPropDefaults"),Sl=Symbol.for("asyncPropOriginal"),oa=Symbol.for("asyncPropResolved");function Tm(t,e=()=>!0){return Array.isArray(t)?wO(t,e,[]):e(t)?[t]:[]}function wO(t,e,n){let r=-1;for(;++r<t.length;){const i=t[r];Array.isArray(i)?wO(i,e,n):e(i)&&n.push(i)}return n}function P$({target:t,source:e,start:n=0,count:r=1}){const i=e.length,s=r*i;let o=0;for(let a=n;o<i;o++)t[a++]=e[o];for(;o<s;)o<s-o?(t.copyWithin(n+o,n,n+o),o*=2):(t.copyWithin(n+o,n,n+s-o),o=s);return t}class M${constructor(e,n,r){T(this,"id",void 0),T(this,"context",void 0),T(this,"isLoaded",void 0),T(this,"persistent",void 0),T(this,"_loadCount",0),T(this,"_subscribers",new Set),T(this,"_data",void 0),T(this,"_loader",void 0),T(this,"_error",void 0),T(this,"_content",void 0),this.id=e,this.context=r,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const r=++this._loadCount;let i=e;typeof e=="string"&&(i=To(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=void 0,this._content=s)}).catch(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class I${constructor({gl:e,protocol:n}){T(this,"protocol",void 0),T(this,"_context",void 0),T(this,"_resources",void 0),T(this,"_consumers",void 0),T(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:r=!1,persistent:i=!0}){let s=this._resources[e];s?s.setData(n,r):(s=new M$(e,n,this._context),this._resources[e]=s),s.persistent=i}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const r in n){const i=n[r],s=this._resources[i.resourceId];s&&s.unsubscribe(i)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:r,requestId:i="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(e=e.replace(o,""),s[e]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(r,i,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,r,i){const s=this._consumers,o=s[e]=s[e]||{},a=o[n]||{},l=a.resourceId&&this._resources[a.resourceId];l&&(l.unsubscribe(a),this.prune()),r&&(o[n]=a,a.onChange=i,a.resourceId=r.id,r.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const B$="layerManager.setLayers",L$="layerManager.activateViewport";class R${constructor(e,{deck:n,stats:r,viewport:i,timeline:s}={}){T(this,"layers",void 0),T(this,"context",void 0),T(this,"resourceManager",void 0),T(this,"_lastRenderedLayers",[]),T(this,"_needsRedraw",!1),T(this,"_needsUpdate",!1),T(this,"_nextLayers",null),T(this,"_debug",!1),T(this,"activateViewport",o=>{fr(L$,this,o),o&&(this.context.viewport=o)}),this.layers=[],this.resourceManager=new I$({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&JQ(e),stats:r||new Oh({id:"deck.gl"}),viewport:i||new Zs({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new lO,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const r of this.layers){const i=r.getNeedsRedraw(e);n=n||i}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(r=>n.id.indexOf(r)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){fr(B$,this,n,e),this._lastRenderedLayers=e;const r=Tm(e,Boolean);for(const i of r)i.context=this.context;this._updateLayers(this.layers,r)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,r){r.raiseError(n,"".concat(e," of ").concat(r))}_updateLayers(e,n){const r={};for(const o of e)r[o.id]?je.warn("Multiple old layers with same id ".concat(o.id))():r[o.id]=o;const i=[];this._updateSublayersRecursively(n,r,i),this._finalizeOldLayers(r);let s=!1;for(const o of i)if(o.hasUniformTransition()){s="Uniform transition in ".concat(o);break}this._needsUpdate=s,this.layers=i}_updateSublayersRecursively(e,n,r){for(const i of e){i.context=this.context;const s=n[i.id];s===null&&je.warn("Multiple new layers with same id ".concat(i.id))(),n[i.id]=null;let o=null;try{this._debug&&s!==i&&i.validateProps(),s?(this._transferLayerState(s,i),this._updateLayer(i)):this._initializeLayer(i),r.push(i),o=i.isComposite?i.getSubLayers():null}catch(a){this._handleError("matching",a,i)}o&&this._updateSublayersRecursively(o,n,r)}}_finalizeOldLayers(e){for(const n in e){const r=e[n];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=wc.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=wc.MATCHED,n!==e&&(e.lifecycle=wc.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=wc.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=wc.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}function Hl(t,e){if(t===e)return!0;if(!t||!e)return!1;for(const n in t){const r=t[n],i=e[n];if(!(r===i||Array.isArray(r)&&Array.isArray(i)&&Hl(r,i)))return!1}return!0}class O${constructor(e){T(this,"width",void 0),T(this,"height",void 0),T(this,"views",void 0),T(this,"viewState",void 0),T(this,"controllers",void 0),T(this,"timeline",void 0),T(this,"_viewports",void 0),T(this,"_viewportMap",void 0),T(this,"_isUpdating",void 0),T(this,"_needsRedraw",void 0),T(this,"_needsUpdate",void 0),T(this,"_eventManager",void 0),T(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n=typeof e=="string"?this.getView(e):e,r=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(r):r}getViewport(e){return this._viewportMap[e]}unproject(e,n){const r=this.getViewports(),i={x:e[0],y:e[1]};for(let s=r.length-1;s>=0;--s){const o=r[s];if(o.containsPixel(i)){const a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=Tm(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!Hl(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):je.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){const r=n.type;return new r({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>e.makeViewport({viewState:s,width:this.width,height:this.height})})}_updateController(e,n,r,i){const s=e.controller;if(s){const o={...n,...s,id:e.id,x:r.x,y:r.y,width:r.width,height:r.height};return i||(i=this._createController(e,o)),i&&i.setProps(o),i}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let r=!1;for(let i=e.length;i--;){const s=e[i],o=this.getViewState(s),a=s.makeViewport({viewState:o,width:this.width,height:this.height});let l=n[s.id];const f=Boolean(s.controller);f&&!l&&(r=!0),(r||!f)&&l&&(l.finalize(),l=null),this.controllers[s.id]=this._updateController(s,o,a,l),this._viewports.unshift(a)}for(const i in n){const s=n[i];s&&!this.controllers[i]&&s.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((r,i)=>!e[i].equals(n[i]))}}const D$=/([0-9]+\.?[0-9]*)(%|px)/;function Qo(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=D$.exec(t);if(e&&e.length>=3){const n=e[2]==="%",r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function $o(t,e){return t.relative?Math.round(t.position*e):t.position}function zn(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class Js{constructor(e){T(this,"id",void 0),T(this,"viewportInstance",void 0),T(this,"_x",void 0),T(this,"_y",void 0),T(this,"_width",void 0),T(this,"_height",void 0),T(this,"_padding",void 0),T(this,"props",void 0);const{id:n,x:r=0,y:i=0,width:s="100%",height:o="100%",padding:a=null,viewportInstance:l}=e||{};zn(!l||l instanceof Zs),this.viewportInstance=l,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=Qo(r),this._y=Qo(i),this._width=Qo(s),this._height=Qo(o),this._padding=a&&{left:Qo(a.left||0),right:Qo(a.right||0),top:Qo(a.top||0),bottom:Qo(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.viewportInstance?e.viewportInstance?this.viewportInstance.equals(e.viewportInstance):!1:this.ViewportType===e.ViewportType&&Hl(this.props,e.props)}makeViewport({width:e,height:n,viewState:r}){if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);const i=this.getDimensions({width:e,height:n});return new this.ViewportType({...r,...this.props,...i})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const r in this.props.viewState)r!=="id"&&(n[r]=this.props.viewState[r]);return n}return e}getDimensions({width:e,height:n}){const r={x:$o(this._x,e),y:$o(this._y,n),width:$o(this._width,e),height:$o(this._height,n)};return this._padding&&(r.padding={left:$o(this._padding.left,e),top:$o(this._padding.top,n),right:$o(this._padding.right,e),bottom:$o(this._padding.bottom,n)}),r}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class Hh{constructor(e){T(this,"_inProgress",void 0),T(this,"_handle",void 0),T(this,"_timeline",void 0),T(this,"time",void 0),T(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,r;this.cancel(),this.settings=e,this._inProgress=!0,(n=(r=this.settings).onStart)===null||n===void 0||n.call(r,this)}end(){if(this._inProgress){var e,n;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(e=(n=this.settings).onEnd)===null||e===void 0||e.call(n,this)}}cancel(){if(this._inProgress){var e,n;(e=(n=this.settings).onInterrupt)===null||e===void 0||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:r,settings:i}=this;this._handle=r.addChannel({delay:r.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(e=(n=this.settings).onUpdate)===null||e===void 0||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const RC=()=>{},H1={BREAK:1,SNAP_TO_END:2,IGNORE:3},F$=t=>t,k$=H1.BREAK;class N${constructor(e){T(this,"getControllerState",void 0),T(this,"props",void 0),T(this,"propsInTransition",void 0),T(this,"transition",void 0),T(this,"onViewStateChange",void 0),T(this,"onStateChange",void 0),T(this,"_onTransitionUpdate",n=>{const{time:r,settings:{interpolator:i,startProps:s,endProps:o,duration:a,easing:l}}=n,f=l(r/a),d=i.interpolateProps(s,o,f);this.propsInTransition=this.getControllerState({...this.props,...d}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new Hh(e.timeline),this.onViewStateChange=e.onViewStateChange||RC,this.onStateChange=e.onStateChange||RC}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const r=this.props;if(this.props=e,!r||this._shouldIgnoreViewportChange(r,e))return!1;if(this._isTransitionEnabled(e)){let i=r;if(this.transition.inProgress){const{interruption:s,endProps:o}=this.transition.settings;i={...r,...s===H1.SNAP_TO_END?o:this.propsInTransition||r}}this._triggerTransition(i,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:r}=e;return(n>0||n==="auto")&&Boolean(r)}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===H1.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){const r=this.getControllerState(e),i=this.getControllerState(n).shortestPathFrom(r),s=n.transitionInterpolator,o=s.getDuration?s.getDuration(e,n):n.transitionDuration;if(o===0)return;const a=s.initializeProps(e,i);this.propsInTransition={};const l={duration:o,easing:n.transitionEasing||F$,interpolator:s,interruption:n.transitionInterruption||k$,startProps:a.start,endProps:a.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(l),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(n)}}}class U${constructor(e){T(this,"_propsToCompare",void 0),T(this,"_propsToExtract",void 0),T(this,"_requiredProps",void 0);const{compare:n,extract:r,required:i}=e;this._propsToCompare=n,this._propsToExtract=r||n,this._requiredProps=i}arePropsEqual(e,n){for(const r of this._propsToCompare)if(!(r in e)||!(r in n)||!vr(e[r],n[r]))return!1;return!0}initializeProps(e,n){const r={},i={};for(const s of this._propsToExtract)(s in e||s in n)&&(r[s]=e[s],i[s]=n[s]);return this._checkRequiredProps(r),this._checkRequiredProps(i),{start:r,end:i}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){!this._requiredProps||this._requiredProps.forEach(n=>{const r=e[n];zn(Number.isFinite(r)||Array.isArray(r),"".concat(n," is required for transition"))})}}const G$=["longitude","latitude","zoom","bearing","pitch"],z$=["longitude","latitude","zoom"];class Wu extends U${constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,r=Array.isArray(e)?{}:e;r.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:G$,required:z$},super(r.transitionProps),T(this,"opts",void 0),this.opts=r}initializeProps(e,n){const r=super.initializeProps(e,n),{makeViewport:i,around:s}=this.opts;if(i&&s){const o=i(e),a=i(n),l=o.unproject(s);r.start.around=s,Object.assign(r.end,{around:a.project(l),aroundPosition:l,width:n.width,height:n.height})}return r}interpolateProps(e,n,r){const i={};for(const s of this._propsToExtract)i[s]=Ta(e[s]||0,n[s]||0,r);if(n.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport({...n,...i});Object.assign(i,s.panByPosition(n.aroundPosition,Ta(e.around,n.around,r)))}return i}}const Xo={transitionDuration:0},V$=300,p0=t=>1-(1-t)*(1-t),uc={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},Ja={};class Wh{constructor(e){T(this,"props",void 0),T(this,"state",{}),T(this,"transitionManager",void 0),T(this,"eventManager",void 0),T(this,"onViewStateChange",void 0),T(this,"onStateChange",void 0),T(this,"makeViewport",void 0),T(this,"_controllerState",void 0),T(this,"_events",{}),T(this,"_interactionState",{isDragging:!1}),T(this,"_customEvents",[]),T(this,"_eventStartBlocked",null),T(this,"_panMove",!1),T(this,"invertPan",!1),T(this,"dragMode","rotate"),T(this,"inertia",0),T(this,"scrollZoom",!0),T(this,"dragPan",!0),T(this,"dragRotate",!0),T(this,"doubleClickZoom",!0),T(this,"touchZoom",!0),T(this,"touchRotate",!1),T(this,"keyboard",!0),this.transitionManager=new N$({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;(e=this.eventManager)===null||e===void 0||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return n?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:r}=this.props,{offsetCenter:i}=e;return[i.x-n,i.y-r]}isPointInBounds(e,n){const{width:r,height:i}=this.props;if(n&&n.handled)return!1;const s=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=i;return s&&n&&n.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:n}=e;return Boolean(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:n===!0?V$:0;const{scrollZoom:r=!0,dragPan:i=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:l=!1,keyboard:f=!0}=e,d=Boolean(this.onViewStateChange);this.toggleEvents(uc.WHEEL,d&&r),this.toggleEvents(uc.PAN,d&&(i||s)),this.toggleEvents(uc.PINCH,d&&(a||l)),this.toggleEvents(uc.TRIPLE_PAN,d&&l),this.toggleEvents(uc.DOUBLE_TAP,d&&o),this.toggleEvents(uc.KEYBOARD,d&&f),this.scrollZoom=r,this.dragPan=i,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=l,this.keyboard=f}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(r=>{this._events[r]!==n&&(this._events[r]=n,n?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(e,n=null,r={}){const i={...e.getViewportProps(),...n},s=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(r),s){const o=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(r=!r);const i=this.controllerState[r?"panStart":"rotateStart"]({pos:n});return this._panMove=r,this.updateViewport(i,Xo,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),r=this.controllerState.pan({pos:n});return this.updateViewport(r,Xo,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:p0},{isDragging:!1,isPanning:!0})}else{const r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),r=this.controllerState.rotate({pos:n});return this.updateViewport(r,Xo,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:p0},{isDragging:!1,isRotating:!0})}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const{speed:r=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*r)));s<0&&o!==0&&(o=1/o);const a=this.controllerState.zoom({pos:n,scale:o});return this.updateViewport(a,{...this._getTransitionProps({around:n}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.rotateStart({pos:n});return this.updateViewport(r,Xo,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const r=this.controllerState.rotate({pos:n});return this.updateViewport(r,Xo,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const r=this.getCenter(e),i=[r[0],r[1]+=e.velocityY*n/2],s=this.controllerState.rotate({pos:i});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:p0},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return Ja._startPinchRotation=e.rotation,Ja._lastPinchEvent=e,this.updateViewport(r,Xo,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:r}=e,i=this.getCenter(e);n=n.zoom({pos:i,scale:r})}if(this.touchRotate){const{rotation:r}=e;n=n.rotate({deltaAngleX:Ja._startPinchRotation-r})}return this.updateViewport(n,Xo,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Ja._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:r}=Ja;if(this.touchZoom&&n&&r&&e.scale!==r.scale){const i=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),l=Math.pow(2,o+a*n/2);s=s.zoom({pos:i,scale:l}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:i}),transitionDuration:n,transitionEasing:p0},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Ja._startPinchRotation=null,Ja._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:n,scale:r?.5:2});return this.updateViewport(i,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:r,moveSpeed:i,rotateSpeedX:s,rotateSpeedY:o}=this.keyboard===!0?{}:this.keyboard,{controllerState:a}=this;let l;const f={};switch(e.srcEvent.code){case"Minus":l=n?a.zoomOut(r).zoomOut(r):a.zoomOut(r),f.isZooming=!0;break;case"Equal":l=n?a.zoomIn(r).zoomIn(r):a.zoomIn(r),f.isZooming=!0;break;case"ArrowLeft":n?(l=a.rotateLeft(s),f.isRotating=!0):(l=a.moveLeft(i),f.isPanning=!0);break;case"ArrowRight":n?(l=a.rotateRight(s),f.isRotating=!0):(l=a.moveRight(i),f.isPanning=!0);break;case"ArrowUp":n?(l=a.rotateUp(o),f.isRotating=!0):(l=a.moveUp(i),f.isPanning=!0);break;case"ArrowDown":n?(l=a.rotateDown(o),f.isRotating=!0):(l=a.moveDown(i),f.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),f),!0}_getTransitionProps(e){const{transition:n}=this;return!n||!n.transitionInterpolator?Xo:e?{...n,transitionInterpolator:new Wu({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n}}class Ew{constructor(e,n){T(this,"_viewportProps",void 0),T(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}const OC=5,j$=1.2;class EO extends Ew{constructor(e){const{width:n,height:r,latitude:i,longitude:s,zoom:o,bearing:a=0,pitch:l=0,altitude:f=1.5,position:d=[0,0,0],maxZoom:g=20,minZoom:y=0,maxPitch:b=60,minPitch:E=0,startPanLngLat:S,startZoomLngLat:M,startRotatePos:C,startBearing:P,startPitch:I,startZoom:L,normalize:F=!0}=e;zn(Number.isFinite(s)),zn(Number.isFinite(i)),zn(Number.isFinite(o)),super({width:n,height:r,latitude:i,longitude:s,zoom:o,bearing:a,pitch:l,altitude:f,maxZoom:g,minZoom:y,maxPitch:b,minPitch:E,normalize:F,position:d},{startPanLngLat:S,startZoomLngLat:M,startRotatePos:C,startBearing:P,startPitch:I,startZoom:L}),T(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startBearing:s,startPitch:o}=this.getState();if(!i||s===void 0||o===void 0)return this;let a;return e?a=this._getNewRotation(e,i,o,s):a={bearing:s+n,pitch:o+r},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:i,startZoomLngLat:s}=this.getState();if(s||(i=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const{maxZoom:o,minZoom:a}=this.getViewportProps();let l=i+Math.log2(r);l=dn(l,a,o);const f=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...f.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{bearing:i,longitude:s}=r;return Math.abs(i-n.bearing)>180&&(r.bearing=i<0?i+360:i-360),Math.abs(s-n.longitude)>180&&(r.longitude=s<0?s+360:s-360),r}applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i}=e;e.zoom=dn(i,r,n);const{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=dn(a,o,s);const{normalize:l=!0}=e;return l&&Object.assign(e,FQ(e)),e}_zoomFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.zoom({pos:[n/2,r/2],scale:e})}_panFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,r,i){const s=e[0]-n[0],o=e[1]-n[1],a=e[1],l=n[1],{width:f,height:d}=this.getViewportProps(),g=s/f;let y=0;o>0?Math.abs(d-l)>OC&&(y=o/(l-d)*j$):o<0&&l>OC&&(y=1-a/l),y=dn(y,-1,1);const{minPitch:b,maxPitch:E}=this.getViewportProps(),S=i+180*g;let M=r;return y>0?M=r+y*(E-r):y<0&&(M=r-y*(b-r)),{pitch:M,bearing:S}}}class H$ extends Wh{constructor(...e){super(...e),T(this,"ControllerState",EO),T(this,"transition",{transitionDuration:300,transitionInterpolator:new Wu({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),T(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class TO extends Js{get ViewportType(){return Xs}get ControllerType(){return H$}}T(TO,"displayName","MapView");class W$ extends Em{constructor(e,n){super(e,n),T(this,"maskMap",void 0),T(this,"fbo",void 0);const{mapSize:r=2048}=n;this.maskMap=new br(e,{width:r,height:r,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.fbo=new xn(e,{id:"maskmap",width:r,height:r,attachments:{[36064]:this.maskMap}})}render(e){const n=this.gl,r=[!1,!1,!1,!1];return r[e.channel]=!0,Oi(n,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:r,depthTest:!1},()=>super.render({...e,target:this.fbo,pass:"mask"}))}shouldDrawLayer(e){return e.props.operation===zh.MASK}delete(){this.fbo.delete(),this.maskMap.delete()}}const Q$=new $e().lookAt({eye:[0,0,1]});function $$({width:t,height:e,near:n,far:r,padding:i}){let s=-t/2,o=t/2,a=-e/2,l=e/2;if(i){const{left:f=0,right:d=0,top:g=0,bottom:y=0}=i,b=dn((f+t-d)/2,0,t)-t/2,E=dn((g+e-y)/2,0,e)-e/2;s-=b,o-=b,a+=E,l+=E}return new $e().ortho({left:s,right:o,bottom:a,top:l,near:n,far:r})}class X$ extends Zs{constructor(e){const{width:n,height:r,near:i=.1,far:s=1e3,zoom:o=0,target:a=[0,0,0],padding:l=null,flipY:f=!0}=e,d=Array.isArray(o)?o[0]:o,g=Array.isArray(o)?o[1]:o,y=Math.min(d,g),b=Math.pow(2,y);let E;if(d!==g){const S=Math.pow(2,d),M=Math.pow(2,g);E={unitsPerMeter:[S/b,M/b,1],metersPerUnit:[b/S,b/M,1]}}super({...e,longitude:void 0,position:a,viewMatrix:Q$.clone().scale([b,b*(f?-1:1),b]),projectionMatrix:$$({width:n||1,height:r||1,padding:l,near:i,far:s}),zoom:y,distanceScales:E})}projectFlat([e,n]){const{unitsPerMeter:r}=this.distanceScales;return[e*r[0],n*r[1]]}unprojectFlat([e,n]){const{metersPerUnit:r}=this.distanceScales;return[e*r[0],n*r[1]]}panByPosition(e,n){const r=jh(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),s=cg([],i,GR([],r)),o=cg([],this.center,s);return{target:this.unprojectFlat(o)}}}class SO extends Ew{constructor(e){const{width:n,height:r,rotationX:i=0,rotationOrbit:s=0,target:o=[0,0,0],zoom:a=0,minRotationX:l=-90,maxRotationX:f=90,minZoom:d=-1/0,maxZoom:g=1/0,startPanPosition:y,startRotatePos:b,startRotationX:E,startRotationOrbit:S,startZoomPosition:M,startZoom:C}=e;super({width:n,height:r,rotationX:i,rotationOrbit:s,target:o,zoom:a,minRotationX:l,maxRotationX:f,minZoom:d,maxZoom:g},{startPanPosition:y,startRotatePos:b,startRotationX:E,startRotationOrbit:S,startZoomPosition:M,startZoom:C}),T(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:n}){const r=this.getState().startPanPosition||n;if(!r)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startRotationX:s,startRotationOrbit:o}=this.getState(),{width:a,height:l}=this.getViewportProps();if(!i||s===void 0||o===void 0)return this;let f;if(e){let d=(e[0]-i[0])/a;const g=(e[1]-i[1])/l;(s<-90||s>90)&&(d*=-1),f={rotationX:s+g*180,rotationOrbit:o+d*180}}else f={rotationX:s+r,rotationOrbit:o+n};return this._getUpdatedState(f)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{rotationOrbit:i}=r;return Math.abs(i-n.rotationOrbit)>180&&(r.rotationOrbit=i<0?i+360:i-360),r}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:i,startZoomPosition:s}=this.getState();if(s||(i=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const o=this._calculateNewZoom({scale:r,startZoom:i}),a=this.makeViewport({...this.getViewportProps(),zoom:o});return this._getUpdatedState({zoom:o,...a.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:r,minZoom:i}=this.getViewportProps();n===void 0&&(n=this.getViewportProps().zoom);const s=n+Math.log2(e);return dn(s,i,r)}_panFromCenter(e){const{width:n,height:r,target:i}=this.getViewportProps();return this.pan({startPosition:i,pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i,maxRotationX:s,minRotationX:o,rotationOrbit:a}=e;return e.zoom=Array.isArray(i)?[dn(i[0],r,n),dn(i[1],r,n)]:dn(i,r,n),e.rotationX=dn(e.rotationX,o,s),(a<-180||a>180)&&(e.rotationOrbit=hg(a+180,360)-180),e}}class J$ extends Wh{constructor(...e){super(...e),T(this,"ControllerState",SO),T(this,"transition",{transitionDuration:300,transitionInterpolator:new Wu({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}}class K$ extends SO{constructor(e){super(e),T(this,"zoomAxis",void 0),this.zoomAxis=e.zoomAxis||"all"}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:r,minZoom:i}=this.getViewportProps();n===void 0&&(n=this.getViewportProps().zoom);let s=Math.log2(e);if(Array.isArray(n)){let[o,a]=n;switch(this.zoomAxis){case"X":o=dn(o+s,i,r);break;case"Y":a=dn(a+s,i,r);break;default:let l=Math.min(o+s,a+s);l<i&&(s+=i-l),l=Math.max(o+s,a+s),l>r&&(s+=r-l),o+=s,a+=s}return[o,a]}return dn(n+s,i,r)}}class Y$ extends Wh{constructor(...e){super(...e),T(this,"ControllerState",K$),T(this,"transition",{transitionDuration:300,transitionInterpolator:new Wu(["target","zoom"])}),T(this,"dragMode","pan")}_onPanRotate(){return!1}}class xO extends Js{get ViewportType(){return X$}get ControllerType(){return Y$}}T(xO,"displayName","OrthographicView");function q$({layers:t,viewport:e}){let n=null;for(const s of t){const o=s.getBounds();o&&(n?(n[0]=Math.min(n[0],o[0][0]),n[1]=Math.min(n[1],o[0][1]),n[2]=Math.max(n[2],o[1][0]),n[3]=Math.max(n[3],o[1][1])):n=[o[0][0],o[0][1],o[1][0],o[1][1]])}const r=e.getBounds();if(!n)return r;const i=eX(r);return n[2]-n[0]<i[2]-i[0]||n[3]-n[1]<i[3]-i[1]||(n[0]=Math.max(n[0],i[0]),n[1]=Math.max(n[1],i[1]),n[2]=Math.min(n[2],i[2]),n[3]=Math.min(n[3],i[3])),n}function Z$({bounds:t,viewport:e,width:n,height:r}){if(t[2]<=t[0]||t[3]<=t[1])return null;const i=1;if(n-=i*2,r-=i*2,e instanceof Xs){const{longitude:a,latitude:l,zoom:f}=mO({width:n,height:r,bounds:[[t[0],t[1]],[t[2],t[3]]],maxZoom:20});return new Xs({longitude:a,latitude:l,zoom:f,x:i,y:i,width:n,height:r})}const s=[(t[0]+t[2])/2,(t[1]+t[3])/2,0],o=Math.min(20,n/(t[2]-t[0]),r/(t[3]-t[1]));return new xO({x:i,y:i}).makeViewport({width:n,height:r,viewState:{target:s,zoom:Math.log2(o)}})}function eX(t){const e={x:t[2]-t[0],y:t[3]-t[1]},n={x:t[0]+.5*e.x,y:t[1]+.5*e.y};return[n.x-e.x,n.y-e.y,n.x+e.x,n.y+e.y]}class tX{constructor(){T(this,"id","mask-effect"),T(this,"props",null),T(this,"useInPicking",!0),T(this,"dummyMaskMap",void 0),T(this,"channels",[]),T(this,"masks",null),T(this,"maskPass",void 0),T(this,"maskMap",void 0),T(this,"lastViewport",void 0)}preRender(e,{layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:o}){this.dummyMaskMap||(this.dummyMaskMap=new br(e,{width:1,height:1}));const a=n.filter(g=>g.props.visible&&g.props.operation===zh.MASK);if(a.length===0){this.masks=null,this.channels.length=0;return}this.masks={},this.maskPass||(this.maskPass=new W$(e,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const l=this._sortMaskChannels(a),f=i[0],d=!this.lastViewport||!this.lastViewport.equals(f);for(const g in l)this._renderChannel(l[g],{layerFilter:r,onViewportActive:s,views:o,viewport:f,viewportChanged:d})}_renderChannel(e,{layerFilter:n,onViewportActive:r,views:i,viewport:s,viewportChanged:o}){const a=this.channels[e.index];if(!a)return;const l=e===a||a.layers.length!==e.layers.length||e.layerBounds.some((f,d)=>f!==a.layerBounds[d]);if(e.bounds=a.bounds,e.maskBounds=a.maskBounds,this.channels[e.index]=e,(l||o)&&(this.lastViewport=s,e.bounds=q$({layers:e.layers,viewport:s}),l||!vr(e.bounds,a.bounds))){const{maskPass:f,maskMap:d}=this,g=Z$({bounds:e.bounds,viewport:s,width:d.width,height:d.height});e.maskBounds=g?g.getBounds():[0,0,1,1],f.render({pass:"mask",channel:e.index,layers:e.layers,layerFilter:n,viewports:g?[g]:[],onViewportActive:r,views:i,moduleParameters:{devicePixelRatio:1}})}this.masks[e.id]={index:e.index,bounds:e.maskBounds,coordinateOrigin:e.coordinateOrigin,coordinateSystem:e.coordinateSystem}}_sortMaskChannels(e){const n={};let r=0;for(const i of e){const{id:s}=i.root;let o=n[s];if(!o){if(++r>4){je.warn("Too many mask layers. The max supported is 4")();continue}o={id:s,index:this.channels.findIndex(a=>(a==null?void 0:a.id)===s),layers:[],layerBounds:[],coordinateOrigin:i.root.props.coordinateOrigin,coordinateSystem:i.root.props.coordinateSystem},n[s]=o}o.layers.push(i),o.layerBounds.push(i.getBounds())}for(let i=0;i<4;i++){const s=this.channels[i];(!s||!(s.id in n))&&(this.channels[i]=null)}for(const i in n){const s=n[i];s.index<0&&(s.index=this.channels.findIndex(o=>!o),this.channels[s.index]=s)}return n}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const nX=new ww;class rX{constructor(){T(this,"effects",void 0),T(this,"_internalEffects",void 0),T(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!Hl(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._internalEffects=e.slice(),this._internalEffects.push(new tX),e.some(n=>n instanceof ww)||this._internalEffects.push(nX)}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}}class iX extends Em{shouldDrawLayer(e){return e.props.operation===zh.DRAW}}const DC={blendFunc:[1,0,32771,0],blendEquation:32774};class CO extends Em{constructor(...e){super(...e),T(this,"pickZ",void 0),T(this,"_colors",null)}render(e){return e.pickingFBO?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:l,width:f,height:d},cullRect:g,effects:y,pass:b="picking",pickZ:E}){const S=this.gl;this.pickZ=E;const M=E?null:{byLayer:new Map,byAlpha:[]};this._colors=M;const C=Oi(S,{scissorTest:!0,scissor:[a,l,f,d],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...DC,blend:!E},()=>super.render({target:o,layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,cullRect:g,effects:y==null?void 0:y.filter(I=>I.useInPicking),pass:b}));return this._colors=null,{decodePickingColor:M&&oX.bind(null,M),stats:C}}shouldDrawLayer(e){return e.props.pickable&&e.props.operation===zh.DRAW}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,r){const i={...e.props.parameters};return this._colors?(Object.assign(i,DC),i.blend=!0,i.blendColor=sX(this._colors,e,r)):i.blend=!1,i}}function sX(t,e,n){const{byLayer:r,byAlpha:i}=t;let s,o=r.get(e);return o?(o.viewports.push(n),s=o.a):(s=r.size+1,s<=255?(o={a:s,layer:e,viewports:[n]},r.set(e,o),i[s]=o):(je.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}function oX(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}const aX="deckRenderer.renderLayers";class lX{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new iX(e),this.pickLayersPass=new CO(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=e.layerFilter||this.layerFilter,e.effects=e.effects||[],e.target=e.target||xn.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);const r=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,i=n.render({...e,target:r});this._postRender(e.effects,e),this.renderCount++,fr(aX,this,i,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){let r=null;for(const i of e)i.preRender(this.gl,n),i.postRender&&(r=i);r&&this._resizeRenderBuffers(),this.lastPostProcessEffect=r}_resizeRenderBuffers(){const{renderBuffers:e}=this;e.length===0&&e.push(new xn(this.gl),new xn(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:r}=this,i={inputBuffer:r[0],swapBuffer:r[1],target:null};for(const s of e)if(s.postRender){if(s===this.lastPostProcessEffect){i.target=n.target,s.postRender(this.gl,i);break}const o=s.postRender(this.gl,i);i.inputBuffer=o,i.swapBuffer=o===r[0]?r[1]:r[0]}}}const cX={pickedColor:null,pickedObjectIndex:-1};function uX({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:r,deviceRadius:i,deviceRect:s}){const{x:o,y:a,width:l,height:f}=s;let d=i*i,g=-1,y=0;for(let b=0;b<f;b++){const E=b+a-r,S=E*E;if(S>d)y+=4*l;else for(let M=0;M<l;M++){if(t[y+3]-1>=0){const P=M+o-n,I=P*P+S;I<=d&&(d=I,g=y)}y+=4}}if(g>=0){const b=t.slice(g,g+4),E=e(b);if(E){const S=Math.floor(g/4/l),M=g/4-S*l;return{...E,pickedColor:b,pickedX:o+M,pickedY:a+S}}je.error("Picked non-existent layer. Is picking buffer corrupt?")()}return cX}function AX({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t){for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){const s=t.slice(r,r+4),o=s.join(",");if(!n.has(o)){const a=e(s);a?n.set(o,{...a,color:s}):je.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function PO({pickInfo:t,viewports:e,pixelRatio:n,x:r,y:i,z:s}){let o=e[0];e.length>1&&(o=hX((t==null?void 0:t.pickedViewports)||e,{x:r,y:i}));let a;if(o){const l=[r-o.x,i-o.y];s!==void 0&&(l[2]=s),a=o.unproject(l)}return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:r,y:i,pixel:[r,i],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function fX(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:i}=t,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,l=o?[o]:[];if(r==="hover"){const g=n.index,y=n.layerId,b=o?o.props.id:null;if(b!==y||a!==g){if(b!==y){const E=i.find(S=>S.props.id===y);E&&l.unshift(E)}n.layerId=b,n.index=a,n.info=null}}const f=PO(t),d=new Map;return d.set(null,f),l.forEach(g=>{let y={...f};g===o&&(y.color=s,y.index=a,y.picked=!0),y=MO({layer:g,info:y,mode:r});const b=y.layer;g===o&&r==="hover"&&(n.info=y),d.set(b.id,y),r==="hover"&&b.updateAutoHighlight(y)}),d}function MO({layer:t,info:e,mode:n}){for(;t&&e;){const r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:r}),t=t.parent}return e}function hX(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}class dX{constructor(e){T(this,"gl",void 0),T(this,"pickingFBO",void 0),T(this,"depthFBO",void 0),T(this,"pickLayersPass",void 0),T(this,"layerFilter",void 0),T(this,"lastPickedInfo",void 0),T(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new CO(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:r,viewports:i},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,l=o?r.find(y=>y.id===o):null,f=a&&i.find(y=>y.id===a)||i[0],d=f&&f.unproject([e-f.x,n-f.y]);return{...s,...{x:e,y:n,viewport:f,coordinate:d,layer:l}}}_resizeBuffer(){var e,n;const{gl:r}=this;if(!this.pickingFBO&&(this.pickingFBO=new xn(r),xn.isSupported(r,{colorBufferFloat:!0}))){const i=new xn(r);i.attach({[36064]:new br(r,{format:it(r)?34836:6408,type:5126})}),this.depthFBO=i}(e=this.pickingFBO)===null||e===void 0||e.resize({width:r.canvas.width,height:r.canvas.height}),(n=this.depthFBO)===null||n===void 0||n.resize({width:r.canvas.width,height:r.canvas.height})}_getPickable(e){if(this._pickable===!1)return null;const n=e.filter(r=>r.isPickable()&&!r.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:r,x:i,y:s,radius:o=0,depth:a=1,mode:l="query",unproject3D:f,onViewportActive:d,effects:g}){const y=this._getPickable(e),b=_u(this.gl);if(!y)return{result:[],emptyInfo:PO({viewports:r,x:i,y:s,pixelRatio:b})};this._resizeBuffer();const E=lv(this.gl,[i,s],!0),S=[E.x+Math.floor(E.width/2),E.y+Math.floor(E.height/2)],M=Math.round(o*b),{width:C,height:P}=this.pickingFBO,I=this._getPickingRect({deviceX:S[0],deviceY:S[1],deviceRadius:M,deviceWidth:C,deviceHeight:P}),L={x:i-o,y:s-o,width:o*2+1,height:o*2+1};let F;const z=[],X=new Set;for(let Y=0;Y<a;Y++){let Q;if(I){const k=this._drawAndSample({layers:y,views:n,viewports:r,onViewportActive:d,deviceRect:I,cullRect:L,effects:g,pass:"picking:".concat(l)});Q=uX({...k,deviceX:S[0],deviceY:S[1],deviceRadius:M,deviceRect:I})}else Q={pickedColor:null,pickedObjectIndex:-1};let N;Q.pickedLayer&&f&&this.depthFBO&&(N=this._drawAndSample({layers:[Q.pickedLayer],views:n,viewports:r,onViewportActive:d,deviceRect:{x:Q.pickedX,y:Q.pickedY,width:1,height:1},cullRect:L,effects:g,pass:"picking:".concat(l,":z")},!0).pickedColors[0]),Q.pickedLayer&&Y+1<a&&(X.add(Q.pickedLayer),Q.pickedLayer.disablePickingIndex(Q.pickedObjectIndex)),F=fX({pickInfo:Q,lastPickedInfo:this.lastPickedInfo,mode:l,layers:y,viewports:r,x:i,y:s,z:N,pixelRatio:b});for(const k of F.values())k.layer&&z.push(k);if(!Q.pickedColor)break}for(const Y of X)Y.restorePickingColors();return{result:z,emptyInfo:F.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:r,x:i,y:s,width:o=1,height:a=1,mode:l="query",maxObjects:f=null,onViewportActive:d,effects:g}){const y=this._getPickable(e);if(!y)return[];this._resizeBuffer();const b=_u(this.gl),E=lv(this.gl,[i,s],!0),S=E.x,M=E.y+E.height,C=lv(this.gl,[i+o,s+a],!0),P=C.x+C.width,I=C.y,L={x:S,y:I,width:P-S,height:M-I},F=this._drawAndSample({layers:y,views:n,viewports:r,onViewportActive:d,deviceRect:L,cullRect:{x:i,y:s,width:o,height:a},effects:g,pass:"picking:".concat(l)}),z=AX(F),X=new Map,Y=Number.isFinite(f);for(let Q=0;Q<z.length&&!(Y&&f&&X.size>=f);Q++){const N=z[Q];let k={color:N.pickedColor,layer:null,index:N.pickedObjectIndex,picked:!0,x:i,y:s,pixelRatio:b};k=MO({layer:N.pickedLayer,info:k,mode:l}),X.has(k.object)||X.set(k.object,k)}return Array.from(X.values())}_drawAndSample({layers:e,views:n,viewports:r,onViewportActive:i,deviceRect:s,cullRect:o,effects:a,pass:l},f=!1){const d=f?this.depthFBO:this.pickingFBO,{decodePickingColor:g}=this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:d,deviceRect:s,cullRect:o,effects:a,pass:l,pickZ:f}),{x:y,y:b,width:E,height:S}=s,M=new(f?Float32Array:Uint8Array)(E*S*4);return _m(d,{sourceX:y,sourceY:b,sourceWidth:E,sourceHeight:S,target:M}),{pickedColors:M,decodePickingColor:g}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:i,deviceHeight:s}){const o=Math.max(0,e-r),a=Math.max(0,n-r),l=Math.min(i,e+r+1)-o,f=Math.min(s,n+r+1)-a;return l<=0||f<=0?null:{x:o,y:a,width:l,height:f}}}const pX={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class gX{constructor(e){T(this,"el",null),T(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,pX),n.appendChild(this.el))}setTooltip(e,n,r){const i=this.el;if(!!i){if(typeof e=="string")i.innerText=e;else if(e)e.text&&(i.innerText=e.text),e.html&&(i.innerHTML=e.html),e.className&&(i.className=e.className),Object.assign(i.style,e.style);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(n,"px, ").concat(r,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}var Qu={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(e,n,r,i){var s=["","webkit","Moz","MS","ms","o"],o=n.createElement("div"),a="function",l=Math.round,f=Math.abs,d=Date.now;function g(O,D,j){return setTimeout(I(O,j),D)}function y(O,D,j){return Array.isArray(O)?(b(O,j[D],j),!0):!1}function b(O,D,j){var Z;if(!!O)if(O.forEach)O.forEach(D,j);else if(O.length!==i)for(Z=0;Z<O.length;)D.call(j,O[Z],Z,O),Z++;else for(Z in O)O.hasOwnProperty(Z)&&D.call(j,O[Z],Z,O)}function E(O,D,j){var Z="DEPRECATED METHOD: "+D+`
`+j+` AT 
`;return function(){var ce=new Error("get-stack-trace"),xe=ce&&ce.stack?ce.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",st=e.console&&(e.console.warn||e.console.log);return st&&st.call(e.console,Z,xe),O.apply(this,arguments)}}var S;typeof Object.assign!="function"?S=function(D){if(D===i||D===null)throw new TypeError("Cannot convert undefined or null to object");for(var j=Object(D),Z=1;Z<arguments.length;Z++){var ce=arguments[Z];if(ce!==i&&ce!==null)for(var xe in ce)ce.hasOwnProperty(xe)&&(j[xe]=ce[xe])}return j}:S=Object.assign;var M=E(function(D,j,Z){for(var ce=Object.keys(j),xe=0;xe<ce.length;)(!Z||Z&&D[ce[xe]]===i)&&(D[ce[xe]]=j[ce[xe]]),xe++;return D},"extend","Use `assign`."),C=E(function(D,j){return M(D,j,!0)},"merge","Use `assign`.");function P(O,D,j){var Z=D.prototype,ce;ce=O.prototype=Object.create(Z),ce.constructor=O,ce._super=Z,j&&S(ce,j)}function I(O,D){return function(){return O.apply(D,arguments)}}function L(O,D){return typeof O==a?O.apply(D&&D[0]||i,D):O}function F(O,D){return O===i?D:O}function z(O,D,j){b(N(D),function(Z){O.addEventListener(Z,j,!1)})}function X(O,D,j){b(N(D),function(Z){O.removeEventListener(Z,j,!1)})}function Y(O,D){for(;O;){if(O==D)return!0;O=O.parentNode}return!1}function Q(O,D){return O.indexOf(D)>-1}function N(O){return O.trim().split(/\s+/g)}function k(O,D,j){if(O.indexOf&&!j)return O.indexOf(D);for(var Z=0;Z<O.length;){if(j&&O[Z][j]==D||!j&&O[Z]===D)return Z;Z++}return-1}function te(O){return Array.prototype.slice.call(O,0)}function oe(O,D,j){for(var Z=[],ce=[],xe=0;xe<O.length;){var st=D?O[xe][D]:O[xe];k(ce,st)<0&&Z.push(O[xe]),ce[xe]=st,xe++}return j&&(D?Z=Z.sort(function(Ye,Pn){return Ye[D]>Pn[D]}):Z=Z.sort()),Z}function ae(O,D){for(var j,Z,ce=D[0].toUpperCase()+D.slice(1),xe=0;xe<s.length;){if(j=s[xe],Z=j?j+ce:D,Z in O)return Z;xe++}return i}var Re=1;function Oe(){return Re++}function He(O){var D=O.ownerDocument||O;return D.defaultView||D.parentWindow||e}var le=/mobile|tablet|ip(ad|hone|od)|android/i,be="ontouchstart"in e,Pe=ae(e,"PointerEvent")!==i,Fe=be&&le.test(navigator.userAgent),Ge="touch",lt="pen",kn="mouse",Yr="kinect",rr=25,Dt=1,nn=2,Nt=4,rn=8,sn=1,ir=2,sr=4,Dr=8,Er=16,$n=ir|sr,vn=Dr|Er,qr=$n|vn,bs=["x","y"],Wi=["clientX","clientY"];function Ut(O,D){var j=this;this.manager=O,this.callback=D,this.element=O.element,this.target=O.options.inputTarget,this.domHandler=function(Z){L(O.options.enable,[O])&&j.handler(Z)},this.init()}Ut.prototype={handler:function(){},init:function(){this.evEl&&z(this.element,this.evEl,this.domHandler),this.evTarget&&z(this.target,this.evTarget,this.domHandler),this.evWin&&z(He(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&X(this.element,this.evEl,this.domHandler),this.evTarget&&X(this.target,this.evTarget,this.domHandler),this.evWin&&X(He(this.element),this.evWin,this.domHandler)}};function ws(O){var D,j=O.options.inputClass;return j?D=j:Pe?D=ge:Fe?D=Va:be?D=K:D=Xl,new D(O,to)}function to(O,D,j){var Z=j.pointers.length,ce=j.changedPointers.length,xe=D&Dt&&Z-ce===0,st=D&(Nt|rn)&&Z-ce===0;j.isFirst=!!xe,j.isFinal=!!st,xe&&(O.session={}),j.eventType=D,ye(O,j),O.emit("hammer.input",j),O.recognize(j),O.session.prevInput=j}function ye(O,D){var j=O.session,Z=D.pointers,ce=Z.length;j.firstInput||(j.firstInput=ot(D)),ce>1&&!j.firstMultiple?j.firstMultiple=ot(D):ce===1&&(j.firstMultiple=!1);var xe=j.firstInput,st=j.firstMultiple,_n=st?st.center:xe.center,Ye=D.center=et(Z);D.timeStamp=d(),D.deltaTime=D.timeStamp-xe.timeStamp,D.angle=Wt(_n,Ye),D.distance=Nn(_n,Ye),De(j,D),D.offsetDirection=Bt(D.deltaX,D.deltaY);var Pn=dt(D.deltaTime,D.deltaX,D.deltaY);D.overallVelocityX=Pn.x,D.overallVelocityY=Pn.y,D.overallVelocity=f(Pn.x)>f(Pn.y)?Pn.x:Pn.y,D.scale=st?_i(st.pointers,Z):1,D.rotation=st?Cn(st.pointers,Z):0,D.maxPointers=j.prevInput?D.pointers.length>j.prevInput.maxPointers?D.pointers.length:j.prevInput.maxPointers:D.pointers.length,Ke(j,D);var ti=O.element;Y(D.srcEvent.target,ti)&&(ti=D.srcEvent.target),D.target=ti}function De(O,D){var j=D.center,Z=O.offsetDelta||{},ce=O.prevDelta||{},xe=O.prevInput||{};(D.eventType===Dt||xe.eventType===Nt)&&(ce=O.prevDelta={x:xe.deltaX||0,y:xe.deltaY||0},Z=O.offsetDelta={x:j.x,y:j.y}),D.deltaX=ce.x+(j.x-Z.x),D.deltaY=ce.y+(j.y-Z.y)}function Ke(O,D){var j=O.lastInterval||D,Z=D.timeStamp-j.timeStamp,ce,xe,st,_n;if(D.eventType!=rn&&(Z>rr||j.velocity===i)){var Ye=D.deltaX-j.deltaX,Pn=D.deltaY-j.deltaY,ti=dt(Z,Ye,Pn);xe=ti.x,st=ti.y,ce=f(ti.x)>f(ti.y)?ti.x:ti.y,_n=Bt(Ye,Pn),O.lastInterval=D}else ce=j.velocity,xe=j.velocityX,st=j.velocityY,_n=j.direction;D.velocity=ce,D.velocityX=xe,D.velocityY=st,D.direction=_n}function ot(O){for(var D=[],j=0;j<O.pointers.length;)D[j]={clientX:l(O.pointers[j].clientX),clientY:l(O.pointers[j].clientY)},j++;return{timeStamp:d(),pointers:D,center:et(D),deltaX:O.deltaX,deltaY:O.deltaY}}function et(O){var D=O.length;if(D===1)return{x:l(O[0].clientX),y:l(O[0].clientY)};for(var j=0,Z=0,ce=0;ce<D;)j+=O[ce].clientX,Z+=O[ce].clientY,ce++;return{x:l(j/D),y:l(Z/D)}}function dt(O,D,j){return{x:D/O||0,y:j/O||0}}function Bt(O,D){return O===D?sn:f(O)>=f(D)?O<0?ir:sr:D<0?Dr:Er}function Nn(O,D,j){j||(j=bs);var Z=D[j[0]]-O[j[0]],ce=D[j[1]]-O[j[1]];return Math.sqrt(Z*Z+ce*ce)}function Wt(O,D,j){j||(j=bs);var Z=D[j[0]]-O[j[0]],ce=D[j[1]]-O[j[1]];return Math.atan2(ce,Z)*180/Math.PI}function Cn(O,D){return Wt(D[1],D[0],Wi)+Wt(O[1],O[0],Wi)}function _i(O,D){return Nn(D[0],D[1],Wi)/Nn(O[0],O[1],Wi)}var za={mousedown:Dt,mousemove:nn,mouseup:Nt},wd="mousedown",oy="mousemove mouseup";function Xl(){this.evEl=wd,this.evWin=oy,this.pressed=!1,Ut.apply(this,arguments)}P(Xl,Ut,{handler:function(D){var j=za[D.type];j&Dt&&D.button===0&&(this.pressed=!0),j&nn&&D.which!==1&&(j=Nt),this.pressed&&(j&Nt&&(this.pressed=!1),this.callback(this.manager,j,{pointers:[D],changedPointers:[D],pointerType:kn,srcEvent:D}))}});var ay={pointerdown:Dt,pointermove:nn,pointerup:Nt,pointercancel:rn,pointerout:rn},cA={2:Ge,3:lt,4:kn,5:Yr},Ed="pointerdown",Td="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Ed="MSPointerDown",Td="MSPointerMove MSPointerUp MSPointerCancel");function ge(){this.evEl=Ed,this.evWin=Td,Ut.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}P(ge,Ut,{handler:function(D){var j=this.store,Z=!1,ce=D.type.toLowerCase().replace("ms",""),xe=ay[ce],st=cA[D.pointerType]||D.pointerType,_n=st==Ge,Ye=k(j,D.pointerId,"pointerId");xe&Dt&&(D.button===0||_n)?Ye<0&&(j.push(D),Ye=j.length-1):xe&(Nt|rn)&&(Z=!0),!(Ye<0)&&(j[Ye]=D,this.callback(this.manager,xe,{pointers:j,changedPointers:[D],pointerType:st,srcEvent:D}),Z&&j.splice(Ye,1))}});var ly={touchstart:Dt,touchmove:nn,touchend:Nt,touchcancel:rn},Sd="touchstart",cy="touchstart touchmove touchend touchcancel";function xd(){this.evTarget=Sd,this.evWin=cy,this.started=!1,Ut.apply(this,arguments)}P(xd,Ut,{handler:function(D){var j=ly[D.type];if(j===Dt&&(this.started=!0),!!this.started){var Z=uA.call(this,D,j);j&(Nt|rn)&&Z[0].length-Z[1].length===0&&(this.started=!1),this.callback(this.manager,j,{pointers:Z[0],changedPointers:Z[1],pointerType:Ge,srcEvent:D})}}});function uA(O,D){var j=te(O.touches),Z=te(O.changedTouches);return D&(Nt|rn)&&(j=oe(j.concat(Z),"identifier",!0)),[j,Z]}var Cd={touchstart:Dt,touchmove:nn,touchend:Nt,touchcancel:rn},Pd="touchstart touchmove touchend touchcancel";function Va(){this.evTarget=Pd,this.targetIds={},Ut.apply(this,arguments)}P(Va,Ut,{handler:function(D){var j=Cd[D.type],Z=Jl.call(this,D,j);!Z||this.callback(this.manager,j,{pointers:Z[0],changedPointers:Z[1],pointerType:Ge,srcEvent:D})}});function Jl(O,D){var j=te(O.touches),Z=this.targetIds;if(D&(Dt|nn)&&j.length===1)return Z[j[0].identifier]=!0,[j,j];var ce,xe,st=te(O.changedTouches),_n=[],Ye=this.target;if(xe=j.filter(function(Pn){return Y(Pn.target,Ye)}),D===Dt)for(ce=0;ce<xe.length;)Z[xe[ce].identifier]=!0,ce++;for(ce=0;ce<st.length;)Z[st[ce].identifier]&&_n.push(st[ce]),D&(Nt|rn)&&delete Z[st[ce].identifier],ce++;if(!!_n.length)return[oe(xe.concat(_n),"identifier",!0),_n]}var AA=2500,Es=25;function K(){Ut.apply(this,arguments);var O=I(this.handler,this);this.touch=new Va(this.manager,O),this.mouse=new Xl(this.manager,O),this.primaryTouch=null,this.lastTouches=[]}P(K,Ut,{handler:function(D,j,Z){var ce=Z.pointerType==Ge,xe=Z.pointerType==kn;if(!(xe&&Z.sourceCapabilities&&Z.sourceCapabilities.firesTouchEvents)){if(ce)se.call(this,j,Z);else if(xe&&ze.call(this,Z))return;this.callback(D,j,Z)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function se(O,D){O&Dt?(this.primaryTouch=D.changedPointers[0].identifier,me.call(this,D)):O&(Nt|rn)&&me.call(this,D)}function me(O){var D=O.changedPointers[0];if(D.identifier===this.primaryTouch){var j={x:D.clientX,y:D.clientY};this.lastTouches.push(j);var Z=this.lastTouches,ce=function(){var xe=Z.indexOf(j);xe>-1&&Z.splice(xe,1)};setTimeout(ce,AA)}}function ze(O){for(var D=O.srcEvent.clientX,j=O.srcEvent.clientY,Z=0;Z<this.lastTouches.length;Z++){var ce=this.lastTouches[Z],xe=Math.abs(D-ce.x),st=Math.abs(j-ce.y);if(xe<=Es&&st<=Es)return!0}return!1}var A=ae(o.style,"touchAction"),G=A!==i,At="compute",mt="auto",tt="manipulation",rt="none",Qt="pan-x",ft="pan-y",at=Kl();function An(O,D){this.manager=O,this.set(D)}An.prototype={set:function(O){O==At&&(O=this.compute()),G&&this.manager.element.style&&at[O]&&(this.manager.element.style[A]=O),this.actions=O.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var O=[];return b(this.manager.recognizers,function(D){L(D.options.enable,[D])&&(O=O.concat(D.getTouchAction()))}),Ts(O.join(" "))},preventDefaults:function(O){var D=O.srcEvent,j=O.offsetDirection;if(this.manager.session.prevented){D.preventDefault();return}var Z=this.actions,ce=Q(Z,rt)&&!at[rt],xe=Q(Z,ft)&&!at[ft],st=Q(Z,Qt)&&!at[Qt];if(ce){var _n=O.pointers.length===1,Ye=O.distance<2,Pn=O.deltaTime<250;if(_n&&Ye&&Pn)return}if(!(st&&xe)&&(ce||xe&&j&$n||st&&j&vn))return this.preventSrc(D)},preventSrc:function(O){this.manager.session.prevented=!0,O.preventDefault()}};function Ts(O){if(Q(O,rt))return rt;var D=Q(O,Qt),j=Q(O,ft);return D&&j?rt:D||j?D?Qt:ft:Q(O,tt)?tt:mt}function Kl(){if(!G)return!1;var O={},D=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(j){O[j]=D?e.CSS.supports("touch-action",j):!0}),O}var No=1,$t=2,Qi=4,Un=8,$i=Un,Zr=16,ke=32;function H(O){this.options=S({},this.defaults,O||{}),this.id=Oe(),this.manager=null,this.options.enable=F(this.options.enable,!0),this.state=No,this.simultaneous={},this.requireFail=[]}H.prototype={defaults:{},set:function(O){return S(this.options,O),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(O){if(y(O,"recognizeWith",this))return this;var D=this.simultaneous;return O=Yl(O,this),D[O.id]||(D[O.id]=O,O.recognizeWith(this)),this},dropRecognizeWith:function(O){return y(O,"dropRecognizeWith",this)?this:(O=Yl(O,this),delete this.simultaneous[O.id],this)},requireFailure:function(O){if(y(O,"requireFailure",this))return this;var D=this.requireFail;return O=Yl(O,this),k(D,O)===-1&&(D.push(O),O.requireFailure(this)),this},dropRequireFailure:function(O){if(y(O,"dropRequireFailure",this))return this;O=Yl(O,this);var D=k(this.requireFail,O);return D>-1&&this.requireFail.splice(D,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(O){return!!this.simultaneous[O.id]},emit:function(O){var D=this,j=this.state;function Z(ce){D.manager.emit(ce,O)}j<Un&&Z(D.options.event+yt(j)),Z(D.options.event),O.additionalEvent&&Z(O.additionalEvent),j>=Un&&Z(D.options.event+yt(j))},tryEmit:function(O){if(this.canEmit())return this.emit(O);this.state=ke},canEmit:function(){for(var O=0;O<this.requireFail.length;){if(!(this.requireFail[O].state&(ke|No)))return!1;O++}return!0},recognize:function(O){var D=S({},O);if(!L(this.options.enable,[this,D])){this.reset(),this.state=ke;return}this.state&($i|Zr|ke)&&(this.state=No),this.state=this.process(D),this.state&($t|Qi|Un|Zr)&&this.tryEmit(D)},process:function(O){},getTouchAction:function(){},reset:function(){}};function yt(O){return O&Zr?"cancel":O&Un?"end":O&Qi?"move":O&$t?"start":""}function fA(O){return O==Er?"down":O==Dr?"up":O==ir?"left":O==sr?"right":""}function Yl(O,D){var j=D.manager;return j?j.get(O):O}function ei(){H.apply(this,arguments)}P(ei,H,{defaults:{pointers:1},attrTest:function(O){var D=this.options.pointers;return D===0||O.pointers.length===D},process:function(O){var D=this.state,j=O.eventType,Z=D&($t|Qi),ce=this.attrTest(O);return Z&&(j&rn||!ce)?D|Zr:Z||ce?j&Nt?D|Un:D&$t?D|Qi:$t:ke}});function ql(){ei.apply(this,arguments),this.pX=null,this.pY=null}P(ql,ei,{defaults:{event:"pan",threshold:10,pointers:1,direction:qr},getTouchAction:function(){var O=this.options.direction,D=[];return O&$n&&D.push(ft),O&vn&&D.push(Qt),D},directionTest:function(O){var D=this.options,j=!0,Z=O.distance,ce=O.direction,xe=O.deltaX,st=O.deltaY;return ce&D.direction||(D.direction&$n?(ce=xe===0?sn:xe<0?ir:sr,j=xe!=this.pX,Z=Math.abs(O.deltaX)):(ce=st===0?sn:st<0?Dr:Er,j=st!=this.pY,Z=Math.abs(O.deltaY))),O.direction=ce,j&&Z>D.threshold&&ce&D.direction},attrTest:function(O){return ei.prototype.attrTest.call(this,O)&&(this.state&$t||!(this.state&$t)&&this.directionTest(O))},emit:function(O){this.pX=O.deltaX,this.pY=O.deltaY;var D=fA(O.direction);D&&(O.additionalEvent=this.options.event+D),this._super.emit.call(this,O)}});function hA(){ei.apply(this,arguments)}P(hA,ei,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[rt]},attrTest:function(O){return this._super.attrTest.call(this,O)&&(Math.abs(O.scale-1)>this.options.threshold||this.state&$t)},emit:function(O){if(O.scale!==1){var D=O.scale<1?"in":"out";O.additionalEvent=this.options.event+D}this._super.emit.call(this,O)}});function U(){H.apply(this,arguments),this._timer=null,this._input=null}P(U,H,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[mt]},process:function(O){var D=this.options,j=O.pointers.length===D.pointers,Z=O.distance<D.threshold,ce=O.deltaTime>D.time;if(this._input=O,!Z||!j||O.eventType&(Nt|rn)&&!ce)this.reset();else if(O.eventType&Dt)this.reset(),this._timer=g(function(){this.state=$i,this.tryEmit()},D.time,this);else if(O.eventType&Nt)return $i;return ke},reset:function(){clearTimeout(this._timer)},emit:function(O){this.state===$i&&(O&&O.eventType&Nt?this.manager.emit(this.options.event+"up",O):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}});function dA(){ei.apply(this,arguments)}P(dA,ei,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[rt]},attrTest:function(O){return this._super.attrTest.call(this,O)&&(Math.abs(O.rotation)>this.options.threshold||this.state&$t)}});function pA(){ei.apply(this,arguments)}P(pA,ei,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:$n|vn,pointers:1},getTouchAction:function(){return ql.prototype.getTouchAction.call(this)},attrTest:function(O){var D=this.options.direction,j;return D&($n|vn)?j=O.overallVelocity:D&$n?j=O.overallVelocityX:D&vn&&(j=O.overallVelocityY),this._super.attrTest.call(this,O)&&D&O.offsetDirection&&O.distance>this.options.threshold&&O.maxPointers==this.options.pointers&&f(j)>this.options.velocity&&O.eventType&Nt},emit:function(O){var D=fA(O.offsetDirection);D&&this.manager.emit(this.options.event+D,O),this.manager.emit(this.options.event,O)}});function Zl(){H.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}P(Zl,H,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[tt]},process:function(O){var D=this.options,j=O.pointers.length===D.pointers,Z=O.distance<D.threshold,ce=O.deltaTime<D.time;if(this.reset(),O.eventType&Dt&&this.count===0)return this.failTimeout();if(Z&&ce&&j){if(O.eventType!=Nt)return this.failTimeout();var xe=this.pTime?O.timeStamp-this.pTime<D.interval:!0,st=!this.pCenter||Nn(this.pCenter,O.center)<D.posThreshold;this.pTime=O.timeStamp,this.pCenter=O.center,!st||!xe?this.count=1:this.count+=1,this._input=O;var _n=this.count%D.taps;if(_n===0)return this.hasRequireFailures()?(this._timer=g(function(){this.state=$i,this.tryEmit()},D.interval,this),$t):$i}return ke},failTimeout:function(){return this._timer=g(function(){this.state=ke},this.options.interval,this),ke},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==$i&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Xi(O,D){return D=D||{},D.recognizers=F(D.recognizers,Xi.defaults.preset),new ec(O,D)}Xi.VERSION="2.0.7",Xi.defaults={domEvents:!1,touchAction:At,enable:!0,inputTarget:null,inputClass:null,preset:[[dA,{enable:!1}],[hA,{enable:!1},["rotate"]],[pA,{direction:$n}],[ql,{direction:$n},["swipe"]],[Zl],[Zl,{event:"doubletap",taps:2},["tap"]],[U]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var uy=1,Md=2;function ec(O,D){this.options=S({},Xi.defaults,D||{}),this.options.inputTarget=this.options.inputTarget||O,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=O,this.input=ws(this),this.touchAction=new An(this,this.options.touchAction),Id(this,!0),b(this.options.recognizers,function(j){var Z=this.add(new j[0](j[1]));j[2]&&Z.recognizeWith(j[2]),j[3]&&Z.requireFailure(j[3])},this)}ec.prototype={set:function(O){return S(this.options,O),O.touchAction&&this.touchAction.update(),O.inputTarget&&(this.input.destroy(),this.input.target=O.inputTarget,this.input.init()),this},stop:function(O){this.session.stopped=O?Md:uy},recognize:function(O){var D=this.session;if(!D.stopped){this.touchAction.preventDefaults(O);var j,Z=this.recognizers,ce=D.curRecognizer;(!ce||ce&&ce.state&$i)&&(ce=D.curRecognizer=null);for(var xe=0;xe<Z.length;)j=Z[xe],D.stopped!==Md&&(!ce||j==ce||j.canRecognizeWith(ce))?j.recognize(O):j.reset(),!ce&&j.state&($t|Qi|Un)&&(ce=D.curRecognizer=j),xe++}},get:function(O){if(O instanceof H)return O;for(var D=this.recognizers,j=0;j<D.length;j++)if(D[j].options.event==O)return D[j];return null},add:function(O){if(y(O,"add",this))return this;var D=this.get(O.options.event);return D&&this.remove(D),this.recognizers.push(O),O.manager=this,this.touchAction.update(),O},remove:function(O){if(y(O,"remove",this))return this;if(O=this.get(O),O){var D=this.recognizers,j=k(D,O);j!==-1&&(D.splice(j,1),this.touchAction.update())}return this},on:function(O,D){if(O!==i&&D!==i){var j=this.handlers;return b(N(O),function(Z){j[Z]=j[Z]||[],j[Z].push(D)}),this}},off:function(O,D){if(O!==i){var j=this.handlers;return b(N(O),function(Z){D?j[Z]&&j[Z].splice(k(j[Z],D),1):delete j[Z]}),this}},emit:function(O,D){this.options.domEvents&&gA(O,D);var j=this.handlers[O]&&this.handlers[O].slice();if(!(!j||!j.length)){D.type=O,D.preventDefault=function(){D.srcEvent.preventDefault()};for(var Z=0;Z<j.length;)j[Z](D),Z++}},destroy:function(){this.element&&Id(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Id(O,D){var j=O.element;if(!!j.style){var Z;b(O.options.cssProps,function(ce,xe){Z=ae(j.style,xe),D?(O.oldCssProps[Z]=j.style[Z],j.style[Z]=ce):j.style[Z]=O.oldCssProps[Z]||""}),D||(O.oldCssProps={})}}function gA(O,D){var j=n.createEvent("Event");j.initEvent(O,!0,!0),j.gesture=D,D.target.dispatchEvent(j)}S(Xi,{INPUT_START:Dt,INPUT_MOVE:nn,INPUT_END:Nt,INPUT_CANCEL:rn,STATE_POSSIBLE:No,STATE_BEGAN:$t,STATE_CHANGED:Qi,STATE_ENDED:Un,STATE_RECOGNIZED:$i,STATE_CANCELLED:Zr,STATE_FAILED:ke,DIRECTION_NONE:sn,DIRECTION_LEFT:ir,DIRECTION_RIGHT:sr,DIRECTION_UP:Dr,DIRECTION_DOWN:Er,DIRECTION_HORIZONTAL:$n,DIRECTION_VERTICAL:vn,DIRECTION_ALL:qr,Manager:ec,Input:Ut,TouchAction:An,TouchInput:Va,MouseInput:Xl,PointerEventInput:ge,TouchMouseInput:K,SingleTouchInput:xd,Recognizer:H,AttrRecognizer:ei,Tap:Zl,Pan:ql,Swipe:pA,Pinch:hA,Rotate:dA,Press:U,on:z,off:X,each:b,merge:C,extend:M,assign:S,inherit:P,bindFn:I,prefixed:ae});var bi=typeof e<"u"?e:typeof self<"u"?self:{};bi.Hammer=Xi,typeof i=="function"&&i.amd?i(function(){return Xi}):t.exports?t.exports=Xi:e[r]=Xi})(window,document,"Hammer")})(Qu);const mX=Qu.exports,Ps=xI({__proto__:null,default:mX},[Qu.exports]),IO=1,BO=2,W1=4,yX={mousedown:IO,mousemove:BO,mouseup:W1};function vX(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function _X(t){const e=t.prototype.handler;t.prototype.handler=function(r){const i=this.store;r.button>0&&r.type==="pointerdown"&&(vX(i,s=>s.pointerId===r.pointerId)||i.push(r)),e.call(this,r)}}function bX(t){t.prototype.handler=function(n){let r=yX[n.type];r&IO&&n.button>=0&&(this.pressed=!0),r&BO&&n.which===0&&(r=W1),this.pressed&&(r&W1&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}_X(Qu.exports.PointerEventInput);bX(Qu.exports.MouseInput);const wX=Qu.exports.Manager;class Sm{constructor(e,n,r){this.element=e,this.callback=n,this.options={enable:!0,...r}}}const EX=Ps?[[Ps.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Ps.Rotate,{enable:!1}],[Ps.Pinch,{enable:!1}],[Ps.Swipe,{enable:!1}],[Ps.Pan,{threshold:0,enable:!1}],[Ps.Press,{enable:!1}],[Ps.Tap,{event:"doubletap",taps:2,enable:!1}],[Ps.Tap,{event:"anytap",enable:!1}],[Ps.Tap,{enable:!1}]]:null,FC={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},TX={doubletap:["tap"]},SX={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},Tw={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},xX={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},kC={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},CX=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Nc=typeof window<"u"?window:global;let Q1=!1;try{const t={get passive(){return Q1=!0,!0}};Nc.addEventListener("test",null,t),Nc.removeEventListener("test",null)}catch{Q1=!1}const PX=CX.indexOf("firefox")!==-1,{WHEEL_EVENTS:MX}=Tw,NC="wheel",UC=4.000244140625,IX=40,BX=.25;class LX extends Sm{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{if(!this.options.enable)return;let s=i.deltaY;Nc.WheelEvent&&(PX&&i.deltaMode===Nc.WheelEvent.DOM_DELTA_PIXEL&&(s/=Nc.devicePixelRatio),i.deltaMode===Nc.WheelEvent.DOM_DELTA_LINE&&(s*=IX)),s!==0&&s%UC===0&&(s=Math.floor(s/UC)),i.shiftKey&&s&&(s=s*BX),this.callback({type:NC,center:{x:i.clientX,y:i.clientY},delta:-s,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(MX),this.events.forEach(i=>e.addEventListener(i,this.handleEvent,Q1?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===NC&&(this.options.enable=n)}}const{MOUSE_EVENTS:RX}=Tw,GC="pointermove",zC="pointerover",VC="pointerout",jC="pointerenter",HC="pointerleave";class OX extends Sm{constructor(e,n,r){super(e,n,r),this.handleEvent=s=>{this.handleOverEvent(s),this.handleOutEvent(s),this.handleEnterEvent(s),this.handleLeaveEvent(s),this.handleMoveEvent(s)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(RX),this.events.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===GC&&(this.enableMoveEvent=n),e===zC&&(this.enableOverEvent=n),e===VC&&(this.enableOutEvent=n),e===jC&&(this.enableEnterEvent=n),e===HC&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit(zC,e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit(VC,e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit(jC,e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit(HC,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.which===0&&(this.pressed=!1),this.pressed||this._emit(GC,e);break;case"mouseup":this.pressed=!1;break}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:DX}=Tw,WC="keydown",QC="keyup";class FX extends Sm{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{const s=i.target||i.srcElement;s.tagName==="INPUT"&&s.type==="text"||s.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:WC,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:QC,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(DX),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===WC&&(this.enableDownEvent=n),e===QC&&(this.enableUpEvent=n)}}const $C="contextmenu";class kX extends Sm{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{!this.options.enable||this.callback({type:$C,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===$C&&(this.options.enable=n)}}const $1=1,pg=2,X1=4,NX={pointerdown:$1,pointermove:pg,pointerup:X1,mousedown:$1,mousemove:pg,mouseup:X1},UX=1,GX=2,zX=3,VX=0,jX=1,HX=2,WX=1,QX=2,$X=4;function XX(t){const e=NX[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r,which:i}=t.srcEvent;let s=!1,o=!1,a=!1;return e===X1||e===pg&&!Number.isFinite(n)?(s=i===UX,o=i===GX,a=i===zX):e===pg?(s=Boolean(n&WX),o=Boolean(n&$X),a=Boolean(n&QX)):e===$1&&(s=r===VX,o=r===jX,a=r===HX),{leftButton:s,middleButton:o,rightButton:a}}function JX(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),i=r.width/e.offsetWidth||1,s=r.height/e.offsetHeight||1,o={x:(n.x-r.left-e.clientLeft)/i,y:(n.y-r.top-e.clientTop)/s};return{center:n,offsetCenter:o}}const Sv={srcElement:"root",priority:0};class KX{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const r=this._normalizeEvent(n);let i=n.srcEvent.target;for(;i&&i!==r.rootElement;){if(this._emit(r,i),r.handled)return;i=i.parentNode}this._emit(r,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,r,i=!1,s=!1){const{handlers:o,handlersByElement:a}=this;let l=Sv;typeof r=="string"||r&&r.addEventListener?l={...Sv,srcElement:r}:r&&(l={...Sv,...r});let f=a.get(l.srcElement);f||(f=[],a.set(l.srcElement,f));const d={type:e,handler:n,srcElement:l.srcElement,priority:l.priority};i&&(d.once=!0),s&&(d.passive=!0),o.push(d),this._active=this._active||!d.passive;let g=f.length-1;for(;g>=0&&!(f[g].priority>=d.priority);)g--;f.splice(g+1,0,d)}remove(e,n){const{handlers:r,handlersByElement:i}=this;for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.type===e&&o.handler===n){r.splice(s,1);const a=i.get(o.srcElement);a.splice(a.indexOf(o),1),a.length===0&&i.delete(o.srcElement)}}this._active=r.some(s=>!s.passive)}_emit(e,n){const r=this.handlersByElement.get(n);if(r){let i=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,i=!0},a=[];for(let l=0;l<r.length;l++){const{type:f,handler:d,once:g}=r[l];if(d({...e,type:f,stopPropagation:s,stopImmediatePropagation:o}),g&&a.push(r[l]),i)break}for(let l=0;l<a.length;l++){const{type:f,handler:d}=a[l];this.remove(f,d)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...XX(e),...JX(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const YX={events:null,recognizers:null,recognizerOptions:{},Manager:wX,touchAction:"none",tabIndex:0};class qX{constructor(e=null,n){this._onBasicInput=i=>{const{srcEvent:s}=i,o=SX[s.type];o&&this.manager.emit(o,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...YX,...n},this.events=new Map,this.setElement(e);const{events:r}=this.options;r&&this.on(r)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this,r=n.Manager;this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||EX}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(FC).forEach(i=>{const s=this.manager.get(i);s&&FC[i].forEach(o=>{s.recognizeWith(o)})});for(const i in n.recognizerOptions){const s=this.manager.get(i);if(s){const o=n.recognizerOptions[i];delete o.enable,s.set(o)}}this.wheelInput=new LX(e,this._onOtherEvent,{enable:!1}),this.moveInput=new OX(e,this._onOtherEvent,{enable:!1}),this.keyInput=new FX(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new kX(e,this._onOtherEvent,{enable:!1});for(const[i,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(i,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,r){this._addEventHandler(e,n,r,!1)}once(e,n,r){this._addEventHandler(e,n,r,!0)}watch(e,n,r){this._addEventHandler(e,n,r,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:r}=this;if(!r)return;const i=r.get(e);if(i&&i.options.enable!==n){i.set({enable:n});const s=TX[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=r.get(o);n?(a.requireFailure(e),i.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,r,i,s){if(typeof e!="string"){r=n;for(const d in e)this._addEventHandler(d,e[d],r,i,s);return}const{manager:o,events:a}=this,l=kC[e]||e;let f=a.get(l);f||(f=new KX(this),a.set(l,f),f.recognizerName=xX[l]||l,o&&o.on(l,f.handleEvent)),f.add(e,n,r,i,s),f.isEmpty()||this._toggleRecognizer(f.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:r}=this,i=kC[e]||e,s=r.get(i);if(!!s&&(s.remove(e,n),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const l of r.values())if(l.recognizerName===o&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}}function Ka(){}const ZX=({isDragging:t})=>t?"grabbing":"grab",LO={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Ka,onResize:Ka,onViewStateChange:Ka,onInteractionStateChange:Ka,onBeforeRender:Ka,onAfterRender:Ka,onLoad:Ka,onError:t=>je.error(t.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:ZX,getTooltip:null,debug:!1,drawPickingColors:!1};class xm{constructor(e){T(this,"props",void 0),T(this,"width",0),T(this,"height",0),T(this,"userData",{}),T(this,"canvas",null),T(this,"viewManager",null),T(this,"layerManager",null),T(this,"effectManager",null),T(this,"deckRenderer",null),T(this,"deckPicker",null),T(this,"eventManager",null),T(this,"tooltip",null),T(this,"metrics",void 0),T(this,"animationLoop",void 0),T(this,"stats",void 0),T(this,"viewState",void 0),T(this,"cursorState",void 0),T(this,"_needsRedraw",void 0),T(this,"_pickRequest",void 0),T(this,"_lastPointerDownInfo",null),T(this,"_metricsCounter",void 0),T(this,"_onPointerMove",n=>{const{_pickRequest:r}=this;if(n.type==="pointerleave")r.x=-1,r.y=-1,r.radius=0;else{if(n.leftButton||n.rightButton)return;{const i=n.offsetCenter;if(!i)return;r.x=i.x,r.y=i.y,r.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:r.x,y:r.y}),r.event=n}),T(this,"_onEvent",n=>{const r=wC[n.type],i=n.offsetCenter;if(!r||!i||!this.layerManager)return;const s=this.layerManager.getLayers(),o=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:s,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:a}=o,l=a&&(a[r.handler]||a.props[r.handler]),f=this.props[r.handler];let d=!1;l&&(d=l.call(a,o,n)),!d&&f&&f(o,n)}),T(this,"_onPointerDown",n=>{const r=n.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:r.x,y:r.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props={...LO,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&je.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),KL()==="IE"&&je.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new Oh({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&Tu.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,r,i,s,o,a;if(this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(e=this.layerManager)===null||e===void 0||e.finalize(),this.layerManager=null,(n=this.viewManager)===null||n===void 0||n.finalize(),this.viewManager=null,(r=this.effectManager)===null||r===void 0||r.finalize(),this.effectManager=null,(i=this.deckRenderer)===null||i===void 0||i.finalize(),this.deckRenderer=null,(s=this.deckPicker)===null||s===void 0||s.finalize(),this.deckPicker=null,(o=this.eventManager)===null||o===void 0||o.destroy(),this.eventManager=null,(a=this.tooltip)===null||a===void 0||a.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var l;(l=this.canvas.parentElement)===null||l===void 0||l.removeChild(this.canvas),this.canvas=null}}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&je.removed("onLayerHover","onHover")(),"onLayerClick"in e&&je.removed("onLayerClick","onClick")(),e.initialViewState&&!Hl(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const r=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return n=n||r||i||s||o,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return zn(this.viewManager),this.viewManager.views}getViewports(e){return zn(this.viewManager),this.viewManager.getViewports(e)}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_pick(e,n,r){zn(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(n).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...r});return i.get(n).timeEnd(),s}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),zn(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:r}=e;if(n||n===0){const s=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=s}if(r||r===0){var i;const s=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.position=((i=e.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){const{canvas:e}=this;if(!e)return;const n=e.clientWidth||e.width,r=e.clientHeight||e.height;if(n!==this.width||r!==this.height){var i;this.width=n,this.height=r,(i=this.viewManager)===null||i===void 0||i.setProps({width:n,height:r}),this.props.onResize({width:n,height:r})}}_createAnimationLoop(e){const{width:n,height:r,gl:i,glOptions:s,debug:o,onError:a,onBeforeRender:l,onAfterRender:f,useDevicePixels:d}=e;return new gH({width:n,height:r,useDevicePixels:d,autoResizeViewport:!1,gl:i,onCreateContext:g=>dR({...s,...g,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:g=>this._setGLContext(g.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:f,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new TO({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:r,emptyInfo:i}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=r.length>0;let s=i,o=!1;for(const a of r){var n;s=a,o=((n=a.layer)===null||n===void 0?void 0:n.onHover(a,e.event))||o}if(!o&&this.props.onHover&&this.props.onHover(s,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(s);this.tooltip.setTooltip(a,s.x,s.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,qb(e,{enable:!0,copyState:!0})),this.tooltip=new gX(this.canvas),So(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new lO;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new qX(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in wC)this.eventManager.on(i,this._onEvent);this.viewManager=new O$({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new R$(e,{deck:this,stats:this.stats,viewport:r,timeline:n}),this.effectManager=new rX,this.deckRenderer=new lX(e),this.deckPicker=new dX(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:r}=this.layerManager.context;So(r,this.props.parameters),this.props.onBeforeRender({gl:r}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:r})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),je.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const r=ll.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}}T(xm,"defaultProps",LO);T(xm,"VERSION",TV.VERSION);class xv{constructor(e,n){T(this,"opts",void 0),T(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:r}=this.source,{size:i}=n;let s=r;if(r&&r.length!==i){s=new Float32Array(i);const o=n.elementOffset||0;for(let a=0;a<i;++a)s[a]=r[o+a]}return s}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function eJ(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function pp(t){return t.stride||t.size*t.bytesPerElement}function RO(t,e){e.offset&&je.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=pp(t),r=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,i=e.elementOffset||0,s=r*n+i*t.bytesPerElement+(t.offset||0);return{...e,offset:s,stride:n}}function tJ(t,e){const n=RO(t,e);return{high:n,low:{...n,offset:n.offset+t.size*4}}}class nJ{constructor(e,n,r){T(this,"gl",void 0),T(this,"id",void 0),T(this,"size",void 0),T(this,"settings",void 0),T(this,"value",void 0),T(this,"doublePrecision",void 0),T(this,"_buffer",void 0),T(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const i=n.logicalType||n.type,s=i===5130;let{defaultValue:o}=n;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0);let a;s?a=5126:!i&&n.isIndexed?a=e&&bm(e,kt.ELEMENT_INDEX_UINT32)?5125:5123:a=i||5126;let l=eJ(i||a||5126);this.doublePrecision=s,s&&n.fp64===!1&&(l=Float32Array),this.value=null,this.settings={...n,defaultType:l,defaultValue:o,logicalType:i,type:a,size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...r,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new Rt(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*pp(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Tu.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const r={},i=this.value instanceof Float64Array,s=tJ(this.getAccessor(),n||{});return r[e]=new xv(this,s.high),r["".concat(e,"64Low")]=i?new xv(this,s.low):new Float32Array(this.size),r}if(n){const r=RO(this.getAccessor(),n);return{[e]:new xv(this,r)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:r,size:i}=this,s=r*i;if(n&&s&&n.length>=s){const o=new Array(i).fill(1/0),a=new Array(i).fill(-1/0);for(let l=0;l<s;)for(let f=0;f<i;f++){const d=n[l++];d<o[f]&&(o[f]=d),d>a[f]&&(a[f]=d)}e=[o,a]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let r;ArrayBuffer.isView(e)?r={value:e}:e instanceof Rt?r={buffer:e}:r=e;const i={...this.settings,...r};if(n.bufferAccessor=i,n.bounds=null,r.constant){let s=r.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this.normalizeConstant(s)),!(!n.constant||!this._areValuesEqual(s,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=s}else if(r.buffer){const s=r.buffer;n.externalBuffer=s,n.constant=!1,this.value=r.value||null;const o=r.value instanceof Float64Array;i.type=r.type||s.accessor.type,i.bytesPerElement=s.accessor.BYTES_PER_ELEMENT*(o?2:1),i.stride=pp(i)}else if(r.value){this._checkExternalBuffer(r);let s=r.value;n.externalBuffer=null,n.constant=!1,this.value=s,i.bytesPerElement=s.BYTES_PER_ELEMENT,i.stride=pp(i);const{buffer:o,byteOffset:a}=this;this.doublePrecision&&s instanceof Float64Array&&(s=Ev(s,i));const l=s.byteLength+a+i.stride*2;o.byteLength<l&&o.reallocate(l),o.setAccessor(null),o.subData({data:s,offset:a}),i.type=r.type||o.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:r=0,endOffset:i}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?Ev(n,{size:this.size,startIndex:r,endIndex:i}):n.subarray(r,i),offset:r*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:r}=this,i=r.allocatedValue,s=Tu.allocate(i,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=s;const{buffer:o,byteOffset:a}=this;return o.byteLength<s.byteLength+a&&(o.reallocate(s.byteLength+a),n&&i&&o.subData({data:i instanceof Float64Array?Ev(i,this):i,offset:a})),r.allocatedValue=s,r.constant=!1,r.externalBuffer=null,r.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const r=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=n.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof r)&&this.settings.normalized&&!("normalized"in e)&&je.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,r){const{defaultValue:i,size:s}=this.settings;if(Number.isFinite(e))return n[r]=e,n;if(!e)return n[r]=i[0],n;switch(s){case 4:n[r+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:n[r+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:n[r+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:n[r+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let o=s;for(;--o>=0;)n[r+o]=Number.isFinite(e[o])?e[o]:i[o]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:r}=this;for(let i=0;i<r;i++)if(e[i]!==n[i])return!1;return!0}}const XC=[],JC=[];function Oa(t,e=0,n=1/0){let r=XC;const i={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?r=t:t.length>0&&(JC.length=t.length,r=JC):r=XC,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function OO(t){return t&&t[Symbol.asyncIterator]}function DO(t,e){const{size:n,stride:r,offset:i,startIndices:s,nested:o}=e,a=t.BYTES_PER_ELEMENT,l=r?r/a:n,f=i?i/a:0,d=Math.floor((t.length-f)/l);return(g,{index:y,target:b})=>{if(!s){const C=y*l+f;for(let P=0;P<n;P++)b[P]=t[C+P];return b}const E=s[y],S=s[y+1]||d;let M;if(o){M=new Array(S-E);for(let C=E;C<S;C++){const P=C*l+f;b=new Array(n);for(let I=0;I<n;I++)b[I]=t[P+I];M[C-E]=b}}else if(l===n)M=t.subarray(E*n+f,S*n+f);else{M=new t.constructor((S-E)*n);let C=0;for(let P=E;P<S;P++){const I=P*l+f;for(let L=0;L<n;L++)M[C++]=t[I+L]}}return M}}const rJ=[],gp=[[0,1/0]];function iJ(t,e){if(t===gp||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],r=t.length;let i=0;for(let s=0;s<r;s++){const o=t[s];o[1]<e[0]?(n.push(o),i=s+1):o[0]>e[1]?n.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return n.splice(i,0,e),n}function Cv(t){const{source:e,target:n,start:r=0,size:i,getData:s}=t,o=t.end||n.length,a=e.length,l=o-r;if(a>l){n.set(e.subarray(0,l),r);return}if(n.set(e,r),!s)return;let f=a;for(;f<l;){const d=s(f,e);for(let g=0;g<i;g++)n[r+f]=d[g]||0,f++}}function sJ({source:t,target:e,size:n,getData:r,sourceStartIndices:i,targetStartIndices:s}){if(!Array.isArray(s))return Cv({source:t,target:e,size:n,getData:r}),e;let o=0,a=0;const l=r&&((d,g)=>r(d+a,g)),f=Math.min(i.length,s.length);for(let d=1;d<f;d++){const g=i[d]*n,y=s[d]*n;Cv({source:t.subarray(o,g),target:e,start:a,end:y,size:n,getData:l}),o=g,a=y}return a<e.length&&Cv({source:[],target:e,start:a,size:n,getData:l}),e}const oJ={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function FO(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...oJ[n],...e,...t,type:n}}function kO(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function NO(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function UO(t){t.push(t.shift())}function Sw(t,e){const{doublePrecision:n,settings:r,value:i,size:s}=t,o=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*s)*o}function GO({buffer:t,numInstances:e,attribute:n,fromLength:r,fromStartIndices:i,getData:s=o=>o}){const o=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*o,l=n.byteOffset,f=n.startIndices,d=i&&f,g=Sw(n,e),y=n.isConstant;if(!d&&r>=g)return;const b=y?n.value:n.getBuffer().getData({srcByteOffset:l});if(n.settings.normalized&&!y){const C=s;s=(P,I)=>n.normalizeConstant(C(P,I))}const E=y?(C,P)=>s(b,P):(C,P)=>s(b.subarray(C,C+a),P),S=t.getData({length:r}),M=new Float32Array(g);sJ({source:S,target:M,sourceStartIndices:i,targetStartIndices:f,size:a,getData:E}),t.byteLength<M.byteLength+l&&t.reallocate(M.byteLength+l),t.subData({data:M,offset:l})}class xw extends nJ{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:gp}),T(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,r=this.settings.transition,i=Array.isArray(n)?e[n.find(s=>e[s])]:e[n];return FO(i,r)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:r=0,endRow:i=1/0}=n;this.state.updateRanges=iJ(this.state.updateRanges,[r,i])}else this.state.updateRanges=gp}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=rJ}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:r}=this;return r.noAlloc?!1:r.update?(super.allocate(e,n.updateRanges!==gp),!0):!1}updateBuffer({numInstances:e,data:n,props:r,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this;let l=!0;if(o){for(const[f,d]of s)o.call(i,this,{data:n,startRow:f,endRow:d,props:r,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[f,d]of s){const g=Number.isFinite(f)?this.getVertexOffset(f):0,y=Number.isFinite(d)?this.getVertexOffset(d):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:g,endOffset:y})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:r,settings:i}=this;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;if(r.binaryValue=e,this.setNeedsRedraw(),i.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const o=e;zn(ArrayBuffer.isView(o.value),"invalid ".concat(i.accessor));const a=Boolean(o.size)&&o.size!==this.size;return r.binaryAccessor=DO(o.value,{size:o.size||this.size,stride:o.stride,offset:o.offset,startIndices:n,nested:a}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?n[e]:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const r in e)Object.assign(n,super.getShaderAttributes(r,e[r]));return n}_autoUpdater(e,{data:n,startRow:r,endRow:i,props:s,numInstances:o}){if(e.constant)return;const{settings:a,state:l,value:f,size:d,startIndices:g}=e,{accessor:y,transform:b}=a,E=l.binaryAccessor||(typeof y=="function"?y:s[y]);zn(typeof E=="function",'accessor "'.concat(y,'" is not a function'));let S=e.getVertexOffset(r);const{iterable:M,objectInfo:C}=Oa(n,r,i);for(const P of M){C.index++;let I=E(P,C);if(b&&(I=b.call(this,I)),g){const L=(C.index<g.length-1?g[C.index+1]:o)-g[C.index];if(I&&Array.isArray(I[0])){let F=S;for(const z of I)e._normalizeValue(z,f,F),F+=d}else I&&I.length>d?f.set(I,S):(e._normalizeValue(I,C.target,0),P$({target:f,source:C.target,start:S,count:L}));S+=L*d}else e._normalizeValue(I,f,S),S+=d}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let r=!0;switch(n){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class aJ{constructor({gl:e,attribute:n,timeline:r}){T(this,"gl",void 0),T(this,"type","interpolation"),T(this,"attributeInTransition",void 0),T(this,"settings",void 0),T(this,"attribute",void 0),T(this,"transition",void 0),T(this,"currentStartIndices",void 0),T(this,"currentLength",void 0),T(this,"transform",void 0),T(this,"buffers",void 0),this.gl=e,this.transition=new Hh(r),this.attribute=n,this.attributeInTransition=new xw(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=cJ(e,n);const i={byteLength:0,usage:35050};this.buffers=[new Rt(e,i),new Rt(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0){this.transition.cancel();return}this.settings=e;const{gl:r,buffers:i,attribute:s}=this;UO(i);const o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)GO({buffer:a,...o});this.currentStartIndices=s.startIndices,this.currentLength=Sw(s,n),this.attributeInTransition.setData({buffer:i[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:i[0],aTo:kO(r,s)},feedbackBuffers:{vCurrent:i[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:r}=this.settings,{time:i}=this.transition;let s=i/n;r&&(s=r(s)),this.transform.run({uniforms:{time:s}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}}const lJ=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function cJ(t,e){const n=NO(e.size);return new yw(t,{vs:lJ,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}class uJ{constructor({gl:e,attribute:n,timeline:r}){T(this,"gl",void 0),T(this,"type","spring"),T(this,"attributeInTransition",void 0),T(this,"settings",void 0),T(this,"attribute",void 0),T(this,"transition",void 0),T(this,"currentStartIndices",void 0),T(this,"currentLength",void 0),T(this,"texture",void 0),T(this,"framebuffer",void 0),T(this,"transform",void 0),T(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new Hh(r),this.attribute=n,this.attributeInTransition=new xw(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=fJ(e),this.framebuffer=hJ(e,this.texture),this.transform=AJ(e,n,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new Rt(e,i),new Rt(e,i),new Rt(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){const{gl:r,buffers:i,attribute:s}=this,o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)GO({buffer:a,...o});this.settings=e,this.currentStartIndices=s.startIndices,this.currentLength=Sw(s,n),this.attributeInTransition.setData({buffer:i[1],value:s.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:kO(r,s)}})}update(){const{buffers:e,transform:n,framebuffer:r,transition:i}=this;if(!i.update())return!1;const o=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:o.stiffness,damping:o.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),UO(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),_m(r)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function AJ(t,e,n){const r=NO(e.size);return new yw(t,{framebuffer:n,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}function fJ(t){return new br(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function hJ(t,e){return new xn(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{[36064]:e}})}const dJ={interpolation:aJ,spring:uJ};class pJ{constructor(e,{id:n,timeline:r}){T(this,"id",void 0),T(this,"isSupported",void 0),T(this,"gl",void 0),T(this,"timeline",void 0),T(this,"transitions",void 0),T(this,"needsRedraw",void 0),T(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=yw.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:r}){this.numInstances=r||1;for(const i in e){const s=e[i],o=s.getTransitionSetting(n);!o||this._updateAttribute(i,s,o)}for(const i in this.transitions){const s=e[i];(!s||!s.getTransitionSetting(n))&&this._removeTransition(i)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const r=this.transitions[n];r.inProgress&&(e[n]=r.attributeInTransition)}return e}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,r){const i=this.transitions[e];let s=!i||i.type!==r.type;if(s){if(!this.isSupported){je.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}i&&this._removeTransition(e);const o=dJ[r.type];o?this.transitions[e]=new o({attribute:n,timeline:this.timeline,gl:this.gl}):(je.error("unsupported transition type '".concat(r.type,"'"))(),s=!1)}(s||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}const KC="attributeManager.invalidate",gJ="attributeManager.updateStart",mJ="attributeManager.updateEnd",yJ="attribute.updateStart",vJ="attribute.allocate",_J="attribute.updateEnd";class bJ{constructor(e,{id:n="attribute-manager",stats:r,timeline:i}={}){T(this,"id",void 0),T(this,"gl",void 0),T(this,"attributes",void 0),T(this,"updateTriggers",void 0),T(this,"needsRedraw",void 0),T(this,"userData",void 0),T(this,"stats",void 0),T(this,"attributeTransitionManager",void 0),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new pJ(e,{id:"".concat(n,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const r=this._invalidateTrigger(e,n);fr(KC,this,e,r)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);fr(KC,this,"all")}update({data:e,numInstances:n,startIndices:r=null,transitions:i,props:s={},buffers:o={},context:a={}}){let l=!1;fr(gJ,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const f in this.attributes){const d=this.attributes[f],g=d.settings.accessor;d.startIndices=r,d.numInstances=n,s[f]&&je.removed("props.".concat(f),"data.attributes.".concat(f))(),d.setExternalBuffer(o[f])||d.setBinaryValue(typeof g=="string"?o[g]:void 0,e.startIndices)||typeof g=="string"&&!o[g]&&d.setConstantValue(s[g])||d.needsUpdate()&&(l=!0,this._updateAttribute({attribute:d,numInstances:n,data:e,props:s,context:a})),this.needsRedraw=this.needsRedraw||d.needsRedraw()}l&&fr(mJ,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:r}=this,i={...r.getAttributes()};for(const s in n){const o=n[s];o.needsRedraw(e)&&!r.hasAttribute(s)&&(i[s]=o)}return i}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const r={};for(const i in e)n[i]||Object.assign(r,e[i].getShaderAttributes());return r}_add(e,n={}){for(const r in e){const i=e[r];this.attributes[r]=this._createAttribute(r,i,n)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,r){const i={...n,id:e,size:n.isIndexed&&1||n.size||1,divisor:r.instanced?1:n.divisor||0};return new xw(this.gl,i)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:r,updateTriggers:i}=this,s=i[e];return s&&s.forEach(o=>{const a=r[o];a&&a.setNeedsUpdate(a.id,n)}),s}_updateAttribute(e){const{attribute:n,numInstances:r}=e;if(fr(yJ,n),n.constant){n.setConstantValue(n.value);return}n.allocate(r)&&fr(vJ,n,r),n.updateBuffer(e)&&(this.needsRedraw=!0,fr(_J,n,r))}}class wJ extends Hh{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:r,duration:i,easing:s}}=this,o=s(e/i);this._value=Ta(n,r,o)}}const YC=1e-5;function qC(t,e,n,r,i){const s=e-t,a=(n-e)*i,l=-s*r;return a+l+s+e}function EJ(t,e,n,r,i){if(Array.isArray(n)){const s=[];for(let o=0;o<n.length;o++)s[o]=qC(t[o],e[o],n[o],r,i);return s}return qC(t,e,n,r,i)}function ZC(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}class TJ extends Hh{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:r,stiffness:i}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let a=EJ(s,o,n,r,i);const l=ZC(a,n),f=ZC(a,o);l<YC&&f<YC&&(a=n,this.end()),this._prevValue=o,this._currValue=a}}const SJ={interpolation:wJ,spring:TJ};class xJ{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,r,i){const{transitions:s}=this;if(s.has(e)){const l=s.get(e),{value:f=l.settings.fromValue}=l;n=f,this.remove(e)}if(i=FO(i),!i)return;const o=SJ[i.type];if(!o){je.error("unsupported transition type '".concat(i.type,"'"))();return}const a=new o(this.timeline);a.start({...i,fromValue:n,toValue:r}),s.set(e,a)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,r]of this.transitions)r.update(),e[n]=r.value,r.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function CJ(t){const e=Cw(t);for(const n in e){const r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}function PJ(t,e){const n=zO({newProps:t,oldProps:e,propTypes:Cw(t),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=IJ(t,e);let i=!1;return r||(i=BJ(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:LJ(t,e),transitionsChanged:MJ(t,e)}}function MJ(t,e){if(!t.transitions)return!1;const n={},r=Cw(t);let i=!1;for(const s in t.transitions){const o=r[s],a=o&&o.type;(a==="number"||a==="color"||a==="array")&&J1(t[s],e[s],o)&&(n[s]=!0,i=!0)}return i?n:!1}function zO({newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:i="props"}){if(e===t)return!1;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return"".concat(i," changed shallowly");for(const s of Object.keys(t))if(!(s in n)){if(!(s in e))return"".concat(i,".").concat(s," added");const o=J1(t[s],e[s],r[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}for(const s of Object.keys(e))if(!(s in n)){if(!(s in t))return"".concat(i,".").concat(s," dropped");if(!Object.hasOwnProperty.call(t,s)){const o=J1(t[s],e[s],r[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}}return!1}function J1(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)||!r&&(r=t&&e&&t.equals,r&&!r.call(t,e))?"changed deeply":!r&&e!==t?"changed shallowly":null}function IJ(t,e){if(e===null)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:i}=t;return r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&i&&(n=i(t.data,e.data)||n),n}function BJ(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&eP(t,e,"all"))return{all:!0};const n={};let r=!1;for(const i in t.updateTriggers)i!=="all"&&eP(t,e,i)&&(n[i]=!0,r=!0);return r?n:!1}function LJ(t,e){if(e===null)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r||r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function eP(t,e,n){let r=t.updateTriggers[n];r=r==null?{}:r;let i=e.updateTriggers[n];return i=i==null?{}:i,zO({oldProps:i,newProps:r,triggerName:n})}function Cw(t){const e=t[dg],n=e&&e.constructor;return n?n._propTypes:{}}const RJ="count(): argument not an object",OJ="count(): argument not a container";function DJ(t){if(!kJ(t))throw new Error(RJ);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(FJ(t))return Object.keys(t).length;throw new Error(OJ)}function FJ(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function kJ(t){return t!==null&&typeof t=="object"}function NJ(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(r=>r.name==="project64"))){const r=n.modules.findIndex(i=>i.name==="project32");r>=0&&n.modules.splice(r,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{const r={...t.inject};for(const i in e.inject)r[i]=(r[i]||"")+e.inject[i];n.inject=r}return n}const UJ={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071},K1={};function GJ(t,e){const n=t.context&&t.context.gl;if(!n||!e)return null;if(e instanceof br)return e;e.constructor&&e.constructor.name!=="Object"&&(e={data:e});let r=null;e.compressed&&(r={[10241]:e.data.length>1?9985:9729});const i=new br(n,{...e,parameters:{...UJ,...r,...t.props.textureParameters}});return K1[i.id]=!0,i}function zJ(t){!t||!(t instanceof br)||K1[t.id]&&(t.delete(),delete K1[t.id])}const VJ={boolean:{validate(t,e){return!0},equal(t,e,n){return Boolean(t)===Boolean(e)}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||th(t)&&(t.length===3||t.length===4)},equal(t,e,n){return Pv(t,e)}},accessor:{validate(t,e){const n=gg(t);return n==="function"||n===gg(e.value)},equal(t,e,n){return typeof e=="function"?!0:Pv(t,e)}},array:{validate(t,e){return e.optional&&!t||th(t)},equal(t,e,n){return n.compare?Pv(t,e):t===e}},object:{equal(t,e,n){return n.compare?Hl(t,e):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare||t===e}},data:{transform:(t,e,n)=>{const{dataTransform:r}=n.props;return r&&t?r(t):t}},image:{transform:(t,e,n)=>GJ(n,t),release:t=>{zJ(t)}}};function Pv(t,e){if(t===e)return!0;if(!th(t)||!th(e))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function jJ(t){const e={},n={},r={};for(const[i,s]of Object.entries(t)){const o=s==null?void 0:s.deprecatedFor;if(o)r[i]=Array.isArray(o)?o:[o];else{const a=HJ(i,s);e[i]=a,n[i]=a.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}function HJ(t,e){switch(gg(e)){case"object":return DA(t,e);case"array":return DA(t,{type:"array",value:e,compare:!1});case"boolean":return DA(t,{type:"boolean",value:e});case"number":return DA(t,{type:"number",value:e});case"function":return DA(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function DA(t,e){return"type"in e?{name:t,...VJ[e.type],...e}:"value"in e?{name:t,type:gg(e.value),...e}:{name:t,type:"object",value:e}}function th(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function gg(t){return th(t)?"array":t===null?"null":typeof t}function WJ(t,e){const n=VO(t.constructor),r=Object.create(n);r[dg]=t,r[Sl]={},r[oa]={};for(let i=0;i<e.length;++i){const s=e[i];for(const o in s)r[o]=s[o]}return Object.freeze(r),r}function VO(t){const e=mg(t,"_mergedDefaultProps");return e||(QJ(t),t._mergedDefaultProps)}function QJ(t){if(!t.prototype)return;const n=Object.getPrototypeOf(t),r=VO(n),i=mg(t,"defaultProps")||{},s=jJ(i),o=$J(s.defaultProps,r,t),a={...n._propTypes,...s.propTypes};JJ(o,a);const l={...n._deprecatedProps,...s.deprecatedProps};XJ(o,l),t._mergedDefaultProps=o,t._propTypes=a,t._deprecatedProps=l}function $J(t,e,n){const r=Object.create(null);Object.assign(r,e,t);const i=YJ(n);return delete t.id,Object.defineProperties(r,{id:{writable:!0,value:i}}),r}function XJ(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(r){const i="".concat(this.id,": ").concat(n);for(const s of e[n])jO(this,s)||(this[s]=r);je.deprecated(i,e[n].join("/"))()}})}function JJ(t,e){const n={},r={};for(const i in e){const s=e[i],{name:o,value:a}=s;s.async&&(n[o]=a,r[o]=KJ(o))}t[nu]=n,t[Sl]={},Object.defineProperties(t,r)}function KJ(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||OO(e)?this[Sl][t]=e:this[oa][t]=e},get(){if(this[oa]){if(t in this[oa])return this[oa][t]||this[nu][t];if(t in this[Sl]){const e=this[dg]&&this[dg].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[nu][t]}}return this[nu][t]}}}function jO(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function mg(t,e){return jO(t,e)&&t[e]}function YJ(t){const e=mg(t,"layerName")||mg(t,"componentName");return e||je.once(0,"".concat(t.name,".componentName not specified"))(),e||t.name}let qJ=0;class Pw{constructor(...e){T(this,"id",void 0),T(this,"props",void 0),T(this,"count",void 0),this.props=WJ(this,e),this.id=this.props.id,this.count=qJ++}clone(e){const{props:n}=this,r={};for(const i in n[nu])i in n[oa]?r[i]=n[oa][i]:i in n[Sl]&&(r[i]=n[Sl][i]);return new this.constructor({...n,...r,...e})}}T(Pw,"componentName","Component");T(Pw,"defaultProps",{});const ZJ=Object.freeze({});class eK{constructor(e){T(this,"component",void 0),T(this,"onAsyncPropUpdated",void 0),T(this,"asyncProps",void 0),T(this,"oldProps",void 0),T(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||ZJ}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return Boolean(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){const n=e[oa]||{},r=e[Sl]||e,i=e[nu]||{};for(const s in n){const o=n[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o),n[s]=this.getAsyncProp(s)}for(const s in r){const o=r[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(!!this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(OO(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const r=this.asyncProps[e];return n===r.resolvedValue||n===r.lastValue?!1:(r.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const r=this.asyncProps[e];r&&(n=this._postProcessValue(r,n),r.resolvedValue=n,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount)}_setAsyncPropValue(e,n,r){const i=this.asyncProps[e];i&&r>=i.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=n,i.resolvedLoadCount=r,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const r=this.asyncProps[e];if(r){r.pendingLoadCount++;const i=r.pendingLoadCount;n.then(s=>{s=this._postProcessValue(r,s),this._setAsyncPropValue(e,s,i),this._onResolve(e,s)}).catch(s=>{this._onError(e,s)})}}async _resolveAsyncIterable(e,n){if(e!=="data"){this._setPropValue(e,n);return}const r=this.asyncProps[e];if(!r)return;r.pendingLoadCount++;const i=r.pendingLoadCount;let s=[],o=0;for await(const a of n){const{dataTransform:l}=this.component.props;l?s=l(a,s):s=s.concat(a),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:o,endRow:s.length}]}),o=s.length,this._setAsyncPropValue(e,s,i)}this._onResolve(e,s)}_postProcessValue(e,n){const r=e.type;return r&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(n,r,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const i=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class tK extends eK{constructor({attributeManager:e,layer:n}){super(n),T(this,"attributeManager",void 0),T(this,"needsRedraw",void 0),T(this,"needsUpdate",void 0),T(this,"subLayers",void 0),T(this,"usesPickingColorCache",void 0),T(this,"changeFlags",void 0),T(this,"viewport",void 0),T(this,"uniformTransitions",void 0),T(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}_fetch(e,n){const r=this.component.props.fetch;return r?r(n,{propName:e,layer:this.layer}):super._fetch(e,n)}_onResolve(e,n){const r=this.component.props.onDataLoad;e==="data"&&r&&r(n,{propName:e,layer:this.layer})}_onError(e,n){this.layer.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const nK="layer.changeFlag",rK="layer.initialize",iK="layer.update",sK="layer.finalize",oK="layer.matched",tP=2**24-1,aK=Object.freeze([]),lK=Vh(({oldViewport:t,viewport:e})=>t.equals(e));let Ms=new Uint8ClampedArray(0);const cK={data:{type:"data",value:aK,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:r,loadOptions:i,signal:s})=>{const{resourceManager:o}=n.context;if(i=i||n.getLoadOptions(),r=r||n.props.loaders,s){var a;i={...i,fetch:{...(a=i)===null||a===void 0?void 0:a.fetch,signal:s}}}let l=o.contains(t);return!l&&!i&&(o.add({resourceId:t,data:To(t,r),persistent:!1}),l=!0),l?o.subscribe({resourceId:t,onChange:f=>{var d;return(d=n.internalState)===null||d===void 0?void 0:d.reloadAsyncProp(e,f)},consumerId:n.id,requestId:e}):To(t,r,i)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:zh.DRAW,onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:Ze.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Kr extends Pw{constructor(...e){super(...e),T(this,"internalState",null),T(this,"lifecycle",wc.NO_STATE),T(this,"context",void 0),T(this,"state",void 0),T(this,"parent",null)}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}project(e){zn(this.internalState);const n=this.internalState.viewport||this.context.viewport,r=_O(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,s,o]=gO(r,n.pixelProjectionMatrix);return e.length===2?[i,s]:[i,s,o]}unproject(e){return zn(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){zn(this.internalState);const r=this.internalState.viewport||this.context.viewport;return bO(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===Ze.DEFAULT||e===Ze.LNGLAT||e===Ze.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){zn(e instanceof Uint8Array);const[n,r,i]=e;return n+r*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:DJ(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;const n=this.getAttributeManager();if(!n)return null;const{positions:r,instancePositions:i}=n.attributes;return(e=r||i)===null||e===void 0?void 0:e.getBounds()}getShaders(e){for(const n of this.props.extensions)e=NJ(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:r}=e.changeFlags;if(r&&n)if(Array.isArray(r))for(const l of r)n.invalidateAll(l);else n.invalidateAll();const{props:i,oldProps:s}=e,o=Number.isInteger(s.highlightedObjectIndex)||s.pickable,a=Number.isInteger(i.highlightedObjectIndex)||i.pickable;if(o!==a&&n){const{pickingColors:l,instancePickingColors:f}=n.attributes,d=l||f;d&&(a&&d.constant&&(d.constant=!1,n.invalidate(d.id)),!d.value&&!a&&(d.constant=!0,d.value=[0,0,0]))}}finalizeState(e){for(const r of this.getModels())r.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e,mode:n,sourceLayer:r}){const{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(e,n){var r,i;if(n&&(e.message="".concat(n,": ").concat(e.message)),!((r=(i=this.props).onError)!==null&&r!==void 0&&r.call(i,e))){var s,o;(s=this.context)===null||s===void 0||(o=s.onError)===null||o===void 0||o.call(s,e,this)}}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)===null||e===void 0?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!lK({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();!n||(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,r=this.getNumInstances(),i=this.getStartIndices();e.update({data:n.data,numInstances:r,startIndices:i,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),r=Object.create(this.props);for(const i in n)Object.defineProperty(r,i,{value:n[i]});return r}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const r=Math.floor(Ms.length/3);if(this.internalState.usesPickingColorCache=!0,r<n){n>tP&&je.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Ms=Tu.allocate(Ms,n,{size:3,copy:!0,maxCount:Math.max(n,tP)});const i=Math.floor(Ms.length/3),s=[];for(let o=r;o<i;o++)this.encodePickingColor(o,s),Ms[o*3+0]=s[0],Ms[o*3+1]=s[1],Ms[o*3+2]=s[2]}e.value=Ms.subarray(0,n*3)}_setModelAttributes(e,n){const r=this.getAttributeManager(),i=e.userData.excludeAttributes||{},s=r.getShaderAttributes(n,i);e.setAttributes(s)}disablePickingIndex(e){this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r;if(!i)return;const s=i.getVertexOffset(e),o=i.getVertexOffset(e+1);i.buffer.subData({data:new Uint8Array(o-s),offset:s})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;!r||(this.internalState.usesPickingColorCache&&r.value.buffer!==Ms.buffer&&(r.value=Ms.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0}))}_initialize(){zn(!this.internalState),zn(Number.isFinite(this.props.coordinateSystem)),fr(rK,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new tK({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(je.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.layer=this,this.internalState.uniformTransitions=new xJ(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){fr(oK,this,this===e);const{state:n,internalState:r}=e;this!==e&&(this.internalState=r,this.internalState.layer=this,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(fr(iK,this,e),!e)return;const n=this.props,r=this.context,i=this.internalState,s=r.viewport,o=this._updateUniformTransition();i.propsInTransition=o,r.viewport=i.viewport||s,this.props=o;try{const a=this._getUpdateParams(),l=this.getModels();if(r.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const d of this.props.extensions)d.updateState.call(this,a,d);const f=this.getModels()[0]!==l[0];this._postUpdate(a,f)}finally{r.viewport=s,this.props=n,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){fr(sK,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:r={}}){this._updateAttributeTransition();const i=this.props,s=this.context;this.props=this.internalState.propsInTransition||i;const o=this.props.opacity;n.opacity=Math.pow(o,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,l=a&&a(n)||[0,0];So(s.gl,{polygonOffset:l}),Oi(s.gl,r,()=>{const f={moduleParameters:e,uniforms:n,parameters:r,context:s};for(const d of this.props.extensions)d.draw.call(this,f,d);this.draw(f)})}finally{this.props=i}}getChangeFlags(){var e;return(e=this.internalState)===null||e===void 0?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const i in e)if(e[i]){let s=!1;switch(i){case"dataChanged":const o=e[i],a=n[i];o&&Array.isArray(a)&&(n.dataChanged=Array.isArray(o)?a.concat(o):o,s=!0);default:n[i]||(n[i]=e[i],s=!0)}s&&fr(nK,this,i,e)}const r=Boolean(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=r,n.somethingChanged=r||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const r=PJ(e,n);if(r.updateTriggersChanged)for(const s in r.updateTriggersChanged)r.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(r.transitionsChanged)for(const s in r.transitionsChanged){var i;this.internalState.uniformTransitions.add(s,n[s],e[s],(i=e.transitions)===null||i===void 0?void 0:i[s])}return this.setChangeFlags(r)}validateProps(){CJ(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:r}=this.props;e.picked&&typeof r=="function"&&(n.pickingHighlightColor=r(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new bJ(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:r,oldProps:i}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:s}=this.state;s==null||s.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:a,highlightColor:l}=r;if(n||i.autoHighlight!==o||i.highlightedObjectIndex!==a||i.highlightColor!==l){const f={};o||(f.pickingSelectedColor=null),Array.isArray(l)&&(f.pickingHighlightColor=l),Number.isInteger(a)&&(f.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(f)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;const r=this.getAttributeManager(),i=r?r.getNeedsRedraw(e):!1;return n=n||i,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}T(Kr,"defaultProps",cK);T(Kr,"layerName","Layer");const uK="compositeLayer.renderLayers";class Fo extends Kr{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:r}=this.props;return r&&r[e]&&r[e].type||n}getSubLayerRow(e,n,r){return e.__source={parent:this,object:n,index:r},e}getSubLayerAccessor(e){if(typeof e=="function"){const n={index:-1,data:this.props.data,target:[]};return(r,i)=>r&&r.__source?(n.index=r.__source.index,e(r.__source.object,n)):e(r,i)}return e}getSubLayerProps(e={}){var n;const{opacity:r,pickable:i,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:f,highlightColor:d,coordinateSystem:g,coordinateOrigin:y,wrapLongitude:b,positionFormat:E,modelMatrix:S,extensions:M,fetch:C,operation:P,_subLayerProps:I}=this.props,L={id:"",updateTriggers:{},opacity:r,pickable:i,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:f,highlightColor:d,coordinateSystem:g,coordinateOrigin:y,wrapLongitude:b,positionFormat:E,modelMatrix:S,extensions:M,fetch:C,operation:P},F=I&&e.id&&I[e.id],z=F&&F.updateTriggers,X=e.id||"sublayer";if(F){const Y=this.constructor._propTypes,Q=e.type?e.type._propTypes:{};for(const N in F){const k=Q[N]||Y[N];k&&k.type==="accessor"&&(F[N]=this.getSubLayerAccessor(F[N]))}}Object.assign(L,e,F),L.id="".concat(this.props.id,"-").concat(X),L.updateTriggers={all:(n=this.props.updateTriggers)===null||n===void 0?void 0:n.all,...e.updateTriggers,...z};for(const Y of M){const Q=Y.getSubLayerProps.call(this,Y);Q&&Object.assign(L,Q,{updateTriggers:Object.assign(L.updateTriggers,Q.updateTriggers)})}return L}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let r=this.internalState.subLayers;const i=!r||this.needsUpdate();if(i){const s=this.renderLayers();r=Tm(s,Boolean),this.internalState.subLayers=r}fr(uK,this,i,r);for(const s of r)s.parent=this}}T(Fo,"layerName","CompositeLayer");const g0=Math.PI/180,nP=180/Math.PI,mp=6370972,Uc=256;function AK(){const t=Uc/mp,e=Math.PI/180*Uc;return{unitsPerMeter:[t,t,t],unitsPerMeter2:[0,0,0],metersPerUnit:[1/t,1/t,1/t],unitsPerDegree:[e,e,t],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/e,1/e,1/t]}}class HO extends Zs{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:i=0,nearZMultiplier:s=.1,farZMultiplier:o=2,resolution:a=10}=e;let{height:l,altitude:f=1.5}=e;l=l||1,f=Math.max(.75,f);const d=new $e().lookAt({eye:[0,-f,0],up:[0,0,1]}),g=Math.pow(2,i);d.rotateX(n*g0),d.rotateZ(-r*g0),d.scale(g/l);const y=Math.atan(.5/f),b=Uc*2*g/l;super({...e,height:l,viewMatrix:d,longitude:r,latitude:n,zoom:i,distanceScales:AK(),fovyRadians:y*2,focalDistance:f,near:s,far:Math.min(2,1/b+1)*f*o}),T(this,"longitude",void 0),T(this,"latitude",void 0),T(this,"resolution",void 0),this.latitude=n,this.longitude=r,this.resolution=a}get projectionMode(){return is.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,this.height/2],n),i=this.unproject([this.width/2,0],n),s=this.unproject([this.width,this.height/2],n),o=this.unproject([this.width/2,this.height],n);return s[0]<this.longitude&&(s[0]+=360),r[0]>this.longitude&&(r[0]-=360),[Math.min(r[0],s[0],i[0],o[0]),Math.min(r[1],s[1],i[1],o[1]),Math.max(r[0],s[0],i[0],o[0]),Math.max(r[1],s[1],i[1],o[1])]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[i,s,o]=e,a=n?s:this.height-s,{pixelUnprojectionMatrix:l}=this;let f;if(Number.isFinite(o))f=Mv(l,[i,a,o,1]);else{const b=Mv(l,[i,a,-1,1]),E=Mv(l,[i,a,1,1]),S=((r||0)/mp+1)*Uc,M=mv(KR([],b,E)),C=mv(b),P=mv(E),I=(4*C*P-(M-C-P)**2)/16,L=4*I/M,F=Math.sqrt(C-L),z=Math.sqrt(Math.max(0,S*S-L)),X=(F-z)/Math.sqrt(M);f=S7([],b,E,X)}const[d,g,y]=this.unprojectPosition(f);return Number.isFinite(o)?[d,g,y]:Number.isFinite(r)?[d,g,r]:[d,g]}projectPosition(e){const[n,r,i=0]=e,s=n*g0,o=r*g0,a=Math.cos(o),l=(i/mp+1)*Uc;return[Math.sin(s)*a*l,-Math.cos(s)*a*l,Math.sin(o)*l]}unprojectPosition(e){const[n,r,i]=e,s=YR(e),o=Math.asin(i/s),l=Math.atan2(n,-r)*nP,f=o*nP,d=(s/Uc-1)*mp;return[l,f,d]}projectFlat(e){return e}unprojectFlat(e){return e}panByPosition(e,n){const r=this.unproject(n);return{longitude:e[0]-r[0]+this.longitude,latitude:e[1]-r[1]+this.latitude}}}function Mv(t,e){const n=Hu([],e,t);return dw(n,n,1/n[3]),n}const Iv=Math.PI/180;function fK({height:t,focalDistance:e,orbitAxis:n,rotationX:r,rotationOrbit:i,zoom:s}){const o=n==="Z"?[0,0,1]:[0,1,0],a=n==="Z"?[0,-e,0]:[0,0,e],l=new $e().lookAt({eye:a,up:o});l.rotateX(r*Iv),n==="Z"?l.rotateZ(i*Iv):l.rotateY(i*Iv);const f=Math.pow(2,s)/t;return l.scale(f),l}class hK extends Zs{constructor(e){const{height:n,projectionMatrix:r,fovy:i=50,orbitAxis:s="Z",target:o=[0,0,0],rotationX:a=0,rotationOrbit:l=0,zoom:f=0}=e,d=r?r[5]/2:bw(i);super({...e,longitude:void 0,viewMatrix:fK({height:n||1,focalDistance:d,orbitAxis:s,rotationX:a,rotationOrbit:l,zoom:f}),fovy:i,focalDistance:d,position:o,zoom:f}),T(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:n=!0}={}){const[r,i,s=this.projectedCenter[2]]=e,o=n?i:this.height-i,[a,l,f]=jh([r,o,s],this.pixelUnprojectionMatrix);return[a,l,f]}panByPosition(e,n){const r=this.project(e),i=[this.width/2+r[0]-n[0],this.height/2+r[1]-n[1],this.projectedCenter[2]];return{target:this.unproject(i)}}}class dK extends Zs{constructor(e){const{longitude:n,latitude:r,modelMatrix:i,bearing:s=0,pitch:o=0,up:a=[0,0,1]}=e,f=new wm({bearing:s,pitch:o===-90?1e-4:90+o}).toVector3().normalize(),d=i?new $e(i).transformAsVector(f):f,g=Number.isFinite(r)?dO({latitude:r}):0,y=Math.pow(2,g),b=new $e().lookAt({eye:[0,0,0],center:d,up:a}).scale(y);super({...e,zoom:g,viewMatrix:b}),T(this,"longitude",void 0),T(this,"latitude",void 0),this.latitude=r,this.longitude=n}}const FA=20;class Mw extends Ew{constructor(e){const{width:n,height:r,position:i=[0,0,0],bearing:s=0,pitch:o=0,longitude:a=null,latitude:l=null,maxPitch:f=90,minPitch:d=-90,startRotatePos:g,startBearing:y,startPitch:b,startZoomPosition:E}=e;super({width:n,height:r,position:i,bearing:s,pitch:o,longitude:a,latitude:l,maxPitch:f,minPitch:d},{startRotatePos:g,startBearing:y,startPitch:b,startZoomPosition:E})}panStart(){return this}pan(){return this}panEnd(){return this}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startBearing:s,startPitch:o}=this.getState(),{width:a,height:l}=this.getViewportProps();if(!i||s===void 0||o===void 0)return this;let f;if(e){const d=(e[0]-i[0])/a,g=(e[1]-i[1])/l;f={bearing:s-d*180,pitch:o-g*90}}else f={bearing:s-n,pitch:o-r};return this._getUpdatedState(f)}rotateEnd(){return this._getUpdatedState({startRotatePos:null,startBearing:null,startPitch:null})}zoomStart(){return this._getUpdatedState({startZoomPosition:this.getViewportProps().position})}zoom({scale:e}){let{startZoomPosition:n}=this.getState();n||(n=this.getViewportProps().position);const r=this.getDirection();return this._move(r,Math.log2(e)*FA,n)}zoomEnd(){return this._getUpdatedState({startZoomPosition:null})}moveLeft(e=FA){const n=this.getDirection(!0);return this._move(n.rotateZ({radians:Math.PI/2}),e)}moveRight(e=FA){const n=this.getDirection(!0);return this._move(n.rotateZ({radians:-Math.PI/2}),e)}moveUp(e=FA){const n=this.getDirection(!0);return this._move(n,e)}moveDown(e=FA){const n=this.getDirection(!0);return this._move(n.negate(),e)}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}zoomIn(e=2){return this.zoom({scale:e})}zoomOut(e=2){return this.zoom({scale:1/e})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{bearing:i,longitude:s}=r;return Math.abs(i-n.bearing)>180&&(r.bearing=i<0?i+360:i-360),s!==null&&n.longitude!==null&&Math.abs(s-n.longitude)>180&&(r.longitude=s<0?s+360:s-360),r}_move(e,n,r=this.getViewportProps().position){const i=e.scale(n);return this._getUpdatedState({position:new q(r).add(i)})}getDirection(e=!1){return new wm({bearing:this.getViewportProps().bearing,pitch:e?90:90+this.getViewportProps().pitch}).toVector3().normalize()}_getUpdatedState(e){return new Mw({...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{pitch:n,maxPitch:r,minPitch:i,longitude:s,bearing:o}=e;return e.pitch=dn(n,i,r),s!==null&&(s<-180||s>180)&&(e.longitude=hg(s+180,360)-180),(o<-180||o>180)&&(e.bearing=hg(o+180,360)-180),e}}class pK extends Wh{constructor(...e){super(...e),T(this,"ControllerState",Mw),T(this,"transition",{transitionDuration:300,transitionInterpolator:new Wu(["position","pitch","bearing"])})}}class gK extends Js{get ViewportType(){return dK}get ControllerType(){return pK}}T(gK,"displayName","FirstPersonView");class mK extends Js{constructor(e={}){super(e),this.props.orbitAxis=e.orbitAxis||"Z"}get ViewportType(){return hK}get ControllerType(){return J$}}T(mK,"displayName","OrbitView");class yK extends EO{applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i}=e;e.zoom=dn(i,r,n);const{longitude:s,latitude:o}=e;return(s<-180||s>180)&&(e.longitude=hg(s+180,360)-180),e.latitude=dn(o,-89,89),e}}class vK extends Wh{constructor(...e){super(...e),T(this,"ControllerState",yK),T(this,"transition",{transitionDuration:300,transitionInterpolator:new Wu(["longitude","latitude","zoom"])}),T(this,"dragMode","pan")}setProps(e){super.setProps(e),this.dragRotate=!1,this.touchRotate=!1}}class _K extends Js{get ViewportType(){return HO}get ControllerType(){return vK}}T(_K,"displayName","GlobeView");class WO{constructor(e){T(this,"opts",void 0),e&&(this.opts=e)}equals(e){return this===e?!0:this.constructor===e.constructor&&Hl(this.opts,e.opts)}getShaders(e){return null}getSubLayerProps(e){const{defaultProps:n}=e.constructor,r={updateTriggers:{}};for(const i in n)if(i in this.props){const s=n[i],o=this.props[i];r[i]=o,s&&s.type==="accessor"&&(r.updateTriggers[i]=this.props.updateTriggers[i],typeof o=="function"&&(r[i]=this.getSubLayerAccessor(o)))}return r}initializeState(e,n){}updateState(e,n){}draw(e,n){}finalizeState(e,n){}}T(WO,"defaultProps",{});class QO{constructor(e){T(this,"opts",void 0),T(this,"typedArrayManager",void 0),T(this,"indexStarts",[0]),T(this,"vertexStarts",[0]),T(this,"vertexCount",0),T(this,"instanceCount",0),T(this,"attributes",void 0),T(this,"_attributeDefs",void 0),T(this,"data",void 0),T(this,"getGeometry",void 0),T(this,"geometryBuffer",void 0),T(this,"buffers",void 0),T(this,"positionSize",void 0),T(this,"normalize",void 0);const{attributes:n={}}=e;this.typedArrayManager=Tu,this.attributes={},this._attributeDefs=n,this.opts=e,this.updateGeometry(e)}updateGeometry(e){Object.assign(this.opts,e);const{data:n,buffers:r={},getGeometry:i,geometryBuffer:s,positionFormat:o,dataChanged:a,normalize:l=!0}=this.opts;if(this.data=n,this.getGeometry=i,this.positionSize=s&&s.size||(o==="XY"?2:3),this.buffers=r,this.normalize=l,s&&(zn(n.startIndices),this.getGeometry=this.getGeometryFromBuffer(s),l||(r.positions=s)),this.geometryBuffer=r.positions,Array.isArray(a))for(const f of a)this._rebuildGeometry(f);else this._rebuildGeometry()}updatePartialGeometry({startRow:e,endRow:n}){this._rebuildGeometry({startRow:e,endRow:n})}getGeometryFromBuffer(e){const n=e.value||e;return ArrayBuffer.isView(n)?DO(n,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}_allocate(e,n){const{attributes:r,buffers:i,_attributeDefs:s,typedArrayManager:o}=this;for(const a in s)if(a in i)o.release(r[a]),r[a]=null;else{const l=s[a];l.copy=n,r[a]=o.allocate(r[a],e,l)}}_forEachGeometry(e,n,r){const{data:i,getGeometry:s}=this,{iterable:o,objectInfo:a}=Oa(i,n,r);for(const l of o){a.index++;const f=s?s(l,a):null;e(f,a.index)}}_rebuildGeometry(e){if(!this.data)return;let{indexStarts:n,vertexStarts:r,instanceCount:i}=this;const{data:s,geometryBuffer:o}=this,{startRow:a=0,endRow:l=1/0}=e||{},f={};if(e||(n=[0],r=[0]),this.normalize||!o)this._forEachGeometry((g,y)=>{const b=g&&this.normalizeGeometry(g);f[y]=b,r[y+1]=r[y]+(b?this.getGeometrySize(b):0)},a,l),i=r[r.length-1];else if(r=s.startIndices,i=r[s.length]||0,ArrayBuffer.isView(o))i=i||o.length/this.positionSize;else if(o instanceof Rt){const g=o.accessor.stride||this.positionSize*4;i=i||o.byteLength/g}else if(o.buffer){const g=o.stride||this.positionSize*4;i=i||o.buffer.byteLength/g}else if(o.value){const g=o.value,y=o.stride/g.BYTES_PER_ELEMENT||this.positionSize;i=i||g.length/y}this._allocate(i,Boolean(e)),this.indexStarts=n,this.vertexStarts=r,this.instanceCount=i;const d={};this._forEachGeometry((g,y)=>{const b=f[y]||g;d.vertexStart=r[y],d.indexStart=n[y];const E=y<r.length-1?r[y+1]:i;d.geometrySize=E-r[y],d.geometryIndex=y,this.updateGeometryAttributes(b,d)},a,l),this.vertexCount=n[n.length-1]}}const bK=typeof window<"u"?ie.exports.useLayoutEffect:ie.exports.useEffect;function yg(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const wK={position:"absolute",zIndex:-1};function $O(t,e){if(typeof t=="function")return t(e);if(Array.isArray(t))return t.map(n=>$O(n,e));if(Cm(t)){if(EK(t))return e.style=wK,ie.exports.cloneElement(t,e);if(TK(t))return ie.exports.cloneElement(t,e)}return t}function Cm(t){return t&&typeof t=="object"&&"type"in t||!1}function EK(t){const e=t.type,n=e&&e.defaultProps;return n&&n.mapStyle}function TK(t){const e=t.type;return e&&e.deckGLViewProps}function Y1(t){if(typeof t=="function")return ie.exports.createElement(Js,{},t);if(Array.isArray(t))return t.map(Y1);if(Cm(t)){if(t.type===ie.exports.Fragment)return Y1(t.props.children);if(yg(t.type,Js))return t}return t}function SK({children:t,layers:e=[],views:n=null}){const r=[],i=[],s={};return ie.exports.Children.forEach(Y1(t),o=>{if(Cm(o)){const a=o.type;if(yg(a,Kr)){const l=xK(a,o.props);i.push(l)}else r.push(o);if(yg(a,Js)&&a!==Js&&o.props.id){const l=new a(o.props);s[l.id]=l}}else o&&r.push(o)}),Object.keys(s).length>0&&(Array.isArray(n)?n.forEach(o=>{s[o.id]=o}):n&&(s[n.id]=n),n=Object.values(s)),e=i.length>0?[...i,...e]:e,{layers:e,children:r,views:n}}function xK(t,e){const n={},r=t.defaultProps||{};for(const i in e)r[i]!==e[i]&&(n[i]=e[i]);return new t(n)}function CK({children:t,deck:e,ContextProvider:n}){const{viewManager:r}=e||{};if(!r||!r.views.length)return[];const i={},s=r.views[0].id;for(const o of t){let a=s,l=o;Cm(o)&&yg(o.type,Js)&&(a=o.props.id||s,l=o.props.children);const f=r.getViewport(a),d=r.getViewState(a);if(f){const{x:g,y,width:b,height:E}=f;l=$O(l,{x:g,y,width:b,height:E,viewport:f,viewState:d}),i[a]||(i[a]={viewport:f,children:[]}),i[a].children.push(l)}}return Object.keys(i).map(o=>{const{viewport:a,children:l}=i[o],{x:f,y:d,width:g,height:y}=a,b={position:"absolute",left:f,top:d,width:g,height:y},E="view-".concat(o),S=ie.exports.createElement("div",{key:E,id:E,style:b},...l);if(n){const M={viewport:a,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:C=>{C.viewId=o,e._onViewStateChange(C)}};return ie.exports.createElement(n,{key:E,value:M},S)}return S})}const PK={mixBlendMode:null};function MK({width:t,height:e,style:n}){const r={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},i={left:0,top:0};if(n)for(const s in n)s in PK?i[s]=n[s]:r[s]=n[s];return{containerStyle:r,canvasStyle:i}}function IK(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function XO(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function BK(t,e,n){const r=new e({...n,_customRender:i=>{t.redrawReason=i;const s=r.getViewports();t.lastRenderedViewports!==s?t.forceUpdate():XO(t)}});return r}const JO=ie.exports.forwardRef((t,e)=>{const[n,r]=ie.exports.useState(0),s=ie.exports.useRef({control:null,version:n,forceUpdate:()=>r(F=>F+1)}).current,o=ie.exports.useRef(null),a=ie.exports.useRef(null),l=ie.exports.useMemo(()=>SK(t),[t.layers,t.views,t.children]);let f=!0;const d=F=>{var z;return f&&t.viewState?(s.viewStateUpdateRequested=F,null):(s.viewStateUpdateRequested=null,(z=t.onViewStateChange)===null||z===void 0?void 0:z.call(t,F))},g=F=>{if(f)s.interactionStateUpdateRequested=F;else{var z;s.interactionStateUpdateRequested=null,(z=t.onInteractionStateChange)===null||z===void 0||z.call(t,F)}},y=ie.exports.useMemo(()=>{const F={...t,style:null,width:"100%",height:"100%",parent:o.current,canvas:a.current,layers:l.layers,views:l.views,onViewStateChange:d,onInteractionStateChange:g};return delete F._customRender,s.deck&&s.deck.setProps(F),F},[t]);ie.exports.useEffect(()=>{const F=t.Deck||xm;return s.deck=BK(s,F,{...y,parent:o.current,canvas:a.current}),()=>{var z;return(z=s.deck)===null||z===void 0?void 0:z.finalize()}},[]),bK(()=>{XO(s);const{viewStateUpdateRequested:F,interactionStateUpdateRequested:z}=s;F&&d(F),z&&g(z)}),ie.exports.useImperativeHandle(e,()=>IK(s),[]);const b=s.deck&&s.deck.isInitialized?s.deck.getViewports():void 0,{ContextProvider:E,width:S,height:M,id:C,style:P}=t,{containerStyle:I,canvasStyle:L}=ie.exports.useMemo(()=>MK({width:S,height:M,style:P}),[S,M,P]);if(!s.viewStateUpdateRequested&&s.lastRenderedViewports===b||s.version!==n){s.lastRenderedViewports=b,s.version=n;const F=CK({children:l.children,deck:s.deck,ContextProvider:E}),z=ie.exports.createElement("canvas",{key:"canvas",id:C||"deckgl-overlay",ref:a,style:L});s.control=ie.exports.createElement("div",{id:"".concat(C||"deckgl","-wrapper"),ref:o,style:I},[z,F])}return f=!1,s.control});JO.defaultProps=xm.defaultProps;const LK=`#define SHADER_NAME arc-layer-vertex-shader

attribute vec3 positions;
attribute vec4 instanceSourceColors;
attribute vec4 instanceTargetColors;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceTargetPositions64Low;
attribute vec3 instancePickingColors;
attribute float instanceWidths;
attribute float instanceHeights;
attribute float instanceTilts;

uniform bool greatCircle;
uniform bool useShortestPath;
uniform float numSegments;
uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform int widthUnits;

varying vec4 vColor;
varying vec2 uv;
varying float isValid;

float paraboloid(float distance, float sourceZ, float targetZ, float ratio) {
  // d: distance on the xy plane
  // r: ratio of the current point
  // p: ratio of the peak of the arc
  // h: height multiplier
  // z = f(r) = sqrt(r * (p * 2 - r)) * d * h
  // f(0) = 0
  // f(1) = dz

  float deltaZ = targetZ - sourceZ;
  float dh = distance * instanceHeights;
  if (dh == 0.0) {
    return sourceZ + deltaZ * ratio;
  }
  float unitZ = deltaZ / dh;
  float p2 = unitZ * unitZ + 1.0;

  // sqrt does not deal with negative values, manually flip source and target if delta.z < 0
  float dir = step(deltaZ, 0.0);
  float z0 = mix(sourceZ, targetZ, dir);
  float r = mix(ratio, 1.0 - ratio, dir);
  return sqrt(r * (p2 - r)) * dh + z0;
}

// offset vector by strokeWidth pixels
// offset_direction is -1 (left) or 1 (right)
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));
}

vec3 interpolateFlat(vec3 source, vec3 target, float segmentRatio) {
  float distance = length(source.xy - target.xy);
  float z = paraboloid(distance, source.z, target.z, segmentRatio);

  float tiltAngle = radians(instanceTilts);
  vec2 tiltDirection = normalize(target.xy - source.xy);
  vec2 tilt = vec2(-tiltDirection.y, tiltDirection.x) * z * sin(tiltAngle);

  return vec3(
    mix(source.xy, target.xy, segmentRatio) + tilt,
    z * cos(tiltAngle)
  );
}

/* Great circle interpolation
 * http://www.movable-type.co.uk/scripts/latlong.html
 */
float getAngularDist (vec2 source, vec2 target) {
  vec2 sourceRadians = radians(source);
  vec2 targetRadians = radians(target);
  vec2 sin_half_delta = sin((sourceRadians - targetRadians) / 2.0);
  vec2 shd_sq = sin_half_delta * sin_half_delta;

  float a = shd_sq.y + cos(sourceRadians.y) * cos(targetRadians.y) * shd_sq.x;
  return 2.0 * asin(sqrt(a));
}

vec3 interpolateGreatCircle(vec3 source, vec3 target, vec3 source3D, vec3 target3D, float angularDist, float t) {
  vec2 lngLat;

  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  if(abs(angularDist - PI) < 0.001) {
    lngLat = (1.0 - t) * source.xy + t * target.xy;
  } else {
    float a = sin((1.0 - t) * angularDist);
    float b = sin(t * angularDist);
    vec3 p = source3D.yxz * a + target3D.yxz * b;
    lngLat = degrees(vec2(atan(p.y, -p.x), atan(p.z, length(p.xy))));
  }

  float z = paraboloid(angularDist * EARTH_RADIUS, source.z, target.z, t);

  return vec3(lngLat, z);
}

/* END GREAT CIRCLE */

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  float segmentIndex = positions.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float prevSegmentRatio = getSegmentRatio(max(0.0, segmentIndex - 1.0));
  float nextSegmentRatio = getSegmentRatio(min(numSegments - 1.0, segmentIndex + 1.0));

  // if it's the first point, use next - current as direction
  // otherwise use current - prev
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  isValid = 1.0;

  uv = vec2(segmentRatio, positions.y);
  geometry.uv = uv;
  geometry.pickingColor = instancePickingColors;

  vec4 curr;
  vec4 next;
  vec3 source;
  vec3 target;

  if ((greatCircle || project_uProjectionMode == PROJECTION_MODE_GLOBE) && project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
    source = project_globe_(vec3(instanceSourcePositions.xy, 0.0));
    target = project_globe_(vec3(instanceTargetPositions.xy, 0.0));
    float angularDist = getAngularDist(instanceSourcePositions.xy, instanceTargetPositions.xy);

    vec3 prevPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, prevSegmentRatio);
    vec3 currPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, segmentRatio);
    vec3 nextPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, nextSegmentRatio);

    if (abs(currPos.x - prevPos.x) > 180.0) {
      indexDir = -1.0;
      isValid = 0.0;
    } else if (abs(currPos.x - nextPos.x) > 180.0) {
      indexDir = 1.0;
      isValid = 0.0;
    }
    nextPos = indexDir < 0.0 ? prevPos : nextPos;
    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;

    if (isValid == 0.0) {
      // split at the 180th meridian
      nextPos.x += nextPos.x > 0.0 ? -360.0 : 360.0;
      float t = ((currPos.x > 0.0 ? 180.0 : -180.0) - currPos.x) / (nextPos.x - currPos.x);
      currPos = mix(currPos, nextPos, t);
      segmentRatio = mix(segmentRatio, nextSegmentRatio, t);
    }

    vec3 currPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, segmentRatio);
    vec3 nextPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, nextSegmentRatio);
  
    curr = project_position_to_clipspace(currPos, currPos64Low, vec3(0.0), geometry.position);
    next = project_position_to_clipspace(nextPos, nextPos64Low, vec3(0.0));
  
  } else {
    vec3 source_world = instanceSourcePositions;
    vec3 target_world = instanceTargetPositions;
    if (useShortestPath) {
      source_world.x = mod(source_world.x + 180., 360.0) - 180.;
      target_world.x = mod(target_world.x + 180., 360.0) - 180.;

      float deltaLng = target_world.x - source_world.x;
      if (deltaLng > 180.) target_world.x -= 360.;
      if (deltaLng < -180.) source_world.x -= 360.;
    }
    source = project_position(source_world, instanceSourcePositions64Low);
    target = project_position(target_world, instanceTargetPositions64Low);

    // common x at longitude=-180
    float antiMeridianX = 0.0;

    if (useShortestPath) {
      if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
        antiMeridianX = -(project_uCoordinateOrigin.x + 180.) / 360. * TILE_SIZE;
      }
      float thresholdRatio = (antiMeridianX - source.x) / (target.x - source.x);

      if (prevSegmentRatio <= thresholdRatio && nextSegmentRatio > thresholdRatio) {
        isValid = 0.0;
        indexDir = sign(segmentRatio - thresholdRatio);
        segmentRatio = thresholdRatio;
      }
    }

    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;
    vec3 currPos = interpolateFlat(source, target, segmentRatio);
    vec3 nextPos = interpolateFlat(source, target, nextSegmentRatio);

    if (useShortestPath) {
      if (nextPos.x < antiMeridianX) {
        currPos.x += TILE_SIZE;
        nextPos.x += TILE_SIZE;
      }
    }

    curr = project_common_position_to_clipspace(vec4(currPos, 1.0));
    next = project_common_position_to_clipspace(vec4(nextPos, 1.0));
    geometry.position = vec4(currPos, 1.0);
  }

  // Multiply out width and clamp to limits
  // mercator pixels are interpreted as screen pixels
  float widthPixels = clamp(
    project_size_to_pixel(instanceWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels
  );

  // extrude
  vec3 offset = vec3(
    getExtrusionOffset((next.xy - curr.xy) * indexDir, positions.y, widthPixels),
    0.0);
  DECKGL_FILTER_SIZE(offset, geometry);
  gl_Position = curr + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio);
  vColor = vec4(color.rgb, color.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,RK=`#define SHADER_NAME arc-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;
varying float isValid;

void main(void) {
  if (isValid == 0.0) {
    discard;
  }

  gl_FragColor = vColor;
  geometry.uv = uv;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,vg=[0,0,0,255],OK={getSourcePosition:{type:"accessor",value:t=>t.sourcePosition},getTargetPosition:{type:"accessor",value:t=>t.targetPosition},getSourceColor:{type:"accessor",value:vg},getTargetColor:{type:"accessor",value:vg},getWidth:{type:"accessor",value:1},getHeight:{type:"accessor",value:1},getTilt:{type:"accessor",value:0},greatCircle:!1,widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class Iw extends Kr{constructor(...e){super(...e),T(this,"state",void 0)}getShaders(){return super.getShaders({vs:LK,fs:RK,modules:[Ys,qs]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceSourceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getSourceColor",defaultValue:vg},instanceTargetColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getTargetColor",defaultValue:vg},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1},instanceHeights:{size:1,transition:!0,accessor:"getHeight",defaultValue:1},instanceTilts:{size:1,transition:!0,accessor:"getTilt",defaultValue:0}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var n;const{gl:r}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{widthUnits:n,widthScale:r,widthMinPixels:i,widthMaxPixels:s,greatCircle:o,wrapLongitude:a}=this.props;this.state.model.setUniforms(e).setUniforms({greatCircle:o,widthUnits:gs[n],widthScale:r,widthMinPixels:i,widthMaxPixels:s,useShortestPath:a}).draw()}_getModel(e){let n=[];for(let s=0;s<50;s++)n=n.concat([s,1,0,s,-1,0]);const i=new Xr(e,{...this.getShaders(),id:this.props.id,geometry:new Di({drawMode:5,attributes:{positions:new Float32Array(n)}}),isInstanced:!0});return i.setUniforms({numSegments:50}),i}}T(Iw,"layerName","ArcLayer");T(Iw,"defaultProps",OK);const DK=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  // convert size in meters to pixels, then scaled and clamp
 
  // project meters to pixels and clamp to limits 
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );

  // scale icon height to match instanceSize
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;

  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,FK=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);

  // if colorMode == 0, use pixel color from the texture
  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  // Take the global opacity and the alpha from vColor into account for the alpha component
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,kK=1024,NK=4,rP=()=>{},UK={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071};function GK(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function zK(t,e,n,r){return n===e.width&&r===e.height?e:(t.canvas.height=r,t.canvas.width=n,t.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(e,0,0,e.width,e.height,0,0,n,r),t.canvas)}function nh(t){return t&&(t.id||t.url)}function VK(t,e,n){const r=t.width,i=t.height,s=SR(t,{width:e,height:n});return H9(t,s,{targetY:0,width:r,height:i}),t.delete(),s}function iP(t,e,n){for(let r=0;r<e.length;r++){const{icon:i,xOffset:s}=e[r],o=nh(i);t[o]={...i,x:s,y:n}}}function jK({icons:t,buffer:e,mapping:n={},xOffset:r=0,yOffset:i=0,rowHeight:s=0,canvasWidth:o}){let a=[];for(let l=0;l<t.length;l++){const f=t[l],d=nh(f);if(!n[d]){const{height:g,width:y}=f;r+y+e>o&&(iP(n,a,i),r=0,i=s+i+e,s=0,a=[]),a.push({icon:f,xOffset:r}),r=r+y+e,s=Math.max(s,g)}}return a.length>0&&iP(n,a,i),{mapping:n,rowHeight:s,xOffset:r,yOffset:i,canvasWidth:o,canvasHeight:GK(s+i+e)}}function HK(t,e,n){if(!t||!e)return null;n=n||{};const r={},{iterable:i,objectInfo:s}=Oa(t);for(const o of i){s.index++;const a=e(o,s),l=nh(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!r[l]&&(!n[l]||a.url!==n[l].url)&&(r[l]={...a,source:o,sourceIndex:s.index})}return r}class WK{constructor(e,{onUpdate:n=rP,onError:r=rP}){T(this,"gl",void 0),T(this,"onUpdate",void 0),T(this,"onError",void 0),T(this,"_loadOptions",null),T(this,"_texture",null),T(this,"_externalTexture",null),T(this,"_mapping",{}),T(this,"_textureParameters",null),T(this,"_pendingCount",0),T(this,"_autoPacking",!1),T(this,"_xOffset",0),T(this,"_yOffset",0),T(this,"_rowHeight",0),T(this,"_buffer",NK),T(this,"_canvasWidth",kK),T(this,"_canvasHeight",0),T(this,"_canvas",null),this.gl=e,this.onUpdate=n,this.onError=r}finalize(){var e;(e=this._texture)===null||e===void 0||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const n=this._autoPacking?nh(e):e;return this._mapping[n]||{}}setProps({loadOptions:e,autoPacking:n,iconAtlas:r,iconMapping:i,textureParameters:s}){if(e&&(this._loadOptions=e),n!==void 0&&(this._autoPacking=n),i&&(this._mapping=i),r){var o;(o=this._texture)===null||o===void 0||o.delete(),this._texture=null,this._externalTexture=r}s&&(this._textureParameters=s)}get isLoaded(){return this._pendingCount===0}packIcons(e,n){if(!this._autoPacking||typeof document>"u")return;const r=Object.values(HK(e,n,this._mapping)||{});if(r.length>0){const{mapping:i,xOffset:s,yOffset:o,rowHeight:a,canvasHeight:l}=jK({icons:r,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=i,this._xOffset=s,this._yOffset=o,this._canvasHeight=l,this._texture||(this._texture=new br(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||UK})),this._texture.height!==this._canvasHeight&&(this._texture=VK(this._texture,this._canvasWidth,this._canvasHeight)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(r)}}_loadIcons(e){const n=this._canvas.getContext("2d");for(const r of e)this._pendingCount++,To(r.url,Jb,this._loadOptions).then(i=>{const s=nh(r),{x:o,y:a,width:l,height:f}=this._mapping[s],d=zK(n,i,l,f);this._texture.setSubImageData({data:d,x:o,y:a,width:l,height:f}),this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:r.url,source:r.source,sourceIndex:r.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}}const KO=[0,0,0,255],QK={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:KO},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class Pm extends Kr{constructor(...e){super(...e),T(this,"state",void 0)}getShaders(){return super.getShaders({vs:DK,fs:FK,modules:[Ys,qs]})}initializeState(){this.state={iconManager:new WK(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:KO},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:n,oldProps:r,changeFlags:i}=e,s=this.getAttributeManager(),{iconAtlas:o,iconMapping:a,data:l,getIcon:f,textureParameters:d}=n,{iconManager:g}=this.state,y=o||this.internalState.isAsyncPropLoading("iconAtlas");if(g.setProps({loadOptions:n.loadOptions,autoPacking:!y,iconAtlas:o,iconMapping:y?a:null,textureParameters:d}),y?r.iconMapping!==n.iconMapping&&s.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&g.packIcons(l,f),i.extensionsChanged){var b;const{gl:E}=this.context;(b=this.state.model)===null||b===void 0||b.delete(),this.state.model=this._getModel(E),s.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,sizeUnits:s,billboard:o,alphaCutoff:a}=this.props,{iconManager:l}=this.state,f=l.getTexture();f&&this.state.model.setUniforms(e).setUniforms({iconsTexture:f,iconsTextureDim:[f.width,f.height],sizeUnits:gs[s],sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,billboard:o,alphaCutoff:a}).draw()}_getModel(e){const n=[-1,-1,-1,1,1,1,1,-1];return new Xr(e,{...this.getShaders(),id:this.props.id,geometry:new Di({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var n;const r=(n=this.getCurrentLayer())===null||n===void 0?void 0:n.props.onIconError;r?r(e):je.error(e.error.message)()}getInstanceOffset(e){const{width:n,height:r,anchorX:i=n/2,anchorY:s=r/2}=this.state.iconManager.getIconMapping(e);return[n/2-i,r/2-s]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:n,y:r,width:i,height:s}=this.state.iconManager.getIconMapping(e);return[n,r,i,s]}}T(Pm,"defaultProps",QK);T(Pm,"layerName","IconLayer");const $K=`#define SHADER_NAME point-cloud-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceNormals;
attribute vec4 instanceColors;
attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusPixels;
uniform int sizeUnits;

varying vec4 vColor;
varying vec2 unitPosition;

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.normal = project_normal(instanceNormals);

  // position on the containing square in [-1, 1] space
  unitPosition = positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  // Find the center of the point and add the current vertex
  vec3 offset = vec3(positions.xy * project_size_to_pixel(radiusPixels, sizeUnits), 0.0);
  DECKGL_FILTER_SIZE(offset, geometry);

  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.), geometry.position);
  gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply lighting
  vec3 lightColor = lighting_getLightColor(instanceColors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);

  // Apply opacity to instance color, or return instance picking color
  vColor = vec4(lightColor, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,XK=`#define SHADER_NAME point-cloud-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 unitPosition;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition);

  if (distToCenter > 1.0) {
    discard;
  }

  gl_FragColor = vColor;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,YO=[0,0,0,255],qO=[0,0,1],JK={sizeUnits:"pixels",pointSize:{type:"number",min:0,value:10},getPosition:{type:"accessor",value:t=>t.position},getNormal:{type:"accessor",value:qO},getColor:{type:"accessor",value:YO},material:!0,radiusPixels:{deprecatedFor:"pointSize"}};function KK(t){const{header:e,attributes:n}=t;!e||!n||(t.length=e.vertexCount,n.POSITION&&(n.instancePositions=n.POSITION),n.NORMAL&&(n.instanceNormals=n.NORMAL),n.COLOR_0&&(n.instanceColors=n.COLOR_0))}class Bw extends Kr{getShaders(){return super.getShaders({vs:$K,fs:XK,modules:[Ys,gw,qs]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceNormals:{size:3,transition:!0,accessor:"getNormal",defaultValue:qO},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:YO}})}updateState(e){const{changeFlags:n,props:r}=e;if(super.updateState(e),n.extensionsChanged){var i;const{gl:s}=this.context;(i=this.state.model)===null||i===void 0||i.delete(),this.state.model=this._getModel(s),this.getAttributeManager().invalidateAll()}n.dataChanged&&KK(r.data)}draw({uniforms:e}){const{pointSize:n,sizeUnits:r}=this.props;this.state.model.setUniforms(e).setUniforms({sizeUnits:gs[r],radiusPixels:n}).draw()}_getModel(e){const n=[];for(let r=0;r<3;r++){const i=r/3*Math.PI*2;n.push(Math.cos(i)*2,Math.sin(i)*2,0)}return new Xr(e,{...this.getShaders(),id:this.props.id,geometry:new Di({drawMode:4,attributes:{positions:new Float32Array(n)}}),isInstanced:!0})}}T(Bw,"layerName","PointCloudLayer");T(Bw,"defaultProps",JK);const YK=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;

  // Multiply out radius and clamp to limits
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  
  // Multiply out line width and clamp to limits
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );

  // outer radius needs to offset by half stroke width
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;

  // Expand geometry to accomodate edge smoothing
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;

  // position on the containing square in [-1, 1] space
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
  }

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,qK=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (filled) {
    gl_FragColor = vFillColor;
  } else {
    discard;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,sP=[0,0,0,255],ZK={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:sP},getLineColor:{type:"accessor",value:sP},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class Lw extends Kr{getShaders(){return super.getShaders({vs:YK,fs:qK,modules:[Ys,qs]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var n;const{gl:r}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{radiusUnits:n,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:s,stroked:o,filled:a,billboard:l,antialiasing:f,lineWidthUnits:d,lineWidthScale:g,lineWidthMinPixels:y,lineWidthMaxPixels:b}=this.props;this.state.model.setUniforms(e).setUniforms({stroked:o?1:0,filled:a,billboard:l,antialiasing:f,radiusUnits:gs[n],radiusScale:r,radiusMinPixels:i,radiusMaxPixels:s,lineWidthUnits:gs[d],lineWidthScale:g,lineWidthMinPixels:y,lineWidthMaxPixels:b}).draw()}_getModel(e){const n=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new Xr(e,{...this.getShaders(),id:this.props.id,geometry:new Di({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(n)}}}),isInstanced:!0})}}T(Lw,"defaultProps",ZK);T(Lw,"layerName","ScatterplotLayer");const Rw={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function Ow(t,e,n={}){return eY(t,n)!==e?(tY(t,n),!0):!1}function eY(t,e={}){return Math.sign(_g(t,e))}function _g(t,e={}){const{start:n=0,end:r=t.length}=e,i=e.size||2;let s=0;for(let o=n,a=r-i;o<r;o+=i)s+=(t[o]-t[a])*(t[o+1]+t[a+1]),a=o;return s/2}function tY(t,e){const{start:n=0,end:r=t.length,size:i=2}=e,s=(r-n)/i,o=Math.floor(s/2);for(let a=0;a<o;++a){const l=n+a*i,f=n+(s-1-a)*i;for(let d=0;d<i;++d){const g=t[l+d];t[l+d]=t[f+d],t[f+d]=g}}}function nY(t,e,n=2,r){const i=e&&e.length,s=i?e[0]*n:t.length;let o=ZO(t,0,s,n,!0,r&&r[0]);const a=[];if(!o||o.next===o.prev)return a;let l,f,d,g,y,b,E;if(i&&(o=aY(t,e,o,n,r)),t.length>80*n){g=f=t[0],y=d=t[1];for(let S=n;S<s;S+=n)b=t[S],E=t[S+1],b<g&&(g=b),E<y&&(y=E),b>f&&(f=b),E>d&&(d=E);l=Math.max(f-g,d-y),l=l!==0?1/l:0}return rh(o,a,n,g,y,l),a}function ZO(t,e,n,r,i,s){let o,a;if(s===void 0&&(s=_g(t,{start:e,end:n,size:r})),i===s<0)for(o=e;o<n;o+=r)a=oP(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=oP(o,t[o],t[o+1],a);return a&&Mm(a,a.next)&&(sh(a),a=a.next),a}function xa(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(Mm(n,n.next)||an(n.prev,n,n.next)===0)){if(sh(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function rh(t,e,n,r,i,s,o){if(!t)return;!o&&s&&fY(t,r,i,s);let a=t,l,f;for(;t.prev!==t.next;){if(l=t.prev,f=t.next,s?iY(t,r,i,s):rY(t)){e.push(l.i/n),e.push(t.i/n),e.push(f.i/n),sh(t),t=f.next,a=f.next;continue}if(t=f,t===a){o?o===1?(t=sY(xa(t),e,n),rh(t,e,n,r,i,s,2)):o===2&&oY(t,e,n,r,i,s):rh(xa(t),e,n,r,i,s,1);break}}}function rY(t){const e=t.prev,n=t,r=t.next;if(an(e,n,r)>=0)return!1;let i=t.next.next;for(;i!==t.prev;){if(Gc(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&an(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function iY(t,e,n,r){const i=t.prev,s=t,o=t.next;if(an(i,s,o)>=0)return!1;const a=i.x<s.x?i.x<o.x?i.x:o.x:s.x<o.x?s.x:o.x,l=i.y<s.y?i.y<o.y?i.y:o.y:s.y<o.y?s.y:o.y,f=i.x>s.x?i.x>o.x?i.x:o.x:s.x>o.x?s.x:o.x,d=i.y>s.y?i.y>o.y?i.y:o.y:s.y>o.y?s.y:o.y,g=q1(a,l,e,n,r),y=q1(f,d,e,n,r);let b=t.prevZ,E=t.nextZ;for(;b&&b.z>=g&&E&&E.z<=y;){if(b!==t.prev&&b!==t.next&&Gc(i.x,i.y,s.x,s.y,o.x,o.y,b.x,b.y)&&an(b.prev,b,b.next)>=0||(b=b.prevZ,E!==t.prev&&E!==t.next&&Gc(i.x,i.y,s.x,s.y,o.x,o.y,E.x,E.y)&&an(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;b&&b.z>=g;){if(b!==t.prev&&b!==t.next&&Gc(i.x,i.y,s.x,s.y,o.x,o.y,b.x,b.y)&&an(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;E&&E.z<=y;){if(E!==t.prev&&E!==t.next&&Gc(i.x,i.y,s.x,s.y,o.x,o.y,E.x,E.y)&&an(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function sY(t,e,n){let r=t;do{const i=r.prev,s=r.next.next;!Mm(i,s)&&eD(i,r,r.next,s)&&ih(i,s)&&ih(s,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(s.i/n),sh(r),sh(r.next),r=t=s),r=r.next}while(r!==t);return xa(r)}function oY(t,e,n,r,i,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&pY(o,a)){let l=tD(o,a);o=xa(o,o.next),l=xa(l,l.next),rh(o,e,n,r,i,s),rh(l,e,n,r,i,s);return}a=a.next}o=o.next}while(o!==t)}function aY(t,e,n,r,i){const s=[];let o,a,l,f,d;for(o=0,a=e.length;o<a;o++)l=e[o]*r,f=o<a-1?e[o+1]*r:t.length,d=ZO(t,l,f,r,!1,i&&i[o+1]),d===d.next&&(d.steiner=!0),s.push(dY(d));for(s.sort(lY),o=0;o<s.length;o++)cY(s[o],n),n=xa(n,n.next);return n}function lY(t,e){return t.x-e.x}function cY(t,e){if(e=uY(t,e),e){const n=tD(e,t);xa(e,e.next),xa(n,n.next)}}function uY(t,e){let n=e;const r=t.x,i=t.y;let s=-1/0,o;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const y=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(y<=r&&y>s){if(s=y,y===r){if(i===n.y)return n;if(i===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!o)return null;if(r===s)return o;const a=o,l=o.x,f=o.y;let d=1/0,g;n=o;do r>=n.x&&n.x>=l&&r!==n.x&&Gc(i<f?r:s,i,l,f,i<f?s:r,i,n.x,n.y)&&(g=Math.abs(i-n.y)/(r-n.x),ih(n,t)&&(g<d||g===d&&(n.x>o.x||n.x===o.x&&AY(o,n)))&&(o=n,d=g)),n=n.next;while(n!==a);return o}function AY(t,e){return an(t.prev,t,e.prev)<0&&an(e.next,t,t.next)<0}function fY(t,e,n,r){let i=t;do i.z===null&&(i.z=q1(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,hY(i)}function hY(t){let e,n,r=1,i,s,o,a,l,f;do{for(s=t,t=null,f=null,i=0;s;){for(i++,a=s,o=0,n=0;n<r&&(o++,a=a.nextZ,!!a);n++);for(l=r;o>0||l>0&&a;)o!==0&&(l===0||!a||s.z<=a.z)?(e=s,s=s.nextZ,o--):(e=a,a=a.nextZ,l--),f?f.nextZ=e:t=e,e.prevZ=f,f=e;s=a}f.nextZ=null,r*=2}while(i>1);return t}function q1(t,e,n,r,i){return t=32767*(t-n)*i,e=32767*(e-r)*i,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function dY(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Gc(t,e,n,r,i,s,o,a){return(i-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(r-a)-(n-o)*(e-a)>=0&&(n-o)*(s-a)-(i-o)*(r-a)>=0}function pY(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!gY(t,e)&&(ih(t,e)&&ih(e,t)&&mY(t,e)&&(an(t.prev,t,e.prev)||an(t,e.prev,e))||Mm(t,e)&&an(t.prev,t,t.next)>0&&an(e.prev,e,e.next)>0)}function an(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Mm(t,e){return t.x===e.x&&t.y===e.y}function eD(t,e,n,r){const i=y0(an(t,e,n)),s=y0(an(t,e,r)),o=y0(an(n,r,t)),a=y0(an(n,r,e));return!!(i!==s&&o!==a||i===0&&m0(t,n,e)||s===0&&m0(t,r,e)||o===0&&m0(n,t,r)||a===0&&m0(n,e,r))}function m0(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function y0(t){return t>0?1:t<0?-1:0}function gY(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&eD(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function ih(t,e){return an(t.prev,t,t.next)<0?an(t,e,t.next)>=0&&an(t,t.prev,e)>=0:an(t,e,t.prev)<0||an(t,t.next,e)<0}function mY(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function tD(t,e){const n=new Z1(t.i,t.x,t.y),r=new Z1(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function oP(t,e,n,r){const i=new Z1(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function sh(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Z1(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function os(t,e){const n=e.length,r=t.length;if(r>0){let i=!0;for(let s=0;s<n;s++)if(t[r-n+s]!==e[s]){i=!1;break}if(i)return!1}for(let i=0;i<n;i++)t[r+i]=e[i];return!0}function e2(t,e){const n=e.length;for(let r=0;r<n;r++)t[r]=e[r]}function oh(t,e,n,r,i=[]){const s=r+e*n;for(let o=0;o<n;o++)i[o]=t[s+o];return i}function t2(t,e,n,r,i=[]){let s,o;if(n&8)s=(r[3]-t[1])/(e[1]-t[1]),o=3;else if(n&4)s=(r[1]-t[1])/(e[1]-t[1]),o=1;else if(n&2)s=(r[2]-t[0])/(e[0]-t[0]),o=2;else if(n&1)s=(r[0]-t[0])/(e[0]-t[0]),o=0;else return null;for(let a=0;a<t.length;a++)i[a]=(o&1)===a?r[o]:s*(e[a]-t[a])+t[a];return i}function yp(t,e){let n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function nD(t,e){const{size:n=2,broken:r=!1,gridResolution:i=10,gridOffset:s=[0,0],startIndex:o=0,endIndex:a=t.length}=e||{},l=(a-o)/n;let f=[];const d=[f],g=oh(t,0,n,o);let y,b;const E=iD(g,i,s,[]),S=[];os(f,g);for(let M=1;M<l;M++){for(y=oh(t,M,n,o,y),b=yp(y,E);b;){t2(g,y,b,E,S);const C=yp(S,E);C&&(t2(g,S,C,E,S),b=C),os(f,S),e2(g,S),vY(E,i,b),r&&f.length>n&&(f=[],d.push(f),os(f,g)),b=yp(y,E)}os(f,y),e2(g,y)}return r?d:d[0]}const aP=0,yY=1;function v0(t,e){for(let n=0;n<e.length;n++)t.push(e[n]);return t}function rD(t,e=null,n){if(!t.length)return[];const{size:r=2,gridResolution:i=10,gridOffset:s=[0,0],edgeTypes:o=!1}=n||{},a=[],l=[{pos:t,types:o?new Array(t.length/r).fill(yY):null,holes:e||[]}],f=[[],[]];let d=[];for(;l.length;){const{pos:g,types:y,holes:b}=l.shift();_Y(g,r,b[0]||g.length,f),d=iD(f[0],i,s,d);const E=yp(f[1],d);if(E){let S=lP(g,y,r,0,b[0]||g.length,d,E);const M={pos:S[0].pos,types:S[0].types,holes:[]},C={pos:S[1].pos,types:S[1].types,holes:[]};l.push(M,C);for(let P=0;P<b.length;P++)S=lP(g,y,r,b[P],b[P+1]||g.length,d,E),S[0]&&(M.holes.push(M.pos.length),M.pos=v0(M.pos,S[0].pos),o&&(M.types=v0(M.types,S[0].types))),S[1]&&(C.holes.push(C.pos.length),C.pos=v0(C.pos,S[1].pos),o&&(C.types=v0(C.types,S[1].types)))}else{const S={positions:g};o&&(S.edgeTypes=y),b.length&&(S.holeIndices=b),a.push(S)}}return a}function lP(t,e,n,r,i,s,o){const a=(i-r)/n,l=[],f=[],d=[],g=[],y=[];let b,E,S;const M=oh(t,a-1,n,r);let C=Math.sign(o&8?M[1]-s[3]:M[0]-s[2]),P=e&&e[a-1],I=0,L=0;for(let F=0;F<a;F++)b=oh(t,F,n,r,b),E=Math.sign(o&8?b[1]-s[3]:b[0]-s[2]),S=e&&e[r/n+F],E&&C&&C!==E&&(t2(M,b,o,s,y),os(l,y)&&d.push(P),os(f,y)&&g.push(P)),E<=0?(os(l,b)&&d.push(S),I-=E):d.length&&(d[d.length-1]=aP),E>=0?(os(f,b)&&g.push(S),L+=E):g.length&&(g[g.length-1]=aP),e2(M,b),C=E,P=S;return[I?{pos:l,types:e&&d}:null,L?{pos:f,types:e&&g}:null]}function iD(t,e,n,r){const i=Math.floor((t[0]-n[0])/e)*e+n[0],s=Math.floor((t[1]-n[1])/e)*e+n[1];return r[0]=i,r[1]=s,r[2]=i+e,r[3]=s+e,r}function vY(t,e,n){n&8?(t[1]+=e,t[3]+=e):n&4?(t[1]-=e,t[3]-=e):n&2?(t[0]+=e,t[2]+=e):n&1&&(t[0]-=e,t[2]-=e)}function _Y(t,e,n,r){let i=1/0,s=-1/0,o=1/0,a=-1/0;for(let l=0;l<n;l+=e){const f=t[l],d=t[l+1];i=f<i?f:i,s=f>s?f:s,o=d<o?d:o,a=d>a?d:a}return r[0][0]=i,r[0][1]=o,r[1][0]=s,r[1][1]=a,r}const bY=85.051129;function wY(t,e){const{size:n=2,startIndex:r=0,endIndex:i=t.length,normalize:s=!0}=e||{},o=t.slice(r,i);sD(o,n,0,i-r);const a=nD(o,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(s)for(const l of a)oD(l,n);return a}function EY(t,e=null,n){const{size:r=2,normalize:i=!0,edgeTypes:s=!1}=n||{};e=e||[];const o=[],a=[];let l=0,f=0;for(let g=0;g<=e.length;g++){const y=e[g]||t.length,b=f,E=TY(t,r,l,y);for(let S=E;S<y;S++)o[f++]=t[S];for(let S=l;S<E;S++)o[f++]=t[S];sD(o,r,b,f),SY(o,r,b,f,n==null?void 0:n.maxLatitude),l=y,a[g]=f}a.pop();const d=rD(o,a,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:s});if(i)for(const g of d)oD(g.positions,r);return d}function TY(t,e,n,r){let i=-1,s=-1;for(let o=n+1;o<r;o+=e){const a=Math.abs(t[o]);a>i&&(i=a,s=o-1)}return s}function SY(t,e,n,r,i=bY){const s=t[n],o=t[r-e];if(Math.abs(s-o)>180){const a=oh(t,0,e,n);a[0]+=Math.round((o-s)/360)*360,os(t,a),a[1]=Math.sign(a[1])*i,os(t,a),a[0]=s,os(t,a)}}function sD(t,e,n,r){let i=t[0],s;for(let o=n;o<r;o+=e){s=t[o];const a=s-i;(a>180||a<-180)&&(s-=Math.round(a/360)*360),t[o]=i=s}}function oD(t,e){let n;const r=t.length/e;for(let s=0;s<r&&(n=t[s*e],(n+180)%360===0);s++);const i=-Math.round(n/360)*360;if(i!==0)for(let s=0;s<r;s++)t[s*e]+=i}class xY extends Di{constructor(e){const{id:n=$s("column-geometry")}=e,{indices:r,attributes:i}=CY(e);super({...e,id:n,indices:r,attributes:i})}}function CY(t){const{radius:e,height:n=1,nradial:r=10}=t;let{vertices:i}=t;i&&(je.assert(i.length>=r),i=i.flatMap(b=>[b[0],b[1]]),Ow(i,Rw.COUNTER_CLOCKWISE));const s=n>0,o=r+1,a=s?o*3+1:r,l=Math.PI*2/r,f=new Uint16Array(s?r*3*2:0),d=new Float32Array(a*3),g=new Float32Array(a*3);let y=0;if(s){for(let b=0;b<o;b++){const E=b*l,S=b%r,M=Math.sin(E),C=Math.cos(E);for(let P=0;P<2;P++)d[y+0]=i?i[S*2]:C*e,d[y+1]=i?i[S*2+1]:M*e,d[y+2]=(1/2-P)*n,g[y+0]=i?i[S*2]:C,g[y+1]=i?i[S*2+1]:M,y+=3}d[y+0]=d[y-3],d[y+1]=d[y-2],d[y+2]=d[y-1],y+=3}for(let b=s?0:1;b<o;b++){const E=Math.floor(b/2)*Math.sign(.5-b%2),S=E*l,M=(E+r)%r,C=Math.sin(S),P=Math.cos(S);d[y+0]=i?i[M*2]:P*e,d[y+1]=i?i[M*2+1]:C*e,d[y+2]=n/2,g[y+2]=1,y+=3}if(s){let b=0;for(let E=0;E<r;E++)f[b++]=E*2+0,f[b++]=E*2+2,f[b++]=E*2+0,f[b++]=E*2+1,f[b++]=E*2+1,f[b++]=E*2+3}return{indices:f,attributes:{POSITION:{size:3,value:d},NORMAL:{size:3,value:g}}}}const PY=`#version 300 es

#define SHADER_NAME column-layer-vertex-shader

in vec3 positions;
in vec3 normals;

in vec3 instancePositions;
in float instanceElevations;
in vec3 instancePositions64Low;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in float instanceStrokeWidths;

in vec3 instancePickingColors;

// Custom uniforms
uniform float opacity;
uniform float radius;
uniform float angle;
uniform vec2 offset;
uniform bool extruded;
uniform bool stroked;
uniform bool isStroke;
uniform float coverage;
uniform float elevationScale;
uniform float edgeDistance;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform int radiusUnits;
uniform int widthUnits;

// Result
out vec4 vColor;
#ifdef FLAT_SHADING
out vec4 position_commonspace;
#endif

void main(void) {
  geometry.worldPosition = instancePositions;

  vec4 color = isStroke ? instanceLineColors : instanceFillColors;
  // rotate primitive position and normal
  mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));

  // calculate elevation, if 3d not enabled set to 0
  // cylindar gemoetry height are between -1.0 to 1.0, transform it to between 0, 1
  float elevation = 0.0;
  // calculate stroke offset
  float strokeOffsetRatio = 1.0;

  if (extruded) {
    elevation = instanceElevations * (positions.z + 1.0) / 2.0 * elevationScale;
  } else if (stroked) {
    float widthPixels = clamp(
      project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
      widthMinPixels, widthMaxPixels) / 2.0;
    float halfOffset = project_pixel_size(widthPixels) / project_size(edgeDistance * coverage * radius);
    if (isStroke) {
      strokeOffsetRatio -= sign(positions.z) * halfOffset;
    } else {
      strokeOffsetRatio -= halfOffset;
    }
  }

  // if alpha == 0.0 or z < 0.0, do not render element
  float shouldRender = float(color.a > 0.0 && instanceElevations >= 0.0);
  float dotRadius = radius * coverage * shouldRender;

  geometry.pickingColor = instancePickingColors;

  // project center of column
  vec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);
  vec3 centroidPosition64Low = instancePositions64Low;
  vec2 offset = (rotationMatrix * positions.xy * strokeOffsetRatio + offset) * dotRadius;
  if (radiusUnits == UNIT_METERS) {
    offset = project_size(offset);
  }
  vec3 pos = vec3(offset, 0.);
  DECKGL_FILTER_SIZE(pos, geometry);

  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64Low, pos, geometry.position);
  geometry.normal = project_normal(vec3(rotationMatrix * normals.xy, normals.z));
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Light calculations
  if (extruded && !isStroke) {
#ifdef FLAT_SHADING
    position_commonspace = geometry.position;
    vColor = vec4(color.rgb, color.a * opacity);
#else
    vec3 lightColor = lighting_getLightColor(color.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);
    vColor = vec4(lightColor, color.a * opacity);
#endif
  } else {
    vColor = vec4(color.rgb, color.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,MY=`#version 300 es
#define SHADER_NAME column-layer-fragment-shader

precision highp float;

uniform vec3 project_uCameraPosition;
uniform bool extruded;
uniform bool isStroke;

out vec4 fragColor;

in vec4 vColor;
#ifdef FLAT_SHADING
in vec4 position_commonspace;
#endif

void main(void) {
  fragColor = vColor;
#ifdef FLAT_SHADING
  if (extruded && !isStroke && !picking_uActive) {
    vec3 normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));
    fragColor.rgb = lighting_getLightColor(vColor.rgb, project_uCameraPosition, position_commonspace.xyz, normal);
  }
#endif
  DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,bg=[0,0,0,255],IY={diskResolution:{type:"number",min:4,value:20},vertices:null,radius:{type:"number",min:0,value:1e3},angle:{type:"number",value:0},offset:{type:"array",value:[0,0]},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},radiusUnits:"meters",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,extruded:!0,wireframe:!1,filled:!0,stroked:!1,getPosition:{type:"accessor",value:t=>t.position},getFillColor:{type:"accessor",value:bg},getLineColor:{type:"accessor",value:bg},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0,getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class Dw extends Kr{getShaders(){const{gl:e}=this.context,n=!it(e),r={},i=this.props.flatShading&&bm(e,kt.GLSL_DERIVATIVES);return i&&(r.FLAT_SHADING=1),super.getShaders({vs:PY,fs:MY,defines:r,transpileToGLSL100:n,modules:[Ys,i?aO:gw,qs]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instanceFillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getFillColor",defaultValue:bg},instanceLineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getLineColor",defaultValue:bg},instanceStrokeWidths:{size:1,accessor:"getLineWidth",transition:!0}})}updateState(e){super.updateState(e);const{props:n,oldProps:r,changeFlags:i}=e,s=i.extensionsChanged||n.flatShading!==r.flatShading;if(s){var o;const{gl:a}=this.context;(o=this.state.model)===null||o===void 0||o.delete(),this.state.model=this._getModel(a),this.getAttributeManager().invalidateAll()}(s||n.diskResolution!==r.diskResolution||n.vertices!==r.vertices||(n.extruded||n.stroked)!==(r.extruded||r.stroked))&&this._updateGeometry(n)}getGeometry(e,n,r){const i=new xY({radius:1,height:r?2:0,vertices:n,nradial:e});let s=0;if(n)for(let o=0;o<e;o++){const a=n[o];s+=Math.sqrt(a[0]*a[0]+a[1]*a[1])/e}else s=1;return this.setState({edgeDistance:Math.cos(Math.PI/e)*s}),i}_getModel(e){return new Xr(e,{...this.getShaders(),id:this.props.id,isInstanced:!0})}_updateGeometry({diskResolution:e,vertices:n,extruded:r,stroked:i}){const s=this.getGeometry(e,n,r||i);this.setState({fillVertexCount:s.attributes.POSITION.value.length/3,wireframeVertexCount:s.indices.value.length}),this.state.model.setProps({geometry:s})}draw({uniforms:e}){const{lineWidthUnits:n,lineWidthScale:r,lineWidthMinPixels:i,lineWidthMaxPixels:s,radiusUnits:o,elevationScale:a,extruded:l,filled:f,stroked:d,wireframe:g,offset:y,coverage:b,radius:E,angle:S}=this.props,{model:M,fillVertexCount:C,wireframeVertexCount:P,edgeDistance:I}=this.state;M.setUniforms(e).setUniforms({radius:E,angle:S/180*Math.PI,offset:y,extruded:l,stroked:d,coverage:b,elevationScale:a,edgeDistance:I,radiusUnits:gs[o],widthUnits:gs[n],widthScale:r,widthMinPixels:i,widthMaxPixels:s}),l&&g&&(M.setProps({isIndexed:!0}),M.setVertexCount(P).setDrawMode(1).setUniforms({isStroke:!0}).draw()),f&&(M.setProps({isIndexed:!1}),M.setVertexCount(C).setDrawMode(5).setUniforms({isStroke:!1}).draw()),!l&&d&&(M.setProps({isIndexed:!1}),M.setVertexCount(C*2/3).setDrawMode(5).setUniforms({isStroke:!0}).draw())}}T(Dw,"layerName","ColumnLayer");T(Dw,"defaultProps",IY);function BY(t,e,n,r){let i;if(Array.isArray(t[0])){const s=t.length*e;i=new Array(s);for(let o=0;o<t.length;o++)for(let a=0;a<e;a++)i[o*e+a]=t[o][a]||0}else i=t;return n?nD(i,{size:e,gridResolution:n}):r?wY(i,{size:e}):i}const LY=1,RY=2,Bv=4;class OY extends QO{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(e){return this.attributes[e]}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):null}normalizeGeometry(e){return this.normalize?BY(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}getGeometrySize(e){if(cP(e)){let r=0;for(const i of e)r+=this.getGeometrySize(i);return r}const n=this.getPathLength(e);return n<2?0:this.isClosed(e)?n<3?0:n+2:n}updateGeometryAttributes(e,n){if(n.geometrySize!==0)if(e&&cP(e))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i}else this._updateSegmentTypes(e,n),this._updatePositions(e,n)}_updateSegmentTypes(e,n){const r=this.attributes.segmentTypes,i=e?this.isClosed(e):!1,{vertexStart:s,geometrySize:o}=n;r.fill(0,s,s+o),i?(r[s]=Bv,r[s+o-2]=Bv):(r[s]+=LY,r[s+o-2]+=RY),r[s+o-1]=Bv}_updatePositions(e,n){const{positions:r}=this.attributes;if(!r||!e)return;const{vertexStart:i,geometrySize:s}=n,o=new Array(3);for(let a=i,l=0;l<s;a++,l++)this.getPointOnPath(e,l,o),r[a*3]=o[0],r[a*3+1]=o[1],r[a*3+2]=o[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,n,r=[]){const{positionSize:i}=this;n*i>=e.length&&(n+=1-e.length/i);const s=n*i;return r[0]=e[s],r[1]=e[s+1],r[2]=i===3&&e[s+2]||0,r}isClosed(e){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:n}=this,r=e.length-n;return e[0]===e[r]&&e[1]===e[r+1]&&(n===2||e[2]===e[r+2])}}function cP(t){return Array.isArray(t[0])}const DY=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}

// calculate line join positions
vec3 lineJoin(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  // side of the segment - -1: left, 0: center, 1: right
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);

  // tangent of the corner
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  // direction of the corner
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  // direction of the segment
  vec2 dir = isEnd ? dirA : dirB;
  // direction of the extrusion
  vec2 perp = isEnd ? perpA : perpB;
  // length of the segment
  float L = isEnd ? lenA : lenB;

  // A = angle of the corner
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));

  // -1: right, 1: left
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);

  // relative position to the corner:
  // -1: inside (smaller side of the angle)
  // 0: center
  // 1: outside (bigger side of the angle)
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  // trim if inside corner extends further than the line segment
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);

  // special treatment for start cap and end cap
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;

  // extend out a triangle to envelope the round cap
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }

  // Generate variables for fragment shader
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return currPoint + offset;
}

// In clipspace extrusion, if a line extends behind the camera, clip it to avoid visual artifacts
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    // Extrude in clipspace
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 pos = lineJoin(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);
  } else {
    // Extrude in commonspace
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec4 pos = vec4(
      lineJoin(prevPosition, currPosition, nextPosition, width.xy),
      1.0);
    geometry.position = pos;
    gl_Position = project_common_position_to_clipspace(pos);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,FY=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
/*
 * vPathPosition represents the relative coordinates of the current fragment on the path segment.
 * vPathPosition.x - position along the width of the path, between [-1, 1]. 0 is the center line.
 * vPathPosition.y - position along the length of the path, between [0, L / width].
 */
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    // if joint is rounded, test distance from the corner
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    // trim miter
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,aD=[0,0,0,255],kY={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:aD},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},Lv={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class Qh extends Kr{constructor(...e){super(...e),T(this,"state",void 0)}getShaders(){return super.getShaders({vs:DY,fs:FY,modules:[Ys,qs]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:Lv,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:Lv,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:Lv,defaultValue:aD},instancePickingColors:{size:3,type:5121,accessor:(r,{index:i,target:s})=>this.encodePickingColor(r&&r.__source?r.__source.index:i,s)}}),this.setState({pathTesselator:new OY({fp64:this.use64bitPositions()})})}updateState(e){super.updateState(e);const{props:n,changeFlags:r}=e,i=this.getAttributeManager();if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPath)){const{pathTesselator:a}=this.state,l=n.data.attributes||{};a.updateGeometry({data:n.data,geometryBuffer:l.getPath,buffers:l,normalize:!n._pathType,loop:n._pathType==="loop",getGeometry:n.getPath,positionFormat:n.positionFormat,wrapLongitude:n.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:r.dataChanged}),this.setState({numInstances:a.instanceCount,startIndices:a.vertexStarts}),r.dataChanged||i.invalidateAll()}if(r.extensionsChanged){var o;const{gl:a}=this.context;(o=this.state.model)===null||o===void 0||o.delete(),this.state.model=this._getModel(a),i.invalidateAll()}}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,{data:i}=this.props;return i[0]&&i[0].__source&&(n.object=i.find(s=>s.__source.index===r)),n}disablePickingIndex(e){const{data:n}=this.props;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else this._disablePickingIndex(e)}draw({uniforms:e}){const{jointRounded:n,capRounded:r,billboard:i,miterLimit:s,widthUnits:o,widthScale:a,widthMinPixels:l,widthMaxPixels:f}=this.props;this.state.model.setUniforms(e).setUniforms({jointType:Number(n),capType:Number(r),billboard:i,widthUnits:gs[o],widthScale:a,miterLimit:s,widthMinPixels:l,widthMaxPixels:f}).draw()}_getModel(e){const n=[0,1,2,1,4,2,1,3,4,3,5,4],r=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new Xr(e,{...this.getShaders(),id:this.props.id,geometry:new Di({drawMode:4,attributes:{indices:new Uint16Array(n),positions:{value:new Float32Array(r),size:2}}}),isInstanced:!0})}calculatePositions(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateSegmentTypes(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("segmentTypes")}}T(Qh,"defaultProps",kY);T(Qh,"layerName","PathLayer");var Fw={exports:{}};Fw.exports=Im;Fw.exports.default=Im;function Im(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,s=lD(t,0,i,n,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,f,d,g,y,b;if(r&&(s=VY(t,e,s,n)),t.length>80*n){a=f=t[0],l=d=t[1];for(var E=n;E<i;E+=n)g=t[E],y=t[E+1],g<a&&(a=g),y<l&&(l=y),g>f&&(f=g),y>d&&(d=y);b=Math.max(f-a,d-l),b=b!==0?32767/b:0}return ah(s,o,n,a,l,b,0),o}function lD(t,e,n,r,i){var s,o;if(i===i2(t,e,n,r)>0)for(s=e;s<n;s+=r)o=uP(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=uP(s,t[s],t[s+1],o);return o&&Bm(o,o.next)&&(ch(o),o=o.next),o}function xl(t,e){if(!t)return t;e||(e=t);var n=t,r;do if(r=!1,!n.steiner&&(Bm(n,n.next)||ln(n.prev,n,n.next)===0)){if(ch(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function ah(t,e,n,r,i,s,o){if(!!t){!o&&s&&$Y(t,r,i,s);for(var a=t,l,f;t.prev!==t.next;){if(l=t.prev,f=t.next,s?UY(t,r,i,s):NY(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(f.i/n|0),ch(t),t=f.next,a=f.next;continue}if(t=f,t===a){o?o===1?(t=GY(xl(t),e,n),ah(t,e,n,r,i,s,2)):o===2&&zY(t,e,n,r,i,s):ah(xl(t),e,n,r,i,s,1);break}}}}function NY(t){var e=t.prev,n=t,r=t.next;if(ln(e,n,r)>=0)return!1;for(var i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,f=r.y,d=i<s?i<o?i:o:s<o?s:o,g=a<l?a<f?a:f:l<f?l:f,y=i>s?i>o?i:o:s>o?s:o,b=a>l?a>f?a:f:l>f?l:f,E=r.next;E!==e;){if(E.x>=d&&E.x<=y&&E.y>=g&&E.y<=b&&zc(i,a,s,l,o,f,E.x,E.y)&&ln(E.prev,E,E.next)>=0)return!1;E=E.next}return!0}function UY(t,e,n,r){var i=t.prev,s=t,o=t.next;if(ln(i,s,o)>=0)return!1;for(var a=i.x,l=s.x,f=o.x,d=i.y,g=s.y,y=o.y,b=a<l?a<f?a:f:l<f?l:f,E=d<g?d<y?d:y:g<y?g:y,S=a>l?a>f?a:f:l>f?l:f,M=d>g?d>y?d:y:g>y?g:y,C=n2(b,E,e,n,r),P=n2(S,M,e,n,r),I=t.prevZ,L=t.nextZ;I&&I.z>=C&&L&&L.z<=P;){if(I.x>=b&&I.x<=S&&I.y>=E&&I.y<=M&&I!==i&&I!==o&&zc(a,d,l,g,f,y,I.x,I.y)&&ln(I.prev,I,I.next)>=0||(I=I.prevZ,L.x>=b&&L.x<=S&&L.y>=E&&L.y<=M&&L!==i&&L!==o&&zc(a,d,l,g,f,y,L.x,L.y)&&ln(L.prev,L,L.next)>=0))return!1;L=L.nextZ}for(;I&&I.z>=C;){if(I.x>=b&&I.x<=S&&I.y>=E&&I.y<=M&&I!==i&&I!==o&&zc(a,d,l,g,f,y,I.x,I.y)&&ln(I.prev,I,I.next)>=0)return!1;I=I.prevZ}for(;L&&L.z<=P;){if(L.x>=b&&L.x<=S&&L.y>=E&&L.y<=M&&L!==i&&L!==o&&zc(a,d,l,g,f,y,L.x,L.y)&&ln(L.prev,L,L.next)>=0)return!1;L=L.nextZ}return!0}function GY(t,e,n){var r=t;do{var i=r.prev,s=r.next.next;!Bm(i,s)&&cD(i,r,r.next,s)&&lh(i,s)&&lh(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),ch(r),ch(r.next),r=t=s),r=r.next}while(r!==t);return xl(r)}function zY(t,e,n,r,i,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&KY(o,a)){var l=uD(o,a);o=xl(o,o.next),l=xl(l,l.next),ah(o,e,n,r,i,s,0),ah(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function VY(t,e,n,r){var i=[],s,o,a,l,f;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,f=lD(t,a,l,r,!1),f===f.next&&(f.steiner=!0),i.push(JY(f));for(i.sort(jY),s=0;s<i.length;s++)n=HY(i[s],n);return n}function jY(t,e){return t.x-e.x}function HY(t,e){var n=WY(t,e);if(!n)return e;var r=uD(n,t);return xl(r,r.next),xl(n,n.next)}function WY(t,e){var n=e,r=t.x,i=t.y,s=-1/0,o;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var a=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>s&&(s=a,o=n.x<n.next.x?n:n.next,a===r))return o}n=n.next}while(n!==e);if(!o)return null;var l=o,f=o.x,d=o.y,g=1/0,y;n=o;do r>=n.x&&n.x>=f&&r!==n.x&&zc(i<d?r:s,i,f,d,i<d?s:r,i,n.x,n.y)&&(y=Math.abs(i-n.y)/(r-n.x),lh(n,t)&&(y<g||y===g&&(n.x>o.x||n.x===o.x&&QY(o,n)))&&(o=n,g=y)),n=n.next;while(n!==l);return o}function QY(t,e){return ln(t.prev,t,e.prev)<0&&ln(e.next,t,t.next)<0}function $Y(t,e,n,r){var i=t;do i.z===0&&(i.z=n2(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,XY(i)}function XY(t){var e,n,r,i,s,o,a,l,f=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<f&&(a++,r=r.nextZ,!!r);e++);for(l=f;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,f*=2}while(o>1);return t}function n2(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function JY(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function zc(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function KY(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!YY(t,e)&&(lh(t,e)&&lh(e,t)&&qY(t,e)&&(ln(t.prev,t,e.prev)||ln(t,e.prev,e))||Bm(t,e)&&ln(t.prev,t,t.next)>0&&ln(e.prev,e,e.next)>0)}function ln(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Bm(t,e){return t.x===e.x&&t.y===e.y}function cD(t,e,n,r){var i=b0(ln(t,e,n)),s=b0(ln(t,e,r)),o=b0(ln(n,r,t)),a=b0(ln(n,r,e));return!!(i!==s&&o!==a||i===0&&_0(t,n,e)||s===0&&_0(t,r,e)||o===0&&_0(n,t,r)||a===0&&_0(n,e,r))}function _0(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function b0(t){return t>0?1:t<0?-1:0}function YY(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&cD(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function lh(t,e){return ln(t.prev,t,t.next)<0?ln(t,e,t.next)>=0&&ln(t,t.prev,e)>=0:ln(t,e,t.prev)<0||ln(t,t.next,e)<0}function qY(t,e){var n=t,r=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function uD(t,e){var n=new r2(t.i,t.x,t.y),r=new r2(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function uP(t,e,n,r){var i=new r2(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function ch(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function r2(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Im.deviation=function(t,e,n,r){var i=e&&e.length,s=i?e[0]*n:t.length,o=Math.abs(i2(t,0,s,n));if(i)for(var a=0,l=e.length;a<l;a++){var f=e[a]*n,d=a<l-1?e[a+1]*n:t.length;o-=Math.abs(i2(t,f,d,n))}var g=0;for(a=0;a<r.length;a+=3){var y=r[a]*n,b=r[a+1]*n,E=r[a+2]*n;g+=Math.abs((t[y]-t[E])*(t[b+1]-t[y+1])-(t[y]-t[b])*(t[E+1]-t[y+1]))}return o===0&&g===0?0:Math.abs((g-o)/o)};function i2(t,e,n,r){for(var i=0,s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}Im.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var o=0;o<e;o++)n.vertices.push(t[i][s][o]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n};const w0=Rw.CLOCKWISE,AP=Rw.COUNTER_CLOCKWISE,aa={isClosed:!0};function ZY(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}function nf(t){return"positions"in t?t.positions:t}function vp(t){return"holeIndices"in t?t.holeIndices:null}function eq(t){return Array.isArray(t[0])}function tq(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}function nq(t){const e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}function rq(t,e,n,r){for(let i=0;i<e;i++)if(t[n+i]!==t[r-e+i])return!1;return!0}function fP(t,e,n,r,i){let s=e;const o=n.length;for(let a=0;a<o;a++)for(let l=0;l<r;l++)t[s++]=n[a][l]||0;if(!nq(n))for(let a=0;a<r;a++)t[s++]=n[0][a]||0;return aa.start=e,aa.end=s,aa.size=r,Ow(t,i,aa),s}function hP(t,e,n,r,i=0,s,o){s=s||n.length;const a=s-i;if(a<=0)return e;let l=e;for(let f=0;f<a;f++)t[l++]=n[i+f];if(!rq(n,r,i,s))for(let f=0;f<r;f++)t[l++]=n[i+f];return aa.start=e,aa.end=l,aa.size=r,Ow(t,o,aa),l}function AD(t,e){ZY(t);const n=[],r=[];if("positions"in t){const{positions:i,holeIndices:s}=t;if(s){let o=0;for(let a=0;a<=s.length;a++)o=hP(n,o,i,e,s[a-1],s[a],a===0?w0:AP),r.push(o);return r.pop(),{positions:n,holeIndices:r}}t=i}if(!eq(t))return hP(n,0,t,e,0,n.length,w0),n;if(!tq(t)){let i=0;for(const[s,o]of t.entries())i=fP(n,i,o,e,s===0?w0:AP),r.push(i);return r.pop(),{positions:n,holeIndices:r}}return fP(n,0,t,e,w0),n}function iq(t,e,n){let r=vp(t);r&&(r=r.map(s=>s/e));let i=nf(t);if(n){const s=i.length;i=i.slice();const o=[];for(let a=0;a<s;a+=e){o[0]=i[a],o[1]=i[a+1];const l=n(o);i[a]=l[0],i[a+1]=l[1]}}return Fw.exports(i,r,e)}class sq extends QO{constructor(e){const{fp64:n,IndexType:r=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:n?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:r,size:1}}})}get(e){const{attributes:n}=this;return e==="indices"?n.indices&&n.indices.subarray(0,this.vertexCount):n[e]}updateGeometry(e){super.updateGeometry(e);const n=this.buffers.indices;if(n)this.vertexCount=(n.value||n).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(e){if(this.normalize){const n=AD(e,this.positionSize);return this.opts.resolution?rD(nf(n),vp(n),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?EY(nf(n),vp(n),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):n}return e}getGeometrySize(e){if(dP(e)){let n=0;for(const r of e)n+=this.getGeometrySize(r);return n}return nf(e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):null}updateGeometryAttributes(e,n){if(e&&dP(e))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i,n.indexStart=this.indexStarts[n.geometryIndex+1]}else this._updateIndices(e,n),this._updatePositions(e,n),this._updateVertexValid(e,n)}_updateIndices(e,{geometryIndex:n,vertexStart:r,indexStart:i}){const{attributes:s,indexStarts:o,typedArrayManager:a}=this;let l=s.indices;if(!l||!e)return;let f=i;const d=iq(e,this.positionSize,this.opts.preproject);l=a.allocate(l,i+d.length,{copy:!0});for(let g=0;g<d.length;g++)l[f++]=d[g]+r;o[n+1]=i+d.length,s.indices=l}_updatePositions(e,{vertexStart:n,geometrySize:r}){const{attributes:{positions:i},positionSize:s}=this;if(!i||!e)return;const o=nf(e);for(let a=n,l=0;l<r;a++,l++){const f=o[l*s],d=o[l*s+1],g=s>2?o[l*s+2]:0;i[a*3]=f,i[a*3+1]=d,i[a*3+2]=g}}_updateVertexValid(e,{vertexStart:n,geometrySize:r}){const{positionSize:i}=this,s=this.attributes.vertexValid,o=e&&vp(e);if(e&&e.edgeTypes?s.set(e.edgeTypes,n):s.fill(1,n,n+r),o)for(let a=0;a<o.length;a++)s[n+o[a]/i-1]=0;s[n+r-1]=0}}function dP(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}const fD=`
attribute vec2 vertexPositions;
attribute float vertexValid;

uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;

varying vec4 vColor;

struct PolygonProps {
  vec4 fillColors;
  vec4 lineColors;
  vec3 positions;
  vec3 nextPositions;
  vec3 pickingColors;
  vec3 positions64Low;
  vec3 nextPositions64Low;
  float elevations;
};

vec3 project_offset_normal(vec3 vector) {
  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * project_uCommonUnitsPerWorldUnit);
  }
  return project_normal(vector);
}

void calculatePosition(PolygonProps props) {
#ifdef IS_SIDE_VERTEX
  if(vertexValid < 0.5){
    gl_Position = vec4(0.);
    return;
  }
#endif

  vec3 pos;
  vec3 pos64Low;
  vec3 normal;
  vec4 colors = isWireframe ? props.lineColors : props.fillColors;

  geometry.worldPosition = props.positions;
  geometry.worldPositionAlt = props.nextPositions;
  geometry.pickingColor = props.pickingColors;

#ifdef IS_SIDE_VERTEX
  pos = mix(props.positions, props.nextPositions, vertexPositions.x);
  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);
#else
  pos = props.positions;
  pos64Low = props.positions64Low;
#endif

  if (extruded) {
    pos.z += props.elevations * vertexPositions.y * elevationScale;
  }
  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  if (extruded) {
  #ifdef IS_SIDE_VERTEX
    normal = vec3(
      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),
      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),
      0.0);
    normal = project_offset_normal(normal);
  #else
    normal = project_normal(vec3(0.0, 0.0, 1.0));
  #endif
    geometry.normal = normal;
    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);
    vColor = vec4(lightColor, colors.a * opacity);
  } else {
    vColor = vec4(colors.rgb, colors.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,oq=`#define SHADER_NAME solid-polygon-layer-vertex-shader

attribute vec3 positions;
attribute vec3 positions64Low;
attribute float elevations;
attribute vec4 fillColors;
attribute vec4 lineColors;
attribute vec3 pickingColors;

`.concat(fD,`

void main(void) {
  PolygonProps props;

  props.positions = positions;
  props.positions64Low = positions64Low;
  props.elevations = elevations;
  props.fillColors = fillColors;
  props.lineColors = lineColors;
  props.pickingColors = pickingColors;

  calculatePosition(props);
}
`),aq=`#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX


attribute vec3 instancePositions;
attribute vec3 nextPositions;
attribute vec3 instancePositions64Low;
attribute vec3 nextPositions64Low;
attribute float instanceElevations;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

`.concat(fD,`

void main(void) {
  PolygonProps props;

  #if RING_WINDING_ORDER_CW == 1
    props.positions = instancePositions;
    props.positions64Low = instancePositions64Low;
    props.nextPositions = nextPositions;
    props.nextPositions64Low = nextPositions64Low;
  #else
    props.positions = nextPositions;
    props.positions64Low = nextPositions64Low;
    props.nextPositions = instancePositions;
    props.nextPositions64Low = instancePositions64Low;
  #endif
  props.elevations = instanceElevations;
  props.fillColors = instanceFillColors;
  props.lineColors = instanceLineColors;
  props.pickingColors = instancePickingColors;

  calculatePosition(props);
}
`),lq=`#define SHADER_NAME solid-polygon-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,wg=[0,0,0,255],cq={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:wg},getLineColor:{type:"accessor",value:wg},material:!0},E0={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class Lm extends Kr{constructor(...e){super(...e),T(this,"state",void 0)}getShaders(e){return super.getShaders({vs:e==="top"?oq:aq,fs:lq,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[Ys,gw,qs]})}get wrapLongitude(){return!1}initializeState(){const{gl:e,viewport:n}=this.context;let{coordinateSystem:r}=this.props;n.isGeospatial&&r===Ze.DEFAULT&&(r=Ze.LNGLAT),this.setState({numInstances:0,polygonTesselator:new sq({preproject:r===Ze.LNGLAT&&n.projectFlat.bind(n),fp64:this.use64bitPositions(),IndexType:!e||tw(e,kt.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});const i=this.getAttributeManager(),s=!0;i.remove(["instancePickingColors"]),i.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:s},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:E0,accessor:"getPolygon",update:this.calculatePositions,noAlloc:s,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:s},elevations:{size:1,transition:E0,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:E0,accessor:"getFillColor",defaultValue:wg,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:E0,accessor:"getLineColor",defaultValue:wg,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(o,{index:a,target:l})=>this.encodePickingColor(o&&o.__source?o.__source.index:a,l),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,{data:i}=this.props;return i[0]&&i[0].__source&&(n.object=i.find(s=>s.__source.index===r)),n}disablePickingIndex(e){const{data:n}=this.props;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else this._disablePickingIndex(e)}draw({uniforms:e}){const{extruded:n,filled:r,wireframe:i,elevationScale:s}=this.props,{topModel:o,sideModel:a,polygonTesselator:l}=this.state,f={...e,extruded:Boolean(n),elevationScale:s};a&&(a.setInstanceCount(l.instanceCount-1),a.setUniforms(f),i&&(a.setDrawMode(3),a.setUniforms({isWireframe:!0}).draw()),r&&(a.setDrawMode(6),a.setUniforms({isWireframe:!1}).draw())),o&&(o.setVertexCount(l.vertexCount),o.setUniforms(f).draw())}updateState(e){super.updateState(e),this.updateGeometry(e);const{props:n,oldProps:r,changeFlags:i}=e,s=this.getAttributeManager();if(i.extensionsChanged||n.filled!==r.filled||n.extruded!==r.extruded){var a;(a=this.state.models)===null||a===void 0||a.forEach(l=>l.delete()),this.setState(this._getModels(this.context.gl)),s.invalidateAll()}}updateGeometry({props:e,oldProps:n,changeFlags:r}){if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPolygon)){const{polygonTesselator:s}=this.state,o=e.data.attributes||{};s.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:o.getPolygon,buffers:o,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:r.dataChanged}),this.setState({numInstances:s.instanceCount,startIndices:s.vertexStarts}),r.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(e){const{id:n,filled:r,extruded:i}=this.props;let s,o;if(r){const a=this.getShaders("top");a.defines.NON_INSTANCED_MODEL=1,s=new Xr(e,{...a,id:"".concat(n,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return i&&(o=new Xr(e,{...this.getShaders("side"),id:"".concat(n,"-side"),geometry:new Di({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),o.userData.excludeAttributes={indices:!0}),{models:[o,s].filter(Boolean),topModel:s,sideModel:o}}calculateIndices(e){const{polygonTesselator:n}=this.state;e.startIndices=n.indexStarts,e.value=n.get("indices")}calculatePositions(e){const{polygonTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}}T(Lm,"defaultProps",cq);T(Lm,"layerName","SolidPolygonLayer");function hD({data:t,getIndex:e,dataRange:n,replace:r}){const{startRow:i=0,endRow:s=1/0}=n,o=t.length;let a=o,l=o;for(let y=0;y<o;y++){const b=e(t[y]);if(a>y&&b>=i&&(a=y),b>=s){l=y;break}}let f=a;const g=l-a!==r.length?t.slice(l):void 0;for(let y=0;y<r.length;y++)t[f++]=r[y];if(g){for(let y=0;y<g.length;y++)t[f++]=g[y];t.length=f}return{startRow:a,endRow:a+r.length}}const dD=[0,0,0,255],uq=[0,0,0,255],Aq={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:t=>t.polygon},getFillColor:{type:"accessor",value:uq},getLineColor:{type:"accessor",value:dD},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};class $u extends Fo{initializeState(){this.state={paths:[]},this.props.getLineDashArray&&je.removed("getLineDashArray","PathStyleExtension")()}updateState({changeFlags:e}){const n=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getPolygon);if(n&&Array.isArray(e.dataChanged)){const r=this.state.paths.slice(),i=e.dataChanged.map(s=>hD({data:r,getIndex:o=>o.__source.index,dataRange:s,replace:this._getPaths(s)}));this.setState({paths:r,pathsDiff:i})}else n&&this.setState({paths:this._getPaths(),pathsDiff:null})}_getPaths(e={}){const{data:n,getPolygon:r,positionFormat:i,_normalize:s}=this.props,o=[],a=i==="XY"?2:3,{startRow:l,endRow:f}=e,{iterable:d,objectInfo:g}=Oa(n,l,f);for(const y of d){g.index++;let b=r(y,g);s&&(b=AD(b,a));const{holeIndices:E}=b,S=b.positions||b;if(E)for(let M=0;M<=E.length;M++){const C=S.slice(E[M-1]||0,E[M]||S.length);o.push(this.getSubLayerRow({path:C},y,g.index))}else o.push(this.getSubLayerRow({path:S},y,g.index))}return o}renderLayers(){const{data:e,_dataDiff:n,stroked:r,filled:i,extruded:s,wireframe:o,_normalize:a,_windingOrder:l,elevationScale:f,transitions:d,positionFormat:g}=this.props,{lineWidthUnits:y,lineWidthScale:b,lineWidthMinPixels:E,lineWidthMaxPixels:S,lineJointRounded:M,lineMiterLimit:C,lineDashJustified:P}=this.props,{getFillColor:I,getLineColor:L,getLineWidth:F,getLineDashArray:z,getElevation:X,getPolygon:Y,updateTriggers:Q,material:N}=this.props,{paths:k,pathsDiff:te}=this.state,oe=this.getSubLayerClass("fill",Lm),ae=this.getSubLayerClass("stroke",Qh),Re=this.shouldRenderSubLayer("fill",k)&&new oe({_dataDiff:n,extruded:s,elevationScale:f,filled:i,wireframe:o,_normalize:a,_windingOrder:l,getElevation:X,getFillColor:I,getLineColor:s&&o?L:dD,material:N,transitions:d},this.getSubLayerProps({id:"fill",updateTriggers:Q&&{getPolygon:Q.getPolygon,getElevation:Q.getElevation,getFillColor:Q.getFillColor,lineColors:s&&o,getLineColor:Q.getLineColor}}),{data:e,positionFormat:g,getPolygon:Y}),Oe=!s&&r&&this.shouldRenderSubLayer("stroke",k)&&new ae({_dataDiff:te&&(()=>te),widthUnits:y,widthScale:b,widthMinPixels:E,widthMaxPixels:S,jointRounded:M,miterLimit:C,dashJustified:P,_pathType:"loop",transitions:d&&{getWidth:d.getLineWidth,getColor:d.getLineColor,getPath:d.getPolygon},getColor:this.getSubLayerAccessor(L),getWidth:this.getSubLayerAccessor(F),getDashArray:this.getSubLayerAccessor(z)},this.getSubLayerProps({id:"stroke",updateTriggers:Q&&{getWidth:Q.getLineWidth,getColor:Q.getLineColor,getDashArray:Q.getLineDashArray}}),{data:k,positionFormat:g,getPath:He=>He.path});return[!s&&Re,Oe,s&&Re]}}T($u,"layerName","PolygonLayer");T($u,"defaultProps",Aq);function fq(t,e){if(!t)return null;const n="startIndices"in t?t.startIndices[e]:e,r=t.featureIds.value[n];return n!==-1?hq(t,r,n):null}function hq(t,e,n){const r={properties:{...t.properties[e]}};for(const i in t.numericProps)r.properties[i]=t.numericProps[i].value[n];return r}function dq(t,e){const n={points:null,lines:null,polygons:null};for(const r in n){const i=t[r].globalFeatureIds.value;n[r]=new Uint8ClampedArray(i.length*3);const s=[];for(let o=0;o<i.length;o++)e(i[o],s),n[r][o*3+0]=s[0],n[r][o*3+1]=s[1],n[r][o*3+2]=s[2]}return n}const pq=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float buffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;

    // if enable sdf (signed distance fields)
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }

    // Take the global opacity and the alpha from color into account for the alpha component
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,pP=192/256,gP=[],gq={getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class kw extends Pm{constructor(...e){super(...e),T(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:pq}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(n,{index:r,target:i})=>this.encodePickingColor(r,i)}})}updateState(e){super.updateState(e);const{props:n,oldProps:r}=e;let{outlineColor:i}=n;i!==r.outlineColor&&(i=i.map(s=>s/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!n.sdf&&n.outlineWidth&&je.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:n,smoothing:r,outlineWidth:i}=this.props,{outlineColor:s}=this.state;e.uniforms={...e.uniforms,buffer:pP,outlineBuffer:i?Math.max(r,pP*(1-i)):-1,gamma:r,sdf:Boolean(n),outlineColor:s},super.draw(e)}getInstanceOffset(e){return e?Array.from(e).flatMap(n=>super.getInstanceOffset(n)):gP}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(n=>super.getInstanceIconFrame(n)):gP}}T(kw,"defaultProps",gq);T(kw,"layerName","MultiIconLayer");var Nw={exports:{}};Nw.exports=$h;Nw.exports.default=$h;var ru=1e20;function $h(t,e,n,r,i,s){this.fontSize=t||24,this.buffer=e===void 0?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=s||"normal",this.radius=n||8;var o=this.size=this.fontSize+this.buffer*2,a=o+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function mq(t,e,n,r,i,s,o){s.fill(ru,0,e*n),o.fill(0,0,e*n);for(var a=(e-r)/2,l=0;l<i;l++)for(var f=0;f<r;f++){var d=(l+a)*e+f+a,g=t.data[4*(l*r+f)+3]/255;if(g===1)s[d]=0,o[d]=ru;else if(g===0)s[d]=ru,o[d]=0;else{var y=Math.max(0,.5-g),b=Math.max(0,g-.5);s[d]=y*y,o[d]=b*b}}}function yq(t,e,n,r,i,s,o){for(var a=0;a<e*n;a++){var l=Math.sqrt(r[a])-Math.sqrt(i[a]);t[a]=Math.round(255-255*(l/s+o))}}$h.prototype._draw=function(t,e){var n=this.ctx.measureText(t),r=n.width,i=2*this.buffer,s,o,a,l,f,d,g,y;e&&this.useMetrics?(f=Math.floor(n.actualBoundingBoxAscent),y=this.buffer+Math.ceil(n.actualBoundingBoxAscent),d=this.buffer,g=this.buffer,o=Math.min(this.size,Math.ceil(n.actualBoundingBoxRight-n.actualBoundingBoxLeft)),l=Math.min(this.size-d,Math.ceil(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)),s=o+i,a=l+i,this.ctx.textBaseline="alphabetic"):(s=o=this.size,a=l=this.size,f=19*this.fontSize/24,d=g=0,y=this.middle,this.ctx.textBaseline="middle");var b;o&&l&&(this.ctx.clearRect(g,d,o,l),this.ctx.fillText(t,this.buffer,y),b=this.ctx.getImageData(g,d,o,l));var E=new Uint8ClampedArray(s*a);return mq(b,s,a,o,l,this.gridOuter,this.gridInner),mP(this.gridOuter,s,a,this.f,this.v,this.z),mP(this.gridInner,s,a,this.f,this.v,this.z),yq(E,s,a,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:E,metrics:{width:o,height:l,sdfWidth:s,sdfHeight:a,top:f,left:0,advance:r}}};$h.prototype.draw=function(t){return this._draw(t,!1).data};$h.prototype.drawWithMetrics=function(t){return this._draw(t,!0)};function mP(t,e,n,r,i,s){for(var o=0;o<e;o++)yP(t,o,e,n,r,i,s);for(var a=0;a<n;a++)yP(t,a*e,1,e,r,i,s)}function yP(t,e,n,r,i,s,o){var a,l,f,d;for(s[0]=0,o[0]=-ru,o[1]=ru,a=0;a<r;a++)i[a]=t[e+a*n];for(a=1,l=0,f=0;a<r;a++){do d=s[l],f=(i[a]-i[d]+a*a-d*d)/(a-d)/2;while(f<=o[l]&&--l>-1);l++,s[l]=a,o[l]=f,o[l+1]=ru}for(a=0,l=0;a<r;a++){for(;o[l+1]<a;)l++;d=s[l],t[e+a*n]=i[d]+(a-d)*(a-d)}}const vq=32,_q=[];function bq(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function wq({characterSet:t,getFontWidth:e,fontHeight:n,buffer:r,maxCanvasWidth:i,mapping:s={},xOffset:o=0,yOffset:a=0}){let l=0,f=o;for(const g of t)if(!s[g]){const y=e(g);f+y+r*2>i&&(f=0,l++),s[g]={x:f+r,y:a+l*(n+r*2)+r,width:y,height:n},f+=y+r*2}const d=n+r*2;return{mapping:s,xOffset:f,yOffset:a+l*d,canvasHeight:bq(a+(l+1)*d)}}function pD(t,e,n,r){let i=0;for(let o=e;o<n;o++){var s;const a=t[o];i+=((s=r[a])===null||s===void 0?void 0:s.width)||0}return i}function gD(t,e,n,r,i,s){let o=e,a=0;for(let l=e;l<n;l++){const f=pD(t,l,l+1,i);a+f>r&&(o<l&&s.push(l),o=l,a=0),a+=f}return a}function Eq(t,e,n,r,i,s){let o=e,a=e,l=e,f=0;for(let d=e;d<n;d++)if((t[d]===" "||t[d+1]===" "||d+1===n)&&(l=d+1),l>a){let g=pD(t,a,l,i);f+g>r&&(o<a&&(s.push(a),o=a,f=0),g>r&&(g=gD(t,a,l,r,i,s),o=s[s.length-1])),a=l,f+=g}return f}function Tq(t,e,n,r,i=0,s){s===void 0&&(s=t.length);const o=[];return e==="break-all"?gD(t,i,s,n,r,o):Eq(t,i,s,n,r,o),o}function Sq(t,e,n,r,i,s){let o=0,a=0;for(let l=e;l<n;l++){const f=t[l],d=r[f];d?(a||(a=d.height),i[l]=o+d.width/2,o+=d.width):(je.warn("Missing character: ".concat(f," (").concat(f.codePointAt(0),")"))(),i[l]=o,o+=vq)}s[0]=o,s[1]=a}function vP(t,e,n,r,i){const s=Array.from(t),o=s.length,a=new Array(o),l=new Array(o),f=new Array(o),d=(n==="break-word"||n==="break-all")&&isFinite(r)&&r>0,g=[0,0],y=[0,0];let b=0,E=0,S=0;for(let M=0;M<=o;M++){const C=s[M];if((C===`
`||M===o)&&(S=M),S>E){const P=d?Tq(s,n,r,i,E,S):_q;for(let I=0;I<=P.length;I++){const L=I===0?E:P[I-1],F=I<P.length?P[I]:S;Sq(s,L,F,i,a,y);for(let z=L;z<F;z++)l[z]=b+y[1]/2,f[z]=y[0];b=b+y[1]*e,g[0]=Math.max(g[0],y[0])}E=S}C===`
`&&(a[E]=0,l[E]=0,f[E]=0,E++)}return g[1]=b,{x:a,y:l,rowWidth:f,size:g}}function xq({value:t,length:e,stride:n,offset:r,startIndices:i,characterSet:s}){const o=t.BYTES_PER_ELEMENT,a=n?n/o:1,l=r?r/o:0,f=i[e]||Math.ceil((t.length-l)/a),d=s&&new Set,g=new Array(e);let y=t;if(a>1||l>0){const b=t.constructor;y=new b(f);for(let E=0;E<f;E++)y[E]=t[E*a+l]}for(let b=0;b<e;b++){const E=i[b],S=i[b+1]||f,M=y.subarray(E,S);g[b]=String.fromCodePoint.apply(null,M),d&&M.forEach(d.add,d)}if(d)for(const b of d)s.add(String.fromCodePoint(b));return{texts:g,characterCount:f}}class mD{constructor(e=5){T(this,"limit",void 0),T(this,"_cache",{}),T(this,"_order",[]),this.limit=e}get(e){const n=this._cache[e];return n&&(this._deleteOrder(e),this._appendOrder(e)),n}set(e,n){this._cache[e]?(this.delete(e),this._cache[e]=n,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=n,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const n=this._order.indexOf(e);n>=0&&this._order.splice(n,1)}_appendOrder(e){this._order.push(e)}}function Cq(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}const Ef={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:Cq(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},_P=1024,Pq=.9,bP=1.2,yD=3;let Eg=new mD(yD);function Mq(t,e){let n;typeof e=="string"?n=new Set(Array.from(e)):n=new Set(e);const r=Eg.get(t);if(!r)return n;for(const i in r.mapping)n.has(i)&&n.delete(i);return n}function Iq(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function wP(t,e,n,r){t.font="".concat(r," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}function Bq(t){je.assert(Number.isFinite(t)&&t>=yD,"Invalid cache limit"),Eg=new mD(t)}class Lq{constructor(){T(this,"props",{...Ef}),T(this,"_key",void 0),T(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return bP}setProps(e={}){Object.assign(this.props,e);const n=this._key;this._key=this._getKey();const r=Mq(this._key,this.props.characterSet),i=Eg.get(this._key);if(i&&r.size===0){this._key!==n&&(this._atlas=i);return}const s=this._generateFontAtlas(this._key,r,i);this._atlas=s,Eg.set(this._key,s)}_generateFontAtlas(e,n,r){const{fontFamily:i,fontWeight:s,fontSize:o,buffer:a,sdf:l,radius:f,cutoff:d}=this.props;let g=r&&r.data;g||(g=document.createElement("canvas"),g.width=_P);const y=g.getContext("2d");wP(y,i,o,s);const{mapping:b,canvasHeight:E,xOffset:S,yOffset:M}=wq({getFontWidth:C=>y.measureText(C).width,fontHeight:o*bP,buffer:a,characterSet:n,maxCanvasWidth:_P,...r&&{mapping:r.mapping,xOffset:r.xOffset,yOffset:r.yOffset}});if(g.height!==E){const C=y.getImageData(0,0,g.width,g.height);g.height=E,y.putImageData(C,0,0)}if(wP(y,i,o,s),l){const C=new Nw.exports(o,a,f,d,i,s),P=y.getImageData(0,0,C.size,C.size);for(const I of n)Iq(C.draw(I),P),y.putImageData(P,b[I].x-a,b[I].y+a)}else for(const C of n)y.fillText(C,b[C].x,b[C].y+o*Pq);return{xOffset:S,yOffset:M,mapping:b,data:g,width:g.width,height:g.height}}_getKey(){const{fontFamily:e,fontWeight:n,fontSize:r,buffer:i,sdf:s,radius:o,cutoff:a}=this.props;return s?"".concat(e," ").concat(n," ").concat(r," ").concat(i," ").concat(o," ").concat(a):"".concat(e," ").concat(n," ").concat(r," ").concat(i)}}const Rq=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;

  // convert size in meters to pixels, then scaled and clamp

  // project meters to pixels and clamp to limits
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,Oq=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,Dq={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class Uw extends Kr{constructor(...e){super(...e),T(this,"state",void 0)}getShaders(){return super.getShaders({vs:Rq,fs:Oq,modules:[Ys,qs]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:n}=e;if(n.extensionsChanged){var r;const{gl:i}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:n,sizeScale:r,sizeUnits:i,sizeMinPixels:s,sizeMaxPixels:o,getLineWidth:a}=this.props;let{padding:l}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),this.state.model.setUniforms(e).setUniforms({billboard:n,stroked:Boolean(a),padding:l,sizeUnits:gs[i],sizeScale:r,sizeMinPixels:s,sizeMaxPixels:o}).draw()}_getModel(e){const n=[0,0,1,0,1,1,0,1];return new Xr(e,{...this.getShaders(),id:this.props.id,geometry:new Di({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0})}}T(Uw,"defaultProps",Dq);T(Uw,"layerName","TextBackgroundLayer");const EP={start:1,middle:0,end:-1},TP={top:1,center:0,bottom:-1},Rv=[0,0,0,255],Fq=1,kq={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:Rv},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Ef.characterSet},fontFamily:Ef.fontFamily,fontWeight:Ef.fontWeight,lineHeight:Fq,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:Rv},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:Rv},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class Gw extends Fo{constructor(...e){super(...e),T(this,"state",void 0),T(this,"getBoundingRect",(n,r)=>{const i=this.state.fontAtlasManager.mapping,s=this.state.getText,{wordBreak:o,maxWidth:a,lineHeight:l,getTextAnchor:f,getAlignmentBaseline:d}=this.props,g=s(n,r)||"",{size:[y,b]}=vP(g,l,o,a,i),E=EP[typeof f=="function"?f(n,r):f],S=TP[typeof d=="function"?d(n,r):d];return[(E-1)*y/2,(S-1)*b/2,y,b]}),T(this,"getIconOffsets",(n,r)=>{const i=this.state.fontAtlasManager.mapping,s=this.state.getText,{wordBreak:o,maxWidth:a,lineHeight:l,getTextAnchor:f,getAlignmentBaseline:d}=this.props,g=s(n,r)||"",{x:y,y:b,rowWidth:E,size:[S,M]}=vP(g,l,o,a,i),C=EP[typeof f=="function"?f(n,r):f],P=TP[typeof d=="function"?d(n,r):d],I=y.length,L=new Array(I*2);let F=0;for(let z=0;z<I;z++){const X=(1-C)*(S-E[z])/2;L[F++]=(C-1)*S/2+X+y[z],L[F++]=(P-1)*M/2+b[z]}return L})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new Lq}}updateState(e){const{props:n,oldProps:r,changeFlags:i}=e;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||n.lineHeight!==r.lineHeight||n.wordBreak!==r.wordBreak||n.maxWidth!==r.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:n,fontWeight:r}=this.props,{fontAtlasManager:i,characterSet:s}=this.state,o={...e,characterSet:s,fontFamily:n,fontWeight:r};if(!i.mapping)return i.setProps(o),!0;for(const a in o)if(o[a]!==i.props[a])return i.setProps(o),!0;return!1}_updateText(){var e;const{data:n,characterSet:r}=this.props,i=(e=n.attributes)===null||e===void 0?void 0:e.getText;let{getText:s}=this.props,o=n.startIndices,a;const l=r==="auto"&&new Set;if(i&&o){const{texts:f,characterCount:d}=xq({...ArrayBuffer.isView(i)?{value:i}:i,length:n.length,startIndices:o,characterSet:l});a=d,s=(g,{index:y})=>f[y]}else{const{iterable:f,objectInfo:d}=Oa(n);o=[0],a=0;for(const g of f){d.index++;const y=Array.from(s(g,d)||"");l&&y.forEach(l.add,l),a+=y.length,o.push(a)}}this.setState({getText:s,startIndices:o,numInstances:a,characterSet:l||r})}renderLayers(){const{startIndices:e,numInstances:n,getText:r,fontAtlasManager:{scale:i,texture:s,mapping:o},styleVersion:a}=this.state,{data:l,_dataDiff:f,getPosition:d,getColor:g,getSize:y,getAngle:b,getPixelOffset:E,getBackgroundColor:S,getBorderColor:M,getBorderWidth:C,backgroundPadding:P,background:I,billboard:L,fontSettings:F,outlineWidth:z,outlineColor:X,sizeScale:Y,sizeUnits:Q,sizeMinPixels:N,sizeMaxPixels:k,transitions:te,updateTriggers:oe}=this.props,ae=this.getSubLayerClass("characters",kw),Re=this.getSubLayerClass("background",Uw);return[I&&new Re({getFillColor:S,getLineColor:M,getLineWidth:C,padding:P,getPosition:d,getSize:y,getAngle:b,getPixelOffset:E,billboard:L,sizeScale:Y/this.state.fontAtlasManager.props.fontSize,sizeUnits:Q,sizeMinPixels:N,sizeMaxPixels:k,transitions:te&&{getPosition:te.getPosition,getAngle:te.getAngle,getSize:te.getSize,getFillColor:te.getBackgroundColor,getLineColor:te.getBorderColor,getLineWidth:te.getBorderWidth,getPixelOffset:te.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:oe.getPosition,getAngle:oe.getAngle,getSize:oe.getSize,getFillColor:oe.getBackgroundColor,getLineColor:oe.getBorderColor,getLineWidth:oe.getBorderWidth,getPixelOffset:oe.getPixelOffset,getBoundingRect:{getText:oe.getText,getTextAnchor:oe.getTextAnchor,getAlignmentBaseline:oe.getAlignmentBaseline,styleVersion:a}}}),{data:l.attributes&&l.attributes.background?{length:l.length,attributes:l.attributes.background}:l,_dataDiff:f,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new ae({sdf:F.sdf,smoothing:Number.isFinite(F.smoothing)?F.smoothing:Ef.smoothing,outlineWidth:z,outlineColor:X,iconAtlas:s,iconMapping:o,getPosition:d,getColor:g,getSize:y,getAngle:b,getPixelOffset:E,billboard:L,sizeScale:Y*i,sizeUnits:Q,sizeMinPixels:N*i,sizeMaxPixels:k*i,transitions:te&&{getPosition:te.getPosition,getAngle:te.getAngle,getColor:te.getColor,getSize:te.getSize,getPixelOffset:te.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:oe.getText,getPosition:oe.getPosition,getAngle:oe.getAngle,getColor:oe.getColor,getSize:oe.getSize,getPixelOffset:oe.getPixelOffset,getIconOffsets:{getText:oe.getText,getTextAnchor:oe.getTextAnchor,getAlignmentBaseline:oe.getAlignmentBaseline,styleVersion:a}}}),{data:l,_dataDiff:f,startIndices:e,numInstances:n,getIconOffsets:this.getIconOffsets,getIcon:r})]}static set fontAtlasCacheLimit(e){Bq(e)}}T(Gw,"defaultProps",kq);T(Gw,"layerName","TextLayer");const _p={circle:{type:Lw,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:Pm,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:Gw,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},bp={type:Qh,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},s2={type:Lm,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function kA({type:t,props:e}){const n={};for(const r in e)n[r]=t.defaultProps[e[r]];return n}function Ov(t,e){const{transitions:n,updateTriggers:r}=t.props,i={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(const s in e){const o=e[s];let a=t.props[s];s.startsWith("get")&&(a=t.getSubLayerAccessor(a),i.updateTriggers[o]=r[s],n&&(i.transitions[o]=n[s])),i[o]=a}return i}function Nq(t){if(Array.isArray(t))return t;switch(je.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return je.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}function SP(t,e,n={}){const r={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:s=t.length}=n;for(let o=i;o<s;o++){const a=t[o];je.assert(a&&a.geometry,"GeoJSON does not have geometry");const{geometry:l}=a;if(l.type==="GeometryCollection"){je.assert(Array.isArray(l.geometries),"GeoJSON does not have geometries array");const{geometries:f}=l;for(let d=0;d<f.length;d++){const g=f[d];xP(g,r,e,a,o)}}else xP(l,r,e,a,o)}return r}function xP(t,e,n,r,i){const{type:s,coordinates:o}=t,{pointFeatures:a,lineFeatures:l,polygonFeatures:f,polygonOutlineFeatures:d}=e;if(!Gq(s,o)){je.warn("".concat(s," coordinates are malformed"))();return}switch(s){case"Point":a.push(n({geometry:t},r,i));break;case"MultiPoint":o.forEach(g=>{a.push(n({geometry:{type:"Point",coordinates:g}},r,i))});break;case"LineString":l.push(n({geometry:t},r,i));break;case"MultiLineString":o.forEach(g=>{l.push(n({geometry:{type:"LineString",coordinates:g}},r,i))});break;case"Polygon":f.push(n({geometry:t},r,i)),o.forEach(g=>{d.push(n({geometry:{type:"LineString",coordinates:g}},r,i))});break;case"MultiPolygon":o.forEach(g=>{f.push(n({geometry:{type:"Polygon",coordinates:g}},r,i)),g.forEach(y=>{d.push(n({geometry:{type:"LineString",coordinates:y}},r,i))})});break}}const Uq={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function Gq(t,e){let n=Uq[t];for(je.assert(n,"Unknown GeoJSON type ".concat(t));e&&--n>0;)e=e[0];return e&&Number.isFinite(e[0])}function vD(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function T0(t){return t.geometry.coordinates}function zq(t,e){const n=vD(),{pointFeatures:r,lineFeatures:i,polygonFeatures:s,polygonOutlineFeatures:o}=t;return n.points.data=r,n.points._dataDiff=e.pointFeatures&&(()=>e.pointFeatures),n.points.getPosition=T0,n.lines.data=i,n.lines._dataDiff=e.lineFeatures&&(()=>e.lineFeatures),n.lines.getPath=T0,n.polygons.data=s,n.polygons._dataDiff=e.polygonFeatures&&(()=>e.polygonFeatures),n.polygons.getPolygon=T0,n.polygonsOutline.data=o,n.polygonsOutline._dataDiff=e.polygonOutlineFeatures&&(()=>e.polygonOutlineFeatures),n.polygonsOutline.getPath=T0,n}function Vq(t,e){const n=vD(),{points:r,lines:i,polygons:s}=t,o=dq(t,e);return n.points.data={length:r.positions.value.length/r.positions.size,attributes:{...r.attributes,getPosition:r.positions,instancePickingColors:{size:3,value:o.points}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},n.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:3,value:o.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},n.lines._pathType="open",n.polygons.data={length:s.polygonIndices.value.length-1,startIndices:s.polygonIndices.value,attributes:{...s.attributes,getPolygon:s.positions,pickingColors:{size:3,value:o.polygons}},properties:s.properties,numericProps:s.numericProps,featureIds:s.featureIds},n.polygons._normalize=!1,s.triangles&&(n.polygons.data.attributes.indices=s.triangles.value),n.polygonsOutline.data={length:s.primitivePolygonIndices.value.length-1,startIndices:s.primitivePolygonIndices.value,attributes:{...s.attributes,getPath:s.positions,instancePickingColors:{size:3,value:o.polygons}},properties:s.properties,numericProps:s.numericProps,featureIds:s.featureIds},n.polygonsOutline._pathType="open",n}const jq=["points","linestrings","polygons"],Hq={...kA(_p.circle),...kA(_p.icon),...kA(_p.text),...kA(bp),...kA(s2),stroked:!0,filled:!0,extruded:!1,wireframe:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:t=>t.properties.icon},getText:{type:"accessor",value:t=>t.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class Xh extends Fo{initializeState(){this.state={layerProps:{},features:{}}}updateState({props:e,changeFlags:n}){if(!n.dataChanged)return;const{data:r}=this.props,i=r&&"points"in r&&"polygons"in r&&"lines"in r;this.setState({binary:i}),i?this._updateStateBinary({props:e,changeFlags:n}):this._updateStateJSON({props:e,changeFlags:n})}_updateStateBinary({props:e,changeFlags:n}){const r=Vq(e.data,this.encodePickingColor);this.setState({layerProps:r})}_updateStateJSON({props:e,changeFlags:n}){const r=Nq(e.data),i=this.getSubLayerRow.bind(this);let s={};const o={};if(Array.isArray(n.dataChanged)){const l=this.state.features;for(const f in l)s[f]=l[f].slice(),o[f]=[];for(const f of n.dataChanged){const d=SP(r,i,f);for(const g in l)o[g].push(hD({data:s[g],getIndex:y=>y.__source.index,dataRange:f,replace:d[g]}))}}else s=SP(r,i);const a=zq(s,o);this.setState({features:s,featuresDiff:o,layerProps:a})}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r,sourceLayer:i}=n;return n.featureType=jq.find(s=>i.id.startsWith("".concat(this.id,"-").concat(s,"-"))),r>=0&&i.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(n.index=this.props.data.points.globalFeatureIds.value[r]),n}_updateAutoHighlight(e){const n="".concat(this.id,"-points-"),r=e.featureType==="points";for(const i of this.getSubLayers())i.id.startsWith(n)===r&&i.updateAutoHighlight(e)}_renderPolygonLayer(){const{extruded:e,wireframe:n}=this.props,{layerProps:r}=this.state,i="polygons-fill",s=this.shouldRenderSubLayer(i,r.polygons.data)&&this.getSubLayerClass(i,s2.type);if(s){const o=Ov(this,s2.props),a=e&&n;return a||delete o.getLineColor,o.updateTriggers.lineColors=a,new s(o,this.getSubLayerProps({id:i,updateTriggers:o.updateTriggers}),r.polygons)}return null}_renderLineLayers(){const{extruded:e,stroked:n}=this.props,{layerProps:r}=this.state,i="polygons-stroke",s="linestrings",o=!e&&n&&this.shouldRenderSubLayer(i,r.polygonsOutline.data)&&this.getSubLayerClass(i,bp.type),a=this.shouldRenderSubLayer(s,r.lines.data)&&this.getSubLayerClass(s,bp.type);if(o||a){const l=Ov(this,bp.props);return[o&&new o(l,this.getSubLayerProps({id:i,updateTriggers:l.updateTriggers}),r.polygonsOutline),a&&new a(l,this.getSubLayerProps({id:s,updateTriggers:l.updateTriggers}),r.lines)]}return null}_renderPointLayers(){const{pointType:e}=this.props,{layerProps:n,binary:r}=this.state;let{highlightedObjectIndex:i}=this.props;!r&&Number.isFinite(i)&&(i=n.points.data.findIndex(a=>a.__source.index===i));const s=new Set(e.split("+")),o=[];for(const a of s){const l="points-".concat(a),f=_p[a],d=f&&this.shouldRenderSubLayer(l,n.points.data)&&this.getSubLayerClass(l,f.type);if(d){const g=Ov(this,f.props);let y=n.points;if(a==="text"&&r){const{instancePickingColors:b,...E}=y.data.attributes;y={...y,data:{...y.data,attributes:E}}}o.push(new d(g,this.getSubLayerProps({id:l,updateTriggers:g.updateTriggers,highlightedObjectIndex:i}),y))}}return o}renderLayers(){const{extruded:e}=this.props,n=this._renderPolygonLayer(),r=this._renderLineLayers(),i=this._renderPointLayers();return[!e&&n,r,i,e&&n]}getSubLayerAccessor(e){const{binary:n}=this.state;return!n||typeof e!="function"?super.getSubLayerAccessor(e):(r,i)=>{const{data:s,index:o}=i,a=fq(s,o);return e(a,i)}}}T(Xh,"layerName","GeoJsonLayer");T(Xh,"defaultProps",Hq);const Wq={getHeight:{type:"accessor",value:0},greatCircle:!0};class _D extends Iw{}T(_D,"layerName","GreatCircleLayer");T(_D,"defaultProps",Wq);const Qq={...$u.defaultProps};class Xu extends Fo{indexToBounds(){return null}renderLayers(){const{elevationScale:e,extruded:n,wireframe:r,filled:i,stroked:s,lineWidthUnits:o,lineWidthScale:a,lineWidthMinPixels:l,lineWidthMaxPixels:f,lineJointRounded:d,lineMiterLimit:g,lineDashJustified:y,getElevation:b,getFillColor:E,getLineColor:S,getLineWidth:M}=this.props,{updateTriggers:C,material:P,transitions:I}=this.props,L=this.getSubLayerClass("cell",$u);return new L({filled:i,wireframe:r,extruded:n,elevationScale:e,stroked:s,lineWidthUnits:o,lineWidthScale:a,lineWidthMinPixels:l,lineWidthMaxPixels:f,lineJointRounded:d,lineMiterLimit:g,lineDashJustified:y,material:P,transitions:I,getElevation:b,getFillColor:E,getLineColor:S,getLineWidth:M},this.getSubLayerProps({id:"cell",updateTriggers:C&&{getElevation:C.getElevation,getFillColor:C.getFillColor,getLineColor:C.getLineColor,getLineWidth:C.getLineWidth}}),this.indexToBounds())}}T(Xu,"layerName","GeoCellLayer");T(Xu,"defaultProps",Qq);function $q(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var bD={exports:{}};(function(t){/**
 * @license long.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/long.js for details
 */(function(e,n){typeof $q=="function"&&!0&&t&&t.exports?t.exports=n():(e.dcodeIO=e.dcodeIO||{}).Long=n()})(s6,function(){function e(N,k,te){this.low=N|0,this.high=k|0,this.unsigned=!!te}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1});function n(N){return(N&&N.__isLong__)===!0}e.isLong=n;var r={},i={};function s(N,k){var te,oe,ae;return k?(N>>>=0,(ae=0<=N&&N<256)&&(oe=i[N],oe)?oe:(te=a(N,(N|0)<0?-1:0,!0),ae&&(i[N]=te),te)):(N|=0,(ae=-128<=N&&N<128)&&(oe=r[N],oe)?oe:(te=a(N,N<0?-1:0,!1),ae&&(r[N]=te),te))}e.fromInt=s;function o(N,k){if(isNaN(N)||!isFinite(N))return k?P:C;if(k){if(N<0)return P;if(N>=E)return X}else{if(N<=-S)return Y;if(N+1>=S)return z}return N<0?o(-N,k).neg():a(N%b|0,N/b|0,k)}e.fromNumber=o;function a(N,k,te){return new e(N,k,te)}e.fromBits=a;var l=Math.pow;function f(N,k,te){if(N.length===0)throw Error("empty string");if(N==="NaN"||N==="Infinity"||N==="+Infinity"||N==="-Infinity")return C;if(typeof k=="number"?(te=k,k=!1):k=!!k,te=te||10,te<2||36<te)throw RangeError("radix");var oe;if((oe=N.indexOf("-"))>0)throw Error("interior hyphen");if(oe===0)return f(N.substring(1),k,te).neg();for(var ae=o(l(te,8)),Re=C,Oe=0;Oe<N.length;Oe+=8){var He=Math.min(8,N.length-Oe),le=parseInt(N.substring(Oe,Oe+He),te);if(He<8){var be=o(l(te,He));Re=Re.mul(be).add(o(le))}else Re=Re.mul(ae),Re=Re.add(o(le))}return Re.unsigned=k,Re}e.fromString=f;function d(N){return N instanceof e?N:typeof N=="number"?o(N):typeof N=="string"?f(N):a(N.low,N.high,N.unsigned)}e.fromValue=d;var g=1<<16,y=1<<24,b=g*g,E=b*b,S=E/2,M=s(y),C=s(0);e.ZERO=C;var P=s(0,!0);e.UZERO=P;var I=s(1);e.ONE=I;var L=s(1,!0);e.UONE=L;var F=s(-1);e.NEG_ONE=F;var z=a(-1,2147483647,!1);e.MAX_VALUE=z;var X=a(-1,-1,!0);e.MAX_UNSIGNED_VALUE=X;var Y=a(0,-2147483648,!1);e.MIN_VALUE=Y;var Q=e.prototype;return Q.toInt=function(){return this.unsigned?this.low>>>0:this.low},Q.toNumber=function(){return this.unsigned?(this.high>>>0)*b+(this.low>>>0):this.high*b+(this.low>>>0)},Q.toString=function(k){if(k=k||10,k<2||36<k)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Y)){var te=o(k),oe=this.div(te),ae=oe.mul(te).sub(this);return oe.toString(k)+ae.toInt().toString(k)}else return"-"+this.neg().toString(k);for(var Re=o(l(k,6),this.unsigned),Oe=this,He="";;){var le=Oe.div(Re),be=Oe.sub(le.mul(Re)).toInt()>>>0,Pe=be.toString(k);if(Oe=le,Oe.isZero())return Pe+He;for(;Pe.length<6;)Pe="0"+Pe;He=""+Pe+He}},Q.getHighBits=function(){return this.high},Q.getHighBitsUnsigned=function(){return this.high>>>0},Q.getLowBits=function(){return this.low},Q.getLowBitsUnsigned=function(){return this.low>>>0},Q.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Y)?64:this.neg().getNumBitsAbs();for(var k=this.high!=0?this.high:this.low,te=31;te>0&&(k&1<<te)==0;te--);return this.high!=0?te+33:te+1},Q.isZero=function(){return this.high===0&&this.low===0},Q.isNegative=function(){return!this.unsigned&&this.high<0},Q.isPositive=function(){return this.unsigned||this.high>=0},Q.isOdd=function(){return(this.low&1)===1},Q.isEven=function(){return(this.low&1)===0},Q.equals=function(k){return n(k)||(k=d(k)),this.unsigned!==k.unsigned&&this.high>>>31===1&&k.high>>>31===1?!1:this.high===k.high&&this.low===k.low},Q.eq=Q.equals,Q.notEquals=function(k){return!this.eq(k)},Q.neq=Q.notEquals,Q.lessThan=function(k){return this.comp(k)<0},Q.lt=Q.lessThan,Q.lessThanOrEqual=function(k){return this.comp(k)<=0},Q.lte=Q.lessThanOrEqual,Q.greaterThan=function(k){return this.comp(k)>0},Q.gt=Q.greaterThan,Q.greaterThanOrEqual=function(k){return this.comp(k)>=0},Q.gte=Q.greaterThanOrEqual,Q.compare=function(k){if(n(k)||(k=d(k)),this.eq(k))return 0;var te=this.isNegative(),oe=k.isNegative();return te&&!oe?-1:!te&&oe?1:this.unsigned?k.high>>>0>this.high>>>0||k.high===this.high&&k.low>>>0>this.low>>>0?-1:1:this.sub(k).isNegative()?-1:1},Q.comp=Q.compare,Q.negate=function(){return!this.unsigned&&this.eq(Y)?Y:this.not().add(I)},Q.neg=Q.negate,Q.add=function(k){n(k)||(k=d(k));var te=this.high>>>16,oe=this.high&65535,ae=this.low>>>16,Re=this.low&65535,Oe=k.high>>>16,He=k.high&65535,le=k.low>>>16,be=k.low&65535,Pe=0,Fe=0,Ge=0,lt=0;return lt+=Re+be,Ge+=lt>>>16,lt&=65535,Ge+=ae+le,Fe+=Ge>>>16,Ge&=65535,Fe+=oe+He,Pe+=Fe>>>16,Fe&=65535,Pe+=te+Oe,Pe&=65535,a(Ge<<16|lt,Pe<<16|Fe,this.unsigned)},Q.subtract=function(k){return n(k)||(k=d(k)),this.add(k.neg())},Q.sub=Q.subtract,Q.multiply=function(k){if(this.isZero()||(n(k)||(k=d(k)),k.isZero()))return C;if(this.eq(Y))return k.isOdd()?Y:C;if(k.eq(Y))return this.isOdd()?Y:C;if(this.isNegative())return k.isNegative()?this.neg().mul(k.neg()):this.neg().mul(k).neg();if(k.isNegative())return this.mul(k.neg()).neg();if(this.lt(M)&&k.lt(M))return o(this.toNumber()*k.toNumber(),this.unsigned);var te=this.high>>>16,oe=this.high&65535,ae=this.low>>>16,Re=this.low&65535,Oe=k.high>>>16,He=k.high&65535,le=k.low>>>16,be=k.low&65535,Pe=0,Fe=0,Ge=0,lt=0;return lt+=Re*be,Ge+=lt>>>16,lt&=65535,Ge+=ae*be,Fe+=Ge>>>16,Ge&=65535,Ge+=Re*le,Fe+=Ge>>>16,Ge&=65535,Fe+=oe*be,Pe+=Fe>>>16,Fe&=65535,Fe+=ae*le,Pe+=Fe>>>16,Fe&=65535,Fe+=Re*He,Pe+=Fe>>>16,Fe&=65535,Pe+=te*be+oe*le+ae*He+Re*Oe,Pe&=65535,a(Ge<<16|lt,Pe<<16|Fe,this.unsigned)},Q.mul=Q.multiply,Q.divide=function(k){if(n(k)||(k=d(k)),k.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?P:C;var te,oe,ae;if(this.unsigned){if(k.unsigned||(k=k.toUnsigned()),k.gt(this))return P;if(k.gt(this.shru(1)))return L;ae=P}else{if(this.eq(Y)){if(k.eq(I)||k.eq(F))return Y;if(k.eq(Y))return I;var Re=this.shr(1);return te=Re.div(k).shl(1),te.eq(C)?k.isNegative()?I:F:(oe=this.sub(k.mul(te)),ae=te.add(oe.div(k)),ae)}else if(k.eq(Y))return this.unsigned?P:C;if(this.isNegative())return k.isNegative()?this.neg().div(k.neg()):this.neg().div(k).neg();if(k.isNegative())return this.div(k.neg()).neg();ae=C}for(oe=this;oe.gte(k);){te=Math.max(1,Math.floor(oe.toNumber()/k.toNumber()));for(var Oe=Math.ceil(Math.log(te)/Math.LN2),He=Oe<=48?1:l(2,Oe-48),le=o(te),be=le.mul(k);be.isNegative()||be.gt(oe);)te-=He,le=o(te,this.unsigned),be=le.mul(k);le.isZero()&&(le=I),ae=ae.add(le),oe=oe.sub(be)}return ae},Q.div=Q.divide,Q.modulo=function(k){return n(k)||(k=d(k)),this.sub(this.div(k).mul(k))},Q.mod=Q.modulo,Q.not=function(){return a(~this.low,~this.high,this.unsigned)},Q.and=function(k){return n(k)||(k=d(k)),a(this.low&k.low,this.high&k.high,this.unsigned)},Q.or=function(k){return n(k)||(k=d(k)),a(this.low|k.low,this.high|k.high,this.unsigned)},Q.xor=function(k){return n(k)||(k=d(k)),a(this.low^k.low,this.high^k.high,this.unsigned)},Q.shiftLeft=function(k){return n(k)&&(k=k.toInt()),(k&=63)===0?this:k<32?a(this.low<<k,this.high<<k|this.low>>>32-k,this.unsigned):a(0,this.low<<k-32,this.unsigned)},Q.shl=Q.shiftLeft,Q.shiftRight=function(k){return n(k)&&(k=k.toInt()),(k&=63)===0?this:k<32?a(this.low>>>k|this.high<<32-k,this.high>>k,this.unsigned):a(this.high>>k-32,this.high>=0?0:-1,this.unsigned)},Q.shr=Q.shiftRight,Q.shiftRightUnsigned=function(k){if(n(k)&&(k=k.toInt()),k&=63,k===0)return this;var te=this.high;if(k<32){var oe=this.low;return a(oe>>>k|te<<32-k,te>>>k,this.unsigned)}else return k===32?a(te,0,this.unsigned):a(te>>>k-32,0,this.unsigned)},Q.shru=Q.shiftRightUnsigned,Q.toSigned=function(){return this.unsigned?a(this.low,this.high,!1):this},Q.toUnsigned=function(){return this.unsigned?this:a(this.low,this.high,!0)},Q.toBytes=function(N){return N?this.toBytesLE():this.toBytesBE()},Q.toBytesLE=function(){var N=this.high,k=this.low;return[k&255,k>>>8&255,k>>>16&255,k>>>24&255,N&255,N>>>8&255,N>>>16&255,N>>>24&255]},Q.toBytesBE=function(){var N=this.high,k=this.low;return[N>>>24&255,N>>>16&255,N>>>8&255,N&255,k>>>24&255,k>>>16&255,k>>>8&255,k&255]},e})})(bD);const wp=bD.exports,Xq=3,Jq=30,Kq=2*Jq+1,CP=180/Math.PI;function Yq(t,e,n){const r=1<<e;return[(t[0]+n[0])/r,(t[1]+n[1])/r]}function PP(t){return t>=.5?1/3*(4*t*t-1):1/3*(1-4*(1-t)*(1-t))}function qq(t){return[PP(t[0]),PP(t[1])]}function Zq(t,[e,n]){switch(t){case 0:return[1,e,n];case 1:return[-e,1,n];case 2:return[-e,-n,1];case 3:return[-1,-n,-e];case 4:return[n,-1,-e];case 5:return[n,e,-1];default:throw new Error("Invalid face")}}function eZ([t,e,n]){const r=Math.atan2(n,Math.sqrt(t*t+e*e));return[Math.atan2(e,t)*CP,r*CP]}function tZ(t){let e=wp.fromString(t,!0,10).toString(2);for(;e.length<Xq+Kq;)e="0"+e;const n=e.lastIndexOf("1"),r=e.substring(0,3),i=e.substring(3,n),s=i.length/2,o=wp.fromString(r,!0,2).toString(10);let a=wp.fromString(i,!0,2).toString(4);for(;a.length<s;)a="0"+a;return"".concat(o,"/").concat(a)}function nZ(t,e,n,r){if(r===0){n===1&&(e[0]=t-1-e[0],e[1]=t-1-e[1]);const i=e[0];e[0]=e[1],e[1]=i}}function rZ(t){const e=t.split("/"),n=parseInt(e[0],10),r=e[1],i=r.length,s=[0,0];let o;for(let a=i-1;a>=0;a--){o=i-a;const l=r[a];let f=0,d=0;l==="1"?d=1:l==="2"?(f=1,d=1):l==="3"&&(f=1);const g=Math.pow(2,o-1);nZ(g,s,f,d),s[0]+=g*f,s[1]+=g*d}if(n%2===1){const a=s[0];s[0]=s[1],s[1]=a}return{face:n,ij:s,level:o}}function iZ(t){const e=t.padEnd(16,"0");return wp.fromString(e,16)}const sZ=100;function oZ({face:t,ij:e,level:n}){const r=[[0,0],[0,1],[1,1],[1,0],[0,0]],i=Math.max(1,Math.ceil(sZ*Math.pow(2,-n))),s=new Float64Array(4*i*2+2);let o=0,a=0;for(let l=0;l<4;l++){const f=r[l].slice(0),d=r[l+1],g=(d[0]-f[0])/i,y=(d[1]-f[1])/i;for(let b=0;b<i;b++){f[0]+=g,f[1]+=y;const E=Yq(e,n,f),S=qq(E),M=Zq(t,S),C=eZ(M);Math.abs(C[1])>89.999&&(C[0]=a);const P=C[0]-a;C[0]+=P>180?-360:P<-180?360:0,s[o++]=C[0],s[o++]=C[1],a=C[0]}}return s[o++]=s[0],s[o++]=s[1],s}function aZ(t){if(typeof t=="string"){if(t.indexOf("/")>0)return t;t=iZ(t)}return tZ(t.toString())}function lZ(t){const e=aZ(t),n=rZ(e);return oZ(n)}const cZ={getS2Token:{type:"accessor",value:t=>t.token}};class wD extends Xu{indexToBounds(){const{data:e,getS2Token:n}=this.props;return{data:e,_normalize:!1,positionFormat:"XY",getPolygon:(r,i)=>lZ(n(r,i))}}}T(wD,"layerName","S2Layer");T(wD,"defaultProps",cZ);const Dv=512;function uZ(t){let e=0,n=0,r=1<<t.length;const i=r/Dv;for(let s=0;s<t.length;s++){r>>=1;const o=parseInt(t[s]);o%2&&(e|=r),o>1&&(n|=r)}return[[e/i,Dv-n/i],[(e+.99)/i,Dv-(n+.99)/i]]}function AZ(t){const[e,n]=uZ(t),[r,i]=Sa(e),[s,o]=Sa(n);return[s,i,s,o,r,o,r,i,s,i]}const fZ={getQuadkey:{type:"accessor",value:t=>t.quadkey}};class ED extends Xu{indexToBounds(){const{data:e,getQuadkey:n}=this.props;return{data:e,_normalize:!1,positionFormat:"XY",getPolygon:(r,i)=>AZ(n(r,i))}}}T(ED,"layerName","QuadkeyLayer");T(ED,"defaultProps",fZ);class hZ{constructor(e){T(this,"index",void 0),T(this,"isVisible",void 0),T(this,"isSelected",void 0),T(this,"parent",void 0),T(this,"children",void 0),T(this,"content",void 0),T(this,"state",void 0),T(this,"layers",void 0),T(this,"id",void 0),T(this,"bbox",void 0),T(this,"zoom",void 0),T(this,"userData",void 0),T(this,"_abortController",void 0),T(this,"_loader",void 0),T(this,"_loaderId",void 0),T(this,"_isLoaded",void 0),T(this,"_isCancelled",void 0),T(this,"_needsReload",void 0),this.index=e,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get data(){return this.isLoading&&this._loader?this._loader.then(()=>this.data):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return Boolean(this._loader)&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const e=this.content?this.content.byteLength:0;return Number.isFinite(e)||je.error("byteLength not defined in tile data")(),e}async _loadData({getData:e,requestScheduler:n,onLoad:r,onError:i}){const{index:s,id:o,bbox:a,userData:l,zoom:f}=this,d=this._loaderId;this._abortController=new AbortController;const{signal:g}=this._abortController,y=await n.scheduleRequest(this,S=>S.isSelected?1:-1);if(!y){this._isCancelled=!0;return}if(this._isCancelled){y.done();return}let b=null,E;try{b=await e({index:s,id:o,bbox:a,userData:l,zoom:f,signal:g})}catch(S){E=S||!0}finally{y.done()}if(d===this._loaderId){if(this._loader=void 0,this.content=b,this._isCancelled&&!b){this._isLoaded=!1;return}this._isLoaded=!0,this._isCancelled=!1,E?i(E,this):r(this)}}loadData(e){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(e),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var e;this.isLoaded||(this._isCancelled=!0,(e=this._abortController)===null||e===void 0||e.abort())}}const hr={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},MP=new q,dZ=new q;class zw{constructor(e=[0,0,0],n=[0,0,0],r){T(this,"center",void 0),T(this,"halfDiagonal",void 0),T(this,"minimum",void 0),T(this,"maximum",void 0),r=r||MP.copy(e).add(n).scale(.5),this.center=new q(r),this.halfDiagonal=new q(n).subtract(this.center),this.minimum=new q(e),this.maximum=new q(n)}clone(){return new zw(this.minimum,this.maximum,this.center)}equals(e){return this===e||Boolean(e)&&this.minimum.equals(e.minimum)&&this.maximum.equals(e.maximum)}transform(e){return this.center.transformAsPoint(e),this.halfDiagonal.transform(e),this.minimum.transform(e),this.maximum.transform(e),this}intersectPlane(e){const{halfDiagonal:n}=this,r=dZ.from(e.normal),i=n.x*Math.abs(r.x)+n.y*Math.abs(r.y)+n.z*Math.abs(r.z),s=this.center.dot(r)+e.distance;return s-i>0?hr.INSIDE:s+i<0?hr.OUTSIDE:hr.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const n=MP.from(e).subtract(this.center),{halfDiagonal:r}=this;let i=0,s;return s=Math.abs(n.x)-r.x,s>0&&(i+=s*s),s=Math.abs(n.y)-r.y,s>0&&(i+=s*s),s=Math.abs(n.z)-r.z,s>0&&(i+=s*s),i}}const NA=new q,IP=new q;class Jh{constructor(e=[0,0,0],n=0){T(this,"center",void 0),T(this,"radius",void 0),this.radius=-0,this.center=new q,this.fromCenterRadius(e,n)}fromCenterRadius(e,n){return this.center.from(e),this.radius=n,this}fromCornerPoints(e,n){return n=NA.from(n),this.center=new q().from(e).add(n).scale(.5),this.radius=this.center.distance(n),this}equals(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new Jh(this.center,this.radius)}union(e){const n=this.center,r=this.radius,i=e.center,s=e.radius,o=NA.copy(i).subtract(n),a=o.magnitude();if(r>=a+s)return this.clone();if(s>=a+r)return e.clone();const l=(r+a+s)*.5;return IP.copy(o).scale((-r+l)/a).add(n),this.center.copy(IP),this.radius=l,this}expand(e){const r=NA.from(e).subtract(this.center).magnitude();return r>this.radius&&(this.radius=r),this}transform(e){this.center.transform(e);const n=W7(NA,e);return this.radius=Math.max(n[0],Math.max(n[1],n[2]))*this.radius,this}distanceSquaredTo(e){const n=this.distanceTo(e);return n*n}distanceTo(e){const r=NA.from(e).subtract(this.center);return Math.max(0,r.len()-this.radius)}intersectPlane(e){const n=this.center,r=this.radius,s=e.normal.dot(n)+e.distance;return s<-r?hr.OUTSIDE:s<r?hr.INTERSECTING:hr.INSIDE}}const pZ=new q,gZ=new q,S0=new q,x0=new q,C0=new q,mZ=new q,yZ=new q,io={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8};class Kh{constructor(e=[0,0,0],n=[0,0,0,0,0,0,0,0,0]){T(this,"center",void 0),T(this,"halfAxes",void 0),this.center=new q().from(e),this.halfAxes=new On(n)}get halfSize(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),r=this.halfAxes.getColumn(2);return[new q(e).len(),new q(n).len(),new q(r).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),r=this.halfAxes.getColumn(2),i=new q(e).normalize(),s=new q(n).normalize(),o=new q(r).normalize();return new qf().fromMatrix3(new On([...i,...s,...o]))}fromCenterHalfSizeQuaternion(e,n,r){const i=new qf(r),s=new On().fromQuaternion(i);return s[0]=s[0]*n[0],s[1]=s[1]*n[0],s[2]=s[2]*n[0],s[3]=s[3]*n[1],s[4]=s[4]*n[1],s[5]=s[5]*n[1],s[6]=s[6]*n[2],s[7]=s[7]*n[2],s[8]=s[8]*n[2],this.center=new q().from(e),this.halfAxes=s,this}clone(){return new Kh(this.center,this.halfAxes)}equals(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new Jh){const n=this.halfAxes,r=n.getColumn(0,S0),i=n.getColumn(1,x0),s=n.getColumn(2,C0),o=pZ.copy(r).add(i).add(s);return e.center.copy(this.center),e.radius=o.magnitude(),e}intersectPlane(e){const n=this.center,r=e.normal,i=this.halfAxes,s=r.x,o=r.y,a=r.z,l=Math.abs(s*i[io.COLUMN0ROW0]+o*i[io.COLUMN0ROW1]+a*i[io.COLUMN0ROW2])+Math.abs(s*i[io.COLUMN1ROW0]+o*i[io.COLUMN1ROW1]+a*i[io.COLUMN1ROW2])+Math.abs(s*i[io.COLUMN2ROW0]+o*i[io.COLUMN2ROW1]+a*i[io.COLUMN2ROW2]),f=r.dot(n)+e.distance;return f<=-l?hr.OUTSIDE:f>=l?hr.INSIDE:hr.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const n=gZ.from(e).subtract(this.center),r=this.halfAxes,i=r.getColumn(0,S0),s=r.getColumn(1,x0),o=r.getColumn(2,C0),a=i.magnitude(),l=s.magnitude(),f=o.magnitude();i.normalize(),s.normalize(),o.normalize();let d=0,g;return g=Math.abs(n.dot(i))-a,g>0&&(d+=g*g),g=Math.abs(n.dot(s))-l,g>0&&(d+=g*g),g=Math.abs(n.dot(o))-f,g>0&&(d+=g*g),d}computePlaneDistances(e,n,r=[-0,-0]){let i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;const o=this.center,a=this.halfAxes,l=a.getColumn(0,S0),f=a.getColumn(1,x0),d=a.getColumn(2,C0),g=mZ.copy(l).add(f).add(d).add(o),y=yZ.copy(g).subtract(e);let b=n.dot(y);return i=Math.min(b,i),s=Math.max(b,s),g.copy(o).add(l).add(f).subtract(d),y.copy(g).subtract(e),b=n.dot(y),i=Math.min(b,i),s=Math.max(b,s),g.copy(o).add(l).subtract(f).add(d),y.copy(g).subtract(e),b=n.dot(y),i=Math.min(b,i),s=Math.max(b,s),g.copy(o).add(l).subtract(f).subtract(d),y.copy(g).subtract(e),b=n.dot(y),i=Math.min(b,i),s=Math.max(b,s),o.copy(g).subtract(l).add(f).add(d),y.copy(g).subtract(e),b=n.dot(y),i=Math.min(b,i),s=Math.max(b,s),o.copy(g).subtract(l).add(f).subtract(d),y.copy(g).subtract(e),b=n.dot(y),i=Math.min(b,i),s=Math.max(b,s),o.copy(g).subtract(l).subtract(f).add(d),y.copy(g).subtract(e),b=n.dot(y),i=Math.min(b,i),s=Math.max(b,s),o.copy(g).subtract(l).subtract(f).subtract(d),y.copy(g).subtract(e),b=n.dot(y),i=Math.min(b,i),s=Math.max(b,s),r[0]=i,r[1]=s,r}transform(e){this.center.transformAsPoint(e);const n=this.halfAxes.getColumn(0,S0);n.transformAsPoint(e);const r=this.halfAxes.getColumn(1,x0);r.transformAsPoint(e);const i=this.halfAxes.getColumn(2,C0);return i.transformAsPoint(e),this.halfAxes=new On([...n,...r,...i]),this}getTransform(){throw new Error("not implemented")}}const BP=new q,LP=new q;class Ci{constructor(e=[0,0,1],n=0){T(this,"normal",void 0),T(this,"distance",void 0),this.normal=new q,this.distance=-0,this.fromNormalDistance(e,n)}fromNormalDistance(e,n){return rs(Number.isFinite(n)),this.normal.from(e).normalize(),this.distance=n,this}fromPointNormal(e,n){e=BP.from(e),this.normal.from(n).normalize();const r=-this.normal.dot(e);return this.distance=r,this}fromCoefficients(e,n,r,i){return this.normal.set(e,n,r),rs(vr(this.normal.len(),1)),this.distance=i,this}clone(){return new Ci(this.normal,this.distance)}equals(e){return vr(this.distance,e.distance)&&vr(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const n=LP.copy(this.normal).transformAsVector(e).normalize(),r=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(r,n)}projectPointOntoPlane(e,n=[0,0,0]){e=BP.from(e);const r=this.getPointDistance(e),i=LP.copy(this.normal).scale(r);return e.subtract(i).to(n)}}const RP=[new q([1,0,0]),new q([0,1,0]),new q([0,0,1])],OP=new q,vZ=new q;new Ci(new q(1,0,0),0);class ui{constructor(e=[]){T(this,"planes",void 0),this.planes=e}fromBoundingSphere(e){this.planes.length=2*RP.length;const n=e.center,r=e.radius;let i=0;for(const s of RP){let o=this.planes[i],a=this.planes[i+1];o||(o=this.planes[i]=new Ci),a||(a=this.planes[i+1]=new Ci);const l=OP.copy(s).scale(-r).add(n);-s.dot(l),o.fromPointNormal(l,s);const f=OP.copy(s).scale(r).add(n),d=vZ.copy(s).negate();-d.dot(f),a.fromPointNormal(f,d),i+=2}return this}computeVisibility(e){let n=hr.INSIDE;for(const r of this.planes)switch(e.intersectPlane(r)){case hr.OUTSIDE:return hr.OUTSIDE;case hr.INTERSECTING:n=hr.INTERSECTING;break}return n}computeVisibilityWithPlaneMask(e,n){if(rs(Number.isFinite(n),"parentPlaneMask is required."),n===ui.MASK_OUTSIDE||n===ui.MASK_INSIDE)return n;let r=ui.MASK_INSIDE;const i=this.planes;for(let s=0;s<this.planes.length;++s){const o=s<31?1<<s:0;if(s<31&&(n&o)===0)continue;const a=i[s],l=e.intersectPlane(a);if(l===hr.OUTSIDE)return ui.MASK_OUTSIDE;l===hr.INTERSECTING&&(r|=o)}return r}}T(ui,"MASK_OUTSIDE",4294967295);T(ui,"MASK_INSIDE",0);T(ui,"MASK_INDETERMINATE",2147483647);new q;new q;new q;new q;new q;new q;new q;new q;new q;new q;new q;new q;new q;new q;new q;new q;new q;const Is=new On,_Z=new On,bZ=new On,P0=new On,DP=new On;function wZ(t,e={}){const n=Zf.EPSILON20,r=10;let i=0,s=0;const o=_Z,a=bZ;o.identity(),a.copy(t);const l=n*EZ(a);for(;s<r&&TZ(a)>l;)SZ(a,P0),DP.copy(P0).transpose(),a.multiplyRight(P0),a.multiplyLeft(DP),o.multiplyRight(P0),++i>2&&(++s,i=0);return e.unitary=o.toTarget(e.unitary),e.diagonal=a.toTarget(e.diagonal),e}function EZ(t){let e=0;for(let n=0;n<9;++n){const r=t[n];e+=r*r}return Math.sqrt(e)}const o2=[1,0,0],a2=[2,2,1];function TZ(t){let e=0;for(let n=0;n<3;++n){const r=t[Is.getElementIndex(a2[n],o2[n])];e+=2*r*r}return Math.sqrt(e)}function SZ(t,e){const n=Zf.EPSILON15;let r=0,i=1;for(let f=0;f<3;++f){const d=Math.abs(t[Is.getElementIndex(a2[f],o2[f])]);d>r&&(i=f,r=d)}const s=o2[i],o=a2[i];let a=1,l=0;if(Math.abs(t[Is.getElementIndex(o,s)])>n){const f=t[Is.getElementIndex(o,o)],d=t[Is.getElementIndex(s,s)],g=t[Is.getElementIndex(o,s)],y=(f-d)/2/g;let b;y<0?b=-1/(-y+Math.sqrt(1+y*y)):b=1/(y+Math.sqrt(1+y*y)),a=1/Math.sqrt(1+b*b),l=b*a}return On.IDENTITY.to(e),e[Is.getElementIndex(s,s)]=e[Is.getElementIndex(o,o)]=a,e[Is.getElementIndex(o,s)]=l,e[Is.getElementIndex(s,o)]=-l,e}const Jo=new q,xZ=new q,CZ=new q,PZ=new q,MZ=new q,IZ=new On,BZ={diagonal:new On,unitary:new On};function LZ(t,e=new Kh){if(!t||t.length===0)return e.halfAxes=new On([0,0,0,0,0,0,0,0,0]),e.center=new q,e;const n=t.length,r=new q(0,0,0);for(const Q of t)r.add(Q);const i=1/n;r.multiplyByScalar(i);let s=0,o=0,a=0,l=0,f=0,d=0;for(const Q of t){const N=Jo.copy(Q).subtract(r);s+=N.x*N.x,o+=N.x*N.y,a+=N.x*N.z,l+=N.y*N.y,f+=N.y*N.z,d+=N.z*N.z}s*=i,o*=i,a*=i,l*=i,f*=i,d*=i;const g=IZ;g[0]=s,g[1]=o,g[2]=a,g[3]=o,g[4]=l,g[5]=f,g[6]=a,g[7]=f,g[8]=d;const{unitary:y}=wZ(g,BZ),b=e.halfAxes.copy(y);let E=b.getColumn(0,CZ),S=b.getColumn(1,PZ),M=b.getColumn(2,MZ),C=-Number.MAX_VALUE,P=-Number.MAX_VALUE,I=-Number.MAX_VALUE,L=Number.MAX_VALUE,F=Number.MAX_VALUE,z=Number.MAX_VALUE;for(const Q of t)Jo.copy(Q),C=Math.max(Jo.dot(E),C),P=Math.max(Jo.dot(S),P),I=Math.max(Jo.dot(M),I),L=Math.min(Jo.dot(E),L),F=Math.min(Jo.dot(S),F),z=Math.min(Jo.dot(M),z);E=E.multiplyByScalar(.5*(L+C)),S=S.multiplyByScalar(.5*(F+P)),M=M.multiplyByScalar(.5*(z+I)),e.center.copy(E).add(S).add(M);const X=xZ.set(C-L,P-F,I-z).multiplyByScalar(.5),Y=new On([X[0],0,0,0,X[1],0,0,0,X[2]]);return e.halfAxes.multiplyRight(Y),e}const Vc=512,FP=3,TD=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],SD=TD.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),RZ=SD.concat([[.25,.5],[.75,.5]]);class jc{constructor(e,n,r){T(this,"x",void 0),T(this,"y",void 0),T(this,"z",void 0),T(this,"childVisible",void 0),T(this,"selected",void 0),T(this,"_children",void 0),this.x=e,this.y=n,this.z=r}get children(){if(!this._children){const e=this.x*2,n=this.y*2,r=this.z+1;this._children=[new jc(e,n,r),new jc(e,n+1,r),new jc(e+1,n,r),new jc(e+1,n+1,r)]}return this._children}update(e){const{viewport:n,cullingVolume:r,elevationBounds:i,minZ:s,maxZ:o,bounds:a,offset:l,project:f}=e,d=this.getBoundingVolume(i,l,f);if(a&&!this.insideBounds(a)||r.computeVisibility(d)<0)return!1;if(!this.childVisible){let{z:y}=this;if(y<o&&y>=s){const b=d.distanceTo(n.cameraPosition)*n.scale/n.height;y+=Math.floor(Math.log2(b))}if(y>=o)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const y of this.children)y.update(e);return!0}getSelected(e=[]){if(this.selected&&e.push(this),this._children)for(const n of this._children)n.getSelected(e);return e}insideBounds([e,n,r,i]){const s=Math.pow(2,this.z),o=Vc/s;return this.x*o<r&&this.y*o<i&&(this.x+1)*o>e&&(this.y+1)*o>n}getBoundingVolume(e,n,r){if(r){const l=this.z<1?RZ:this.z<2?SD:TD,f=[];for(const d of l){const g=c2(this.x+d[0],this.y+d[1],this.z);g[2]=e[0],f.push(r(g)),e[0]!==e[1]&&(g[2]=e[1],f.push(r(g)))}return LZ(f)}const i=Math.pow(2,this.z),s=Vc/i,o=this.x*s+n*Vc,a=Vc-(this.y+1)*s;return new zw([o,a,e[0]],[o+s,a+s,e[1]])}}function OZ(t,e,n,r){const i=t instanceof HO&&t.resolution?t.projectPosition:null,s=Object.values(t.getFrustumPlanes()).map(({normal:b,distance:E})=>new Ci(b.clone().negate(),E)),o=new ui(s),a=t.distanceScales.unitsPerMeter[2],l=n&&n[0]*a||0,f=n&&n[1]*a||0,d=t instanceof Xs&&t.pitch<=60?e:0;if(r){const[b,E,S,M]=r,C=Eu([b,M]),P=Eu([S,E]);r=[C[0],Vc-C[1],P[0],Vc-P[1]]}const g=new jc(0,0,0),y={viewport:t,project:i,cullingVolume:o,elevationBounds:[l,f],minZ:d,maxZ:e,bounds:r,offset:0};if(g.update(y),t instanceof Xs&&t.subViewports&&t.subViewports.length>1){for(y.offset=-1;g.update(y)&&!(--y.offset<-FP););for(y.offset=1;g.update(y)&&!(++y.offset>FP););}return g.getSelected()}const Co=512,DZ=[-1/0,-1/0,1/0,1/0],l2={type:"url",value:null,validate:(t,e)=>e.optional&&t===null||typeof t=="string"||Array.isArray(t)&&t.every(n=>typeof n=="string"),equals:(t,e)=>{if(t===e)return!0;if(!Array.isArray(t)||!Array.isArray(e))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}};function xD(t,e){const n=[e.transformAsPoint([t[0],t[1]]),e.transformAsPoint([t[2],t[1]]),e.transformAsPoint([t[0],t[3]]),e.transformAsPoint([t[2],t[3]])];return[Math.min(...n.map(i=>i[0])),Math.min(...n.map(i=>i[1])),Math.max(...n.map(i=>i[0])),Math.max(...n.map(i=>i[1]))]}function FZ(t){return Math.abs(t.split("").reduce((e,n)=>(e<<5)-e+n.charCodeAt(0)|0,0))}function Tg(t,e){if(!t||!t.length)return null;const{index:n,id:r}=e;if(Array.isArray(t)){const s=FZ(r)%t.length;t=t[s]}let i=t;for(const s of Object.keys(n)){const o=new RegExp("{".concat(s,"}"),"g");i=i.replace(o,String(n[s]))}return Number.isInteger(n.y)&&Number.isInteger(n.z)&&(i=i.replace(/\{-y\}/g,String(Math.pow(2,n.z)-n.y-1))),i}function kZ(t,e,n){let r;if(e&&e.length===2){const[i,s]=e,o=t.getBounds({z:i}),a=t.getBounds({z:s});r=[Math.min(o[0],a[0]),Math.min(o[1],a[1]),Math.max(o[2],a[2]),Math.max(o[3],a[3])]}else r=t.getBounds();return t.isGeospatial?[Math.max(r[0],n[0]),Math.max(r[1],n[1]),Math.min(r[2],n[2]),Math.min(r[3],n[3])]:[Math.max(Math.min(r[0],n[2]),n[0]),Math.max(Math.min(r[1],n[3]),n[1]),Math.min(Math.max(r[2],n[0]),n[2]),Math.min(Math.max(r[3],n[1]),n[3])]}function Sg({viewport:t,z:e,cullRect:n}){const r=n.x-t.x,i=n.y-t.y,{width:s,height:o}=n;if(!Array.isArray(e)){const f={targetZ:e||0},d=t.unproject([r,i],f),g=t.unproject([r+s,i],f),y=t.unproject([r,i+o],f),b=t.unproject([r+s,i+o],f);return[Math.min(d[0],g[0],y[0],b[0]),Math.min(d[1],g[1],y[1],b[1]),Math.max(d[0],g[0],y[0],b[0]),Math.max(d[1],g[1],y[1],b[1])]}const a=Sg({viewport:t,z:e[0],cullRect:n}),l=Sg({viewport:t,z:e[1],cullRect:n});return[Math.min(a[0],l[0]),Math.min(a[1],l[1]),Math.max(a[2],l[2]),Math.max(a[3],l[3])]}function NZ(t,e,n){return n?xD(t,n).map(i=>i*e/Co):t.map(r=>r*e/Co)}function Vw(t,e){return Math.pow(2,t)*Co/e}function c2(t,e,n){const r=Vw(n,Co),i=t/r*360-180,s=Math.PI-2*Math.PI*e/r,o=180/Math.PI*Math.atan(.5*(Math.exp(s)-Math.exp(-s)));return[i,o]}function kP(t,e,n,r){const i=Vw(n,r);return[t/i*Co,e/i*Co]}function UZ(t,e,n,r,i=Co){if(t.isGeospatial){const[f,d]=c2(e,n,r),[g,y]=c2(e+1,n+1,r);return{west:f,north:d,east:g,south:y}}const[s,o]=kP(e,n,r,i),[a,l]=kP(e+1,n+1,r,i);return{left:s,top:o,right:a,bottom:l}}function GZ(t,e,n,r,i){const s=kZ(t,null,r),o=Vw(e,n),[a,l,f,d]=NZ(s,o,i),g=[];for(let y=Math.floor(a);y<f;y++)for(let b=Math.floor(l);b<d;b++)g.push({x:y,y:b,z:e});return g}function zZ({viewport:t,maxZoom:e,minZoom:n,zRange:r,extent:i,tileSize:s=Co,modelMatrix:o,modelMatrixInverse:a,zoomOffset:l=0}){let f=t.isGeospatial?Math.round(t.zoom+Math.log2(Co/s))+l:Math.ceil(t.zoom)+l;if(typeof n=="number"&&Number.isFinite(n)&&f<n){if(!i)return[];f=n}typeof e=="number"&&Number.isFinite(e)&&f>e&&(f=e);let d=i;return o&&a&&i&&!t.isGeospatial&&(d=xD(i,o)),t.isGeospatial?OZ(t,f,r,i):GZ(t,f,s,d||DZ,a)}function VZ(t){return/(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(t)}function jZ(t){return Number.isFinite(t.west)&&Number.isFinite(t.north)&&Number.isFinite(t.east)&&Number.isFinite(t.south)}const NP=1,Rm=2,HZ="never",WZ="no-overlap",jw="best-available",QZ=5,$Z={[jw]:JZ,[WZ]:KZ,[HZ]:()=>{}};class XZ{constructor(e){T(this,"opts",void 0),T(this,"_requestScheduler",void 0),T(this,"_cache",void 0),T(this,"_dirty",void 0),T(this,"_tiles",void 0),T(this,"_cacheByteSize",void 0),T(this,"_viewport",void 0),T(this,"_zRange",void 0),T(this,"_selectedTiles",void 0),T(this,"_frameNumber",void 0),T(this,"_modelMatrix",void 0),T(this,"_modelMatrixInverse",void 0),T(this,"_maxZoom",void 0),T(this,"_minZoom",void 0),T(this,"onTileLoad",void 0),T(this,"_getCullBounds",Vh(Sg)),this.opts=e,this.onTileLoad=n=>{this.opts.onTileLoad(n),this.opts.maxCacheByteSize&&(this._cacheByteSize+=n.byteLength,this._resizeCache())},this._requestScheduler=new HL({maxRequests:e.maxRequests,throttleRequests:e.maxRequests>0}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new $e,this._modelMatrixInverse=new $e,this.setOptions(e)}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return this._selectedTiles!==null&&this._selectedTiles.every(e=>e.isLoaded)}get needsReload(){return this._selectedTiles!==null&&this._selectedTiles.some(e=>e.needsReload)}setOptions(e){Object.assign(this.opts,e),Number.isFinite(e.maxZoom)&&(this._maxZoom=Math.floor(e.maxZoom)),Number.isFinite(e.minZoom)&&(this._minZoom=Math.ceil(e.minZoom))}finalize(){for(const e of this._cache.values())e.isLoading&&e.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const e of this._cache.keys()){const n=this._cache.get(e);!this._selectedTiles||!this._selectedTiles.includes(n)?this._cache.delete(e):n.setNeedsReload()}}update(e,{zRange:n,modelMatrix:r}={}){const i=new $e(r),s=!i.equals(this._modelMatrix);if(!this._viewport||!e.equals(this._viewport)||!vr(this._zRange,n)||s){s&&(this._modelMatrixInverse=i.clone().invert(),this._modelMatrix=i),this._viewport=e,this._zRange=n;const a=this.getTileIndices({viewport:e,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:n,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=a.map(l=>this._getTile(l,!0)),this._dirty&&this._rebuildTree()}else this.needsReload&&(this._selectedTiles=this._selectedTiles.map(a=>this._getTile(a.index,!0)));const o=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),o&&this._frameNumber++,this._frameNumber}isTileVisible(e,n){if(!e.isVisible)return!1;if(n&&this._viewport){const[r,i,s,o]=Sg({viewport:this._viewport,z:this._zRange,cullRect:n}),{bbox:a}=e;if("west"in a)return a.west<s&&a.east>r&&a.south<o&&a.north>i;const l=Math.min(a.top,a.bottom),f=Math.max(a.top,a.bottom);return a.left<s&&a.right>r&&l<o&&f>i}return!0}getTileIndices({viewport:e,maxZoom:n,minZoom:r,zRange:i,modelMatrix:s,modelMatrixInverse:o}){const{tileSize:a,extent:l,zoomOffset:f}=this.opts;return zZ({viewport:e,maxZoom:n,minZoom:r,zRange:i,tileSize:a,extent:l,modelMatrix:s,modelMatrixInverse:o,zoomOffset:f})}getTileId(e){return"".concat(e.x,"-").concat(e.y,"-").concat(e.z)}getTileZoom(e){return e.z}getTileMetadata(e){const{tileSize:n}=this.opts;return{bbox:UZ(this._viewport,e.x,e.y,e.z,n)}}getParentIndex(e){const n=Math.floor(e.x/2),r=Math.floor(e.y/2),i=e.z-1;return{x:n,y:r,z:i}}updateTileStates(){const e=this.opts.refinementStrategy||jw,n=new Array(this._cache.size);let r=0;for(const i of this._cache.values())n[r++]=i.isVisible,i.isSelected=!1,i.isVisible=!1;for(const i of this._selectedTiles)i.isSelected=!0,i.isVisible=!0;(typeof e=="function"?e:$Z[e])(Array.from(this._cache.values())),r=0;for(const i of this._cache.values())if(n[r++]!==i.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:e}=this.opts,n=[];let r=0;for(const i of this._cache.values())i.isLoading&&(r++,!i.isSelected&&!i.isVisible&&n.push(i));for(;e>0&&r>e&&n.length>0;)n.shift().abort(),r--}_rebuildTree(){const{_cache:e}=this;for(const n of e.values())n.parent=null,n.children&&(n.children.length=0);for(const n of e.values()){const r=this._getNearestAncestor(n);n.parent=r,r!=null&&r.children&&r.children.push(n)}}_resizeCache(){const{_cache:e,opts:n}=this,r=n.maxCacheSize||(n.maxCacheByteSize?1/0:QZ*this.selectedTiles.length),i=n.maxCacheByteSize||1/0;if(e.size>r||this._cacheByteSize>i){for(const[o,a]of e)if(a.isVisible||(this._cacheByteSize-=n.maxCacheByteSize?a.byteLength:0,e.delete(o),this.opts.onTileUnload(a)),e.size<=r&&this._cacheByteSize<=i)break;this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((o,a)=>o.zoom-a.zoom),this._dirty=!1)}_getTile(e,n){const r=this.getTileId(e);let i=this._cache.get(r),s=!1;return!i&&n?(i=new hZ(e),Object.assign(i,this.getTileMetadata(i.index)),Object.assign(i,{id:r,zoom:this.getTileZoom(i.index)}),s=!0,this._cache.set(r,i),this._dirty=!0):i&&i.needsReload&&(s=!0),i&&s&&i.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),i}_getNearestAncestor(e){const{_minZoom:n=0}=this;let r=e.index;for(;this.getTileZoom(r)>n;){r=this.getParentIndex(r);const i=this._getTile(r);if(i)return i}return null}}function JZ(t){for(const e of t)e.state=0;for(const e of t)e.isSelected&&!CD(e)&&Hw(e);for(const e of t)e.isVisible=Boolean(e.state&Rm)}function KZ(t){for(const n of t)n.state=0;for(const n of t)n.isSelected&&CD(n);const e=Array.from(t).sort((n,r)=>n.zoom-r.zoom);for(const n of e)if(n.isVisible=Boolean(n.state&Rm),n.children&&(n.isVisible||n.state&NP))for(const r of n.children)r.state=NP;else n.isSelected&&Hw(n)}function CD(t){let e=t;for(;e;){if(e.isLoaded||e.content)return e.state|=Rm,!0;e=e.parent}return!1}function Hw(t){for(const e of t.children)e.isLoaded||e.content?e.state|=Rm:Hw(e)}const YZ={TilesetClass:XZ,data:{type:"data",value:[]},dataComparator:l2.equals,renderSubLayers:{type:"function",value:t=>new Xh(t),compare:!1},getTileData:{type:"function",optional:!0,value:null,compare:!1},onViewportLoad:{type:"function",optional:!0,value:null,compare:!1},onTileLoad:{type:"function",value:t=>{},compare:!1},onTileUnload:{type:"function",value:t=>{},compare:!1},onTileError:{type:"function",value:t=>console.error(t),compare:!1},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:jw,zRange:null,maxRequests:6,zoomOffset:0};class Yh extends Fo{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var e,n;(e=this.state)===null||e===void 0||(n=e.tileset)===null||n===void 0||n.finalize()}get isLoaded(){var e,n;return(e=this.state)===null||e===void 0||(n=e.tileset)===null||n===void 0?void 0:n.selectedTiles.every(r=>r.isLoaded&&r.layers&&r.layers.every(i=>i.isLoaded))}shouldUpdateState({changeFlags:e}){return e.somethingChanged}updateState({changeFlags:e}){let{tileset:n}=this.state;const r=e.propsOrDataChanged||e.updateTriggersChanged,i=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getTileData);n?r&&(n.setOptions(this._getTilesetOptions()),i?n.reloadAll():this.state.tileset.tiles.forEach(s=>{s.layers=null})):(n=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:n})),this._updateTileset()}_getTilesetOptions(){const{tileSize:e,maxCacheSize:n,maxCacheByteSize:r,refinementStrategy:i,extent:s,maxZoom:o,minZoom:a,maxRequests:l,zoomOffset:f}=this.props;return{maxCacheSize:n,maxCacheByteSize:r,maxZoom:o,minZoom:a,tileSize:e,refinementStrategy:i,extent:s,maxRequests:l,zoomOffset:f,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const{tileset:e}=this.state,{zRange:n,modelMatrix:r}=this.props,i=e.update(this.context.viewport,{zRange:n,modelMatrix:r}),{isLoaded:s}=e,o=this.state.isLoaded!==s,a=this.state.frameNumber!==i;s&&(o||a)&&this._onViewportLoad(),a&&this.setState({frameNumber:i}),this.state.isLoaded=s}_onViewportLoad(){const{tileset:e}=this.state,{onViewportLoad:n}=this.props;n&&n(e.selectedTiles)}_onTileLoad(e){this.props.onTileLoad(e),e.layers=null,this.setNeedsUpdate()}_onTileError(e,n){this.props.onTileError(e),n.layers=null,this.setNeedsUpdate()}_onTileUnload(e){this.props.onTileUnload(e)}getTileData(e){const{data:n,getTileData:r,fetch:i}=this.props,{signal:s}=e;return e.url=typeof n=="string"||Array.isArray(n)?Tg(n,e):null,r?r(e):i&&e.url?i(e.url,{propName:"data",layer:this,signal:s}):null}renderSubLayers(e){return this.props.renderSubLayers(e)}getSubLayerPropsByTile(e){return null}getPickingInfo({info:e,sourceLayer:n}){return e.tile=n.props.tile,e}_updateAutoHighlight(e){e.sourceLayer&&e.sourceLayer.updateAutoHighlight(e)}renderLayers(){return this.state.tileset.tiles.map(e=>{const n=this.getSubLayerPropsByTile(e);if(!(!e.isLoaded&&!e.content))if(e.layers)n&&e.layers[0]&&Object.keys(n).some(r=>e.layers[0].props[r]!==n[r])&&(e.layers=e.layers.map(r=>r.clone(n)));else{const r=this.renderSubLayers({...this.props,id:"".concat(this.id,"-").concat(e.id),data:e.content,_offset:0,tile:e});e.layers=Tm(r,Boolean).map(i=>i.clone({tile:e,...n}))}return e.layers})}filterSubLayer({layer:e,cullRect:n}){const{tile:r}=e.props;return this.state.tileset.isTileVisible(r,n)}}T(Yh,"defaultProps",YZ);T(Yh,"layerName","TileLayer");const qZ={fadeTrail:!0,trailLength:{type:"number",value:120,min:0},currentTime:{type:"number",value:0,min:0},getTimestamps:{type:"accessor",value:t=>t.timestamps}};class Ww extends Qh{getShaders(){const e=super.getShaders();return e.inject={"vs:#decl":`uniform float trailLength;
attribute float instanceTimestamps;
attribute float instanceNextTimestamps;
varying float vTime;
`,"vs:#main-end":`vTime = instanceTimestamps + (instanceNextTimestamps - instanceTimestamps) * vPathPosition.y / vPathLength;
`,"fs:#decl":`uniform bool fadeTrail;
uniform float trailLength;
uniform float currentTime;
varying float vTime;
`,"fs:#main-start":`if(vTime > currentTime || (fadeTrail && (vTime < currentTime - trailLength))) {
  discard;
}
`,"fs:DECKGL_FILTER_COLOR":`if(fadeTrail) {
  color.a *= 1.0 - (currentTime - vTime) / trailLength;
}
`},e}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({timestamps:{size:1,accessor:"getTimestamps",shaderAttributes:{instanceTimestamps:{vertexOffset:0},instanceNextTimestamps:{vertexOffset:1}}}})}draw(e){const{fadeTrail:n,trailLength:r,currentTime:i}=this.props;e.uniforms={...e.uniforms,fadeTrail:n,trailLength:r,currentTime:i},super.draw(e)}}T(Ww,"layerName","TripsLayer");T(Ww,"defaultProps",qZ);var en=function(t){t=t||{};var e=typeof t<"u"?t:{},n={},r;for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);var i="";function s(K){return e.locateFile?e.locateFile(K,i):i+K}var o;document.currentScript&&(i=document.currentScript.src),i.indexOf("blob:")!==0?i=i.substr(0,i.lastIndexOf("/")+1):i="",o=function(se,me,ze){var A=new XMLHttpRequest;A.open("GET",se,!0),A.responseType="arraybuffer",A.onload=function(){if(A.status==200||A.status==0&&A.response){me(A.response);return}var At=cA(se);if(At){me(At.buffer);return}ze()},A.onerror=ze,A.send(null)};var a=e.print||console.log.bind(console),l=e.printErr||console.warn.bind(console);for(r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);n=null,e.arguments&&e.arguments;var f=0,d=function(K){f=K},g=function(){return f},y=8;function b(K,se,me,ze){switch(me=me||"i8",me.charAt(me.length-1)==="*"&&(me="i32"),me){case"i1":te[K>>0]=se;break;case"i8":te[K>>0]=se;break;case"i16":ae[K>>1]=se;break;case"i32":Re[K>>2]=se;break;case"i64":De=[se>>>0,(ye=se,+sr(ye)>=1?ye>0?($n(+Er(ye/4294967296),4294967295)|0)>>>0:~~+Dr((ye-+(~~ye>>>0))/4294967296)>>>0:0)],Re[K>>2]=De[0],Re[K+4>>2]=De[1];break;case"float":Oe[K>>2]=se;break;case"double":He[K>>3]=se;break;default:Es("invalid type for setValue: "+me)}}function E(K,se,me){switch(se=se||"i8",se.charAt(se.length-1)==="*"&&(se="i32"),se){case"i1":return te[K>>0];case"i8":return te[K>>0];case"i16":return ae[K>>1];case"i32":return Re[K>>2];case"i64":return Re[K>>2];case"float":return Oe[K>>2];case"double":return He[K>>3];default:Es("invalid type for getValue: "+se)}return null}var S=!1;function M(K,se){K||Es("Assertion failed: "+se)}function C(K){var se=e["_"+K];return M(se,"Cannot call unknown function "+K+", make sure it is exported"),se}function P(K,se,me,ze,A){var G={string:function(An){var Ts=0;if(An!=null&&An!==0){var Kl=(An.length<<2)+1;Ts=Sd(Kl),Y(An,Ts,Kl)}return Ts},array:function(An){var Ts=Sd(An.length);return Q(An,Ts),Ts}};function At(An){return se==="string"?z(An):se==="boolean"?Boolean(An):An}var mt=C(K),tt=[],rt=0;if(ze)for(var Qt=0;Qt<ze.length;Qt++){var ft=G[me[Qt]];ft?(rt===0&&(rt=xd()),tt[Qt]=ft(ze[Qt])):tt[Qt]=ze[Qt]}var at=mt.apply(null,tt);return at=At(at),rt!==0&&cy(rt),at}function I(K,se,me,ze){me=me||[];var A=me.every(function(At){return At==="number"}),G=se!=="string";return G&&A&&!ze?C(K):function(){return P(K,se,me,arguments)}}var L=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function F(K,se,me){for(var ze=se+me,A=se;K[A]&&!(A>=ze);)++A;if(A-se>16&&K.subarray&&L)return L.decode(K.subarray(se,A));for(var G="";se<A;){var At=K[se++];if(!(At&128)){G+=String.fromCharCode(At);continue}var mt=K[se++]&63;if((At&224)==192){G+=String.fromCharCode((At&31)<<6|mt);continue}var tt=K[se++]&63;if((At&240)==224?At=(At&15)<<12|mt<<6|tt:At=(At&7)<<18|mt<<12|tt<<6|K[se++]&63,At<65536)G+=String.fromCharCode(At);else{var rt=At-65536;G+=String.fromCharCode(55296|rt>>10,56320|rt&1023)}}return G}function z(K,se){return K?F(oe,K,se):""}function X(K,se,me,ze){if(!(ze>0))return 0;for(var A=me,G=me+ze-1,At=0;At<K.length;++At){var mt=K.charCodeAt(At);if(mt>=55296&&mt<=57343){var tt=K.charCodeAt(++At);mt=65536+((mt&1023)<<10)|tt&1023}if(mt<=127){if(me>=G)break;se[me++]=mt}else if(mt<=2047){if(me+1>=G)break;se[me++]=192|mt>>6,se[me++]=128|mt&63}else if(mt<=65535){if(me+2>=G)break;se[me++]=224|mt>>12,se[me++]=128|mt>>6&63,se[me++]=128|mt&63}else{if(me+3>=G)break;se[me++]=240|mt>>18,se[me++]=128|mt>>12&63,se[me++]=128|mt>>6&63,se[me++]=128|mt&63}}return se[me]=0,me-A}function Y(K,se,me){return X(K,oe,se,me)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function Q(K,se){te.set(K,se)}function N(K,se){return K%se>0&&(K+=se-K%se),K}var k,te,oe,ae,Re,Oe,He;function le(K){k=K,e.HEAP8=te=new Int8Array(K),e.HEAP16=ae=new Int16Array(K),e.HEAP32=Re=new Int32Array(K),e.HEAPU8=oe=new Uint8Array(K),e.HEAPU16=new Uint16Array(K),e.HEAPU32=new Uint32Array(K),e.HEAPF32=Oe=new Float32Array(K),e.HEAPF64=He=new Float64Array(K)}var be=5266928,Pe=24016,Fe=e.TOTAL_MEMORY||33554432;e.buffer?k=e.buffer:k=new ArrayBuffer(Fe),Fe=k.byteLength,le(k),Re[Pe>>2]=be;function Ge(K){for(;K.length>0;){var se=K.shift();if(typeof se=="function"){se();continue}var me=se.func;typeof me=="number"?se.arg===void 0?e.dynCall_v(me):e.dynCall_vi(me,se.arg):me(se.arg===void 0?null:se.arg)}}var lt=[],kn=[],Yr=[],rr=[];function Dt(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)sn(e.preRun.shift());Ge(lt)}function nn(){Ge(kn)}function Nt(){Ge(Yr)}function rn(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)ir(e.postRun.shift());Ge(rr)}function sn(K){lt.unshift(K)}function ir(K){rr.unshift(K)}var sr=Math.abs,Dr=Math.ceil,Er=Math.floor,$n=Math.min,vn=0,qr=null;function bs(K){vn++,e.monitorRunDependencies&&e.monitorRunDependencies(vn)}function Wi(K){if(vn--,e.monitorRunDependencies&&e.monitorRunDependencies(vn),vn==0&&qr){var se=qr;qr=null,se()}}e.preloadedImages={},e.preloadedAudios={};var Ut=null,ws="data:application/octet-stream;base64,";function to(K){return String.prototype.startsWith?K.startsWith(ws):K.indexOf(ws)===0}var ye,De;Ut="data:application/octet-stream;base64,AAAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAABAAAAAMAAAAGAAAABQAAAAIAAAAAAAAAAgAAAAMAAAABAAAABAAAAAYAAAAAAAAABQAAAAMAAAAGAAAABAAAAAUAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAABAAAABQAAAAIAAAAAAAAAAQAAAAMAAAAGAAAABAAAAAYAAAAAAAAABQAAAAIAAAABAAAABAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAgAAAAMAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABgAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAABgAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAAAAAAABgAAAAAAAAADAAAAAgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAUAAAAEAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAEAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAUAAAACAAAABAAAAAMAAAAIAAAAAQAAAAcAAAAGAAAACQAAAAAAAAADAAAAAgAAAAIAAAAGAAAACgAAAAsAAAAAAAAAAQAAAAUAAAADAAAADQAAAAEAAAAHAAAABAAAAAwAAAAAAAAABAAAAH8AAAAPAAAACAAAAAMAAAAAAAAADAAAAAUAAAACAAAAEgAAAAoAAAAIAAAAAAAAABAAAAAGAAAADgAAAAsAAAARAAAAAQAAAAkAAAACAAAABwAAABUAAAAJAAAAEwAAAAMAAAANAAAAAQAAAAgAAAAFAAAAFgAAABAAAAAEAAAAAAAAAA8AAAAJAAAAEwAAAA4AAAAUAAAAAQAAAAcAAAAGAAAACgAAAAsAAAAYAAAAFwAAAAUAAAACAAAAEgAAAAsAAAARAAAAFwAAABkAAAACAAAABgAAAAoAAAAMAAAAHAAAAA0AAAAaAAAABAAAAA8AAAADAAAADQAAABoAAAAVAAAAHQAAAAMAAAAMAAAABwAAAA4AAAB/AAAAEQAAABsAAAAJAAAAFAAAAAYAAAAPAAAAFgAAABwAAAAfAAAABAAAAAgAAAAMAAAAEAAAABIAAAAhAAAAHgAAAAgAAAAFAAAAFgAAABEAAAALAAAADgAAAAYAAAAjAAAAGQAAABsAAAASAAAAGAAAAB4AAAAgAAAABQAAAAoAAAAQAAAAEwAAACIAAAAUAAAAJAAAAAcAAAAVAAAACQAAABQAAAAOAAAAEwAAAAkAAAAoAAAAGwAAACQAAAAVAAAAJgAAABMAAAAiAAAADQAAAB0AAAAHAAAAFgAAABAAAAApAAAAIQAAAA8AAAAIAAAAHwAAABcAAAAYAAAACwAAAAoAAAAnAAAAJQAAABkAAAAYAAAAfwAAACAAAAAlAAAACgAAABcAAAASAAAAGQAAABcAAAARAAAACwAAAC0AAAAnAAAAIwAAABoAAAAqAAAAHQAAACsAAAAMAAAAHAAAAA0AAAAbAAAAKAAAACMAAAAuAAAADgAAABQAAAARAAAAHAAAAB8AAAAqAAAALAAAAAwAAAAPAAAAGgAAAB0AAAArAAAAJgAAAC8AAAANAAAAGgAAABUAAAAeAAAAIAAAADAAAAAyAAAAEAAAABIAAAAhAAAAHwAAACkAAAAsAAAANQAAAA8AAAAWAAAAHAAAACAAAAAeAAAAGAAAABIAAAA0AAAAMgAAACUAAAAhAAAAHgAAADEAAAAwAAAAFgAAABAAAAApAAAAIgAAABMAAAAmAAAAFQAAADYAAAAkAAAAMwAAACMAAAAuAAAALQAAADgAAAARAAAAGwAAABkAAAAkAAAAFAAAACIAAAATAAAANwAAACgAAAA2AAAAJQAAACcAAAA0AAAAOQAAABgAAAAXAAAAIAAAACYAAAB/AAAAIgAAADMAAAAdAAAALwAAABUAAAAnAAAAJQAAABkAAAAXAAAAOwAAADkAAAAtAAAAKAAAABsAAAAkAAAAFAAAADwAAAAuAAAANwAAACkAAAAxAAAANQAAAD0AAAAWAAAAIQAAAB8AAAAqAAAAOgAAACsAAAA+AAAAHAAAACwAAAAaAAAAKwAAAD4AAAAvAAAAQAAAABoAAAAqAAAAHQAAACwAAAA1AAAAOgAAAEEAAAAcAAAAHwAAACoAAAAtAAAAJwAAACMAAAAZAAAAPwAAADsAAAA4AAAALgAAADwAAAA4AAAARAAAABsAAAAoAAAAIwAAAC8AAAAmAAAAKwAAAB0AAABFAAAAMwAAAEAAAAAwAAAAMQAAAB4AAAAhAAAAQwAAAEIAAAAyAAAAMQAAAH8AAAA9AAAAQgAAACEAAAAwAAAAKQAAADIAAAAwAAAAIAAAAB4AAABGAAAAQwAAADQAAAAzAAAARQAAADYAAABHAAAAJgAAAC8AAAAiAAAANAAAADkAAABGAAAASgAAACAAAAAlAAAAMgAAADUAAAA9AAAAQQAAAEsAAAAfAAAAKQAAACwAAAA2AAAARwAAADcAAABJAAAAIgAAADMAAAAkAAAANwAAACgAAAA2AAAAJAAAAEgAAAA8AAAASQAAADgAAABEAAAAPwAAAE0AAAAjAAAALgAAAC0AAAA5AAAAOwAAAEoAAABOAAAAJQAAACcAAAA0AAAAOgAAAH8AAAA+AAAATAAAACwAAABBAAAAKgAAADsAAAA/AAAATgAAAE8AAAAnAAAALQAAADkAAAA8AAAASAAAAEQAAABQAAAAKAAAADcAAAAuAAAAPQAAADUAAAAxAAAAKQAAAFEAAABLAAAAQgAAAD4AAAArAAAAOgAAACoAAABSAAAAQAAAAEwAAAA/AAAAfwAAADgAAAAtAAAATwAAADsAAABNAAAAQAAAAC8AAAA+AAAAKwAAAFQAAABFAAAAUgAAAEEAAAA6AAAANQAAACwAAABWAAAATAAAAEsAAABCAAAAQwAAAFEAAABVAAAAMQAAADAAAAA9AAAAQwAAAEIAAAAyAAAAMAAAAFcAAABVAAAARgAAAEQAAAA4AAAAPAAAAC4AAABaAAAATQAAAFAAAABFAAAAMwAAAEAAAAAvAAAAWQAAAEcAAABUAAAARgAAAEMAAAA0AAAAMgAAAFMAAABXAAAASgAAAEcAAABZAAAASQAAAFsAAAAzAAAARQAAADYAAABIAAAAfwAAAEkAAAA3AAAAUAAAADwAAABYAAAASQAAAFsAAABIAAAAWAAAADYAAABHAAAANwAAAEoAAABOAAAAUwAAAFwAAAA0AAAAOQAAAEYAAABLAAAAQQAAAD0AAAA1AAAAXgAAAFYAAABRAAAATAAAAFYAAABSAAAAYAAAADoAAABBAAAAPgAAAE0AAAA/AAAARAAAADgAAABdAAAATwAAAFoAAABOAAAASgAAADsAAAA5AAAAXwAAAFwAAABPAAAATwAAAE4AAAA/AAAAOwAAAF0AAABfAAAATQAAAFAAAABEAAAASAAAADwAAABjAAAAWgAAAFgAAABRAAAAVQAAAF4AAABlAAAAPQAAAEIAAABLAAAAUgAAAGAAAABUAAAAYgAAAD4AAABMAAAAQAAAAFMAAAB/AAAASgAAAEYAAABkAAAAVwAAAFwAAABUAAAARQAAAFIAAABAAAAAYQAAAFkAAABiAAAAVQAAAFcAAABlAAAAZgAAAEIAAABDAAAAUQAAAFYAAABMAAAASwAAAEEAAABoAAAAYAAAAF4AAABXAAAAUwAAAGYAAABkAAAAQwAAAEYAAABVAAAAWAAAAEgAAABbAAAASQAAAGMAAABQAAAAaQAAAFkAAABhAAAAWwAAAGcAAABFAAAAVAAAAEcAAABaAAAATQAAAFAAAABEAAAAagAAAF0AAABjAAAAWwAAAEkAAABZAAAARwAAAGkAAABYAAAAZwAAAFwAAABTAAAATgAAAEoAAABsAAAAZAAAAF8AAABdAAAATwAAAFoAAABNAAAAbQAAAF8AAABqAAAAXgAAAFYAAABRAAAASwAAAGsAAABoAAAAZQAAAF8AAABcAAAATwAAAE4AAABtAAAAbAAAAF0AAABgAAAAaAAAAGIAAABuAAAATAAAAFYAAABSAAAAYQAAAH8AAABiAAAAVAAAAGcAAABZAAAAbwAAAGIAAABuAAAAYQAAAG8AAABSAAAAYAAAAFQAAABjAAAAUAAAAGkAAABYAAAAagAAAFoAAABxAAAAZAAAAGYAAABTAAAAVwAAAGwAAAByAAAAXAAAAGUAAABmAAAAawAAAHAAAABRAAAAVQAAAF4AAABmAAAAZQAAAFcAAABVAAAAcgAAAHAAAABkAAAAZwAAAFsAAABhAAAAWQAAAHQAAABpAAAAbwAAAGgAAABrAAAAbgAAAHMAAABWAAAAXgAAAGAAAABpAAAAWAAAAGcAAABbAAAAcQAAAGMAAAB0AAAAagAAAF0AAABjAAAAWgAAAHUAAABtAAAAcQAAAGsAAAB/AAAAZQAAAF4AAABzAAAAaAAAAHAAAABsAAAAZAAAAF8AAABcAAAAdgAAAHIAAABtAAAAbQAAAGwAAABdAAAAXwAAAHUAAAB2AAAAagAAAG4AAABiAAAAaAAAAGAAAAB3AAAAbwAAAHMAAABvAAAAYQAAAG4AAABiAAAAdAAAAGcAAAB3AAAAcAAAAGsAAABmAAAAZQAAAHgAAABzAAAAcgAAAHEAAABjAAAAdAAAAGkAAAB1AAAAagAAAHkAAAByAAAAcAAAAGQAAABmAAAAdgAAAHgAAABsAAAAcwAAAG4AAABrAAAAaAAAAHgAAAB3AAAAcAAAAHQAAABnAAAAdwAAAG8AAABxAAAAaQAAAHkAAAB1AAAAfwAAAG0AAAB2AAAAcQAAAHkAAABqAAAAdgAAAHgAAABsAAAAcgAAAHUAAAB5AAAAbQAAAHcAAABvAAAAcwAAAG4AAAB5AAAAdAAAAHgAAAB4AAAAcwAAAHIAAABwAAAAeQAAAHcAAAB2AAAAeQAAAHQAAAB4AAAAdwAAAHUAAABxAAAAdgAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAQAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAADAAAABQAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAgAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAABQAAAAUAAAAAAAAAAAAAAP////8BAAAAAAAAAAMAAAAEAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAQAAAP//////////AQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAIAAAAAAAAAAAAAAAEAAAACAAAABgAAAAQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAoAAAACAAAAAAAAAAAAAAABAAAAAQAAAAUAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAAAAAAAAAAAAAEAAAADAAAABwAAAAYAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAJAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAAAAAAAAAAAAQAAAAQAAAAIAAAACgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAAAAAAAAAAABAAAACwAAAA8AAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAgAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAAAAAAAAAAABAAAADAAAABAAAAAMAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAEAAAAKAAAAEwAAAAgAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAgAAAAAAAAAAAAAAAQAAAA0AAAARAAAADQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAAAAAAAAAAAAAEAAAAOAAAAEgAAAA8AAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAAAAAABAAAA//////////8TAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABIAAAAAAAAAGAAAAAAAAAAhAAAAAAAAAB4AAAAAAAAAIAAAAAMAAAAxAAAAAQAAADAAAAADAAAAMgAAAAMAAAAIAAAAAAAAAAUAAAAFAAAACgAAAAUAAAAWAAAAAAAAABAAAAAAAAAAEgAAAAAAAAApAAAAAQAAACEAAAAAAAAAHgAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAgAAAAUAAAAPAAAAAQAAAAgAAAAAAAAABQAAAAUAAAAfAAAAAQAAABYAAAAAAAAAEAAAAAAAAAACAAAAAAAAAAYAAAAAAAAADgAAAAAAAAAKAAAAAAAAAAsAAAAAAAAAEQAAAAMAAAAYAAAAAQAAABcAAAADAAAAGQAAAAMAAAAAAAAAAAAAAAEAAAAFAAAACQAAAAUAAAAFAAAAAAAAAAIAAAAAAAAABgAAAAAAAAASAAAAAQAAAAoAAAAAAAAACwAAAAAAAAAEAAAAAQAAAAMAAAAFAAAABwAAAAUAAAAIAAAAAQAAAAAAAAAAAAAAAQAAAAUAAAAQAAAAAQAAAAUAAAAAAAAAAgAAAAAAAAAHAAAAAAAAABUAAAAAAAAAJgAAAAAAAAAJAAAAAAAAABMAAAAAAAAAIgAAAAMAAAAOAAAAAQAAABQAAAADAAAAJAAAAAMAAAADAAAAAAAAAA0AAAAFAAAAHQAAAAUAAAABAAAAAAAAAAcAAAAAAAAAFQAAAAAAAAAGAAAAAQAAAAkAAAAAAAAAEwAAAAAAAAAEAAAAAgAAAAwAAAAFAAAAGgAAAAUAAAAAAAAAAQAAAAMAAAAAAAAADQAAAAUAAAACAAAAAQAAAAEAAAAAAAAABwAAAAAAAAAaAAAAAAAAACoAAAAAAAAAOgAAAAAAAAAdAAAAAAAAACsAAAAAAAAAPgAAAAMAAAAmAAAAAQAAAC8AAAADAAAAQAAAAAMAAAAMAAAAAAAAABwAAAAFAAAALAAAAAUAAAANAAAAAAAAABoAAAAAAAAAKgAAAAAAAAAVAAAAAQAAAB0AAAAAAAAAKwAAAAAAAAAEAAAAAwAAAA8AAAAFAAAAHwAAAAUAAAADAAAAAQAAAAwAAAAAAAAAHAAAAAUAAAAHAAAAAQAAAA0AAAAAAAAAGgAAAAAAAAAfAAAAAAAAACkAAAAAAAAAMQAAAAAAAAAsAAAAAAAAADUAAAAAAAAAPQAAAAMAAAA6AAAAAQAAAEEAAAADAAAASwAAAAMAAAAPAAAAAAAAABYAAAAFAAAAIQAAAAUAAAAcAAAAAAAAAB8AAAAAAAAAKQAAAAAAAAAqAAAAAQAAACwAAAAAAAAANQAAAAAAAAAEAAAABAAAAAgAAAAFAAAAEAAAAAUAAAAMAAAAAQAAAA8AAAAAAAAAFgAAAAUAAAAaAAAAAQAAABwAAAAAAAAAHwAAAAAAAAAyAAAAAAAAADAAAAAAAAAAMQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAIQAAAAMAAAAYAAAAAwAAABIAAAADAAAAEAAAAAMAAABGAAAAAAAAAEMAAAAAAAAAQgAAAAMAAAA0AAAAAwAAADIAAAAAAAAAMAAAAAAAAAAlAAAAAwAAACAAAAAAAAAAHgAAAAMAAABTAAAAAAAAAFcAAAADAAAAVQAAAAMAAABKAAAAAwAAAEYAAAAAAAAAQwAAAAAAAAA5AAAAAQAAADQAAAADAAAAMgAAAAAAAAAZAAAAAAAAABcAAAAAAAAAGAAAAAMAAAARAAAAAAAAAAsAAAADAAAACgAAAAMAAAAOAAAAAwAAAAYAAAADAAAAAgAAAAMAAAAtAAAAAAAAACcAAAAAAAAAJQAAAAMAAAAjAAAAAwAAABkAAAAAAAAAFwAAAAAAAAAbAAAAAwAAABEAAAAAAAAACwAAAAMAAAA/AAAAAAAAADsAAAADAAAAOQAAAAMAAAA4AAAAAwAAAC0AAAAAAAAAJwAAAAAAAAAuAAAAAwAAACMAAAADAAAAGQAAAAAAAAAkAAAAAAAAABQAAAAAAAAADgAAAAMAAAAiAAAAAAAAABMAAAADAAAACQAAAAMAAAAmAAAAAwAAABUAAAADAAAABwAAAAMAAAA3AAAAAAAAACgAAAAAAAAAGwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAFAAAAAAAAAAzAAAAAwAAACIAAAAAAAAAEwAAAAMAAABIAAAAAAAAADwAAAADAAAALgAAAAMAAABJAAAAAwAAADcAAAAAAAAAKAAAAAAAAABHAAAAAwAAADYAAAADAAAAJAAAAAAAAABAAAAAAAAAAC8AAAAAAAAAJgAAAAMAAAA+AAAAAAAAACsAAAADAAAAHQAAAAMAAAA6AAAAAwAAACoAAAADAAAAGgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAMwAAAAMAAABSAAAAAwAAAEAAAAAAAAAALwAAAAAAAABMAAAAAwAAAD4AAAAAAAAAKwAAAAMAAABhAAAAAAAAAFkAAAADAAAARwAAAAMAAABiAAAAAwAAAFQAAAAAAAAARQAAAAAAAABgAAAAAwAAAFIAAAADAAAAQAAAAAAAAABLAAAAAAAAAEEAAAAAAAAAOgAAAAMAAAA9AAAAAAAAADUAAAADAAAALAAAAAMAAAAxAAAAAwAAACkAAAADAAAAHwAAAAMAAABeAAAAAAAAAFYAAAAAAAAATAAAAAMAAABRAAAAAwAAAEsAAAAAAAAAQQAAAAAAAABCAAAAAwAAAD0AAAAAAAAANQAAAAMAAABrAAAAAAAAAGgAAAADAAAAYAAAAAMAAABlAAAAAwAAAF4AAAAAAAAAVgAAAAAAAABVAAAAAwAAAFEAAAADAAAASwAAAAAAAAA5AAAAAAAAADsAAAAAAAAAPwAAAAMAAABKAAAAAAAAAE4AAAADAAAATwAAAAMAAABTAAAAAwAAAFwAAAADAAAAXwAAAAMAAAAlAAAAAAAAACcAAAADAAAALQAAAAMAAAA0AAAAAAAAADkAAAAAAAAAOwAAAAAAAABGAAAAAwAAAEoAAAAAAAAATgAAAAMAAAAYAAAAAAAAABcAAAADAAAAGQAAAAMAAAAgAAAAAwAAACUAAAAAAAAAJwAAAAMAAAAyAAAAAwAAADQAAAAAAAAAOQAAAAAAAAAuAAAAAAAAADwAAAAAAAAASAAAAAMAAAA4AAAAAAAAAEQAAAADAAAAUAAAAAMAAAA/AAAAAwAAAE0AAAADAAAAWgAAAAMAAAAbAAAAAAAAACgAAAADAAAANwAAAAMAAAAjAAAAAAAAAC4AAAAAAAAAPAAAAAAAAAAtAAAAAwAAADgAAAAAAAAARAAAAAMAAAAOAAAAAAAAABQAAAADAAAAJAAAAAMAAAARAAAAAwAAABsAAAAAAAAAKAAAAAMAAAAZAAAAAwAAACMAAAAAAAAALgAAAAAAAABHAAAAAAAAAFkAAAAAAAAAYQAAAAMAAABJAAAAAAAAAFsAAAADAAAAZwAAAAMAAABIAAAAAwAAAFgAAAADAAAAaQAAAAMAAAAzAAAAAAAAAEUAAAADAAAAVAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAWQAAAAAAAAA3AAAAAwAAAEkAAAAAAAAAWwAAAAMAAAAmAAAAAAAAAC8AAAADAAAAQAAAAAMAAAAiAAAAAwAAADMAAAAAAAAARQAAAAMAAAAkAAAAAwAAADYAAAAAAAAARwAAAAAAAABgAAAAAAAAAGgAAAAAAAAAawAAAAMAAABiAAAAAAAAAG4AAAADAAAAcwAAAAMAAABhAAAAAwAAAG8AAAADAAAAdwAAAAMAAABMAAAAAAAAAFYAAAADAAAAXgAAAAMAAABSAAAAAAAAAGAAAAAAAAAAaAAAAAAAAABUAAAAAwAAAGIAAAAAAAAAbgAAAAMAAAA6AAAAAAAAAEEAAAADAAAASwAAAAMAAAA+AAAAAwAAAEwAAAAAAAAAVgAAAAMAAABAAAAAAwAAAFIAAAAAAAAAYAAAAAAAAABVAAAAAAAAAFcAAAAAAAAAUwAAAAMAAABlAAAAAAAAAGYAAAADAAAAZAAAAAMAAABrAAAAAwAAAHAAAAADAAAAcgAAAAMAAABCAAAAAAAAAEMAAAADAAAARgAAAAMAAABRAAAAAAAAAFUAAAAAAAAAVwAAAAAAAABeAAAAAwAAAGUAAAAAAAAAZgAAAAMAAAAxAAAAAAAAADAAAAADAAAAMgAAAAMAAAA9AAAAAwAAAEIAAAAAAAAAQwAAAAMAAABLAAAAAwAAAFEAAAAAAAAAVQAAAAAAAABfAAAAAAAAAFwAAAAAAAAAUwAAAAAAAABPAAAAAAAAAE4AAAAAAAAASgAAAAMAAAA/AAAAAQAAADsAAAADAAAAOQAAAAMAAABtAAAAAAAAAGwAAAAAAAAAZAAAAAUAAABdAAAAAQAAAF8AAAAAAAAAXAAAAAAAAABNAAAAAQAAAE8AAAAAAAAATgAAAAAAAAB1AAAABAAAAHYAAAAFAAAAcgAAAAUAAABqAAAAAQAAAG0AAAAAAAAAbAAAAAAAAABaAAAAAQAAAF0AAAABAAAAXwAAAAAAAABaAAAAAAAAAE0AAAAAAAAAPwAAAAAAAABQAAAAAAAAAEQAAAAAAAAAOAAAAAMAAABIAAAAAQAAADwAAAADAAAALgAAAAMAAABqAAAAAAAAAF0AAAAAAAAATwAAAAUAAABjAAAAAQAAAFoAAAAAAAAATQAAAAAAAABYAAAAAQAAAFAAAAAAAAAARAAAAAAAAAB1AAAAAwAAAG0AAAAFAAAAXwAAAAUAAABxAAAAAQAAAGoAAAAAAAAAXQAAAAAAAABpAAAAAQAAAGMAAAABAAAAWgAAAAAAAABpAAAAAAAAAFgAAAAAAAAASAAAAAAAAABnAAAAAAAAAFsAAAAAAAAASQAAAAMAAABhAAAAAQAAAFkAAAADAAAARwAAAAMAAABxAAAAAAAAAGMAAAAAAAAAUAAAAAUAAAB0AAAAAQAAAGkAAAAAAAAAWAAAAAAAAABvAAAAAQAAAGcAAAAAAAAAWwAAAAAAAAB1AAAAAgAAAGoAAAAFAAAAWgAAAAUAAAB5AAAAAQAAAHEAAAAAAAAAYwAAAAAAAAB3AAAAAQAAAHQAAAABAAAAaQAAAAAAAAB3AAAAAAAAAG8AAAAAAAAAYQAAAAAAAABzAAAAAAAAAG4AAAAAAAAAYgAAAAMAAABrAAAAAQAAAGgAAAADAAAAYAAAAAMAAAB5AAAAAAAAAHQAAAAAAAAAZwAAAAUAAAB4AAAAAQAAAHcAAAAAAAAAbwAAAAAAAABwAAAAAQAAAHMAAAAAAAAAbgAAAAAAAAB1AAAAAQAAAHEAAAAFAAAAaQAAAAUAAAB2AAAAAQAAAHkAAAAAAAAAdAAAAAAAAAByAAAAAQAAAHgAAAABAAAAdwAAAAAAAAByAAAAAAAAAHAAAAAAAAAAawAAAAAAAABkAAAAAAAAAGYAAAAAAAAAZQAAAAMAAABTAAAAAQAAAFcAAAADAAAAVQAAAAMAAAB2AAAAAAAAAHgAAAAAAAAAcwAAAAUAAABsAAAAAQAAAHIAAAAAAAAAcAAAAAAAAABcAAAAAQAAAGQAAAAAAAAAZgAAAAAAAAB1AAAAAAAAAHkAAAAFAAAAdwAAAAUAAABtAAAAAQAAAHYAAAAAAAAAeAAAAAAAAABfAAAAAQAAAGwAAAABAAAAcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAB+ogX28rbpPxqumpJv+fM/165tC4ns9D+XaEnTqUsEQFrOtNlC4PA/3U+0XG6P9b9TdUUBxTTjP4PUp8ex1ty/B1rD/EN43z+lcDi6LLrZP/a45NWEHMY/oJ5ijLDZ+j/xw3rjxWPjP2B8A46ioQdAotff3wla2z+FMSpA1jj+v6b5Y1mtPbS/cIu8K0F457/2esiyJpDNv98k5Ts2NeA/pvljWa09tD88ClUJ60MDQPZ6yLImkM0/4ONKxa0UBcD2uOTVhBzGv5G7JRxGave/8cN648Vj47+HCwtkjAXIv6LX398JWtu/qyheaCAL9D9TdUUBxTTjv4gyTxslhwVAB1rD/EN4378EH/28teoFwH6iBfbytum/F6ztFYdK/r/Xrm0Liez0vwcS6wNGWeO/Ws602ULg8L9TCtRLiLT8P8pi5RexJsw/BlIKPVwR5T95Wyu0/QjnP5PjoT7YYcu/mBhKZ6zrwj8wRYS7NebuP3qW6geh+Ls/SLrixebL3r+pcyymN9XrPwmkNHp7xec/GWNMZVAA17+82s+x2BLiPwn2ytbJ9ek/LgEH1sMS1j8yp/2LhTfeP+SnWwtQBbu/d38gkp5X7z8ytsuHaADGPzUYObdf1+m/7IauECWhwz+cjSACjzniP76Z+wUhN9K/1+GEKzup67+/GYr/04baPw6idWOvsuc/ZedTWsRa5b/EJQOuRzi0v/OncYhHPes/h49PixY53j+i8wWfC03Nvw2idWOvsue/ZedTWsRa5T/EJQOuRzi0P/KncYhHPeu/iY9PixY53r+i8wWfC03NP9anWwtQBbs/d38gkp5X778ytsuHaADGvzUYObdf1+k/74auECWhw7+cjSACjzniv8CZ+wUhN9I/1uGEKzup6z+/GYr/04bavwmkNHp7xee/F2NMZVAA1z+82s+x2BLivwr2ytbJ9em/KwEH1sMS1r8yp/2LhTfev81i5RexJsy/BlIKPVwR5b95Wyu0/Qjnv5DjoT7YYcs/nBhKZ6zrwr8wRYS7Nebuv3OW6geh+Lu/SLrixebL3j+pcyymN9Xrv8rHIFfWehZAMBwUdlo0DECTUc17EOb2PxpVB1SWChdAzjbhb9pTDUDQhmdvECX5P9FlMKCC9+g/IIAzjELgE0DajDngMv8GQFhWDmDPjNs/y1guLh96EkAxPi8k7DIEQJCc4URlhRhA3eLKKLwkEECqpNAyTBD/P6xpjXcDiwVAFtl//cQm4z+Ibt3XKiYTQM7mCLUb3QdAoM1t8yVv7D8aLZv2Nk8UQEAJPV5nQwxAtSsfTCoE9z9TPjXLXIIWQBVanC5W9AtAYM3d7Adm9j++5mQz1FoWQBUThyaVBghAwH5muQsV7T89Q1qv82MUQJoWGOfNuBdAzrkClkmwDkDQjKq77t37Py+g0dtitsE/ZwAMTwVPEUBojepluNwBQGYbtuW+t9w/HNWIJs6MEkDTNuQUSlgEQKxktPP5TcQ/ixbLB8JjEUCwuWjXMQYCQAS/R09FkRdAowpiZjhhDkB7LmlczD/7P01iQmhhsAVAnrtTwDy84z/Z6jfQ2TgTQChOCXMnWwpAhrW3daoz8z/HYJvVPI4VQLT3ik5FcA5Angi7LOZd+z+NNVzDy5gXQBXdvVTFUA1AYNMgOeYe+T8+qHXGCwkXQKQTOKwa5AJA8gFVoEMW0T+FwzJyttIRQAEAAAD/////BwAAAP////8xAAAA/////1cBAAD/////YQkAAP////+nQQAA/////5HLAQD/////95AMAP/////B9lcAAAAAAAAAAAAAAAAAAgAAAP////8OAAAA/////2IAAAD/////rgIAAP/////CEgAA/////06DAAD/////IpcDAP/////uIRkA/////4LtrwAAAAAAAAAAAAAAAAAAAAAAAgAAAP//////////AQAAAAMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////wIAAAD//////////wEAAAAAAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA/////////////////////wEAAAD///////////////8CAAAA////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD///////////////////////////////8CAAAA////////////////AQAAAP////////////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAAAQAAAP//////////AgAAAP//////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAAEAAAD//////////wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAgAAAAAAAAACAAAAAQAAAAEAAAACAAAAAgAAAAAAAAAFAAAABQAAAAAAAAACAAAAAgAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAIAAAABAAAAAgAAAAIAAAACAAAAAAAAAAUAAAAGAAAAAAAAAAIAAAACAAAAAwAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAAAAAAAAgAAAAEAAAADAAAAAgAAAAIAAAAAAAAABQAAAAcAAAAAAAAAAgAAAAIAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAACAAAAAQAAAAQAAAACAAAAAgAAAAAAAAAFAAAACAAAAAAAAAACAAAAAgAAAAMAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAACAAAAAAAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAUAAAAJAAAAAAAAAAIAAAACAAAAAwAAAAUAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAIAAAACAAAAAAAAAAMAAAAOAAAAAgAAAAAAAAACAAAAAwAAAAAAAAAAAAAAAgAAAAIAAAADAAAABgAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAgAAAAIAAAAAAAAAAwAAAAoAAAACAAAAAAAAAAIAAAADAAAAAQAAAAAAAAACAAAAAgAAAAMAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAgAAAAAAAAADAAAACwAAAAIAAAAAAAAAAgAAAAMAAAACAAAAAAAAAAIAAAACAAAAAwAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAACAAAAAAAAAAMAAAAMAAAAAgAAAAAAAAACAAAAAwAAAAMAAAAAAAAAAgAAAAIAAAADAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAIAAAAAAAAAAwAAAA0AAAACAAAAAAAAAAIAAAADAAAABAAAAAAAAAACAAAAAgAAAAMAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAgAAAAAAAAADAAAABgAAAAIAAAAAAAAAAgAAAAMAAAAPAAAAAAAAAAIAAAACAAAAAwAAAAsAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAIAAAACAAAAAAAAAAMAAAAHAAAAAgAAAAAAAAACAAAAAwAAABAAAAAAAAAAAgAAAAIAAAADAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAIAAAAAAAAAAwAAAAgAAAACAAAAAAAAAAIAAAADAAAAEQAAAAAAAAACAAAAAgAAAAMAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAACAAAAAgAAAAAAAAADAAAACQAAAAIAAAAAAAAAAgAAAAMAAAASAAAAAAAAAAIAAAACAAAAAwAAAA4AAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAACAAAAAAAAAAMAAAAFAAAAAgAAAAAAAAACAAAAAwAAABMAAAAAAAAAAgAAAAIAAAADAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAgAAAAAAAAACAAAAAQAAABMAAAACAAAAAgAAAAAAAAAFAAAACgAAAAAAAAACAAAAAgAAAAMAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABEAAAACAAAAAAAAAAIAAAABAAAADwAAAAIAAAACAAAAAAAAAAUAAAALAAAAAAAAAAIAAAACAAAAAwAAABEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAIAAAAAAAAAAgAAAAEAAAAQAAAAAgAAAAIAAAAAAAAABQAAAAwAAAAAAAAAAgAAAAIAAAADAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAACAAAAAQAAABEAAAACAAAAAgAAAAAAAAAFAAAADQAAAAAAAAACAAAAAgAAAAMAAAATAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAACAAAAAAAAAAIAAAABAAAAEgAAAAIAAAACAAAAAAAAAAUAAAAOAAAAAAAAAAIAAAACAAAAAwAAAAIAAAABAAAAAAAAAAEAAAACAAAAAAAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAEAAAAAAAAAAgAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAgAAAAAAAAABAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAFAAAAAAAAAAEAAAAAAAAAAAAAAMuhRbbsNlBBYqHW9OmHIkF9XBuqnS31QAK37uYhNMhAOSo3UUupm0DC+6pc6JxvQHV9eseEEEJAzURsCyqlFEB8BQ4NMJjnPyy3tBoS97o/xawXQznRjj89J2K2CZxhP6vX43RIIDQ/S8isgygEBz+LvFHQkmzaPjFFFO7wMq4+AADMLkTtjkIAAOgkJqxhQgAAU7B0MjRCAADwpBcVB0IAAACYP2HaQQAAAIn/Ja5BzczM4Eg6gUHNzMxMU7BTQTMzMzNfgCZBAAAAAEi3+UAAAAAAwGPNQDMzMzMzy6BAmpmZmZkxc0AzMzMzM/NFQDMzMzMzMxlAzczMzMzM7D+ygXSx2U6RQKimJOvQKnpA23hmONTHY0A/AGcxyudNQNb3K647mzZA+S56rrwWIUAm4kUQ+9UJQKre9hGzh/M/BLvoy9WG3T+LmqMf8VHGP2m3nYNV37A/gbFHcyeCmT+cBPWBckiDP61tZACjKW0/q2RbYVUYVj8uDypVyLNAP6jGS5cA5zBBwcqhBdCNGUEGEhQ/JVEDQT6WPnRbNO1AB/AWSJgT1kDfUWNCNLDAQNk+5C33OqlAchWL34QSk0DKvtDIrNV8QNF0G3kFzGVASSeWhBl6UED+/0mNGuk4QGjA/dm/1CJALPLPMql6DEDSHoDrwpP1P2jouzWST+A/egAAAAAAAABKAwAAAAAAAPoWAAAAAAAAyqAAAAAAAAB6ZQQAAAAAAErGHgAAAAAA+mvXAAAAAADK8+MFAAAAAHqqOykAAAAASqmhIAEAAAD6oGvkBwAAAMpm8T43AAAAes+ZuIIBAABKrDQMkwoAAPq1cFUFSgAAyvkUViUGAgAAAAAAAwAAAAYAAAACAAAABQAAAAEAAAAEAAAAAAAAAAAAAAAFAAAAAwAAAAEAAAAGAAAABAAAAAIAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAA/////wAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAP////8AAAAAAAAAAAEAAAABAAAAAAAAAAAAAAD/////AAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAABAAEAAAEBAAAAAAABAAAAAQAAAAEAAQAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAHAAAABwAAAAEAAAACAAAABAAAAAMAAAAAAAAAAAAAAAcAAAADAAAAAQAAAAIAAAAFAAAABAAAAAAAAAAAAAAAYWxnb3MuYwBfcG9seWZpbGxJbnRlcm5hbABhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0dlb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9HZW9Cb3VuZGFyeQBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGgzVG9Mb2NhbElqawBiYXNlQ2VsbCAhPSBvcmlnaW5CYXNlQ2VsbAAhKG9yaWdpbk9uUGVudCAmJiBpbmRleE9uUGVudCkAcGVudGFnb25Sb3RhdGlvbnMgPj0gMABkaXJlY3Rpb25Sb3RhdGlvbnMgPj0gMABiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvSDMAIV9pc0Jhc2VDZWxsUGVudGFnb24oYmFzZUNlbGwpAGJhc2VDZWxsUm90YXRpb25zID49IDAAd2l0aGluUGVudGFnb25Sb3RhdGlvbnMgPj0gMABncmFwaC0+YnVja2V0cyAhPSBOVUxMAHZlcnRleEdyYXBoLmMAaW5pdFZlcnRleEdyYXBoAG5vZGUgIT0gTlVMTABhZGRWZXJ0ZXhOb2Rl";var Ke=24032;function ot(K){return K}function et(K){var se=/\b__Z[\w\d_]+/g;return K.replace(se,function(me){var ze=me;return me===ze?me:ze+" ["+me+"]"})}function dt(){var K=new Error;if(!K.stack){try{throw new Error(0)}catch(se){K=se}if(!K.stack)return"(no stack trace available)"}return K.stack.toString()}function Bt(){var K=dt();return e.extraStackTrace&&(K+=`
`+e.extraStackTrace()),et(K)}function Nn(K,se,me,ze){Es("Assertion failed: "+z(K)+", at: "+[se?z(se):"unknown filename",me,ze?z(ze):"unknown function"])}function Wt(){return te.length}function Cn(K,se,me){oe.set(oe.subarray(se,se+me),K)}function _i(K){return e.___errno_location&&(Re[e.___errno_location()>>2]=K),K}function za(K){Es("OOM")}function wd(K){try{var se=new ArrayBuffer(K);return se.byteLength!=K?void 0:(new Int8Array(se).set(te),ly(se),le(se),1)}catch{}}function oy(K){var se=Wt(),me=16777216,ze=2147483648-me;if(K>ze)return!1;for(var A=16777216,G=Math.max(se,A);G<K;)G<=536870912?G=N(2*G,me):G=Math.min(N((3*G+2147483648)/4,me),ze);var At=wd(G);return!!At}var Xl=typeof atob=="function"?atob:function(K){var se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",me="",ze,A,G,At,mt,tt,rt,Qt=0;K=K.replace(/[^A-Za-z0-9\+\/\=]/g,"");do At=se.indexOf(K.charAt(Qt++)),mt=se.indexOf(K.charAt(Qt++)),tt=se.indexOf(K.charAt(Qt++)),rt=se.indexOf(K.charAt(Qt++)),ze=At<<2|mt>>4,A=(mt&15)<<4|tt>>2,G=(tt&3)<<6|rt,me=me+String.fromCharCode(ze),tt!==64&&(me=me+String.fromCharCode(A)),rt!==64&&(me=me+String.fromCharCode(G));while(Qt<K.length);return me};function ay(K){try{for(var se=Xl(K),me=new Uint8Array(se.length),ze=0;ze<se.length;++ze)me[ze]=se.charCodeAt(ze);return me}catch{throw new Error("Converting base64 string to bytes failed.")}}function cA(K){if(!!to(K))return ay(K.slice(ws.length))}var Ed={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},Td={a:Es,b:d,c:g,d:Nn,e:_i,f:Wt,g:Cn,h:oy,i:za,j:ot,k:et,l:wd,m:dt,n:Bt,o:Ke,p:Pe},ge=function(K,se,me){var ze=new K.Int8Array(me),A=new K.Int32Array(me);new K.Uint8Array(me),new K.Float32Array(me);var G=new K.Float64Array(me),At=se.p|0,mt=K.Math.floor,tt=K.Math.abs,rt=K.Math.sqrt,Qt=K.Math.pow,ft=K.Math.cos,at=K.Math.sin,An=K.Math.tan,Ts=K.Math.acos,Kl=K.Math.asin,No=K.Math.atan,$t=K.Math.atan2,Qi=K.Math.ceil,Un=K.Math.imul,$i=K.Math.min,Zr=K.Math.clz32,ke=se.b,H=se.c,yt=se.d,fA=se.e,Yl=se.f,ei=se.g,ql=se.h,hA=se.i,U=24048;function dA(c){return ze=new Int8Array(c),A=new Int32Array(c),G=new Float64Array(c),me=c,!0}function pA(c){c=c|0;var u=0;return u=U,U=U+c|0,U=U+15&-16,u|0}function Zl(){return U|0}function Xi(c){c=c|0,U=c}function uy(c,u){c=c|0,U=c}function Md(c){return c=c|0,(Un(c*3|0,c+1|0)|0)+1|0}function ec(c,u,h,p){c=c|0,u=u|0,h=h|0,p=p|0;var m=0,_=0;!(gA(c,u,h,p,0)|0)||(_=(Un(h*3|0,h+1|0)|0)+1|0,Ki(p|0,0,_<<3|0)|0,m=Ji(_,4)|0,m&&(bi(c,u,h,p,m,_,0),qe(m)))}function Id(c,u,h,p,m){c=c|0,u=u|0,h=h|0,p=p|0,m=m|0;var _=0;if(!!(gA(c,u,h,p,m)|0)){if(_=(Un(h*3|0,h+1|0)|0)+1|0,Ki(p|0,0,_<<3|0)|0,m|0){Ki(m|0,0,_<<2|0)|0,bi(c,u,h,p,m,_,0);return}m=Ji(_,4)|0,m&&(bi(c,u,h,p,m,_,0),qe(m))}}function gA(c,u,h,p,m){c=c|0,u=u|0,h=h|0,p=p|0,m=m|0;var _=0,v=0,w=0,x=0,B=0,R=0,V=0,W=0,J=0;if(J=U,U=U+16|0,W=J,_=p,A[_>>2]=c,A[_+4>>2]=u,_=(m|0)!=0,_&&(A[m>>2]=0),Mn(c,u)|0)return W=1,U=J,W|0;A[W>>2]=0;e:do if((h|0)>=1)if(_)for(B=0,R=1,V=1,v=0,_=c;;){if(!(v|B)){if(_=O(_,u,4,W)|0,u=H()|0,(_|0)==0&(u|0)==0){_=2;break e}if(Mn(_,u)|0){_=1;break e}}if(_=O(_,u,A[16+(B<<2)>>2]|0,W)|0,u=H()|0,(_|0)==0&(u|0)==0){_=2;break e}if(c=p+(V<<3)|0,A[c>>2]=_,A[c+4>>2]=u,A[m+(V<<2)>>2]=R,v=v+1|0,c=(v|0)==(R|0),w=B+1|0,x=(w|0)==6,Mn(_,u)|0){_=1;break e}if(R=R+(x&c&1)|0,(R|0)>(h|0)){_=0;break}else B=c?x?0:w:B,V=V+1|0,v=c?0:v}else for(B=0,R=1,V=1,v=0,_=c;;){if(!(v|B)){if(_=O(_,u,4,W)|0,u=H()|0,(_|0)==0&(u|0)==0){_=2;break e}if(Mn(_,u)|0){_=1;break e}}if(_=O(_,u,A[16+(B<<2)>>2]|0,W)|0,u=H()|0,(_|0)==0&(u|0)==0){_=2;break e}if(c=p+(V<<3)|0,A[c>>2]=_,A[c+4>>2]=u,v=v+1|0,c=(v|0)==(R|0),w=B+1|0,x=(w|0)==6,Mn(_,u)|0){_=1;break e}if(R=R+(x&c&1)|0,(R|0)>(h|0)){_=0;break}else B=c?x?0:w:B,V=V+1|0,v=c?0:v}else _=0;while(0);return W=_,U=J,W|0}function bi(c,u,h,p,m,_,v){c=c|0,u=u|0,h=h|0,p=p|0,m=m|0,_=_|0,v=v|0;var w=0,x=0,B=0,R=0,V=0,W=0,J=0;if(V=U,U=U+16|0,R=V,(c|0)==0&(u|0)==0){U=V;return}if(w=zo(c|0,u|0,_|0,((_|0)<0)<<31>>31|0)|0,H()|0,x=p+(w<<3)|0,W=x,J=A[W>>2]|0,W=A[W+4>>2]|0,B=(J|0)==(c|0)&(W|0)==(u|0),!((J|0)==0&(W|0)==0|B))do w=(w+1|0)%(_|0)|0,x=p+(w<<3)|0,J=x,W=A[J>>2]|0,J=A[J+4>>2]|0,B=(W|0)==(c|0)&(J|0)==(u|0);while(!((W|0)==0&(J|0)==0|B));if(w=m+(w<<2)|0,B&&(A[w>>2]|0)<=(v|0)){U=V;return}if(J=x,A[J>>2]=c,A[J+4>>2]=u,A[w>>2]=v,(v|0)>=(h|0)){U=V;return}J=v+1|0,A[R>>2]=0,W=O(c,u,2,R)|0,bi(W,H()|0,h,p,m,_,J),A[R>>2]=0,W=O(c,u,3,R)|0,bi(W,H()|0,h,p,m,_,J),A[R>>2]=0,W=O(c,u,1,R)|0,bi(W,H()|0,h,p,m,_,J),A[R>>2]=0,W=O(c,u,5,R)|0,bi(W,H()|0,h,p,m,_,J),A[R>>2]=0,W=O(c,u,4,R)|0,bi(W,H()|0,h,p,m,_,J),A[R>>2]=0,W=O(c,u,6,R)|0,bi(W,H()|0,h,p,m,_,J),U=V}function O(c,u,h,p){c=c|0,u=u|0,h=h|0,p=p|0;var m=0,_=0,v=0,w=0,x=0,B=0,R=0,V=0,W=0,J=0;if((A[p>>2]|0)>0){m=0;do h=Wa(h)|0,m=m+1|0;while((m|0)<(A[p>>2]|0))}w=fe(c|0,u|0,45)|0,H()|0,x=w&127,_=kr(c,u)|0,m=fe(c|0,u|0,52)|0,H()|0,m=m&15;e:do if(!m)v=6;else for(;;){if(V=(15-m|0)*3|0,W=fe(c|0,u|0,V|0)|0,H()|0,W=W&7,J=(wi(m)|0)==0,m=m+-1|0,R=Ee(7,0,V|0)|0,u=u&~(H()|0),V=Ee(A[(J?464:48)+(W*28|0)+(h<<2)>>2]|0,0,V|0)|0,B=H()|0,h=A[(J?672:256)+(W*28|0)+(h<<2)>>2]|0,c=V|c&~R,u=B|u,!h){h=0;break e}if(!m){v=6;break}}while(0);(v|0)==6&&(J=A[880+(x*28|0)+(h<<2)>>2]|0,W=Ee(J|0,0,45)|0,c=W|c,u=H()|0|u&-1040385,h=A[4304+(x*28|0)+(h<<2)>>2]|0,(J&127|0)==127&&(J=Ee(A[880+(x*28|0)+20>>2]|0,0,45)|0,u=H()|0|u&-1040385,h=A[4304+(x*28|0)+20>>2]|0,c=Go(J|c,u)|0,u=H()|0,A[p>>2]=(A[p>>2]|0)+1)),v=fe(c|0,u|0,45)|0,H()|0,v=v&127;e:do if(Ye(v)|0){t:do if((kr(c,u)|0)==1){if((x|0)!=(v|0))if(hT(v,A[7728+(x*28|0)>>2]|0)|0){c=vy(c,u)|0,_=1,u=H()|0;break}else{c=Go(c,u)|0,_=1,u=H()|0;break}switch(_|0){case 5:{c=vy(c,u)|0,u=H()|0,A[p>>2]=(A[p>>2]|0)+5,_=0;break t}case 3:{c=Go(c,u)|0,u=H()|0,A[p>>2]=(A[p>>2]|0)+1,_=0;break t}default:return W=0,J=0,ke(W|0),J|0}}else _=0;while(0);if((h|0)>0){m=0;do c=yy(c,u)|0,u=H()|0,m=m+1|0;while((m|0)!=(h|0))}if((x|0)!=(v|0)){if(!(Pn(v)|0)){if((_|0)!=0|(kr(c,u)|0)!=5)break;A[p>>2]=(A[p>>2]|0)+1;break}switch(w&127){case 8:case 118:break e}(kr(c,u)|0)!=3&&(A[p>>2]=(A[p>>2]|0)+1)}}else if((h|0)>0){m=0;do c=Go(c,u)|0,u=H()|0,m=m+1|0;while((m|0)!=(h|0))}while(0);return A[p>>2]=((A[p>>2]|0)+h|0)%6|0,W=u,J=c,ke(W|0),J|0}function D(c,u,h,p){c=c|0,u=u|0,h=h|0,p=p|0;var m=0,_=0,v=0,w=0,x=0,B=0,R=0,V=0;if(V=U,U=U+16|0,R=V,!h)return R=p,A[R>>2]=c,A[R+4>>2]=u,R=0,U=V,R|0;A[R>>2]=0;e:do if(Mn(c,u)|0)c=1;else{if(_=(h|0)>0,_){m=0,B=c;do{if(B=O(B,u,4,R)|0,u=H()|0,(B|0)==0&(u|0)==0){c=2;break e}if(m=m+1|0,Mn(B,u)|0){c=1;break e}}while((m|0)<(h|0));if(x=p,A[x>>2]=B,A[x+4>>2]=u,x=h+-1|0,_){_=0,v=1,m=B,c=u;do{if(m=O(m,c,2,R)|0,c=H()|0,(m|0)==0&(c|0)==0){c=2;break e}if(w=p+(v<<3)|0,A[w>>2]=m,A[w+4>>2]=c,v=v+1|0,Mn(m,c)|0){c=1;break e}_=_+1|0}while((_|0)<(h|0));w=0,_=v;do{if(m=O(m,c,3,R)|0,c=H()|0,(m|0)==0&(c|0)==0){c=2;break e}if(v=p+(_<<3)|0,A[v>>2]=m,A[v+4>>2]=c,_=_+1|0,Mn(m,c)|0){c=1;break e}w=w+1|0}while((w|0)<(h|0));v=0;do{if(m=O(m,c,1,R)|0,c=H()|0,(m|0)==0&(c|0)==0){c=2;break e}if(w=p+(_<<3)|0,A[w>>2]=m,A[w+4>>2]=c,_=_+1|0,Mn(m,c)|0){c=1;break e}v=v+1|0}while((v|0)<(h|0));v=0;do{if(m=O(m,c,5,R)|0,c=H()|0,(m|0)==0&(c|0)==0){c=2;break e}if(w=p+(_<<3)|0,A[w>>2]=m,A[w+4>>2]=c,_=_+1|0,Mn(m,c)|0){c=1;break e}v=v+1|0}while((v|0)<(h|0));v=0;do{if(m=O(m,c,4,R)|0,c=H()|0,(m|0)==0&(c|0)==0){c=2;break e}if(w=p+(_<<3)|0,A[w>>2]=m,A[w+4>>2]=c,_=_+1|0,Mn(m,c)|0){c=1;break e}v=v+1|0}while((v|0)<(h|0));for(v=0;;){if(m=O(m,c,6,R)|0,c=H()|0,(m|0)==0&(c|0)==0){c=2;break e}if((v|0)!=(x|0))if(w=p+(_<<3)|0,A[w>>2]=m,A[w+4>>2]=c,!(Mn(m,c)|0))_=_+1|0;else{c=1;break e}if(v=v+1|0,(v|0)>=(h|0)){v=B,_=u;break}}}else v=B,m=B,_=u,c=u}else v=p,A[v>>2]=c,A[v+4>>2]=u,v=c,m=c,_=u,c=u;c=((v|0)!=(m|0)|(_|0)!=(c|0))&1}while(0);return R=c,U=V,R|0}function j(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0,v=0,w=0;if(_=U,U=U+48|0,m=_+8|0,p=_,w=c,v=A[w+4>>2]|0,h=p,A[h>>2]=A[w>>2],A[h+4>>2]=v,wy(p,m),m=hy(m,u)|0,u=A[p>>2]|0,p=A[c+8>>2]|0,(p|0)<=0)return w=u,v=(m|0)<(w|0),w=v?w:m,w=w+12|0,U=_,w|0;h=A[c+12>>2]|0,c=0;do u=(A[h+(c<<3)>>2]|0)+u|0,c=c+1|0;while((c|0)<(p|0));return w=(m|0)<(u|0),w=w?u:m,w=w+12|0,U=_,w|0}function Z(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0,_=0,v=0,w=0,x=0;if(w=U,U=U+48|0,p=w+8|0,m=w,!(ce(c,u,h)|0)){U=w;return}if(x=c,_=A[x+4>>2]|0,v=m,A[v>>2]=A[x>>2],A[v+4>>2]=_,wy(m,p),v=hy(p,u)|0,u=A[m>>2]|0,_=A[c+8>>2]|0,(_|0)>0){m=A[c+12>>2]|0,p=0;do u=(A[m+(p<<3)>>2]|0)+u|0,p=p+1|0;while((p|0)!=(_|0))}if(u=(v|0)<(u|0)?u:v,(u|0)<=-12){U=w;return}x=u+11|0,Ki(h|0,0,(((x|0)>0?x:0)<<3)+8|0)|0,U=w}function ce(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0,_=0,v=0,w=0,x=0,B=0,R=0,V=0,W=0,J=0,ne=0,re=0,he=0,Te=0,ee=0,ue=0,$=0,Se=0,Ce=0,ve=0,we=0,Xe=0,Mt=0,wt=0,Ft=0,vt=0,zt=0,Vt=0,We=0;if(We=U,U=U+112|0,Ft=We+80|0,x=We+72|0,vt=We,zt=We+56|0,B=c+8|0,Vt=Ss((A[B>>2]<<5)+32|0)|0,Vt||yt(22848,22448,800,22456),N8(c,Vt),_=c,p=A[_+4>>2]|0,w=x,A[w>>2]=A[_>>2],A[w+4>>2]=p,wy(x,Ft),w=hy(Ft,u)|0,p=A[x>>2]|0,_=A[B>>2]|0,(_|0)>0){v=A[c+12>>2]|0,m=0;do p=(A[v+(m<<3)>>2]|0)+p|0,m=m+1|0;while((m|0)!=(_|0))}if(w=(w|0)<(p|0)?p:w,wt=w+12|0,m=Ji(wt,8)|0,R=Ji(wt,8)|0,A[Ft>>2]=0,Xe=c,Mt=A[Xe+4>>2]|0,p=x,A[p>>2]=A[Xe>>2],A[p+4>>2]=Mt,p=xe(x,wt,u,Ft,m,R)|0,p|0)return qe(m),qe(R),qe(Vt),Vt=p,U=We,Vt|0;e:do if((A[B>>2]|0)>0){for(_=c+12|0,p=0;v=xe((A[_>>2]|0)+(p<<3)|0,wt,u,Ft,m,R)|0,p=p+1|0,!(v|0);)if((p|0)>=(A[B>>2]|0))break e;return qe(m),qe(R),qe(Vt),Vt=v,U=We,Vt|0}while(0);(w|0)>-12&&Ki(R|0,0,((wt|0)>1?wt:1)<<3|0)|0;e:do if((A[Ft>>2]|0)>0){Mt=((wt|0)<0)<<31>>31,$=m,Se=R,Ce=m,ve=m,we=R,Xe=m,p=m,he=m,Te=R,ee=R,ue=R,m=R;t:for(;;){for(re=A[Ft>>2]|0,J=0,ne=0,_=0;;){v=vt,w=v+56|0;do A[v>>2]=0,v=v+4|0;while((v|0)<(w|0));if(u=$+(J<<3)|0,x=A[u>>2]|0,u=A[u+4>>2]|0,gA(x,u,1,vt,0)|0){v=vt,w=v+56|0;do A[v>>2]=0,v=v+4|0;while((v|0)<(w|0));v=Ji(7,4)|0,v|0&&(bi(x,u,1,vt,v,7,0),qe(v))}W=0;do{V=vt+(W<<3)|0,R=A[V>>2]|0,V=A[V+4>>2]|0;n:do if(!((R|0)==0&(V|0)==0)){if(x=zo(R|0,V|0,wt|0,Mt|0)|0,H()|0,v=h+(x<<3)|0,w=v,u=A[w>>2]|0,w=A[w+4>>2]|0,!((u|0)==0&(w|0)==0))for(B=0;;){if((B|0)>(wt|0))break t;if((u|0)==(R|0)&(w|0)==(V|0))break n;if(x=(x+1|0)%(wt|0)|0,v=h+(x<<3)|0,w=v,u=A[w>>2]|0,w=A[w+4>>2]|0,(u|0)==0&(w|0)==0)break;B=B+1|0}(R|0)==0&(V|0)==0||(Qa(R,V,zt),U8(c,Vt,zt)|0&&(B=v,A[B>>2]=R,A[B+4>>2]=V,B=Se+(_<<3)|0,A[B>>2]=R,A[B+4>>2]=V,_=_+1|0))}while(0);W=W+1|0}while(W>>>0<7);if(ne=ne+1|0,(ne|0)>=(re|0))break;J=J+1|0}if((re|0)>0&&Ki(Ce|0,0,re<<3|0)|0,A[Ft>>2]=_,(_|0)>0)R=m,V=ue,W=Xe,J=ee,ne=Te,re=Se,m=he,ue=p,ee=ve,Te=Ce,he=R,p=V,Xe=we,we=W,ve=J,Ce=ne,Se=$,$=re;else break e}return qe(ve),qe(we),qe(Vt),Vt=-1,U=We,Vt|0}else p=R;while(0);return qe(Vt),qe(m),qe(p),Vt=0,U=We,Vt|0}function xe(c,u,h,p,m,_){c=c|0,u=u|0,h=h|0,p=p|0,m=m|0,_=_|0;var v=0,w=0,x=0,B=0,R=0,V=0,W=0,J=0,ne=0,re=0,he=0,Te=0,ee=0,ue=0,$=0,Se=0,Ce=0,ve=0,we=0,Xe=0,Mt=0,wt=0,Ft=0;if(Mt=U,U=U+48|0,Ce=Mt+32|0,ve=Mt+16|0,we=Mt,v=A[c>>2]|0,(v|0)<=0)return Xe=0,U=Mt,Xe|0;Te=c+4|0,ee=Ce+8|0,ue=ve+8|0,$=we+8|0,Se=((u|0)<0)<<31>>31,he=0;e:for(;;){w=A[Te>>2]|0,ne=w+(he<<4)|0,A[Ce>>2]=A[ne>>2],A[Ce+4>>2]=A[ne+4>>2],A[Ce+8>>2]=A[ne+8>>2],A[Ce+12>>2]=A[ne+12>>2],(he|0)==(v+-1|0)?(A[ve>>2]=A[w>>2],A[ve+4>>2]=A[w+4>>2],A[ve+8>>2]=A[w+8>>2],A[ve+12>>2]=A[w+12>>2]):(ne=w+(he+1<<4)|0,A[ve>>2]=A[ne>>2],A[ve+4>>2]=A[ne+4>>2],A[ve+8>>2]=A[ne+8>>2],A[ve+12>>2]=A[ne+12>>2]),ne=VN(Ce,ve,h)|0;t:do if((ne|0)>0){re=+(ne|0),J=0;n:for(;;){Ft=+(ne-J|0),wt=+(J|0),G[we>>3]=+G[Ce>>3]*Ft/re+ +G[ve>>3]*wt/re,G[$>>3]=+G[ee>>3]*Ft/re+ +G[ue>>3]*wt/re,V=MT(we,h)|0,W=H()|0,w=zo(V|0,W|0,u|0,Se|0)|0,H()|0,v=_+(w<<3)|0,x=v,B=A[x>>2]|0,x=A[x+4>>2]|0;r:do if((B|0)==0&(x|0)==0)Xe=14;else for(R=0;;){if((R|0)>(u|0)){v=1;break r}if((B|0)==(V|0)&(x|0)==(W|0)){v=7;break r}if(w=(w+1|0)%(u|0)|0,v=_+(w<<3)|0,x=v,B=A[x>>2]|0,x=A[x+4>>2]|0,(B|0)==0&(x|0)==0){Xe=14;break}else R=R+1|0}while(0);switch((Xe|0)==14&&(Xe=0,(V|0)==0&(W|0)==0?v=7:(A[v>>2]=V,A[v+4>>2]=W,v=A[p>>2]|0,R=m+(v<<3)|0,A[R>>2]=V,A[R+4>>2]=W,A[p>>2]=v+1,v=0)),v&7){case 7:case 0:break;default:break n}if(J=J+1|0,(ne|0)<=(J|0)){Xe=8;break t}}if(v|0){v=-1,Xe=20;break e}}else Xe=8;while(0);if((Xe|0)==8&&(Xe=0),he=he+1|0,v=A[c>>2]|0,(he|0)>=(v|0)){v=0,Xe=20;break}}return(Xe|0)==20?(U=Mt,v|0):0}function st(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0,_=0,v=0,w=0,x=0,B=0;if(B=U,U=U+176|0,x=B,(u|0)<1){NT(h,0,0),U=B;return}v=c,v=fe(A[v>>2]|0,A[v+4>>2]|0,52)|0,H()|0,NT(h,(u|0)>6?u:6,v&15),v=0;do{if(p=c+(v<<3)|0,$a(A[p>>2]|0,A[p+4>>2]|0,x),p=A[x>>2]|0,(p|0)>0){w=0;do _=x+8+(w<<4)|0,w=w+1|0,p=x+8+(((w|0)%(p|0)|0)<<4)|0,m=q8(h,p,_)|0,m?zT(h,m)|0:Y8(h,_,p)|0,p=A[x>>2]|0;while((w|0)<(p|0))}v=v+1|0}while((v|0)!=(u|0));U=B}function _n(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0,_=0,v=0;if(_=U,U=U+32|0,p=_,m=_+16|0,st(c,u,m),A[h>>2]=0,A[h+4>>2]=0,A[h+8>>2]=0,c=GT(m)|0,!c){LT(h)|0,UT(m),U=_;return}do{u=I8(h)|0;do B8(u,c)|0,v=c+16|0,A[p>>2]=A[v>>2],A[p+4>>2]=A[v+4>>2],A[p+8>>2]=A[v+8>>2],A[p+12>>2]=A[v+12>>2],zT(m,c)|0,c=Z8(m,p)|0;while((c|0)!=0);c=GT(m)|0}while((c|0)!=0);LT(h)|0,UT(m),U=_}function Ye(c){return c=c|0,A[7728+(c*28|0)+16>>2]|0}function Pn(c){return c=c|0,(c|0)==4|(c|0)==117|0}function ti(c){return c=c|0,A[11152+((A[c>>2]|0)*216|0)+((A[c+4>>2]|0)*72|0)+((A[c+8>>2]|0)*24|0)+(A[c+12>>2]<<3)>>2]|0}function kN(c){return c=c|0,A[11152+((A[c>>2]|0)*216|0)+((A[c+4>>2]|0)*72|0)+((A[c+8>>2]|0)*24|0)+(A[c+12>>2]<<3)+4>>2]|0}function NN(c,u){c=c|0,u=u|0,c=7728+(c*28|0)|0,A[u>>2]=A[c>>2],A[u+4>>2]=A[c+4>>2],A[u+8>>2]=A[c+8>>2],A[u+12>>2]=A[c+12>>2]}function UN(c,u){c=c|0,u=u|0;var h=0,p=0;if(u>>>0>20)return u=-1,u|0;do if((A[11152+(u*216|0)>>2]|0)!=(c|0))if((A[11152+(u*216|0)+8>>2]|0)!=(c|0))if((A[11152+(u*216|0)+16>>2]|0)!=(c|0))if((A[11152+(u*216|0)+24>>2]|0)!=(c|0))if((A[11152+(u*216|0)+32>>2]|0)!=(c|0))if((A[11152+(u*216|0)+40>>2]|0)!=(c|0))if((A[11152+(u*216|0)+48>>2]|0)!=(c|0))if((A[11152+(u*216|0)+56>>2]|0)!=(c|0))if((A[11152+(u*216|0)+64>>2]|0)!=(c|0))if((A[11152+(u*216|0)+72>>2]|0)!=(c|0))if((A[11152+(u*216|0)+80>>2]|0)!=(c|0))if((A[11152+(u*216|0)+88>>2]|0)!=(c|0))if((A[11152+(u*216|0)+96>>2]|0)!=(c|0))if((A[11152+(u*216|0)+104>>2]|0)!=(c|0))if((A[11152+(u*216|0)+112>>2]|0)!=(c|0))if((A[11152+(u*216|0)+120>>2]|0)!=(c|0))if((A[11152+(u*216|0)+128>>2]|0)!=(c|0))if((A[11152+(u*216|0)+136>>2]|0)==(c|0))c=2,h=1,p=2;else{if((A[11152+(u*216|0)+144>>2]|0)==(c|0)){c=0,h=2,p=0;break}if((A[11152+(u*216|0)+152>>2]|0)==(c|0)){c=0,h=2,p=1;break}if((A[11152+(u*216|0)+160>>2]|0)==(c|0)){c=0,h=2,p=2;break}if((A[11152+(u*216|0)+168>>2]|0)==(c|0)){c=1,h=2,p=0;break}if((A[11152+(u*216|0)+176>>2]|0)==(c|0)){c=1,h=2,p=1;break}if((A[11152+(u*216|0)+184>>2]|0)==(c|0)){c=1,h=2,p=2;break}if((A[11152+(u*216|0)+192>>2]|0)==(c|0)){c=2,h=2,p=0;break}if((A[11152+(u*216|0)+200>>2]|0)==(c|0)){c=2,h=2,p=1;break}if((A[11152+(u*216|0)+208>>2]|0)==(c|0)){c=2,h=2,p=2;break}else c=-1;return c|0}else c=2,h=1,p=1;else c=2,h=1,p=0;else c=1,h=1,p=2;else c=1,h=1,p=1;else c=1,h=1,p=0;else c=0,h=1,p=2;else c=0,h=1,p=1;else c=0,h=1,p=0;else c=2,h=0,p=2;else c=2,h=0,p=1;else c=2,h=0,p=0;else c=1,h=0,p=2;else c=1,h=0,p=1;else c=1,h=0,p=0;else c=0,h=0,p=2;else c=0,h=0,p=1;else c=0,h=0,p=0;while(0);return u=A[11152+(u*216|0)+(h*72|0)+(c*24|0)+(p<<3)+4>>2]|0,u|0}function hT(c,u){return c=c|0,u=u|0,(A[7728+(c*28|0)+20>>2]|0)==(u|0)?(u=1,u|0):(u=(A[7728+(c*28|0)+24>>2]|0)==(u|0),u|0)}function Ay(c,u){return c=c|0,u=u|0,A[880+(c*28|0)+(u<<2)>>2]|0}function fy(c,u){return c=c|0,u=u|0,(A[880+(c*28|0)>>2]|0)==(u|0)?(u=0,u|0):(A[880+(c*28|0)+4>>2]|0)==(u|0)?(u=1,u|0):(A[880+(c*28|0)+8>>2]|0)==(u|0)?(u=2,u|0):(A[880+(c*28|0)+12>>2]|0)==(u|0)?(u=3,u|0):(A[880+(c*28|0)+16>>2]|0)==(u|0)?(u=4,u|0):(A[880+(c*28|0)+20>>2]|0)==(u|0)?(u=5,u|0):((A[880+(c*28|0)+24>>2]|0)==(u|0)?6:7)|0}function GN(){return 122}function zN(c){c=c|0;var u=0,h=0,p=0;u=0;do Ee(u|0,0,45)|0,p=H()|0|134225919,h=c+(u<<3)|0,A[h>>2]=-1,A[h+4>>2]=p,u=u+1|0;while((u|0)!=122)}function dT(c){return c=c|0,+G[c+16>>3]<+G[c+24>>3]|0}function pT(c,u){c=c|0,u=u|0;var h=0,p=0,m=0;return h=+G[u>>3],!(h>=+G[c+8>>3])||!(h<=+G[c>>3])?(u=0,u|0):(p=+G[c+16>>3],h=+G[c+24>>3],m=+G[u+8>>3],u=m>=h,c=m<=p&1,p<h?u&&(c=1):u||(c=0),u=(c|0)!=0,u|0)}function hy(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0,v=0,w=0,x=0,B=0;v=U,U=U+288|0,h=v+264|0,p=v+96|0,m=v,_=m,w=_+96|0;do A[_>>2]=0,_=_+4|0;while((_|0)<(w|0));return by(u,m),_=m,w=A[_>>2]|0,_=A[_+4>>2]|0,Qa(w,_,h),$a(w,_,p),x=+vA(h,p+8|0),G[h>>3]=+G[c>>3],_=h+8|0,G[_>>3]=+G[c+16>>3],G[p>>3]=+G[c+8>>3],w=p+8|0,G[w>>3]=+G[c+24>>3],B=+vA(h,p),w=~~+Qi(+(B*B/+jT(+ +tt(+((+G[_>>3]-+G[w>>3])/(+G[h>>3]-+G[p>>3]))),3)/(x*(x*2.59807621135)*.8))),U=v,((w|0)==0?1:w)|0}function VN(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0,_=0,v=0,w=0,x=0,B=0;w=U,U=U+288|0,p=w+264|0,m=w+96|0,_=w,v=_,x=v+96|0;do A[v>>2]=0,v=v+4|0;while((v|0)<(x|0));return by(h,_),x=_,v=A[x>>2]|0,x=A[x+4>>2]|0,Qa(v,x,p),$a(v,x,m),B=+vA(p,m+8|0),x=~~+Qi(+(+vA(c,u)/(B*2))),U=w,((x|0)==0?1:x)|0}function jN(c,u,h,p){c=c|0,u=u|0,h=h|0,p=p|0,A[c>>2]=u,A[c+4>>2]=h,A[c+8>>2]=p}function HN(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0,v=0,w=0,x=0,B=0,R=0,V=0,W=0;V=u+8|0,A[V>>2]=0,x=+G[c>>3],v=+tt(+x),B=+G[c+8>>3],w=+tt(+B)/.8660254037844386,v=v+w*.5,h=~~v,c=~~w,v=v-+(h|0),w=w-+(c|0);do if(v<.5)if(v<.3333333333333333)if(A[u>>2]=h,w<(v+1)*.5){A[u+4>>2]=c;break}else{c=c+1|0,A[u+4>>2]=c;break}else if(W=1-v,c=(!(w<W)&1)+c|0,A[u+4>>2]=c,W<=w&w<v*2){h=h+1|0,A[u>>2]=h;break}else{A[u>>2]=h;break}else{if(!(v<.6666666666666666))if(h=h+1|0,A[u>>2]=h,w<v*.5){A[u+4>>2]=c;break}else{c=c+1|0,A[u+4>>2]=c;break}if(w<1-v){if(A[u+4>>2]=c,v*2+-1<w){A[u>>2]=h;break}}else c=c+1|0,A[u+4>>2]=c;h=h+1|0,A[u>>2]=h}while(0);do if(x<0)if(c&1){R=(c+1|0)/2|0,R=bA(h|0,((h|0)<0)<<31>>31|0,R|0,((R|0)<0)<<31>>31|0)|0,h=~~(+(h|0)-((+(R>>>0)+4294967296*+(H()|0))*2+1)),A[u>>2]=h;break}else{R=(c|0)/2|0,R=bA(h|0,((h|0)<0)<<31>>31|0,R|0,((R|0)<0)<<31>>31|0)|0,h=~~(+(h|0)-(+(R>>>0)+4294967296*+(H()|0))*2),A[u>>2]=h;break}while(0);R=u+4|0,B<0&&(h=h-((c<<1|1|0)/2|0)|0,A[u>>2]=h,c=0-c|0,A[R>>2]=c),p=c-h|0,(h|0)<0?(m=0-h|0,A[R>>2]=p,A[V>>2]=m,A[u>>2]=0,c=p,h=0):m=0,(c|0)<0&&(h=h-c|0,A[u>>2]=h,m=m-c|0,A[V>>2]=m,A[R>>2]=0,c=0),_=h-m|0,p=c-m|0,(m|0)<0&&(A[u>>2]=_,A[R>>2]=p,A[V>>2]=0,c=p,h=_,m=0),p=(c|0)<(h|0)?c:h,p=(m|0)<(p|0)?m:p,!((p|0)<=0)&&(A[u>>2]=h-p,A[R>>2]=c-p,A[V>>2]=m-p)}function or(c){c=c|0;var u=0,h=0,p=0,m=0,_=0,v=0;u=A[c>>2]|0,v=c+4|0,h=A[v>>2]|0,(u|0)<0&&(h=h-u|0,A[v>>2]=h,_=c+8|0,A[_>>2]=(A[_>>2]|0)-u,A[c>>2]=0,u=0),(h|0)<0?(u=u-h|0,A[c>>2]=u,_=c+8|0,m=(A[_>>2]|0)-h|0,A[_>>2]=m,A[v>>2]=0,h=0):(m=c+8|0,_=m,m=A[m>>2]|0),(m|0)<0&&(u=u-m|0,A[c>>2]=u,h=h-m|0,A[v>>2]=h,A[_>>2]=0,m=0),p=(h|0)<(u|0)?h:u,p=(m|0)<(p|0)?m:p,!((p|0)<=0)&&(A[c>>2]=u-p,A[v>>2]=h-p,A[_>>2]=m-p)}function ja(c,u){c=c|0,u=u|0;var h=0,p=0;p=A[c+8>>2]|0,h=+((A[c+4>>2]|0)-p|0),G[u>>3]=+((A[c>>2]|0)-p|0)-h*.5,G[u+8>>3]=h*.8660254037844386}function Tr(c,u,h){c=c|0,u=u|0,h=h|0,A[h>>2]=(A[u>>2]|0)+(A[c>>2]|0),A[h+4>>2]=(A[u+4>>2]|0)+(A[c+4>>2]|0),A[h+8>>2]=(A[u+8>>2]|0)+(A[c+8>>2]|0)}function dy(c,u,h){c=c|0,u=u|0,h=h|0,A[h>>2]=(A[c>>2]|0)-(A[u>>2]|0),A[h+4>>2]=(A[c+4>>2]|0)-(A[u+4>>2]|0),A[h+8>>2]=(A[c+8>>2]|0)-(A[u+8>>2]|0)}function gT(c,u){c=c|0,u=u|0;var h=0,p=0;h=Un(A[c>>2]|0,u)|0,A[c>>2]=h,h=c+4|0,p=Un(A[h>>2]|0,u)|0,A[h>>2]=p,c=c+8|0,u=Un(A[c>>2]|0,u)|0,A[c>>2]=u}function Bd(c){c=c|0;var u=0,h=0,p=0,m=0,_=0,v=0,w=0;v=A[c>>2]|0,w=(v|0)<0,p=(A[c+4>>2]|0)-(w?v:0)|0,_=(p|0)<0,m=(_?0-p|0:0)+((A[c+8>>2]|0)-(w?v:0))|0,h=(m|0)<0,c=h?0:m,u=(_?0:p)-(h?m:0)|0,m=(w?0:v)-(_?p:0)-(h?m:0)|0,h=(u|0)<(m|0)?u:m,h=(c|0)<(h|0)?c:h,p=(h|0)>0,c=c-(p?h:0)|0,u=u-(p?h:0)|0;e:do switch(m-(p?h:0)|0){case 0:switch(u|0){case 0:return w=(c|0)==0?0:(c|0)==1?1:7,w|0;case 1:return w=(c|0)==0?2:(c|0)==1?3:7,w|0;default:break e}case 1:switch(u|0){case 0:return w=(c|0)==0?4:(c|0)==1?5:7,w|0;case 1:{if(!c)c=6;else break e;return c|0}default:break e}}while(0);return w=7,w|0}function mT(c){c=c|0;var u=0,h=0,p=0,m=0,_=0,v=0,w=0;v=c+8|0,h=A[v>>2]|0,u=(A[c>>2]|0)-h|0,w=c+4|0,h=(A[w>>2]|0)-h|0,p=Fd(+((u*3|0)-h|0)/7)|0,A[c>>2]=p,u=Fd(+((h<<1)+u|0)/7)|0,A[w>>2]=u,A[v>>2]=0,h=u-p|0,(p|0)<0?(_=0-p|0,A[w>>2]=h,A[v>>2]=_,A[c>>2]=0,u=h,p=0,h=_):h=0,(u|0)<0&&(p=p-u|0,A[c>>2]=p,h=h-u|0,A[v>>2]=h,A[w>>2]=0,u=0),_=p-h|0,m=u-h|0,(h|0)<0?(A[c>>2]=_,A[w>>2]=m,A[v>>2]=0,u=m,m=_,h=0):m=p,p=(u|0)<(m|0)?u:m,p=(h|0)<(p|0)?h:p,!((p|0)<=0)&&(A[c>>2]=m-p,A[w>>2]=u-p,A[v>>2]=h-p)}function py(c){c=c|0;var u=0,h=0,p=0,m=0,_=0,v=0,w=0;v=c+8|0,h=A[v>>2]|0,u=(A[c>>2]|0)-h|0,w=c+4|0,h=(A[w>>2]|0)-h|0,p=Fd(+((u<<1)+h|0)/7)|0,A[c>>2]=p,u=Fd(+((h*3|0)-u|0)/7)|0,A[w>>2]=u,A[v>>2]=0,h=u-p|0,(p|0)<0?(_=0-p|0,A[w>>2]=h,A[v>>2]=_,A[c>>2]=0,u=h,p=0,h=_):h=0,(u|0)<0&&(p=p-u|0,A[c>>2]=p,h=h-u|0,A[v>>2]=h,A[w>>2]=0,u=0),_=p-h|0,m=u-h|0,(h|0)<0?(A[c>>2]=_,A[w>>2]=m,A[v>>2]=0,u=m,m=_,h=0):m=p,p=(u|0)<(m|0)?u:m,p=(h|0)<(p|0)?h:p,!((p|0)<=0)&&(A[c>>2]=m-p,A[w>>2]=u-p,A[v>>2]=h-p)}function Ld(c){c=c|0;var u=0,h=0,p=0,m=0,_=0,v=0,w=0;u=A[c>>2]|0,v=c+4|0,h=A[v>>2]|0,w=c+8|0,p=A[w>>2]|0,m=h+(u*3|0)|0,A[c>>2]=m,h=p+(h*3|0)|0,A[v>>2]=h,u=(p*3|0)+u|0,A[w>>2]=u,p=h-m|0,(m|0)<0?(u=u-m|0,A[v>>2]=p,A[w>>2]=u,A[c>>2]=0,h=p,p=0):p=m,(h|0)<0&&(p=p-h|0,A[c>>2]=p,u=u-h|0,A[w>>2]=u,A[v>>2]=0,h=0),_=p-u|0,m=h-u|0,(u|0)<0?(A[c>>2]=_,A[v>>2]=m,A[w>>2]=0,p=_,u=0):m=h,h=(m|0)<(p|0)?m:p,h=(u|0)<(h|0)?u:h,!((h|0)<=0)&&(A[c>>2]=p-h,A[v>>2]=m-h,A[w>>2]=u-h)}function Ha(c){c=c|0;var u=0,h=0,p=0,m=0,_=0,v=0,w=0;m=A[c>>2]|0,v=c+4|0,u=A[v>>2]|0,w=c+8|0,h=A[w>>2]|0,p=(u*3|0)+m|0,m=h+(m*3|0)|0,A[c>>2]=m,A[v>>2]=p,u=(h*3|0)+u|0,A[w>>2]=u,h=p-m|0,(m|0)<0?(u=u-m|0,A[v>>2]=h,A[w>>2]=u,A[c>>2]=0,m=0):h=p,(h|0)<0&&(m=m-h|0,A[c>>2]=m,u=u-h|0,A[w>>2]=u,A[v>>2]=0,h=0),_=m-u|0,p=h-u|0,(u|0)<0?(A[c>>2]=_,A[v>>2]=p,A[w>>2]=0,m=_,u=0):p=h,h=(p|0)<(m|0)?p:m,h=(u|0)<(h|0)?u:h,!((h|0)<=0)&&(A[c>>2]=m-h,A[v>>2]=p-h,A[w>>2]=u-h)}function yT(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0,v=0,w=0;(u+-1|0)>>>0>=6||(m=(A[15472+(u*12|0)>>2]|0)+(A[c>>2]|0)|0,A[c>>2]=m,w=c+4|0,p=(A[15472+(u*12|0)+4>>2]|0)+(A[w>>2]|0)|0,A[w>>2]=p,v=c+8|0,u=(A[15472+(u*12|0)+8>>2]|0)+(A[v>>2]|0)|0,A[v>>2]=u,h=p-m|0,(m|0)<0?(u=u-m|0,A[w>>2]=h,A[v>>2]=u,A[c>>2]=0,p=0):(h=p,p=m),(h|0)<0&&(p=p-h|0,A[c>>2]=p,u=u-h|0,A[v>>2]=u,A[w>>2]=0,h=0),_=p-u|0,m=h-u|0,(u|0)<0?(A[c>>2]=_,A[w>>2]=m,A[v>>2]=0,p=_,u=0):m=h,h=(m|0)<(p|0)?m:p,h=(u|0)<(h|0)?u:h,!((h|0)<=0)&&(A[c>>2]=p-h,A[w>>2]=m-h,A[v>>2]=u-h))}function vT(c){c=c|0;var u=0,h=0,p=0,m=0,_=0,v=0,w=0;m=A[c>>2]|0,v=c+4|0,u=A[v>>2]|0,w=c+8|0,h=A[w>>2]|0,p=u+m|0,m=h+m|0,A[c>>2]=m,A[v>>2]=p,u=h+u|0,A[w>>2]=u,h=p-m|0,(m|0)<0?(u=u-m|0,A[v>>2]=h,A[w>>2]=u,A[c>>2]=0,p=0):(h=p,p=m),(h|0)<0&&(p=p-h|0,A[c>>2]=p,u=u-h|0,A[w>>2]=u,A[v>>2]=0,h=0),_=p-u|0,m=h-u|0,(u|0)<0?(A[c>>2]=_,A[v>>2]=m,A[w>>2]=0,p=_,u=0):m=h,h=(m|0)<(p|0)?m:p,h=(u|0)<(h|0)?u:h,!((h|0)<=0)&&(A[c>>2]=p-h,A[v>>2]=m-h,A[w>>2]=u-h)}function Rd(c){c=c|0;var u=0,h=0,p=0,m=0,_=0,v=0,w=0;u=A[c>>2]|0,v=c+4|0,p=A[v>>2]|0,w=c+8|0,h=A[w>>2]|0,m=p+u|0,A[c>>2]=m,p=h+p|0,A[v>>2]=p,u=h+u|0,A[w>>2]=u,h=p-m|0,(m|0)<0?(u=u-m|0,A[v>>2]=h,A[w>>2]=u,A[c>>2]=0,p=0):(h=p,p=m),(h|0)<0&&(p=p-h|0,A[c>>2]=p,u=u-h|0,A[w>>2]=u,A[v>>2]=0,h=0),_=p-u|0,m=h-u|0,(u|0)<0?(A[c>>2]=_,A[v>>2]=m,A[w>>2]=0,p=_,u=0):m=h,h=(m|0)<(p|0)?m:p,h=(u|0)<(h|0)?u:h,!((h|0)<=0)&&(A[c>>2]=p-h,A[v>>2]=m-h,A[w>>2]=u-h)}function Wa(c){switch(c=c|0,c|0){case 1:{c=5;break}case 5:{c=4;break}case 4:{c=6;break}case 6:{c=2;break}case 2:{c=3;break}case 3:{c=1;break}}return c|0}function Uo(c){switch(c=c|0,c|0){case 1:{c=3;break}case 3:{c=2;break}case 2:{c=6;break}case 6:{c=4;break}case 4:{c=5;break}case 5:{c=1;break}}return c|0}function _T(c){c=c|0;var u=0,h=0,p=0,m=0,_=0,v=0,w=0;u=A[c>>2]|0,v=c+4|0,h=A[v>>2]|0,w=c+8|0,p=A[w>>2]|0,m=h+(u<<1)|0,A[c>>2]=m,h=p+(h<<1)|0,A[v>>2]=h,u=(p<<1)+u|0,A[w>>2]=u,p=h-m|0,(m|0)<0?(u=u-m|0,A[v>>2]=p,A[w>>2]=u,A[c>>2]=0,h=p,p=0):p=m,(h|0)<0&&(p=p-h|0,A[c>>2]=p,u=u-h|0,A[w>>2]=u,A[v>>2]=0,h=0),_=p-u|0,m=h-u|0,(u|0)<0?(A[c>>2]=_,A[v>>2]=m,A[w>>2]=0,p=_,u=0):m=h,h=(m|0)<(p|0)?m:p,h=(u|0)<(h|0)?u:h,!((h|0)<=0)&&(A[c>>2]=p-h,A[v>>2]=m-h,A[w>>2]=u-h)}function bT(c){c=c|0;var u=0,h=0,p=0,m=0,_=0,v=0,w=0;m=A[c>>2]|0,v=c+4|0,u=A[v>>2]|0,w=c+8|0,h=A[w>>2]|0,p=(u<<1)+m|0,m=h+(m<<1)|0,A[c>>2]=m,A[v>>2]=p,u=(h<<1)+u|0,A[w>>2]=u,h=p-m|0,(m|0)<0?(u=u-m|0,A[v>>2]=h,A[w>>2]=u,A[c>>2]=0,m=0):h=p,(h|0)<0&&(m=m-h|0,A[c>>2]=m,u=u-h|0,A[w>>2]=u,A[v>>2]=0,h=0),_=m-u|0,p=h-u|0,(u|0)<0?(A[c>>2]=_,A[v>>2]=p,A[w>>2]=0,m=_,u=0):p=h,h=(p|0)<(m|0)?p:m,h=(u|0)<(h|0)?u:h,!((h|0)<=0)&&(A[c>>2]=m-h,A[v>>2]=p-h,A[w>>2]=u-h)}function gy(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0,v=0,w=0;return v=(A[c>>2]|0)-(A[u>>2]|0)|0,w=(v|0)<0,p=(A[c+4>>2]|0)-(A[u+4>>2]|0)-(w?v:0)|0,_=(p|0)<0,m=(w?0-v|0:0)+(A[c+8>>2]|0)-(A[u+8>>2]|0)+(_?0-p|0:0)|0,c=(m|0)<0,u=c?0:m,h=(_?0:p)-(c?m:0)|0,m=(w?0:v)-(_?p:0)-(c?m:0)|0,c=(h|0)<(m|0)?h:m,c=(u|0)<(c|0)?u:c,p=(c|0)>0,u=u-(p?c:0)|0,h=h-(p?c:0)|0,c=m-(p?c:0)|0,c=(c|0)>-1?c:0-c|0,h=(h|0)>-1?h:0-h|0,u=(u|0)>-1?u:0-u|0,u=(h|0)>(u|0)?h:u,((c|0)>(u|0)?c:u)|0}function WN(c,u){c=c|0,u=u|0;var h=0;h=A[c+8>>2]|0,A[u>>2]=(A[c>>2]|0)-h,A[u+4>>2]=(A[c+4>>2]|0)-h}function QN(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0,v=0,w=0;p=A[c>>2]|0,A[u>>2]=p,c=A[c+4>>2]|0,v=u+4|0,A[v>>2]=c,w=u+8|0,A[w>>2]=0,h=c-p|0,(p|0)<0?(c=0-p|0,A[v>>2]=h,A[w>>2]=c,A[u>>2]=0,p=0):(h=c,c=0),(h|0)<0&&(p=p-h|0,A[u>>2]=p,c=c-h|0,A[w>>2]=c,A[v>>2]=0,h=0),_=p-c|0,m=h-c|0,(c|0)<0?(A[u>>2]=_,A[v>>2]=m,A[w>>2]=0,h=m,m=_,c=0):m=p,p=(h|0)<(m|0)?h:m,p=(c|0)<(p|0)?c:p,!((p|0)<=0)&&(A[u>>2]=m-p,A[v>>2]=h-p,A[w>>2]=c-p)}function wT(c){c=c|0;var u=0,h=0,p=0,m=0;u=c+8|0,m=A[u>>2]|0,h=m-(A[c>>2]|0)|0,A[c>>2]=h,p=c+4|0,c=(A[p>>2]|0)-m|0,A[p>>2]=c,A[u>>2]=0-(c+h)}function $N(c){c=c|0;var u=0,h=0,p=0,m=0,_=0,v=0,w=0;h=A[c>>2]|0,u=0-h|0,A[c>>2]=u,v=c+8|0,A[v>>2]=0,w=c+4|0,p=A[w>>2]|0,m=p+h|0,(h|0)>0?(A[w>>2]=m,A[v>>2]=h,A[c>>2]=0,u=0,p=m):h=0,(p|0)<0?(_=u-p|0,A[c>>2]=_,h=h-p|0,A[v>>2]=h,A[w>>2]=0,m=_-h|0,u=0-h|0,(h|0)<0?(A[c>>2]=m,A[w>>2]=u,A[v>>2]=0,p=u,h=0):(p=0,m=_)):m=u,u=(p|0)<(m|0)?p:m,u=(h|0)<(u|0)?h:u,!((u|0)<=0)&&(A[c>>2]=m-u,A[w>>2]=p-u,A[v>>2]=h-u)}function XN(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0;p=U,U=U+16|0,m=p,JN(c,u,h,m),HN(m,h+4|0),U=p}function JN(c,u,h,p){c=c|0,u=u|0,h=h|0,p=p|0;var m=0,_=0,v=0,w=0,x=0;if(x=U,U=U+32|0,_=x,X8(c,_),A[h>>2]=0,m=+bn(15888,_),v=+bn(15912,_),v<m&&(A[h>>2]=1,m=v),v=+bn(15936,_),v<m&&(A[h>>2]=2,m=v),v=+bn(15960,_),v<m&&(A[h>>2]=3,m=v),v=+bn(15984,_),v<m&&(A[h>>2]=4,m=v),v=+bn(16008,_),v<m&&(A[h>>2]=5,m=v),v=+bn(16032,_),v<m&&(A[h>>2]=6,m=v),v=+bn(16056,_),v<m&&(A[h>>2]=7,m=v),v=+bn(16080,_),v<m&&(A[h>>2]=8,m=v),v=+bn(16104,_),v<m&&(A[h>>2]=9,m=v),v=+bn(16128,_),v<m&&(A[h>>2]=10,m=v),v=+bn(16152,_),v<m&&(A[h>>2]=11,m=v),v=+bn(16176,_),v<m&&(A[h>>2]=12,m=v),v=+bn(16200,_),v<m&&(A[h>>2]=13,m=v),v=+bn(16224,_),v<m&&(A[h>>2]=14,m=v),v=+bn(16248,_),v<m&&(A[h>>2]=15,m=v),v=+bn(16272,_),v<m&&(A[h>>2]=16,m=v),v=+bn(16296,_),v<m&&(A[h>>2]=17,m=v),v=+bn(16320,_),v<m&&(A[h>>2]=18,m=v),v=+bn(16344,_),v<m&&(A[h>>2]=19,m=v),v=+Ts(+(1-m*.5)),v<1e-16){A[p>>2]=0,A[p+4>>2]=0,A[p+8>>2]=0,A[p+12>>2]=0,U=x;return}if(h=A[h>>2]|0,m=+G[16368+(h*24|0)>>3],m=+yA(m-+yA(+e8(15568+(h<<4)|0,c))),wi(u)|0?w=+yA(m+-.3334731722518321):w=m,m=+An(+v)/.381966011250105,(u|0)>0){_=0;do m=m*2.6457513110645907,_=_+1|0;while((_|0)!=(u|0))}v=+ft(+w)*m,G[p>>3]=v,w=+at(+w)*m,G[p+8>>3]=w,U=x}function mA(c,u,h,p,m){c=c|0,u=u|0,h=h|0,p=p|0,m=m|0;var _=0,v=0;if(_=+$8(c),_<1e-16){u=15568+(u<<4)|0,A[m>>2]=A[u>>2],A[m+4>>2]=A[u+4>>2],A[m+8>>2]=A[u+8>>2],A[m+12>>2]=A[u+12>>2];return}if(v=+$t(+ +G[c+8>>3],+ +G[c>>3]),(h|0)>0){c=0;do _=_/2.6457513110645907,c=c+1|0;while((c|0)!=(h|0))}p?(_=_/3,h=(wi(h)|0)==0,_=+No(+((h?_:_/2.6457513110645907)*.381966011250105))):(_=+No(+(_*.381966011250105)),wi(h)|0&&(v=+yA(v+.3334731722518321))),t8(15568+(u<<4)|0,+yA(+G[16368+(u*24|0)>>3]-v),_,m)}function KN(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0;p=U,U=U+16|0,m=p,ja(c+4|0,m),mA(m,A[c>>2]|0,u,0,h),U=p}function ET(c,u,h,p,m){c=c|0,u=u|0,h=h|0,p=p|0,m=m|0;var _=0,v=0,w=0,x=0,B=0,R=0,V=0,W=0,J=0,ne=0,re=0,he=0,Te=0,ee=0,ue=0,$=0,Se=0,Ce=0,ve=0,we=0,Xe=0,Mt=0,wt=0,Ft=0,vt=0,zt=0,Vt=0,We=0;if(zt=U,U=U+272|0,_=zt+256|0,ee=zt+240|0,wt=zt,Ft=zt+224|0,vt=zt+208|0,ue=zt+176|0,$=zt+160|0,Se=zt+192|0,Ce=zt+144|0,ve=zt+128|0,we=zt+112|0,Xe=zt+96|0,Mt=zt+80|0,A[_>>2]=u,A[ee>>2]=A[c>>2],A[ee+4>>2]=A[c+4>>2],A[ee+8>>2]=A[c+8>>2],A[ee+12>>2]=A[c+12>>2],TT(ee,_,wt),A[m>>2]=0,ee=p+h+((p|0)==5&1)|0,(ee|0)<=(h|0)){U=zt;return}x=A[_>>2]|0,B=Ft+4|0,R=ue+4|0,V=h+5|0,W=16848+(x<<2)|0,J=16928+(x<<2)|0,ne=ve+8|0,re=we+8|0,he=Xe+8|0,Te=vt+4|0,w=h;e:for(;;){v=wt+(((w|0)%5|0)<<4)|0,A[vt>>2]=A[v>>2],A[vt+4>>2]=A[v+4>>2],A[vt+8>>2]=A[v+8>>2],A[vt+12>>2]=A[v+12>>2];do;while((tc(vt,x,0,1)|0)==2);if((w|0)>(h|0)&(wi(u)|0)!=0){if(A[ue>>2]=A[vt>>2],A[ue+4>>2]=A[vt+4>>2],A[ue+8>>2]=A[vt+8>>2],A[ue+12>>2]=A[vt+12>>2],ja(B,$),p=A[ue>>2]|0,_=A[17008+(p*80|0)+(A[Ft>>2]<<2)>>2]|0,A[ue>>2]=A[18608+(p*80|0)+(_*20|0)>>2],v=A[18608+(p*80|0)+(_*20|0)+16>>2]|0,(v|0)>0){c=0;do vT(R),c=c+1|0;while((c|0)<(v|0))}switch(v=18608+(p*80|0)+(_*20|0)+4|0,A[Se>>2]=A[v>>2],A[Se+4>>2]=A[v+4>>2],A[Se+8>>2]=A[v+8>>2],gT(Se,(A[W>>2]|0)*3|0),Tr(R,Se,R),or(R),ja(R,Ce),Vt=+(A[J>>2]|0),G[ve>>3]=Vt*3,G[ne>>3]=0,We=Vt*-1.5,G[we>>3]=We,G[re>>3]=Vt*2.598076211353316,G[Xe>>3]=We,G[he>>3]=Vt*-2.598076211353316,A[17008+((A[ue>>2]|0)*80|0)+(A[vt>>2]<<2)>>2]|0){case 1:{c=we,p=ve;break}case 3:{c=Xe,p=we;break}case 2:{c=ve,p=Xe;break}default:{c=12;break e}}FT($,Ce,p,c,Mt),mA(Mt,A[ue>>2]|0,x,1,m+8+(A[m>>2]<<4)|0),A[m>>2]=(A[m>>2]|0)+1}if((w|0)<(V|0)&&(ja(Te,ue),mA(ue,A[vt>>2]|0,x,1,m+8+(A[m>>2]<<4)|0),A[m>>2]=(A[m>>2]|0)+1),A[Ft>>2]=A[vt>>2],A[Ft+4>>2]=A[vt+4>>2],A[Ft+8>>2]=A[vt+8>>2],A[Ft+12>>2]=A[vt+12>>2],w=w+1|0,(w|0)>=(ee|0)){c=3;break}}if((c|0)==3){U=zt;return}else(c|0)==12&&yt(22474,22521,581,22531)}function TT(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0,_=0,v=0,w=0,x=0;x=U,U=U+128|0,p=x+64|0,m=x,_=p,v=20208,w=_+60|0;do A[_>>2]=A[v>>2],_=_+4|0,v=v+4|0;while((_|0)<(w|0));_=m,v=20272,w=_+60|0;do A[_>>2]=A[v>>2],_=_+4|0,v=v+4|0;while((_|0)<(w|0));w=(wi(A[u>>2]|0)|0)==0,p=w?p:m,m=c+4|0,_T(m),bT(m),wi(A[u>>2]|0)|0&&(Ha(m),A[u>>2]=(A[u>>2]|0)+1),A[h>>2]=A[c>>2],u=h+4|0,Tr(m,p,u),or(u),A[h+16>>2]=A[c>>2],u=h+20|0,Tr(m,p+12|0,u),or(u),A[h+32>>2]=A[c>>2],u=h+36|0,Tr(m,p+24|0,u),or(u),A[h+48>>2]=A[c>>2],u=h+52|0,Tr(m,p+36|0,u),or(u),A[h+64>>2]=A[c>>2],h=h+68|0,Tr(m,p+48|0,h),or(h),U=x}function tc(c,u,h,p){c=c|0,u=u|0,h=h|0,p=p|0;var m=0,_=0,v=0,w=0,x=0,B=0,R=0,V=0,W=0,J=0,ne=0;if(ne=U,U=U+32|0,W=ne+12|0,w=ne,J=c+4|0,V=A[16928+(u<<2)>>2]|0,R=(p|0)!=0,V=R?V*3|0:V,m=A[J>>2]|0,B=c+8|0,v=A[B>>2]|0,R){if(_=c+12|0,p=A[_>>2]|0,m=v+m+p|0,(m|0)==(V|0))return J=1,U=ne,J|0;x=_}else x=c+12|0,p=A[x>>2]|0,m=v+m+p|0;if((m|0)<=(V|0))return J=0,U=ne,J|0;do if((p|0)>0){if(p=A[c>>2]|0,(v|0)>0){_=18608+(p*80|0)+60|0,p=c;break}p=18608+(p*80|0)+40|0,h?(jN(W,V,0,0),dy(J,W,w),Rd(w),Tr(w,W,J),_=p,p=c):(_=p,p=c)}else _=18608+((A[c>>2]|0)*80|0)+20|0,p=c;while(0);if(A[p>>2]=A[_>>2],m=_+16|0,(A[m>>2]|0)>0){p=0;do vT(J),p=p+1|0;while((p|0)<(A[m>>2]|0))}return c=_+4|0,A[W>>2]=A[c>>2],A[W+4>>2]=A[c+4>>2],A[W+8>>2]=A[c+8>>2],u=A[16848+(u<<2)>>2]|0,gT(W,R?u*3|0:u),Tr(J,W,J),or(J),R?p=((A[B>>2]|0)+(A[J>>2]|0)+(A[x>>2]|0)|0)==(V|0)?1:2:p=2,J=p,U=ne,J|0}function YN(c,u){c=c|0,u=u|0;var h=0;do h=tc(c,u,0,1)|0;while((h|0)==2);return h|0}function ST(c,u,h,p,m){c=c|0,u=u|0,h=h|0,p=p|0,m=m|0;var _=0,v=0,w=0,x=0,B=0,R=0,V=0,W=0,J=0,ne=0,re=0,he=0,Te=0,ee=0,ue=0,$=0,Se=0,Ce=0,ve=0,we=0,Xe=0,Mt=0,wt=0;if(Xe=U,U=U+240|0,_=Xe+224|0,Se=Xe+208|0,Ce=Xe,ve=Xe+192|0,we=Xe+176|0,he=Xe+160|0,Te=Xe+144|0,ee=Xe+128|0,ue=Xe+112|0,$=Xe+96|0,A[_>>2]=u,A[Se>>2]=A[c>>2],A[Se+4>>2]=A[c+4>>2],A[Se+8>>2]=A[c+8>>2],A[Se+12>>2]=A[c+12>>2],xT(Se,_,Ce),A[m>>2]=0,re=p+h+((p|0)==6&1)|0,(re|0)<=(h|0)){U=Xe;return}x=A[_>>2]|0,B=h+6|0,R=16928+(x<<2)|0,V=Te+8|0,W=ee+8|0,J=ue+8|0,ne=ve+4|0,v=0,w=h,p=-1;e:for(;;){if(_=(w|0)%6|0,c=Ce+(_<<4)|0,A[ve>>2]=A[c>>2],A[ve+4>>2]=A[c+4>>2],A[ve+8>>2]=A[c+8>>2],A[ve+12>>2]=A[c+12>>2],c=v,v=tc(ve,x,0,1)|0,(w|0)>(h|0)&(wi(u)|0)!=0&&(c|0)!=1&&(A[ve>>2]|0)!=(p|0)){switch(ja(Ce+(((_+5|0)%6|0)<<4)+4|0,we),ja(Ce+(_<<4)+4|0,he),Mt=+(A[R>>2]|0),G[Te>>3]=Mt*3,G[V>>3]=0,wt=Mt*-1.5,G[ee>>3]=wt,G[W>>3]=Mt*2.598076211353316,G[ue>>3]=wt,G[J>>3]=Mt*-2.598076211353316,_=A[Se>>2]|0,A[17008+(_*80|0)+(((p|0)==(_|0)?A[ve>>2]|0:p)<<2)>>2]|0){case 1:{c=ee,p=Te;break}case 3:{c=ue,p=ee;break}case 2:{c=Te,p=ue;break}default:{c=8;break e}}FT(we,he,p,c,$),!(kT(we,$)|0)&&!(kT(he,$)|0)&&(mA($,A[Se>>2]|0,x,1,m+8+(A[m>>2]<<4)|0),A[m>>2]=(A[m>>2]|0)+1)}if((w|0)<(B|0)&&(ja(ne,we),mA(we,A[ve>>2]|0,x,1,m+8+(A[m>>2]<<4)|0),A[m>>2]=(A[m>>2]|0)+1),w=w+1|0,(w|0)>=(re|0)){c=3;break}else p=A[ve>>2]|0}if((c|0)==3){U=Xe;return}else(c|0)==8&&yt(22557,22521,746,22602)}function xT(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0,_=0,v=0,w=0,x=0;x=U,U=U+160|0,p=x+80|0,m=x,_=p,v=20336,w=_+72|0;do A[_>>2]=A[v>>2],_=_+4|0,v=v+4|0;while((_|0)<(w|0));_=m,v=20416,w=_+72|0;do A[_>>2]=A[v>>2],_=_+4|0,v=v+4|0;while((_|0)<(w|0));w=(wi(A[u>>2]|0)|0)==0,p=w?p:m,m=c+4|0,_T(m),bT(m),wi(A[u>>2]|0)|0&&(Ha(m),A[u>>2]=(A[u>>2]|0)+1),A[h>>2]=A[c>>2],u=h+4|0,Tr(m,p,u),or(u),A[h+16>>2]=A[c>>2],u=h+20|0,Tr(m,p+12|0,u),or(u),A[h+32>>2]=A[c>>2],u=h+36|0,Tr(m,p+24|0,u),or(u),A[h+48>>2]=A[c>>2],u=h+52|0,Tr(m,p+36|0,u),or(u),A[h+64>>2]=A[c>>2],u=h+68|0,Tr(m,p+48|0,u),or(u),A[h+80>>2]=A[c>>2],h=h+84|0,Tr(m,p+60|0,h),or(h),U=x}function yA(c){c=+c;var u=0;return u=c<0?c+6.283185307179586:c,+(c>=6.283185307179586?u+-6.283185307179586:u)}function nc(c,u){return c=c|0,u=u|0,+tt(+(+G[c>>3]-+G[u>>3]))<17453292519943298e-27?(u=+tt(+(+G[c+8>>3]-+G[u+8>>3]))<17453292519943298e-27,u|0):(u=0,u|0)}function qN(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0;return m=+G[u>>3],p=+G[c>>3],_=+at(+((m-p)*.5)),h=+at(+((+G[u+8>>3]-+G[c+8>>3])*.5)),h=_*_+h*(+ft(+m)*+ft(+p)*h),+(+$t(+ +rt(+h),+ +rt(+(1-h)))*2)}function vA(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0;return m=+G[u>>3],p=+G[c>>3],_=+at(+((m-p)*.5)),h=+at(+((+G[u+8>>3]-+G[c+8>>3])*.5)),h=_*_+h*(+ft(+m)*+ft(+p)*h),+(+$t(+ +rt(+h),+ +rt(+(1-h)))*2*6371.007180918475)}function ZN(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0;return m=+G[u>>3],p=+G[c>>3],_=+at(+((m-p)*.5)),h=+at(+((+G[u+8>>3]-+G[c+8>>3])*.5)),h=_*_+h*(+ft(+m)*+ft(+p)*h),+(+$t(+ +rt(+h),+ +rt(+(1-h)))*2*6371.007180918475*1e3)}function e8(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0,v=0;return _=+G[u>>3],p=+ft(+_),m=+G[u+8>>3]-+G[c+8>>3],v=p*+at(+m),h=+G[c>>3],+ +$t(+v,+(+at(+_)*+ft(+h)-+ft(+m)*(p*+at(+h))))}function t8(c,u,h,p){c=c|0,u=+u,h=+h,p=p|0;var m=0,_=0,v=0,w=0;if(h<1e-16){A[p>>2]=A[c>>2],A[p+4>>2]=A[c+4>>2],A[p+8>>2]=A[c+8>>2],A[p+12>>2]=A[c+12>>2];return}_=u<0?u+6.283185307179586:u,_=u>=6.283185307179586?_+-6.283185307179586:_;do if(_<1e-16)u=+G[c>>3]+h,G[p>>3]=u,m=p;else{if(m=+tt(+(_+-3.141592653589793))<1e-16,u=+G[c>>3],m){u=u-h,G[p>>3]=u,m=p;break}if(v=+ft(+h),h=+at(+h),u=v*+at(+u)+ +ft(+_)*(h*+ft(+u)),u=u>1?1:u,u=+Kl(+(u<-1?-1:u)),G[p>>3]=u,+tt(+(u+-1.5707963267948966))<1e-16){G[p>>3]=1.5707963267948966,G[p+8>>3]=0;return}if(+tt(+(u+1.5707963267948966))<1e-16){G[p>>3]=-1.5707963267948966,G[p+8>>3]=0;return}if(w=+ft(+u),_=h*+at(+_)/w,h=+G[c>>3],u=(v-+at(+u)*+at(+h))/+ft(+h)/w,v=_>1?1:_,u=u>1?1:u,u=+G[c+8>>3]+ +$t(+(v<-1?-1:v),+(u<-1?-1:u)),u>3.141592653589793)do u=u+-6.283185307179586;while(u>3.141592653589793);if(u<-3.141592653589793)do u=u+6.283185307179586;while(u<-3.141592653589793);G[p+8>>3]=u;return}while(0);if(+tt(+(u+-1.5707963267948966))<1e-16){G[m>>3]=1.5707963267948966,G[p+8>>3]=0;return}if(+tt(+(u+1.5707963267948966))<1e-16){G[m>>3]=-1.5707963267948966,G[p+8>>3]=0;return}if(u=+G[c+8>>3],u>3.141592653589793)do u=u+-6.283185307179586;while(u>3.141592653589793);if(u<-3.141592653589793)do u=u+6.283185307179586;while(u<-3.141592653589793);G[p+8>>3]=u}function n8(c){return c=c|0,+ +G[20496+(c<<3)>>3]}function r8(c){return c=c|0,+ +G[20624+(c<<3)>>3]}function i8(c){return c=c|0,+ +G[20752+(c<<3)>>3]}function s8(c){return c=c|0,+ +G[20880+(c<<3)>>3]}function o8(c){c=c|0;var u=0;return u=21008+(c<<3)|0,c=A[u>>2]|0,ke(A[u+4>>2]|0),c|0}function rc(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0,_=0,v=0,w=0,x=0,B=0,R=0,V=0,W=0;return W=+G[u>>3],R=+G[c>>3],x=+at(+((W-R)*.5)),_=+G[u+8>>3],B=+G[c+8>>3],v=+at(+((_-B)*.5)),w=+ft(+R),V=+ft(+W),v=x*x+v*(V*w*v),v=+$t(+ +rt(+v),+ +rt(+(1-v)))*2,x=+G[h>>3],W=+at(+((x-W)*.5)),p=+G[h+8>>3],_=+at(+((p-_)*.5)),m=+ft(+x),_=W*W+_*(V*m*_),_=+$t(+ +rt(+_),+ +rt(+(1-_)))*2,x=+at(+((R-x)*.5)),p=+at(+((B-p)*.5)),p=x*x+p*(w*m*p),p=+$t(+ +rt(+p),+ +rt(+(1-p)))*2,m=(v+_+p)*.5,+(+No(+ +rt(+(+An(+(m*.5))*+An(+((m-v)*.5))*+An(+((m-_)*.5))*+An(+((m-p)*.5)))))*4)}function a8(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0,v=0;if(_=U,U=U+192|0,p=_+168|0,m=_,Qa(c,u,p),$a(c,u,m),u=A[m>>2]|0,(u|0)<=0)return h=0,U=_,+h;if(h=+rc(m+8|0,m+8+(((u|0)!=1&1)<<4)|0,p)+0,(u|0)==1)return U=_,+h;c=1;do v=c,c=c+1|0,h=h+ +rc(m+8+(v<<4)|0,m+8+(((c|0)%(u|0)|0)<<4)|0,p);while((c|0)<(u|0));return U=_,+h}function l8(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0,v=0;if(_=U,U=U+192|0,p=_+168|0,m=_,Qa(c,u,p),$a(c,u,m),u=A[m>>2]|0,(u|0)>0){if(h=+rc(m+8|0,m+8+(((u|0)!=1&1)<<4)|0,p)+0,(u|0)!=1){c=1;do v=c,c=c+1|0,h=h+ +rc(m+8+(v<<4)|0,m+8+(((c|0)%(u|0)|0)<<4)|0,p);while((c|0)<(u|0))}}else h=0;return U=_,+(h*6371.007180918475*6371.007180918475)}function c8(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0,v=0;if(_=U,U=U+192|0,p=_+168|0,m=_,Qa(c,u,p),$a(c,u,m),u=A[m>>2]|0,(u|0)>0){if(h=+rc(m+8|0,m+8+(((u|0)!=1&1)<<4)|0,p)+0,(u|0)!=1){c=1;do v=c,c=c+1|0,h=h+ +rc(m+8+(v<<4)|0,m+8+(((c|0)%(u|0)|0)<<4)|0,p);while((c|0)<(u|0))}}else h=0;return U=_,+(h*6371.007180918475*6371.007180918475*1e3*1e3)}function u8(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0,v=0,w=0,x=0,B=0;if(v=U,U=U+176|0,_=v,Od(c,u,_),c=A[_>>2]|0,(c|0)<=1)return m=0,U=v,+m;u=c+-1|0,c=0,h=0,p=+G[_+8>>3],m=+G[_+16>>3];do c=c+1|0,x=p,p=+G[_+8+(c<<4)>>3],B=+at(+((p-x)*.5)),w=m,m=+G[_+8+(c<<4)+8>>3],w=+at(+((m-w)*.5)),w=B*B+w*(+ft(+p)*+ft(+x)*w),h=h+ +$t(+ +rt(+w),+ +rt(+(1-w)))*2;while((c|0)<(u|0));return U=v,+h}function A8(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0,v=0,w=0,x=0,B=0;if(v=U,U=U+176|0,_=v,Od(c,u,_),c=A[_>>2]|0,(c|0)<=1)return m=0,U=v,+m;u=c+-1|0,c=0,h=0,p=+G[_+8>>3],m=+G[_+16>>3];do c=c+1|0,x=p,p=+G[_+8+(c<<4)>>3],B=+at(+((p-x)*.5)),w=m,m=+G[_+8+(c<<4)+8>>3],w=+at(+((m-w)*.5)),w=B*B+w*(+ft(+x)*+ft(+p)*w),h=h+ +$t(+ +rt(+w),+ +rt(+(1-w)))*2;while((c|0)!=(u|0));return B=h*6371.007180918475,U=v,+B}function f8(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0,v=0,w=0,x=0,B=0;if(v=U,U=U+176|0,_=v,Od(c,u,_),c=A[_>>2]|0,(c|0)<=1)return m=0,U=v,+m;u=c+-1|0,c=0,h=0,p=+G[_+8>>3],m=+G[_+16>>3];do c=c+1|0,x=p,p=+G[_+8+(c<<4)>>3],B=+at(+((p-x)*.5)),w=m,m=+G[_+8+(c<<4)+8>>3],w=+at(+((m-w)*.5)),w=B*B+w*(+ft(+x)*+ft(+p)*w),h=h+ +$t(+ +rt(+w),+ +rt(+(1-w)))*2;while((c|0)!=(u|0));return B=h*6371.007180918475*1e3,U=v,+B}function h8(c,u){return c=c|0,u=u|0,u=fe(c|0,u|0,52)|0,H()|0,u&15|0}function CT(c,u){return c=c|0,u=u|0,u=fe(c|0,u|0,45)|0,H()|0,u&127|0}function PT(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0,v=0,w=0;if(!(!0&(u&-16777216|0)==134217728)||(v=fe(c|0,u|0,45)|0,H()|0,v=v&127,v>>>0>121))return u=0,u|0;h=fe(c|0,u|0,52)|0,H()|0,h=h&15;do if(h|0){for(m=1,p=0;;){if(_=fe(c|0,u|0,(15-m|0)*3|0)|0,H()|0,_=_&7,(_|0)!=0&(p^1))if((_|0)==1&(Ye(v)|0)!=0){w=0,p=13;break}else p=1;if((_|0)==7){w=0,p=13;break}if(m>>>0<h>>>0)m=m+1|0;else{p=9;break}}if((p|0)==9){if((h|0)==15)w=1;else break;return w|0}else if((p|0)==13)return w|0}while(0);for(;;){if(w=fe(c|0,u|0,(14-h|0)*3|0)|0,H()|0,!((w&7|0)==7&!0)){w=0,p=13;break}if(h>>>0<14)h=h+1|0;else{w=1,p=13;break}}return(p|0)==13?w|0:0}function my(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0;if(p=fe(c|0,u|0,52)|0,H()|0,p=p&15,(p|0)>=(h|0)){if((p|0)!=(h|0))if(h>>>0<=15){if(m=Ee(h|0,0,52)|0,c=m|c,u=H()|0|u&-15728641,(p|0)>(h|0))do m=Ee(7,0,(14-h|0)*3|0)|0,h=h+1|0,c=m|c,u=H()|0|u;while((h|0)<(p|0))}else u=0,c=0}else u=0,c=0;return ke(u|0),c|0}function d8(c,u,h){return c=c|0,u=u|0,h=h|0,c=fe(c|0,u|0,52)|0,H()|0,c=c&15,(h|0)<16&(c|0)<=(h|0)?(h=Dd(7,h-c|0)|0,h|0):(h=0,h|0)}function Fr(c,u,h,p){c=c|0,u=u|0,h=h|0,p=p|0;var m=0,_=0,v=0,w=0,x=0,B=0,R=0;if(v=fe(c|0,u|0,52)|0,H()|0,v=v&15,!!((h|0)<16&(v|0)<=(h|0))){if((v|0)==(h|0)){h=p,A[h>>2]=c,A[h+4>>2]=u;return}if(x=Dd(7,h-v|0)|0,B=(x|0)/7|0,w=fe(c|0,u|0,45)|0,H()|0,!(Ye(w&127)|0))_=0;else{e:do if(!v)m=0;else for(_=1;;){if(m=fe(c|0,u|0,(15-_|0)*3|0)|0,H()|0,m=m&7,m|0)break e;if(_>>>0<v>>>0)_=_+1|0;else{m=0;break}}while(0);_=(m|0)==0}if(R=Ee(v+1|0,0,52)|0,m=H()|0|u&-15728641,w=(14-v|0)*3|0,u=Ee(7,0,w|0)|0,u=(R|c)&~u,v=m&~(H()|0),Fr(u,v,h,p),m=p+(B<<3)|0,!_){R=Ee(1,0,w|0)|0,Fr(R|u,H()|0|v,h,m),R=m+(B<<3)|0,x=Ee(2,0,w|0)|0,Fr(x|u,H()|0|v,h,R),R=R+(B<<3)|0,x=Ee(3,0,w|0)|0,Fr(x|u,H()|0|v,h,R),R=R+(B<<3)|0,x=Ee(4,0,w|0)|0,Fr(x|u,H()|0|v,h,R),R=R+(B<<3)|0,x=Ee(5,0,w|0)|0,Fr(x|u,H()|0|v,h,R),x=Ee(6,0,w|0)|0,Fr(x|u,H()|0|v,h,R+(B<<3)|0);return}_=m+(B<<3)|0,(x|0)>6&&(x=m+8|0,R=(_>>>0>x>>>0?_:x)+-1+(0-m)|0,Ki(m|0,0,R+8&-8|0)|0,m=x+(R>>>3<<3)|0),R=Ee(2,0,w|0)|0,Fr(R|u,H()|0|v,h,m),R=m+(B<<3)|0,x=Ee(3,0,w|0)|0,Fr(x|u,H()|0|v,h,R),R=R+(B<<3)|0,x=Ee(4,0,w|0)|0,Fr(x|u,H()|0|v,h,R),R=R+(B<<3)|0,x=Ee(5,0,w|0)|0,Fr(x|u,H()|0|v,h,R),x=Ee(6,0,w|0)|0,Fr(x|u,H()|0|v,h,R+(B<<3)|0)}}function Mn(c,u){c=c|0,u=u|0;var h=0,p=0,m=0;if(m=fe(c|0,u|0,45)|0,H()|0,!(Ye(m&127)|0))return m=0,m|0;m=fe(c|0,u|0,52)|0,H()|0,m=m&15;e:do if(!m)h=0;else for(p=1;;){if(h=fe(c|0,u|0,(15-p|0)*3|0)|0,H()|0,h=h&7,h|0)break e;if(p>>>0<m>>>0)p=p+1|0;else{h=0;break}}while(0);return m=(h|0)==0&1,m|0}function p8(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0;if(p=fe(c|0,u|0,52)|0,H()|0,p=p&15,(h|0)<16&(p|0)<=(h|0)){if((p|0)!=(h|0)&&(m=Ee(h|0,0,52)|0,c=m|c,u=H()|0|u&-15728641,(p|0)<(h|0)))do m=Ee(7,0,(14-p|0)*3|0)|0,p=p+1|0,c=c&~m,u=u&~(H()|0);while((p|0)<(h|0))}else u=0,c=0;return ke(u|0),c|0}function g8(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0,_=0,v=0,w=0,x=0,B=0,R=0,V=0,W=0,J=0,ne=0,re=0,he=0,Te=0,ee=0,ue=0,$=0,Se=0,Ce=0,ve=0,we=0;if(!h)return ve=0,ve|0;if(m=c,p=A[m>>2]|0,m=A[m+4>>2]|0,!0&(m&15728640|0)==0){if((h|0)<=0||(ve=u,A[ve>>2]=p,A[ve+4>>2]=m,(h|0)==1))return ve=0,ve|0;p=1;do Se=c+(p<<3)|0,Ce=A[Se+4>>2]|0,ve=u+(p<<3)|0,A[ve>>2]=A[Se>>2],A[ve+4>>2]=Ce,p=p+1|0;while((p|0)!=(h|0));return p=0,p|0}if(Se=h<<3,Ce=Ss(Se)|0,!Ce)return ve=-3,ve|0;if(Nd(Ce|0,c|0,Se|0)|0,$=Ji(h,8)|0,!$)return qe(Ce),ve=-3,ve|0;p=h;e:for(;;){v=Ce,R=A[v>>2]|0,v=A[v+4>>2]|0,ee=fe(R|0,v|0,52)|0,H()|0,ee=ee&15,ue=ee+-1|0,Te=(p|0)>0;t:do if(Te){if(he=((p|0)<0)<<31>>31,ne=Ee(ue|0,0,52)|0,re=H()|0,ue>>>0>15)for(m=0,c=R,h=v;;){if(!((c|0)==0&(h|0)==0)){if(_=fe(c|0,h|0,52)|0,H()|0,_=_&15,w=(_|0)<(ue|0),_=(_|0)==(ue|0),B=w?0:_?c:0,c=w?0:_?h:0,h=zo(B|0,c|0,p|0,he|0)|0,H()|0,_=$+(h<<3)|0,w=_,x=A[w>>2]|0,w=A[w+4>>2]|0,(x|0)==0&(w|0)==0)h=B;else for(ne=0,J=h,W=w,h=B;;){if((ne|0)>(p|0)){ve=41;break e}if((x|0)==(h|0)&(W&-117440513|0)==(c|0)){B=fe(x|0,W|0,56)|0,H()|0,B=B&7,V=B+1|0,re=fe(x|0,W|0,45)|0,H()|0;n:do if(!(Ye(re&127)|0))w=7;else{if(x=fe(x|0,W|0,52)|0,H()|0,x=x&15,!x){w=6;break}for(w=1;;){if(re=Ee(7,0,(15-w|0)*3|0)|0,!((re&h|0)==0&((H()|0)&c|0)==0)){w=7;break n}if(w>>>0<x>>>0)w=w+1|0;else{w=6;break}}}while(0);if((B+2|0)>>>0>w>>>0){ve=51;break e}re=Ee(V|0,0,56)|0,c=H()|0|c&-117440513,w=_,A[w>>2]=0,A[w+4>>2]=0,w=J,h=re|h}else w=(J+1|0)%(p|0)|0;if(_=$+(w<<3)|0,W=_,x=A[W>>2]|0,W=A[W+4>>2]|0,(x|0)==0&(W|0)==0)break;ne=ne+1|0,J=w}re=_,A[re>>2]=h,A[re+4>>2]=c}if(m=m+1|0,(m|0)>=(p|0))break t;h=Ce+(m<<3)|0,c=A[h>>2]|0,h=A[h+4>>2]|0}for(m=0,c=R,h=v;;){if(!((c|0)==0&(h|0)==0)){if(w=fe(c|0,h|0,52)|0,H()|0,w=w&15,(w|0)>=(ue|0)){if((w|0)!=(ue|0)&&(c=c|ne,h=h&-15728641|re,w>>>0>=ee>>>0)){_=ue;do J=Ee(7,0,(14-_|0)*3|0)|0,_=_+1|0,c=J|c,h=H()|0|h;while(_>>>0<w>>>0)}}else c=0,h=0;if(w=zo(c|0,h|0,p|0,he|0)|0,H()|0,_=$+(w<<3)|0,x=_,B=A[x>>2]|0,x=A[x+4>>2]|0,!((B|0)==0&(x|0)==0))for(J=0;;){if((J|0)>(p|0)){ve=41;break e}if((B|0)==(c|0)&(x&-117440513|0)==(h|0)){V=fe(B|0,x|0,56)|0,H()|0,V=V&7,W=V+1|0,we=fe(B|0,x|0,45)|0,H()|0;n:do if(!(Ye(we&127)|0))x=7;else{if(B=fe(B|0,x|0,52)|0,H()|0,B=B&15,!B){x=6;break}for(x=1;;){if(we=Ee(7,0,(15-x|0)*3|0)|0,!((we&c|0)==0&((H()|0)&h|0)==0)){x=7;break n}if(x>>>0<B>>>0)x=x+1|0;else{x=6;break}}}while(0);if((V+2|0)>>>0>x>>>0){ve=51;break e}we=Ee(W|0,0,56)|0,h=H()|0|h&-117440513,W=_,A[W>>2]=0,A[W+4>>2]=0,c=we|c}else w=(w+1|0)%(p|0)|0;if(_=$+(w<<3)|0,x=_,B=A[x>>2]|0,x=A[x+4>>2]|0,(B|0)==0&(x|0)==0)break;J=J+1|0}we=_,A[we>>2]=c,A[we+4>>2]=h}if(m=m+1|0,(m|0)>=(p|0))break t;h=Ce+(m<<3)|0,c=A[h>>2]|0,h=A[h+4>>2]|0}}while(0);if((p+5|0)>>>0<11){ve=99;break}if(re=Ji((p|0)/6|0,8)|0,!re){ve=58;break}t:do if(Te){J=0,W=0;do{if(w=$+(J<<3)|0,c=w,m=A[c>>2]|0,c=A[c+4>>2]|0,!((m|0)==0&(c|0)==0)){x=fe(m|0,c|0,56)|0,H()|0,x=x&7,h=x+1|0,B=c&-117440513,we=fe(m|0,c|0,45)|0,H()|0;n:do if(Ye(we&127)|0){if(V=fe(m|0,c|0,52)|0,H()|0,V=V&15,V|0)for(_=1;;){if(we=Ee(7,0,(15-_|0)*3|0)|0,!((m&we|0)==0&(B&(H()|0)|0)==0))break n;if(_>>>0<V>>>0)_=_+1|0;else break}c=Ee(h|0,0,56)|0,m=c|m,c=H()|0|B,h=w,A[h>>2]=m,A[h+4>>2]=c,h=x+2|0}while(0);(h|0)==7&&(we=re+(W<<3)|0,A[we>>2]=m,A[we+4>>2]=c&-117440513,W=W+1|0)}J=J+1|0}while((J|0)!=(p|0));if(Te){if(ne=((p|0)<0)<<31>>31,V=Ee(ue|0,0,52)|0,J=H()|0,ue>>>0>15)for(c=0,m=0;;){do if(!((R|0)==0&(v|0)==0)){for(x=fe(R|0,v|0,52)|0,H()|0,x=x&15,_=(x|0)<(ue|0),x=(x|0)==(ue|0),w=_?0:x?R:0,x=_?0:x?v:0,_=zo(w|0,x|0,p|0,ne|0)|0,H()|0,h=0;;){if((h|0)>(p|0)){ve=98;break e}if(we=$+(_<<3)|0,B=A[we+4>>2]|0,(B&-117440513|0)==(x|0)&&(A[we>>2]|0)==(w|0)){ve=70;break}if(_=(_+1|0)%(p|0)|0,we=$+(_<<3)|0,(A[we>>2]|0)==(w|0)&&(A[we+4>>2]|0)==(x|0))break;h=h+1|0}if((ve|0)==70&&(ve=0,!0&(B&117440512|0)==100663296))break;we=u+(m<<3)|0,A[we>>2]=R,A[we+4>>2]=v,m=m+1|0}while(0);if(c=c+1|0,(c|0)>=(p|0)){p=W;break t}v=Ce+(c<<3)|0,R=A[v>>2]|0,v=A[v+4>>2]|0}for(c=0,m=0;;){do if(!((R|0)==0&(v|0)==0)){if(x=fe(R|0,v|0,52)|0,H()|0,x=x&15,(x|0)>=(ue|0))if((x|0)!=(ue|0))if(h=R|V,_=v&-15728641|J,x>>>0<ee>>>0)x=_;else{w=ue;do we=Ee(7,0,(14-w|0)*3|0)|0,w=w+1|0,h=we|h,_=H()|0|_;while(w>>>0<x>>>0);x=_}else h=R,x=v;else h=0,x=0;for(w=zo(h|0,x|0,p|0,ne|0)|0,H()|0,_=0;;){if((_|0)>(p|0)){ve=98;break e}if(we=$+(w<<3)|0,B=A[we+4>>2]|0,(B&-117440513|0)==(x|0)&&(A[we>>2]|0)==(h|0)){ve=93;break}if(w=(w+1|0)%(p|0)|0,we=$+(w<<3)|0,(A[we>>2]|0)==(h|0)&&(A[we+4>>2]|0)==(x|0))break;_=_+1|0}if((ve|0)==93&&(ve=0,!0&(B&117440512|0)==100663296))break;we=u+(m<<3)|0,A[we>>2]=R,A[we+4>>2]=v,m=m+1|0}while(0);if(c=c+1|0,(c|0)>=(p|0)){p=W;break t}v=Ce+(c<<3)|0,R=A[v>>2]|0,v=A[v+4>>2]|0}}else m=0,p=W}else m=0,p=0;while(0);if(Ki($|0,0,Se|0)|0,Nd(Ce|0,re|0,p<<3|0)|0,qe(re),p)u=u+(m<<3)|0;else break}return(ve|0)==41?(qe(Ce),qe($),we=-1,we|0):(ve|0)==51?(qe(Ce),qe($),we=-2,we|0):(ve|0)==58?(qe(Ce),qe($),we=-3,we|0):(ve|0)==98?(qe(re),qe(Ce),qe($),we=-1,we|0):((ve|0)==99&&Nd(u|0,Ce|0,p<<3|0)|0,qe(Ce),qe($),we=0,we|0)}function m8(c,u,h,p,m){c=c|0,u=u|0,h=h|0,p=p|0,m=m|0;var _=0,v=0,w=0,x=0,B=0,R=0;if((u|0)<=0)return m=0,m|0;if((m|0)>=16){for(_=0;;){if(R=c+(_<<3)|0,!((A[R>>2]|0)==0&(A[R+4>>2]|0)==0)){_=14;break}if(_=_+1|0,(_|0)>=(u|0)){v=0,_=16;break}}if((_|0)==14)return((p|0)>0?-2:-1)|0;if((_|0)==16)return v|0}_=0,R=0;e:for(;;){B=c+(R<<3)|0,w=B,v=A[w>>2]|0,w=A[w+4>>2]|0;do if(!((v|0)==0&(w|0)==0)){if((_|0)>=(p|0)){v=-1,_=16;break e}if(x=fe(v|0,w|0,52)|0,H()|0,x=x&15,(x|0)>(m|0)){v=-2,_=16;break e}if((x|0)==(m|0)){B=h+(_<<3)|0,A[B>>2]=v,A[B+4>>2]=w,_=_+1|0;break}if(v=(Dd(7,m-x|0)|0)+_|0,(v|0)>(p|0)){v=-1,_=16;break e}Fr(A[B>>2]|0,A[B+4>>2]|0,m,h+(_<<3)|0),_=v}while(0);if(R=R+1|0,(R|0)>=(u|0)){v=0,_=16;break}}return(_|0)==16?v|0:0}function y8(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0,_=0,v=0;if((u|0)<=0)return h=0,h|0;if((h|0)>=16){for(p=0;;){if(v=c+(p<<3)|0,!((A[v>>2]|0)==0&(A[v+4>>2]|0)==0)){p=-1,m=13;break}if(p=p+1|0,(p|0)>=(u|0)){p=0,m=13;break}}if((m|0)==13)return p|0}p=0,v=0;e:for(;;){m=c+(v<<3)|0,_=A[m>>2]|0,m=A[m+4>>2]|0;do if(!((_|0)==0&(m|0)==0)){if(m=fe(_|0,m|0,52)|0,H()|0,m=m&15,(m|0)>(h|0)){p=-1,m=13;break e}if((m|0)==(h|0)){p=p+1|0;break}else{p=(Dd(7,h-m|0)|0)+p|0;break}}while(0);if(v=v+1|0,(v|0)>=(u|0)){m=13;break}}return(m|0)==13?p|0:0}function v8(c,u){return c=c|0,u=u|0,u=fe(c|0,u|0,52)|0,H()|0,u&1|0}function kr(c,u){c=c|0,u=u|0;var h=0,p=0,m=0;if(m=fe(c|0,u|0,52)|0,H()|0,m=m&15,!m)return m=0,m|0;for(p=1;;){if(h=fe(c|0,u|0,(15-p|0)*3|0)|0,H()|0,h=h&7,h|0){p=5;break}if(p>>>0<m>>>0)p=p+1|0;else{h=0,p=5;break}}return(p|0)==5?h|0:0}function yy(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0,v=0,w=0,x=0;if(x=fe(c|0,u|0,52)|0,H()|0,x=x&15,!x)return w=u,x=c,ke(w|0),x|0;for(w=1,h=0;;){_=(15-w|0)*3|0,p=Ee(7,0,_|0)|0,m=H()|0,v=fe(c|0,u|0,_|0)|0,H()|0,_=Ee(Wa(v&7)|0,0,_|0)|0,v=H()|0,c=_|c&~p,u=v|u&~m;e:do if(!h)if((_&p|0)==0&(v&m|0)==0)h=0;else if(p=fe(c|0,u|0,52)|0,H()|0,p=p&15,!p)h=1;else{h=1;t:for(;;){switch(v=fe(c|0,u|0,(15-h|0)*3|0)|0,H()|0,v&7){case 1:break t;case 0:break;default:{h=1;break e}}if(h>>>0<p>>>0)h=h+1|0;else{h=1;break e}}for(h=1;;)if(v=(15-h|0)*3|0,m=fe(c|0,u|0,v|0)|0,H()|0,_=Ee(7,0,v|0)|0,u=u&~(H()|0),v=Ee(Wa(m&7)|0,0,v|0)|0,c=c&~_|v,u=u|(H()|0),h>>>0<p>>>0)h=h+1|0;else{h=1;break}}while(0);if(w>>>0<x>>>0)w=w+1|0;else break}return ke(u|0),c|0}function Go(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0,v=0;if(p=fe(c|0,u|0,52)|0,H()|0,p=p&15,!p)return h=u,p=c,ke(h|0),p|0;for(h=1;_=(15-h|0)*3|0,v=fe(c|0,u|0,_|0)|0,H()|0,m=Ee(7,0,_|0)|0,u=u&~(H()|0),_=Ee(Wa(v&7)|0,0,_|0)|0,c=_|c&~m,u=H()|0|u,h>>>0<p>>>0;)h=h+1|0;return ke(u|0),c|0}function _8(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0,v=0,w=0,x=0;if(x=fe(c|0,u|0,52)|0,H()|0,x=x&15,!x)return w=u,x=c,ke(w|0),x|0;for(w=1,h=0;;){_=(15-w|0)*3|0,p=Ee(7,0,_|0)|0,m=H()|0,v=fe(c|0,u|0,_|0)|0,H()|0,_=Ee(Uo(v&7)|0,0,_|0)|0,v=H()|0,c=_|c&~p,u=v|u&~m;e:do if(!h)if((_&p|0)==0&(v&m|0)==0)h=0;else if(p=fe(c|0,u|0,52)|0,H()|0,p=p&15,!p)h=1;else{h=1;t:for(;;){switch(v=fe(c|0,u|0,(15-h|0)*3|0)|0,H()|0,v&7){case 1:break t;case 0:break;default:{h=1;break e}}if(h>>>0<p>>>0)h=h+1|0;else{h=1;break e}}for(h=1;;)if(m=(15-h|0)*3|0,_=Ee(7,0,m|0)|0,v=u&~(H()|0),u=fe(c|0,u|0,m|0)|0,H()|0,u=Ee(Uo(u&7)|0,0,m|0)|0,c=c&~_|u,u=v|(H()|0),h>>>0<p>>>0)h=h+1|0;else{h=1;break}}while(0);if(w>>>0<x>>>0)w=w+1|0;else break}return ke(u|0),c|0}function vy(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0,v=0;if(p=fe(c|0,u|0,52)|0,H()|0,p=p&15,!p)return h=u,p=c,ke(h|0),p|0;for(h=1;v=(15-h|0)*3|0,_=Ee(7,0,v|0)|0,m=u&~(H()|0),u=fe(c|0,u|0,v|0)|0,H()|0,u=Ee(Uo(u&7)|0,0,v|0)|0,c=u|c&~_,u=H()|0|m,h>>>0<p>>>0;)h=h+1|0;return ke(u|0),c|0}function b8(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0,v=0,w=0,x=0,B=0,R=0;if(x=U,U=U+64|0,w=x+40|0,p=x+24|0,m=x+12|0,_=x,Ee(u|0,0,52)|0,h=H()|0|134225919,!u)return(A[c+4>>2]|0)>2||(A[c+8>>2]|0)>2||(A[c+12>>2]|0)>2?(v=0,w=0,ke(v|0),U=x,w|0):(Ee(ti(c)|0,0,45)|0,v=H()|0|h,w=-1,ke(v|0),U=x,w|0);if(A[w>>2]=A[c>>2],A[w+4>>2]=A[c+4>>2],A[w+8>>2]=A[c+8>>2],A[w+12>>2]=A[c+12>>2],v=w+4|0,(u|0)>0)for(c=-1;A[p>>2]=A[v>>2],A[p+4>>2]=A[v+4>>2],A[p+8>>2]=A[v+8>>2],u&1?(mT(v),A[m>>2]=A[v>>2],A[m+4>>2]=A[v+4>>2],A[m+8>>2]=A[v+8>>2],Ld(m)):(py(v),A[m>>2]=A[v>>2],A[m+4>>2]=A[v+4>>2],A[m+8>>2]=A[v+8>>2],Ha(m)),dy(p,m,_),or(_),R=(15-u|0)*3|0,B=Ee(7,0,R|0)|0,h=h&~(H()|0),R=Ee(Bd(_)|0,0,R|0)|0,c=R|c&~B,h=H()|0|h,(u|0)>1;)u=u+-1|0;else c=-1;e:do if((A[v>>2]|0)<=2&&(A[w+8>>2]|0)<=2&&(A[w+12>>2]|0)<=2){if(p=ti(w)|0,u=Ee(p|0,0,45)|0,u=u|c,c=H()|0|h&-1040385,_=kN(w)|0,!(Ye(p)|0)){if((_|0)<=0)break;for(m=0;;){if(p=fe(u|0,c|0,52)|0,H()|0,p=p&15,p)for(h=1;R=(15-h|0)*3|0,w=fe(u|0,c|0,R|0)|0,H()|0,B=Ee(7,0,R|0)|0,c=c&~(H()|0),R=Ee(Wa(w&7)|0,0,R|0)|0,u=u&~B|R,c=c|(H()|0),h>>>0<p>>>0;)h=h+1|0;if(m=m+1|0,(m|0)==(_|0))break e}}m=fe(u|0,c|0,52)|0,H()|0,m=m&15;t:do if(m){h=1;n:for(;;){switch(R=fe(u|0,c|0,(15-h|0)*3|0)|0,H()|0,R&7){case 1:break n;case 0:break;default:break t}if(h>>>0<m>>>0)h=h+1|0;else break t}if(hT(p,A[w>>2]|0)|0)for(h=1;w=(15-h|0)*3|0,B=Ee(7,0,w|0)|0,R=c&~(H()|0),c=fe(u|0,c|0,w|0)|0,H()|0,c=Ee(Uo(c&7)|0,0,w|0)|0,u=u&~B|c,c=R|(H()|0),h>>>0<m>>>0;)h=h+1|0;else for(h=1;R=(15-h|0)*3|0,w=fe(u|0,c|0,R|0)|0,H()|0,B=Ee(7,0,R|0)|0,c=c&~(H()|0),R=Ee(Wa(w&7)|0,0,R|0)|0,u=u&~B|R,c=c|(H()|0),h>>>0<m>>>0;)h=h+1|0}while(0);if((_|0)>0){h=0;do u=yy(u,c)|0,c=H()|0,h=h+1|0;while((h|0)!=(_|0))}}else u=0,c=0;while(0);return B=c,R=u,ke(B|0),U=x,R|0}function wi(c){return c=c|0,(c|0)%2|0|0}function MT(c,u){c=c|0,u=u|0;var h=0,p=0;return p=U,U=U+16|0,h=p,u>>>0<=15&&(A[c+4>>2]&2146435072|0)!=2146435072&&(A[c+8+4>>2]&2146435072|0)!=2146435072?(XN(c,u,h),u=b8(h,u)|0,c=H()|0):(c=0,u=0),ke(c|0),U=p,u|0}function _y(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0,_=0,v=0;if(m=h+4|0,_=fe(c|0,u|0,52)|0,H()|0,_=_&15,v=fe(c|0,u|0,45)|0,H()|0,p=(_|0)==0,Ye(v&127)|0){if(p)return v=1,v|0;p=1}else{if(p)return v=0,v|0;(A[m>>2]|0)==0&&(A[h+8>>2]|0)==0?p=(A[h+12>>2]|0)!=0&1:p=1}for(h=1;h&1?Ld(m):Ha(m),v=fe(c|0,u|0,(15-h|0)*3|0)|0,H()|0,yT(m,v&7),h>>>0<_>>>0;)h=h+1|0;return p|0}function _A(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0,_=0,v=0,w=0,x=0,B=0,R=0;R=U,U=U+16|0,x=R,B=fe(c|0,u|0,45)|0,H()|0,B=B&127;e:do if((Ye(B)|0)!=0&&(_=fe(c|0,u|0,52)|0,H()|0,_=_&15,(_|0)!=0)){p=1;t:for(;;){switch(w=fe(c|0,u|0,(15-p|0)*3|0)|0,H()|0,w&7){case 5:break t;case 0:break;default:{p=u;break e}}if(p>>>0<_>>>0)p=p+1|0;else{p=u;break e}}for(m=1,p=u;u=(15-m|0)*3|0,v=Ee(7,0,u|0)|0,w=p&~(H()|0),p=fe(c|0,p|0,u|0)|0,H()|0,p=Ee(Uo(p&7)|0,0,u|0)|0,c=c&~v|p,p=w|(H()|0),m>>>0<_>>>0;)m=m+1|0}else p=u;while(0);if(w=7728+(B*28|0)|0,A[h>>2]=A[w>>2],A[h+4>>2]=A[w+4>>2],A[h+8>>2]=A[w+8>>2],A[h+12>>2]=A[w+12>>2],!(_y(c,p,h)|0)){U=R;return}if(v=h+4|0,A[x>>2]=A[v>>2],A[x+4>>2]=A[v+4>>2],A[x+8>>2]=A[v+8>>2],_=fe(c|0,p|0,52)|0,H()|0,w=_&15,_&1?(Ha(v),_=w+1|0):_=w,!(Ye(B)|0))p=0;else{e:do if(!w)p=0;else for(u=1;;){if(m=fe(c|0,p|0,(15-u|0)*3|0)|0,H()|0,m=m&7,m|0){p=m;break e}if(u>>>0<w>>>0)u=u+1|0;else{p=0;break}}while(0);p=(p|0)==4&1}if(!(tc(h,_,p,0)|0))(_|0)!=(w|0)&&(A[v>>2]=A[x>>2],A[v+4>>2]=A[x+4>>2],A[v+8>>2]=A[x+8>>2]);else{if(Ye(B)|0)do;while((tc(h,_,0,0)|0)!=0);(_|0)!=(w|0)&&py(v)}U=R}function Qa(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0;p=U,U=U+16|0,m=p,_A(c,u,m),u=fe(c|0,u|0,52)|0,H()|0,KN(m,u&15,h),U=p}function $a(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0,_=0,v=0,w=0;v=U,U=U+16|0,_=v,_A(c,u,_),p=fe(c|0,u|0,45)|0,H()|0,p=(Ye(p&127)|0)==0,m=fe(c|0,u|0,52)|0,H()|0,m=m&15;e:do if(!p){if(m|0)for(p=1;;){if(w=Ee(7,0,(15-p|0)*3|0)|0,!((w&c|0)==0&((H()|0)&u|0)==0))break e;if(p>>>0<m>>>0)p=p+1|0;else break}ET(_,m,0,5,h),U=v;return}while(0);ST(_,m,0,6,h),U=v}function w8(c,u){c=c|0,u=u|0;var h=0,p=0,m=0;if(p=fe(c|0,u|0,45)|0,H()|0,!(Ye(p&127)|0))return p=2,p|0;if(p=fe(c|0,u|0,52)|0,H()|0,p=p&15,!p)return p=5,p|0;for(h=1;;){if(m=Ee(7,0,(15-h|0)*3|0)|0,!((m&c|0)==0&((H()|0)&u|0)==0)){h=2,c=6;break}if(h>>>0<p>>>0)h=h+1|0;else{h=5,c=6;break}}return(c|0)==6?h|0:0}function IT(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0,_=0,v=0,w=0,x=0,B=0,R=0,V=0;V=U,U=U+128|0,B=V+112|0,_=V+96|0,R=V,m=fe(c|0,u|0,52)|0,H()|0,w=m&15,A[B>>2]=w,v=fe(c|0,u|0,45)|0,H()|0,v=v&127;e:do if(Ye(v)|0){if(w|0)for(p=1;;){if(x=Ee(7,0,(15-p|0)*3|0)|0,!((x&c|0)==0&((H()|0)&u|0)==0)){m=0;break e}if(p>>>0<w>>>0)p=p+1|0;else break}if(m&1)m=1;else{x=Ee(w+1|0,0,52)|0,R=H()|0|u&-15728641,B=Ee(7,0,(14-w|0)*3|0)|0,IT((x|c)&~B,R&~(H()|0),h),U=V;return}}else m=0;while(0);_A(c,u,_),m?(TT(_,B,R),x=5):(xT(_,B,R),x=6);e:do if(Ye(v)|0)if(!w)p=20;else for(p=1;;){if(v=Ee(7,0,(15-p|0)*3|0)|0,!((v&c|0)==0&((H()|0)&u|0)==0)){p=8;break e}if(p>>>0<w>>>0)p=p+1|0;else{p=20;break}}else p=8;while(0);if(Ki(h|0,-1,p|0)|0,m){m=0;do{for(_=R+(m<<4)|0,YN(_,A[B>>2]|0)|0,_=A[_>>2]|0,p=0;v=h+(p<<2)|0,w=A[v>>2]|0,!((w|0)==-1|(w|0)==(_|0));)p=p+1|0;A[v>>2]=_,m=m+1|0}while((m|0)!=(x|0))}else{m=0;do{for(_=R+(m<<4)|0,tc(_,A[B>>2]|0,0,1)|0,_=A[_>>2]|0,p=0;v=h+(p<<2)|0,w=A[v>>2]|0,!((w|0)==-1|(w|0)==(_|0));)p=p+1|0;A[v>>2]=_,m=m+1|0}while((m|0)!=(x|0))}U=V}function E8(){return 12}function by(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0,v=0,w=0,x=0;if(Ee(c|0,0,52)|0,w=H()|0|134225919,(c|0)<1){p=0,h=0;do Ye(p)|0&&(Ee(p|0,0,45)|0,v=w|(H()|0),c=u+(h<<3)|0,A[c>>2]=-1,A[c+4>>2]=v,h=h+1|0),p=p+1|0;while((p|0)!=122);return}v=0,h=0;do{if(Ye(v)|0){for(Ee(v|0,0,45)|0,p=1,m=-1,_=w|(H()|0);x=Ee(7,0,(15-p|0)*3|0)|0,m=m&~x,_=_&~(H()|0),(p|0)!=(c|0);)p=p+1|0;x=u+(h<<3)|0,A[x>>2]=m,A[x+4>>2]=_,h=h+1|0}v=v+1|0}while((v|0)!=122)}function BT(c,u,h,p){c=c|0,u=u|0,h=h|0,p=p|0;var m=0,_=0,v=0,w=0,x=0,B=0;if(w=U,U=U+64|0,v=w,(c|0)==(h|0)&(u|0)==(p|0)|(!1|(u&2013265920|0)!=134217728|(!1|(p&2013265920|0)!=134217728))||(m=fe(c|0,u|0,52)|0,H()|0,m=m&15,_=fe(h|0,p|0,52)|0,H()|0,(m|0)!=(_&15|0)))return v=0,U=w,v|0;if(_=m+-1|0,m>>>0>1&&(B=my(c,u,_)|0,x=H()|0,_=my(h,p,_)|0,(B|0)==(_|0)&(x|0)==(H()|0))&&(_=(m^15)*3|0,m=fe(c|0,u|0,_|0)|0,H()|0,m=m&7,_=fe(h|0,p|0,_|0)|0,H()|0,_=_&7,(m|0)==0|(_|0)==0||(A[21136+(m<<2)>>2]|0)==(_|0)||(A[21168+(m<<2)>>2]|0)==(_|0)))return B=1,U=w,B|0;m=v,_=m+56|0;do A[m>>2]=0,m=m+4|0;while((m|0)<(_|0));return ec(c,u,1,v),B=v,!((A[B>>2]|0)==(h|0)&&(A[B+4>>2]|0)==(p|0))&&(B=v+8|0,!((A[B>>2]|0)==(h|0)&&(A[B+4>>2]|0)==(p|0)))&&(B=v+16|0,!((A[B>>2]|0)==(h|0)&&(A[B+4>>2]|0)==(p|0)))&&(B=v+24|0,!((A[B>>2]|0)==(h|0)&&(A[B+4>>2]|0)==(p|0)))&&(B=v+32|0,!((A[B>>2]|0)==(h|0)&&(A[B+4>>2]|0)==(p|0)))&&(B=v+40|0,!((A[B>>2]|0)==(h|0)&&(A[B+4>>2]|0)==(p|0)))?(m=v+48|0,m=((A[m>>2]|0)==(h|0)?(A[m+4>>2]|0)==(p|0):0)&1):m=1,B=m,U=w,B|0}function T8(c,u,h,p){c=c|0,u=u|0,h=h|0,p=p|0;var m=0,_=0,v=0,w=0,x=0,B=0,R=0;if(B=U,U=U+16|0,v=B,!(BT(c,u,h,p)|0))return w=0,x=0,ke(w|0),U=B,x|0;for(w=u&-2130706433,m=(Mn(c,u)|0)==0,m=m?1:2;A[v>>2]=0,R=O(c,u,m,v)|0,_=m+1|0,!((R|0)==(h|0)&(H()|0)==(p|0));)if(_>>>0<7)m=_;else{m=0,c=0,x=6;break}return(x|0)==6?(ke(m|0),U=B,c|0):(R=Ee(m|0,0,56)|0,x=w|(H()|0)|268435456,R=c|R,ke(x|0),U=B,R|0)}function S8(c,u){c=c|0,u=u|0;var h=0;return h=!0&(u&2013265920|0)==268435456,ke((h?u&-2130706433|134217728:0)|0),(h?c:0)|0}function x8(c,u){c=c|0,u=u|0;var h=0,p=0,m=0;return p=U,U=U+16|0,h=p,!0&(u&2013265920|0)==268435456?(m=fe(c|0,u|0,56)|0,H()|0,A[h>>2]=0,h=O(c,u&-2130706433|134217728,m&7,h)|0,u=H()|0,ke(u|0),U=p,h|0):(u=0,h=0,ke(u|0),U=p,h|0)}function C8(c,u){c=c|0,u=u|0;var h=0;if(!(!0&(u&2013265920|0)==268435456))return h=0,h|0;switch(h=fe(c|0,u|0,56)|0,H()|0,h&7){case 0:case 7:return h=0,h|0}return h=u&-2130706433|134217728,!0&(u&117440512|0)==16777216&(Mn(c,h)|0)!=0?(h=0,h|0):(h=PT(c,h)|0,h|0)}function P8(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0,_=0,v=0,w=0;_=U,U=U+16|0,p=_,v=!0&(u&2013265920|0)==268435456,m=u&-2130706433|134217728,w=h,A[w>>2]=v?c:0,A[w+4>>2]=v?m:0,v?(u=fe(c|0,u|0,56)|0,H()|0,A[p>>2]=0,c=O(c,m,u&7,p)|0,u=H()|0):(c=0,u=0),w=h+8|0,A[w>>2]=c,A[w+4>>2]=u,U=_}function M8(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0;m=(Mn(c,u)|0)==0,u=u&-2130706433,p=h,A[p>>2]=m?c:0,A[p+4>>2]=m?u|285212672:0,p=h+8|0,A[p>>2]=c,A[p+4>>2]=u|301989888,p=h+16|0,A[p>>2]=c,A[p+4>>2]=u|318767104,p=h+24|0,A[p>>2]=c,A[p+4>>2]=u|335544320,p=h+32|0,A[p>>2]=c,A[p+4>>2]=u|352321536,h=h+40|0,A[h>>2]=c,A[h+4>>2]=u|369098752}function Od(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0,_=0,v=0,w=0;if(v=U,U=U+16|0,_=v,p=fe(c|0,u|0,56)|0,H()|0,w=!0&(u&2013265920|0)==268435456,m=w?c:0,c=w?u&-2130706433|134217728:0,u=K8(m,c,p&7)|0,(u|0)==-1){A[h>>2]=0,U=v;return}_A(m,c,_),p=fe(m|0,c|0,52)|0,H()|0,p=p&15,Mn(m,c)|0?ET(_,p,u,2,h):ST(_,p,u,2,h),U=v}function I8(c){c=c|0;var u=0,h=0,p=0;return u=Ji(1,12)|0,u||yt(22691,22646,49,22704),h=c+4|0,p=A[h>>2]|0,p|0?(p=p+8|0,A[p>>2]=u,A[h>>2]=u,u|0):(A[c>>2]|0&&yt(22721,22646,61,22744),p=c,A[p>>2]=u,A[h>>2]=u,u|0)}function B8(c,u){c=c|0,u=u|0;var h=0,p=0;return p=Ss(24)|0,p||yt(22758,22646,78,22772),A[p>>2]=A[u>>2],A[p+4>>2]=A[u+4>>2],A[p+8>>2]=A[u+8>>2],A[p+12>>2]=A[u+12>>2],A[p+16>>2]=0,u=c+4|0,h=A[u>>2]|0,h|0?(A[h+16>>2]=p,A[u>>2]=p,p|0):(A[c>>2]|0&&yt(22787,22646,82,22772),A[c>>2]=p,A[u>>2]=p,p|0)}function L8(c){c=c|0;var u=0,h=0,p=0,m=0;if(!!c)for(p=1;;){if(u=A[c>>2]|0,u|0)do{if(h=A[u>>2]|0,h|0)do m=h,h=A[h+16>>2]|0,qe(m);while((h|0)!=0);m=u,u=A[u+8>>2]|0,qe(m)}while((u|0)!=0);if(u=c,c=A[c+8>>2]|0,p||qe(u),c)p=0;else break}}function LT(c){c=c|0;var u=0,h=0,p=0,m=0,_=0,v=0,w=0,x=0,B=0,R=0,V=0,W=0,J=0,ne=0,re=0,he=0,Te=0,ee=0,ue=0,$=0,Se=0,Ce=0,ve=0,we=0,Xe=0,Mt=0,wt=0,Ft=0,vt=0,zt=0,Vt=0,We=0;if(m=c+8|0,A[m>>2]|0)return We=1,We|0;if(p=A[c>>2]|0,!p)return We=0,We|0;u=p,h=0;do h=h+1|0,u=A[u+8>>2]|0;while((u|0)!=0);if(h>>>0<2)return We=0,We|0;zt=Ss(h<<2)|0,zt||yt(22807,22646,317,22826),vt=Ss(h<<5)|0,vt||yt(22848,22646,321,22826),A[c>>2]=0,Ce=c+4|0,A[Ce>>2]=0,A[m>>2]=0,h=0,Ft=0,Se=0,V=0;e:for(;;){if(R=A[p>>2]|0,R){_=0,v=R;do{if(x=+G[v+8>>3],u=v,v=A[v+16>>2]|0,B=(v|0)==0,m=B?R:v,w=+G[m+8>>3],+tt(+(x-w))>3.141592653589793){We=14;break}_=_+(w-x)*(+G[u>>3]+ +G[m>>3])}while(!B);if((We|0)==14){We=0,_=0,u=R;do $=+G[u+8>>3],wt=u+16|0,Mt=A[wt>>2]|0,Mt=(Mt|0)==0?R:Mt,ue=+G[Mt+8>>3],_=_+(+G[u>>3]+ +G[Mt>>3])*((ue<0?ue+6.283185307179586:ue)-($<0?$+6.283185307179586:$)),u=A[((u|0)==0?p:wt)>>2]|0;while((u|0)!=0)}_>0?(A[zt+(Ft<<2)>>2]=p,Ft=Ft+1|0,m=Se,u=V):We=19}else We=19;if((We|0)==19){We=0;do if(h){if(u=h+8|0,A[u>>2]|0){We=21;break e}if(h=Ji(1,12)|0,!h){We=23;break e}A[u>>2]=h,m=h+4|0,v=h,u=V}else if(V){m=Ce,v=V+8|0,u=p,h=c;break}else if(A[c>>2]|0){We=27;break e}else{m=Ce,v=c,u=p,h=c;break}while(0);if(A[v>>2]=p,A[m>>2]=p,v=vt+(Se<<5)|0,B=A[p>>2]|0,B){for(R=vt+(Se<<5)+8|0,G[R>>3]=17976931348623157e292,V=vt+(Se<<5)+24|0,G[V>>3]=17976931348623157e292,G[v>>3]=-17976931348623157e292,W=vt+(Se<<5)+16|0,G[W>>3]=-17976931348623157e292,Te=17976931348623157e292,ee=-17976931348623157e292,m=0,J=B,x=17976931348623157e292,re=17976931348623157e292,he=-17976931348623157e292,w=-17976931348623157e292;_=+G[J>>3],$=+G[J+8>>3],J=A[J+16>>2]|0,ne=(J|0)==0,ue=+G[(ne?B:J)+8>>3],_<x&&(G[R>>3]=_,x=_),$<re&&(G[V>>3]=$,re=$),_>he?G[v>>3]=_:_=he,$>w&&(G[W>>3]=$,w=$),Te=$>0&$<Te?$:Te,ee=$<0&$>ee?$:ee,m=m|+tt(+($-ue))>3.141592653589793,!ne;)he=_;m&&(G[W>>3]=ee,G[V>>3]=Te)}else A[v>>2]=0,A[v+4>>2]=0,A[v+8>>2]=0,A[v+12>>2]=0,A[v+16>>2]=0,A[v+20>>2]=0,A[v+24>>2]=0,A[v+28>>2]=0;m=Se+1|0}if(wt=p+8|0,p=A[wt>>2]|0,A[wt>>2]=0,p)Se=m,V=u;else{We=45;break}}if((We|0)==21)yt(22624,22646,35,22658);else if((We|0)==23)yt(22678,22646,37,22658);else if((We|0)==27)yt(22721,22646,61,22744);else if((We|0)==45){e:do if((Ft|0)>0){for(wt=(m|0)==0,Xe=m<<2,Mt=(c|0)==0,we=0,u=0;;){if(ve=A[zt+(we<<2)>>2]|0,wt)We=73;else{if(Se=Ss(Xe)|0,!Se){We=50;break}if(Ce=Ss(Xe)|0,!Ce){We=52;break}t:do if(Mt)h=0;else{for(m=0,h=0,v=c;p=vt+(m<<5)|0,RT(A[v>>2]|0,p,A[ve>>2]|0)|0?(A[Se+(h<<2)>>2]=v,A[Ce+(h<<2)>>2]=p,ne=h+1|0):ne=h,v=A[v+8>>2]|0,v;)m=m+1|0,h=ne;if((ne|0)>0)if(p=A[Se>>2]|0,(ne|0)==1)h=p;else for(W=0,J=-1,h=p,V=p;;){for(B=A[V>>2]|0,p=0,v=0;m=A[A[Se+(v<<2)>>2]>>2]|0,(m|0)==(B|0)?R=p:R=p+((RT(m,A[Ce+(v<<2)>>2]|0,A[B>>2]|0)|0)&1)|0,v=v+1|0,(v|0)!=(ne|0);)p=R;if(m=(R|0)>(J|0),h=m?V:h,p=W+1|0,(p|0)==(ne|0))break t;W=p,J=m?R:J,V=A[Se+(p<<2)>>2]|0}else h=0}while(0);if(qe(Se),qe(Ce),h){if(m=h+4|0,p=A[m>>2]|0,p)h=p+8|0;else if(A[h>>2]|0){We=70;break}A[h>>2]=ve,A[m>>2]=ve}else We=73}if((We|0)==73){if(We=0,u=A[ve>>2]|0,u|0)do Ce=u,u=A[u+16>>2]|0,qe(Ce);while((u|0)!=0);qe(ve),u=2}if(we=we+1|0,(we|0)>=(Ft|0)){Vt=u;break e}}(We|0)==50?yt(22863,22646,249,22882):(We|0)==52?yt(22901,22646,252,22882):(We|0)==70&&yt(22721,22646,61,22744)}else Vt=0;while(0);return qe(zt),qe(vt),We=Vt,We|0}return 0}function RT(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0,_=0,v=0,w=0,x=0,B=0,R=0;if(!(pT(u,h)|0)||(u=dT(u)|0,B=+G[h>>3],p=+G[h+8>>3],p=u&p<0?p+6.283185307179586:p,c=A[c>>2]|0,!c))return c=0,c|0;if(u){u=0,h=c;e:for(;;){for(;v=+G[h>>3],x=+G[h+8>>3],h=h+16|0,R=A[h>>2]|0,R=(R|0)==0?c:R,_=+G[R>>3],m=+G[R+8>>3],v>_?(w=v,v=x):(w=_,_=v,v=m,m=x),!!(B<_|B>w);)if(h=A[h>>2]|0,!h){h=22;break e}if(x=m<0?m+6.283185307179586:m,v=v<0?v+6.283185307179586:v,p=v==p|x==p?p+-2220446049250313e-31:p,x=x+(B-_)/(w-_)*(v-x),(x<0?x+6.283185307179586:x)>p&&(u=u^1),h=A[h>>2]|0,!h){h=22;break}}if((h|0)==22)return u|0}else{u=0,h=c;e:for(;;){for(;v=+G[h>>3],x=+G[h+8>>3],h=h+16|0,R=A[h>>2]|0,R=(R|0)==0?c:R,_=+G[R>>3],m=+G[R+8>>3],v>_?(w=v,v=x):(w=_,_=v,v=m,m=x),!!(B<_|B>w);)if(h=A[h>>2]|0,!h){h=22;break e}if(p=v==p|m==p?p+-2220446049250313e-31:p,m+(B-_)/(w-_)*(v-m)>p&&(u=u^1),h=A[h>>2]|0,!h){h=22;break}}if((h|0)==22)return u|0}return 0}function no(c,u,h,p,m){c=c|0,u=u|0,h=h|0,p=p|0,m=m|0;var _=0,v=0,w=0,x=0,B=0,R=0,V=0,W=0,J=0,ne=0,re=0,he=0,Te=0,ee=0;if(ee=U,U=U+32|0,Te=ee+16|0,he=ee,_=fe(c|0,u|0,52)|0,H()|0,_=_&15,J=fe(h|0,p|0,52)|0,H()|0,(_|0)!=(J&15|0))return Te=1,U=ee,Te|0;if(B=fe(c|0,u|0,45)|0,H()|0,B=B&127,R=fe(h|0,p|0,45)|0,H()|0,R=R&127,J=(B|0)!=(R|0),J){if(w=fy(B,R)|0,(w|0)==7)return Te=2,U=ee,Te|0;x=fy(R,B)|0,(x|0)==7?yt(22925,22949,151,22959):(ne=w,v=x)}else ne=0,v=0;V=Ye(B)|0,W=Ye(R)|0,A[Te>>2]=0,A[Te+4>>2]=0,A[Te+8>>2]=0,A[Te+12>>2]=0;do if(ne){if(R=A[4304+(B*28|0)+(ne<<2)>>2]|0,w=(R|0)>0,W)if(w){B=0,x=h,w=p;do x=_8(x,w)|0,w=H()|0,v=Uo(v)|0,(v|0)==1&&(v=Uo(1)|0),B=B+1|0;while((B|0)!=(R|0));R=v,B=x,x=w}else R=v,B=h,x=p;else if(w){B=0,x=h,w=p;do x=vy(x,w)|0,w=H()|0,v=Uo(v)|0,B=B+1|0;while((B|0)!=(R|0));R=v,B=x,x=w}else R=v,B=h,x=p;if(_y(B,x,Te)|0,J||yt(22972,22949,181,22959),w=(V|0)!=0,v=(W|0)!=0,w&v&&yt(22999,22949,182,22959),w){if(v=kr(c,u)|0,ze[22032+(v*7|0)+ne>>0]|0){_=3;break}x=A[21200+(v*28|0)+(ne<<2)>>2]|0,B=x,re=26}else if(v){if(v=kr(B,x)|0,ze[22032+(v*7|0)+R>>0]|0){_=4;break}B=0,x=A[21200+(R*28|0)+(v<<2)>>2]|0,re=26}else v=0;if((re|0)==26)if((x|0)<=-1&&yt(23030,22949,212,22959),(B|0)<=-1&&yt(23053,22949,213,22959),(x|0)>0){w=Te+4|0,v=0;do Rd(w),v=v+1|0;while((v|0)!=(x|0));v=B}else v=B;if(A[he>>2]=0,A[he+4>>2]=0,A[he+8>>2]=0,yT(he,ne),_|0)for(;wi(_)|0?Ld(he):Ha(he),(_|0)>1;)_=_+-1|0;if((v|0)>0){_=0;do Rd(he),_=_+1|0;while((_|0)!=(v|0))}re=Te+4|0,Tr(re,he,re),or(re),re=50}else if(_y(h,p,Te)|0,(V|0)!=0&(W|0)!=0)if((R|0)!=(B|0)&&yt(23077,22949,243,22959),v=kr(c,u)|0,_=kr(h,p)|0,ze[22032+(v*7|0)+_>>0]|0)_=5;else if(v=A[21200+(v*28|0)+(_<<2)>>2]|0,(v|0)>0){w=Te+4|0,_=0;do Rd(w),_=_+1|0;while((_|0)!=(v|0));re=50}else re=50;else re=50;while(0);return(re|0)==50&&(_=Te+4|0,A[m>>2]=A[_>>2],A[m+4>>2]=A[_+4>>2],A[m+8>>2]=A[_+8>>2],_=0),Te=_,U=ee,Te|0}function OT(c,u,h,p){c=c|0,u=u|0,h=h|0,p=p|0;var m=0,_=0,v=0,w=0,x=0,B=0,R=0,V=0,W=0,J=0,ne=0,re=0,he=0,Te=0,ee=0;if(ne=U,U=U+48|0,v=ne+36|0,w=ne+24|0,x=ne+12|0,B=ne,_=fe(c|0,u|0,52)|0,H()|0,_=_&15,W=fe(c|0,u|0,45)|0,H()|0,W=W&127,R=Ye(W)|0,Ee(_|0,0,52)|0,he=H()|0|134225919,re=p,A[re>>2]=-1,A[re+4>>2]=he,!_)return(A[h>>2]|0)>1||(A[h+4>>2]|0)>1||(A[h+8>>2]|0)>1||(m=Ay(W,Bd(h)|0)|0,(m|0)==127)?(he=1,U=ne,he|0):(J=Ee(m|0,0,45)|0,re=H()|0,W=p,re=A[W+4>>2]&-1040385|re,he=p,A[he>>2]=A[W>>2]|J,A[he+4>>2]=re,he=0,U=ne,he|0);for(A[v>>2]=A[h>>2],A[v+4>>2]=A[h+4>>2],A[v+8>>2]=A[h+8>>2];A[w>>2]=A[v>>2],A[w+4>>2]=A[v+4>>2],A[w+8>>2]=A[v+8>>2],wi(_)|0?(mT(v),A[x>>2]=A[v>>2],A[x+4>>2]=A[v+4>>2],A[x+8>>2]=A[v+8>>2],Ld(x)):(py(v),A[x>>2]=A[v>>2],A[x+4>>2]=A[v+4>>2],A[x+8>>2]=A[v+8>>2],Ha(x)),dy(w,x,B),or(B),re=p,Te=A[re>>2]|0,re=A[re+4>>2]|0,ee=(15-_|0)*3|0,h=Ee(7,0,ee|0)|0,re=re&~(H()|0),ee=Ee(Bd(B)|0,0,ee|0)|0,re=H()|0|re,he=p,A[he>>2]=ee|Te&~h,A[he+4>>2]=re,(_|0)>1;)_=_+-1|0;e:do if((A[v>>2]|0)<=1&&(A[v+4>>2]|0)<=1&&(A[v+8>>2]|0)<=1){_=Bd(v)|0,w=Ay(W,_)|0,(w|0)==127?B=0:B=Ye(w)|0;t:do if(_){if(R){if(v=21408+((kr(c,u)|0)*28|0)+(_<<2)|0,v=A[v>>2]|0,(v|0)>0){h=0;do _=Wa(_)|0,h=h+1|0;while((h|0)!=(v|0))}if((_|0)==1){m=3;break e}h=Ay(W,_)|0,(h|0)==127&&yt(23104,22949,376,23134),Ye(h)|0?yt(23147,22949,377,23134):(J=v,V=_,m=h)}else J=0,V=_,m=w;if(x=A[4304+(W*28|0)+(V<<2)>>2]|0,(x|0)<=-1&&yt(23178,22949,384,23134),!B){if((J|0)<=-1&&yt(23030,22949,417,23134),J|0){v=p,_=0,h=A[v>>2]|0,v=A[v+4>>2]|0;do h=Go(h,v)|0,v=H()|0,ee=p,A[ee>>2]=h,A[ee+4>>2]=v,_=_+1|0;while((_|0)<(J|0))}if((x|0)<=0){_=54;break}for(v=p,_=0,h=A[v>>2]|0,v=A[v+4>>2]|0;;)if(h=Go(h,v)|0,v=H()|0,ee=p,A[ee>>2]=h,A[ee+4>>2]=v,_=_+1|0,(_|0)==(x|0)){_=54;break t}}if(w=fy(m,W)|0,(w|0)==7&&yt(22925,22949,393,23134),_=p,h=A[_>>2]|0,_=A[_+4>>2]|0,(x|0)>0){v=0;do h=Go(h,_)|0,_=H()|0,ee=p,A[ee>>2]=h,A[ee+4>>2]=_,v=v+1|0;while((v|0)!=(x|0))}if(h=kr(h,_)|0,ee=Pn(m)|0,h=A[(ee?21824:21616)+(w*28|0)+(h<<2)>>2]|0,(h|0)<=-1&&yt(23030,22949,412,23134),!h)_=54;else{w=p,_=0,v=A[w>>2]|0,w=A[w+4>>2]|0;do v=yy(v,w)|0,w=H()|0,ee=p,A[ee>>2]=v,A[ee+4>>2]=w,_=_+1|0;while((_|0)<(h|0));_=54}}else if((R|0)!=0&(B|0)!=0)if(ee=kr(c,u)|0,_=p,_=21408+(ee*28|0)+((kr(A[_>>2]|0,A[_+4>>2]|0)|0)<<2)|0,_=A[_>>2]|0,(_|0)<=-1&&yt(23201,22949,433,23134),!_)m=w,_=55;else{v=p,m=0,h=A[v>>2]|0,v=A[v+4>>2]|0;do h=Go(h,v)|0,v=H()|0,ee=p,A[ee>>2]=h,A[ee+4>>2]=v,m=m+1|0;while((m|0)<(_|0));m=w,_=54}else m=w,_=54;while(0);if((_|0)==54&&B&&(_=55),(_|0)==55&&(ee=p,(kr(A[ee>>2]|0,A[ee+4>>2]|0)|0)==1)){m=4;break}ee=p,he=A[ee>>2]|0,ee=A[ee+4>>2]&-1040385,Te=Ee(m|0,0,45)|0,ee=ee|(H()|0),m=p,A[m>>2]=he|Te,A[m+4>>2]=ee,m=0}else m=2;while(0);return ee=m,U=ne,ee|0}function R8(c,u,h,p,m){c=c|0,u=u|0,h=h|0,p=p|0,m=m|0;var _=0,v=0;return v=U,U=U+16|0,_=v,c=no(c,u,h,p,_)|0,c||(WN(_,m),c=0),U=v,c|0}function O8(c,u,h,p){c=c|0,u=u|0,h=h|0,p=p|0;var m=0,_=0;return m=U,U=U+16|0,_=m,QN(h,_),p=OT(c,u,_,p)|0,U=m,p|0}function D8(c,u,h,p){c=c|0,u=u|0,h=h|0,p=p|0;var m=0,_=0,v=0;return v=U,U=U+32|0,m=v+12|0,_=v,(no(c,u,c,u,m)|0)==0&&(no(c,u,h,p,_)|0)==0?c=gy(m,_)|0:c=-1,U=v,c|0}function F8(c,u,h,p){c=c|0,u=u|0,h=h|0,p=p|0;var m=0,_=0,v=0;return v=U,U=U+32|0,m=v+12|0,_=v,(no(c,u,c,u,m)|0)==0&&(no(c,u,h,p,_)|0)==0?c=gy(m,_)|0:c=-1,U=v,(c>>>31^1)+c|0}function k8(c,u,h,p,m){c=c|0,u=u|0,h=h|0,p=p|0,m=m|0;var _=0,v=0,w=0,x=0,B=0,R=0,V=0,W=0,J=0,ne=0,re=0,he=0,Te=0,ee=0,ue=0,$=0,Se=0,Ce=0;if(Se=U,U=U+48|0,_=Se+24|0,v=Se+12|0,$=Se,(no(c,u,c,u,_)|0)==0&&(no(c,u,h,p,v)|0)==0){if(ue=gy(_,v)|0,(ue|0)<0)return $=ue,U=Se,$|0;for(A[_>>2]=0,A[_+4>>2]=0,A[_+8>>2]=0,A[v>>2]=0,A[v+4>>2]=0,A[v+8>>2]=0,no(c,u,c,u,_)|0,no(c,u,h,p,v)|0,wT(_),wT(v),ue?(R=A[_>>2]|0,J=+(ue|0),he=_+4|0,V=A[he>>2]|0,Te=_+8|0,W=A[Te>>2]|0,ee=_,h=R,p=V,_=W,ne=+((A[v>>2]|0)-R|0)/J,re=+((A[v+4>>2]|0)-V|0)/J,J=+((A[v+8>>2]|0)-W|0)/J):(p=_+4|0,W=_+8|0,he=p,Te=W,ee=_,h=A[_>>2]|0,p=A[p>>2]|0,_=A[W>>2]|0,ne=0,re=0,J=0),A[$>>2]=h,W=$+4|0,A[W>>2]=p,V=$+8|0,A[V>>2]=_,R=0;;){x=+(R|0),Ce=ne*x+ +(h|0),w=re*x+ +(A[he>>2]|0),x=J*x+ +(A[Te>>2]|0),p=~~+kd(+Ce),v=~~+kd(+w),h=~~+kd(+x),Ce=+tt(+(+(p|0)-Ce)),w=+tt(+(+(v|0)-w)),x=+tt(+(+(h|0)-x));do if(Ce>w&Ce>x)p=0-(v+h)|0,_=v;else if(B=0-p|0,w>x){_=B-h|0;break}else{_=v,h=B-v|0;break}while(0);if(A[$>>2]=p,A[W>>2]=_,A[V>>2]=h,$N($),OT(c,u,$,m+(R<<3)|0)|0,(R|0)==(ue|0))break;R=R+1|0,h=A[ee>>2]|0}return $=0,U=Se,$|0}return $=-1,U=Se,$|0}function Dd(c,u){c=c|0,u=u|0;var h=0;if(!u)return h=1,h|0;h=c,c=1;do c=Un((u&1|0)==0?1:h,c)|0,u=u>>1,h=Un(h,h)|0;while((u|0)!=0);return c|0}function DT(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0,_=0,v=0,w=0,x=0,B=0,R=0,V=0,W=0;if(!(pT(u,h)|0)||(u=dT(u)|0,W=+G[h>>3],p=+G[h+8>>3],p=u&p<0?p+6.283185307179586:p,V=A[c>>2]|0,(V|0)<=0))return V=0,V|0;if(R=A[c+4>>2]|0,u){u=0,h=-1,c=0;e:for(;;){for(B=c;v=+G[R+(B<<4)>>3],x=+G[R+(B<<4)+8>>3],c=(h+2|0)%(V|0)|0,_=+G[R+(c<<4)>>3],m=+G[R+(c<<4)+8>>3],v>_?(w=v,v=x):(w=_,_=v,v=m,m=x),!!(W<_|W>w);)if(h=B+1|0,(h|0)<(V|0))c=B,B=h,h=c;else{h=22;break e}if(x=m<0?m+6.283185307179586:m,v=v<0?v+6.283185307179586:v,p=v==p|x==p?p+-2220446049250313e-31:p,x=x+(W-_)/(w-_)*(v-x),(x<0?x+6.283185307179586:x)>p&&(u=u^1),c=B+1|0,(c|0)>=(V|0)){h=22;break}else h=B}if((h|0)==22)return u|0}else{u=0,h=-1,c=0;e:for(;;){for(B=c;v=+G[R+(B<<4)>>3],x=+G[R+(B<<4)+8>>3],c=(h+2|0)%(V|0)|0,_=+G[R+(c<<4)>>3],m=+G[R+(c<<4)+8>>3],v>_?(w=v,v=x):(w=_,_=v,v=m,m=x),!!(W<_|W>w);)if(h=B+1|0,(h|0)<(V|0))c=B,B=h,h=c;else{h=22;break e}if(p=v==p|m==p?p+-2220446049250313e-31:p,m+(W-_)/(w-_)*(v-m)>p&&(u=u^1),c=B+1|0,(c|0)>=(V|0)){h=22;break}else h=B}if((h|0)==22)return u|0}return 0}function wy(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0,v=0,w=0,x=0,B=0,R=0,V=0,W=0,J=0,ne=0,re=0,he=0,Te=0,ee=0;if(ne=A[c>>2]|0,!ne){A[u>>2]=0,A[u+4>>2]=0,A[u+8>>2]=0,A[u+12>>2]=0,A[u+16>>2]=0,A[u+20>>2]=0,A[u+24>>2]=0,A[u+28>>2]=0;return}if(re=u+8|0,G[re>>3]=17976931348623157e292,he=u+24|0,G[he>>3]=17976931348623157e292,G[u>>3]=-17976931348623157e292,Te=u+16|0,G[Te>>3]=-17976931348623157e292,!((ne|0)<=0)){for(W=A[c+4>>2]|0,B=17976931348623157e292,R=-17976931348623157e292,V=0,c=-1,_=17976931348623157e292,v=17976931348623157e292,x=-17976931348623157e292,p=-17976931348623157e292,J=0;h=+G[W+(J<<4)>>3],w=+G[W+(J<<4)+8>>3],c=c+2|0,m=+G[W+(((c|0)==(ne|0)?0:c)<<4)+8>>3],h<_&&(G[re>>3]=h,_=h),w<v&&(G[he>>3]=w,v=w),h>x?G[u>>3]=h:h=x,w>p&&(G[Te>>3]=w,p=w),B=w>0&w<B?w:B,R=w<0&w>R?w:R,V=V|+tt(+(w-m))>3.141592653589793,c=J+1|0,(c|0)!=(ne|0);)ee=J,x=h,J=c,c=ee;!V||(G[Te>>3]=R,G[he>>3]=B)}}function N8(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0,v=0,w=0,x=0,B=0,R=0,V=0,W=0,J=0,ne=0,re=0,he=0,Te=0,ee=0,ue=0,$=0,Se=0,Ce=0,ve=0;if(ne=A[c>>2]|0,ne){if(re=u+8|0,G[re>>3]=17976931348623157e292,he=u+24|0,G[he>>3]=17976931348623157e292,G[u>>3]=-17976931348623157e292,Te=u+16|0,G[Te>>3]=-17976931348623157e292,(ne|0)>0){for(m=A[c+4>>2]|0,W=17976931348623157e292,J=-17976931348623157e292,p=0,h=-1,x=17976931348623157e292,B=17976931348623157e292,V=-17976931348623157e292,v=-17976931348623157e292,ee=0;_=+G[m+(ee<<4)>>3],R=+G[m+(ee<<4)+8>>3],Ce=h+2|0,w=+G[m+(((Ce|0)==(ne|0)?0:Ce)<<4)+8>>3],_<x&&(G[re>>3]=_,x=_),R<B&&(G[he>>3]=R,B=R),_>V?G[u>>3]=_:_=V,R>v&&(G[Te>>3]=R,v=R),W=R>0&R<W?R:W,J=R<0&R>J?R:J,p=p|+tt(+(R-w))>3.141592653589793,h=ee+1|0,(h|0)!=(ne|0);)Ce=ee,V=_,ee=h,h=Ce;p&&(G[Te>>3]=J,G[he>>3]=W)}}else A[u>>2]=0,A[u+4>>2]=0,A[u+8>>2]=0,A[u+12>>2]=0,A[u+16>>2]=0,A[u+20>>2]=0,A[u+24>>2]=0,A[u+28>>2]=0;if(Ce=c+8|0,h=A[Ce>>2]|0,!((h|0)<=0)){Se=c+12|0,$=0;do if(m=A[Se>>2]|0,p=$,$=$+1|0,he=u+($<<5)|0,Te=A[m+(p<<3)>>2]|0,Te){if(ee=u+($<<5)+8|0,G[ee>>3]=17976931348623157e292,c=u+($<<5)+24|0,G[c>>3]=17976931348623157e292,G[he>>3]=-17976931348623157e292,ue=u+($<<5)+16|0,G[ue>>3]=-17976931348623157e292,(Te|0)>0){for(ne=A[m+(p<<3)+4>>2]|0,W=17976931348623157e292,J=-17976931348623157e292,m=0,p=-1,re=0,x=17976931348623157e292,B=17976931348623157e292,R=-17976931348623157e292,v=-17976931348623157e292;_=+G[ne+(re<<4)>>3],V=+G[ne+(re<<4)+8>>3],p=p+2|0,w=+G[ne+(((p|0)==(Te|0)?0:p)<<4)+8>>3],_<x&&(G[ee>>3]=_,x=_),V<B&&(G[c>>3]=V,B=V),_>R?G[he>>3]=_:_=R,V>v&&(G[ue>>3]=V,v=V),W=V>0&V<W?V:W,J=V<0&V>J?V:J,m=m|+tt(+(V-w))>3.141592653589793,p=re+1|0,(p|0)!=(Te|0);)ve=re,re=p,R=_,p=ve;m&&(G[ue>>3]=J,G[c>>3]=W)}}else A[he>>2]=0,A[he+4>>2]=0,A[he+8>>2]=0,A[he+12>>2]=0,A[he+16>>2]=0,A[he+20>>2]=0,A[he+24>>2]=0,A[he+28>>2]=0,h=A[Ce>>2]|0;while(($|0)<(h|0))}}function U8(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0,_=0;if(!(DT(c,u,h)|0))return m=0,m|0;if(m=c+8|0,(A[m>>2]|0)<=0)return m=1,m|0;for(p=c+12|0,c=0;;){if(_=c,c=c+1|0,DT((A[p>>2]|0)+(_<<3)|0,u+(c<<5)|0,h)|0){c=0,p=6;break}if((c|0)>=(A[m>>2]|0)){c=1,p=6;break}}return(p|0)==6?c|0:0}function G8(){return 8}function z8(){return 16}function V8(){return 168}function j8(){return 8}function H8(){return 16}function W8(){return 12}function Q8(){return 8}function $8(c){c=c|0;var u=0,h=0;return h=+G[c>>3],u=+G[c+8>>3],+ +rt(+(h*h+u*u))}function FT(c,u,h,p,m){c=c|0,u=u|0,h=h|0,p=p|0,m=m|0;var _=0,v=0,w=0,x=0,B=0,R=0,V=0,W=0;B=+G[c>>3],x=+G[u>>3]-B,w=+G[c+8>>3],v=+G[u+8>>3]-w,V=+G[h>>3],_=+G[p>>3]-V,W=+G[h+8>>3],R=+G[p+8>>3]-W,_=(_*(w-W)-(B-V)*R)/(x*R-v*_),G[m>>3]=B+x*_,G[m+8>>3]=w+v*_}function kT(c,u){return c=c|0,u=u|0,+G[c>>3]!=+G[u>>3]?(u=0,u|0):(u=+G[c+8>>3]==+G[u+8>>3],u|0)}function bn(c,u){c=c|0,u=u|0;var h=0,p=0,m=0;return m=+G[c>>3]-+G[u>>3],p=+G[c+8>>3]-+G[u+8>>3],h=+G[c+16>>3]-+G[u+16>>3],+(m*m+p*p+h*h)}function X8(c,u){c=c|0,u=u|0;var h=0,p=0,m=0;h=+G[c>>3],p=+ft(+h),h=+at(+h),G[u+16>>3]=h,h=+G[c+8>>3],m=p*+ft(+h),G[u>>3]=m,h=p*+at(+h),G[u+8>>3]=h}function J8(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0,v=0,w=0,x=0,B=0;if(B=U,U=U+32|0,m=B+16|0,_=B,_A(c,u,m),v=CT(c,u)|0,x=kr(c,u)|0,NN(v,_),u=UN(v,A[m>>2]|0)|0,!(Ye(v)|0))return x=u,U=B,x|0;do switch(v|0){case 4:{c=0,h=14;break}case 14:{c=1,h=14;break}case 24:{c=2,h=14;break}case 38:{c=3,h=14;break}case 49:{c=4,h=14;break}case 58:{c=5,h=14;break}case 63:{c=6,h=14;break}case 72:{c=7,h=14;break}case 83:{c=8,h=14;break}case 97:{c=9,h=14;break}case 107:{c=10,h=14;break}case 117:{c=11,h=14;break}default:w=0,p=0}while(0);return(h|0)==14&&(w=A[22096+(c*24|0)+8>>2]|0,p=A[22096+(c*24|0)+16>>2]|0),c=A[m>>2]|0,(c|0)!=(A[_>>2]|0)&&(v=Pn(v)|0,c=A[m>>2]|0,v|(c|0)==(p|0)&&(u=(u+1|0)%6|0)),(x|0)==3&(c|0)==(p|0)?(x=(u+5|0)%6|0,U=B,x|0):(x|0)==5&(c|0)==(w|0)?(x=(u+1|0)%6|0,U=B,x|0):(x=u,U=B,x|0)}function K8(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0;return p=Mn(c,u)|0,(h+-1|0)>>>0>5||(m=(p|0)!=0,(h|0)==1&m)?(h=-1,h|0):(p=J8(c,u)|0,m?(h=(5-p+(A[22384+(h<<2)>>2]|0)|0)%5|0,h|0):(h=(6-p+(A[22416+(h<<2)>>2]|0)|0)%6|0,h|0))}function NT(c,u,h){c=c|0,u=u|0,h=h|0;var p=0;(u|0)>0?(p=Ji(u,4)|0,A[c>>2]=p,p||yt(23230,23253,40,23267)):A[c>>2]=0,A[c+4>>2]=u,A[c+8>>2]=0,A[c+12>>2]=h}function UT(c){c=c|0;var u=0,h=0,p=0,m=0,_=0,v=0,w=0;m=c+4|0,_=c+12|0,v=c+8|0;e:for(;;){for(h=A[m>>2]|0,u=0;;){if((u|0)>=(h|0))break e;if(p=A[c>>2]|0,w=A[p+(u<<2)>>2]|0,!w)u=u+1|0;else break}u=p+(~~(+tt(+(+Qt(10,+ +(15-(A[_>>2]|0)|0))*(+G[w>>3]+ +G[w+8>>3])))%+(h|0))>>>0<<2)|0,h=A[u>>2]|0;t:do if(h|0){if(p=w+32|0,(h|0)==(w|0))A[u>>2]=A[p>>2];else{if(h=h+32|0,u=A[h>>2]|0,!u)break;for(;(u|0)!=(w|0);)if(h=u+32|0,u=A[h>>2]|0,!u)break t;A[h>>2]=A[p>>2]}qe(w),A[v>>2]=(A[v>>2]|0)+-1}while(0)}qe(A[c>>2]|0)}function GT(c){c=c|0;var u=0,h=0,p=0;for(p=A[c+4>>2]|0,h=0;;){if((h|0)>=(p|0)){u=0,h=4;break}if(u=A[(A[c>>2]|0)+(h<<2)>>2]|0,!u)h=h+1|0;else{h=4;break}}return(h|0)==4?u|0:0}function zT(c,u){c=c|0,u=u|0;var h=0,p=0,m=0,_=0;if(h=~~(+tt(+(+Qt(10,+ +(15-(A[c+12>>2]|0)|0))*(+G[u>>3]+ +G[u+8>>3])))%+(A[c+4>>2]|0))>>>0,h=(A[c>>2]|0)+(h<<2)|0,p=A[h>>2]|0,!p)return _=1,_|0;_=u+32|0;do if((p|0)!=(u|0)){if(h=A[p+32>>2]|0,!h)return _=1,_|0;for(m=h;;){if((m|0)==(u|0)){m=8;break}if(h=A[m+32>>2]|0,h)p=m,m=h;else{h=1,m=10;break}}if((m|0)==8){A[p+32>>2]=A[_>>2];break}else if((m|0)==10)return h|0}else A[h>>2]=A[_>>2];while(0);return qe(u),_=c+8|0,A[_>>2]=(A[_>>2]|0)+-1,_=0,_|0}function Y8(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0,_=0,v=0;_=Ss(40)|0,_||yt(23283,23253,98,23296),A[_>>2]=A[u>>2],A[_+4>>2]=A[u+4>>2],A[_+8>>2]=A[u+8>>2],A[_+12>>2]=A[u+12>>2],m=_+16|0,A[m>>2]=A[h>>2],A[m+4>>2]=A[h+4>>2],A[m+8>>2]=A[h+8>>2],A[m+12>>2]=A[h+12>>2],A[_+32>>2]=0,m=~~(+tt(+(+Qt(10,+ +(15-(A[c+12>>2]|0)|0))*(+G[u>>3]+ +G[u+8>>3])))%+(A[c+4>>2]|0))>>>0,m=(A[c>>2]|0)+(m<<2)|0,p=A[m>>2]|0;do if(!p)A[m>>2]=_;else{for(;!(nc(p,u)|0&&nc(p+16|0,h)|0);)if(m=A[p+32>>2]|0,p=(m|0)==0?p:m,!(A[p+32>>2]|0)){v=10;break}if((v|0)==10){A[p+32>>2]=_;break}return qe(_),v=p,v|0}while(0);return v=c+8|0,A[v>>2]=(A[v>>2]|0)+1,v=_,v|0}function q8(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0;if(m=~~(+tt(+(+Qt(10,+ +(15-(A[c+12>>2]|0)|0))*(+G[u>>3]+ +G[u+8>>3])))%+(A[c+4>>2]|0))>>>0,m=A[(A[c>>2]|0)+(m<<2)>>2]|0,!m)return h=0,h|0;if(!h){for(c=m;;){if(nc(c,u)|0){p=10;break}if(c=A[c+32>>2]|0,!c){c=0,p=10;break}}if((p|0)==10)return c|0}for(c=m;;){if(nc(c,u)|0&&nc(c+16|0,h)|0){p=10;break}if(c=A[c+32>>2]|0,!c){c=0,p=10;break}}return(p|0)==10?c|0:0}function Z8(c,u){c=c|0,u=u|0;var h=0;if(h=~~(+tt(+(+Qt(10,+ +(15-(A[c+12>>2]|0)|0))*(+G[u>>3]+ +G[u+8>>3])))%+(A[c+4>>2]|0))>>>0,c=A[(A[c>>2]|0)+(h<<2)>>2]|0,!c)return h=0,h|0;for(;;){if(nc(c,u)|0){u=5;break}if(c=A[c+32>>2]|0,!c){c=0,u=5;break}}return(u|0)==5?c|0:0}function e6(){return 23312}function t6(c){return c=+c,+ +HT(+c)}function Fd(c){return c=+c,~~+t6(c)|0}function Ss(c){c=c|0;var u=0,h=0,p=0,m=0,_=0,v=0,w=0,x=0,B=0,R=0,V=0,W=0,J=0,ne=0,re=0,he=0,Te=0,ee=0,ue=0,$=0,Se=0;Se=U,U=U+16|0,W=Se;do if(c>>>0<245){if(B=c>>>0<11?16:c+11&-8,c=B>>>3,V=A[5829]|0,h=V>>>c,h&3|0)return u=(h&1^1)+c|0,c=23356+(u<<1<<2)|0,h=c+8|0,p=A[h>>2]|0,m=p+8|0,_=A[m>>2]|0,(_|0)==(c|0)?A[5829]=V&~(1<<u):(A[_+12>>2]=c,A[h>>2]=_),$=u<<3,A[p+4>>2]=$|3,$=p+$+4|0,A[$>>2]=A[$>>2]|1,$=m,U=Se,$|0;if(R=A[5831]|0,B>>>0>R>>>0){if(h|0)return u=2<<c,u=h<<c&(u|0-u),u=(u&0-u)+-1|0,w=u>>>12&16,u=u>>>w,h=u>>>5&8,u=u>>>h,_=u>>>2&4,u=u>>>_,c=u>>>1&2,u=u>>>c,p=u>>>1&1,p=(h|w|_|c|p)+(u>>>p)|0,u=23356+(p<<1<<2)|0,c=u+8|0,_=A[c>>2]|0,w=_+8|0,h=A[w>>2]|0,(h|0)==(u|0)?(c=V&~(1<<p),A[5829]=c):(A[h+12>>2]=u,A[c>>2]=h,c=V),$=p<<3,v=$-B|0,A[_+4>>2]=B|3,m=_+B|0,A[m+4>>2]=v|1,A[_+$>>2]=v,R|0&&(p=A[5834]|0,u=R>>>3,h=23356+(u<<1<<2)|0,u=1<<u,c&u?(c=h+8|0,u=A[c>>2]|0):(A[5829]=c|u,u=h,c=h+8|0),A[c>>2]=p,A[u+12>>2]=p,A[p+8>>2]=u,A[p+12>>2]=h),A[5831]=v,A[5834]=m,$=w,U=Se,$|0;if(_=A[5830]|0,_){for(h=(_&0-_)+-1|0,m=h>>>12&16,h=h>>>m,p=h>>>5&8,h=h>>>p,v=h>>>2&4,h=h>>>v,w=h>>>1&2,h=h>>>w,x=h>>>1&1,x=A[23620+((p|m|v|w|x)+(h>>>x)<<2)>>2]|0,h=x,w=x,x=(A[x+4>>2]&-8)-B|0;c=A[h+16>>2]|0,!(!c&&(c=A[h+20>>2]|0,!c));)v=(A[c+4>>2]&-8)-B|0,m=v>>>0<x>>>0,h=c,w=m?c:w,x=m?v:x;if(v=w+B|0,v>>>0>w>>>0){m=A[w+24>>2]|0,u=A[w+12>>2]|0;do if((u|0)==(w|0)){if(c=w+20|0,u=A[c>>2]|0,!u&&(c=w+16|0,u=A[c>>2]|0,!u)){h=0;break}for(;;)if(p=u+20|0,h=A[p>>2]|0,h)u=h,c=p;else if(p=u+16|0,h=A[p>>2]|0,h)u=h,c=p;else break;A[c>>2]=0,h=u}else h=A[w+8>>2]|0,A[h+12>>2]=u,A[u+8>>2]=h,h=u;while(0);do if(m|0){if(u=A[w+28>>2]|0,c=23620+(u<<2)|0,(w|0)==(A[c>>2]|0)){if(A[c>>2]=h,!h){A[5830]=_&~(1<<u);break}}else if($=m+16|0,A[((A[$>>2]|0)==(w|0)?$:m+20|0)>>2]=h,!h)break;A[h+24>>2]=m,u=A[w+16>>2]|0,u|0&&(A[h+16>>2]=u,A[u+24>>2]=h),u=A[w+20>>2]|0,u|0&&(A[h+20>>2]=u,A[u+24>>2]=h)}while(0);return x>>>0<16?($=x+B|0,A[w+4>>2]=$|3,$=w+$+4|0,A[$>>2]=A[$>>2]|1):(A[w+4>>2]=B|3,A[v+4>>2]=x|1,A[v+x>>2]=x,R|0&&(p=A[5834]|0,u=R>>>3,h=23356+(u<<1<<2)|0,u=1<<u,u&V?(c=h+8|0,u=A[c>>2]|0):(A[5829]=u|V,u=h,c=h+8|0),A[c>>2]=p,A[u+12>>2]=p,A[p+8>>2]=u,A[p+12>>2]=h),A[5831]=x,A[5834]=v),$=w+8|0,U=Se,$|0}else V=B}else V=B}else V=B}else if(c>>>0<=4294967231)if(c=c+11|0,B=c&-8,p=A[5830]|0,p){m=0-B|0,c=c>>>8,c?B>>>0>16777215?x=31:(V=(c+1048320|0)>>>16&8,re=c<<V,w=(re+520192|0)>>>16&4,re=re<<w,x=(re+245760|0)>>>16&2,x=14-(w|V|x)+(re<<x>>>15)|0,x=B>>>(x+7|0)&1|x<<1):x=0,h=A[23620+(x<<2)>>2]|0;e:do if(!h)h=0,c=0,re=61;else for(c=0,w=B<<((x|0)==31?0:25-(x>>>1)|0),_=0;;){if(v=(A[h+4>>2]&-8)-B|0,v>>>0<m>>>0)if(v)c=h,m=v;else{c=h,m=0,re=65;break e}if(re=A[h+20>>2]|0,h=A[h+16+(w>>>31<<2)>>2]|0,_=(re|0)==0|(re|0)==(h|0)?_:re,h)w=w<<1;else{h=_,re=61;break}}while(0);if((re|0)==61){if((h|0)==0&(c|0)==0){if(c=2<<x,c=(c|0-c)&p,!c){V=B;break}V=(c&0-c)+-1|0,v=V>>>12&16,V=V>>>v,_=V>>>5&8,V=V>>>_,w=V>>>2&4,V=V>>>w,x=V>>>1&2,V=V>>>x,h=V>>>1&1,c=0,h=A[23620+((_|v|w|x|h)+(V>>>h)<<2)>>2]|0}h?re=65:(w=c,v=m)}if((re|0)==65)for(_=h;;)if(V=(A[_+4>>2]&-8)-B|0,h=V>>>0<m>>>0,m=h?V:m,c=h?_:c,h=A[_+16>>2]|0,h||(h=A[_+20>>2]|0),h)_=h;else{w=c,v=m;break}if((w|0)!=0&&v>>>0<((A[5831]|0)-B|0)>>>0&&(R=w+B|0,R>>>0>w>>>0)){_=A[w+24>>2]|0,u=A[w+12>>2]|0;do if((u|0)==(w|0)){if(c=w+20|0,u=A[c>>2]|0,!u&&(c=w+16|0,u=A[c>>2]|0,!u)){u=0;break}for(;;)if(m=u+20|0,h=A[m>>2]|0,h)u=h,c=m;else if(m=u+16|0,h=A[m>>2]|0,h)u=h,c=m;else break;A[c>>2]=0}else $=A[w+8>>2]|0,A[$+12>>2]=u,A[u+8>>2]=$;while(0);do if(_){if(c=A[w+28>>2]|0,h=23620+(c<<2)|0,(w|0)==(A[h>>2]|0)){if(A[h>>2]=u,!u){p=p&~(1<<c),A[5830]=p;break}}else if($=_+16|0,A[((A[$>>2]|0)==(w|0)?$:_+20|0)>>2]=u,!u)break;A[u+24>>2]=_,c=A[w+16>>2]|0,c|0&&(A[u+16>>2]=c,A[c+24>>2]=u),c=A[w+20>>2]|0,c&&(A[u+20>>2]=c,A[c+24>>2]=u)}while(0);e:do if(v>>>0<16)$=v+B|0,A[w+4>>2]=$|3,$=w+$+4|0,A[$>>2]=A[$>>2]|1;else{if(A[w+4>>2]=B|3,A[R+4>>2]=v|1,A[R+v>>2]=v,u=v>>>3,v>>>0<256){h=23356+(u<<1<<2)|0,c=A[5829]|0,u=1<<u,c&u?(c=h+8|0,u=A[c>>2]|0):(A[5829]=c|u,u=h,c=h+8|0),A[c>>2]=R,A[u+12>>2]=R,A[R+8>>2]=u,A[R+12>>2]=h;break}if(u=v>>>8,u?v>>>0>16777215?h=31:(ue=(u+1048320|0)>>>16&8,$=u<<ue,ee=($+520192|0)>>>16&4,$=$<<ee,h=($+245760|0)>>>16&2,h=14-(ee|ue|h)+($<<h>>>15)|0,h=v>>>(h+7|0)&1|h<<1):h=0,u=23620+(h<<2)|0,A[R+28>>2]=h,c=R+16|0,A[c+4>>2]=0,A[c>>2]=0,c=1<<h,!(p&c)){A[5830]=p|c,A[u>>2]=R,A[R+24>>2]=u,A[R+12>>2]=R,A[R+8>>2]=R;break}u=A[u>>2]|0;t:do if((A[u+4>>2]&-8|0)!=(v|0)){for(p=v<<((h|0)==31?0:25-(h>>>1)|0);h=u+16+(p>>>31<<2)|0,c=A[h>>2]|0,!!c;)if((A[c+4>>2]&-8|0)==(v|0)){u=c;break t}else p=p<<1,u=c;A[h>>2]=R,A[R+24>>2]=u,A[R+12>>2]=R,A[R+8>>2]=R;break e}while(0);ue=u+8|0,$=A[ue>>2]|0,A[$+12>>2]=R,A[ue>>2]=R,A[R+8>>2]=$,A[R+12>>2]=u,A[R+24>>2]=0}while(0);return $=w+8|0,U=Se,$|0}else V=B}else V=B;else V=-1;while(0);if(h=A[5831]|0,h>>>0>=V>>>0)return u=h-V|0,c=A[5834]|0,u>>>0>15?($=c+V|0,A[5834]=$,A[5831]=u,A[$+4>>2]=u|1,A[c+h>>2]=u,A[c+4>>2]=V|3):(A[5831]=0,A[5834]=0,A[c+4>>2]=h|3,$=c+h+4|0,A[$>>2]=A[$>>2]|1),$=c+8|0,U=Se,$|0;if(v=A[5832]|0,v>>>0>V>>>0)return ee=v-V|0,A[5832]=ee,$=A[5835]|0,ue=$+V|0,A[5835]=ue,A[ue+4>>2]=ee|1,A[$+4>>2]=V|3,$=$+8|0,U=Se,$|0;if(A[5947]|0?c=A[5949]|0:(A[5949]=4096,A[5948]=4096,A[5950]=-1,A[5951]=-1,A[5952]=0,A[5940]=0,A[5947]=W&-16^1431655768,c=4096),w=V+48|0,x=V+47|0,_=c+x|0,m=0-c|0,B=_&m,B>>>0<=V>>>0||(c=A[5939]|0,c|0&&(R=A[5937]|0,W=R+B|0,W>>>0<=R>>>0|W>>>0>c>>>0)))return $=0,U=Se,$|0;e:do if(A[5940]&4)u=0,re=143;else{h=A[5835]|0;t:do if(h){for(p=23764;W=A[p>>2]|0,!(W>>>0<=h>>>0&&(W+(A[p+4>>2]|0)|0)>>>0>h>>>0);)if(c=A[p+8>>2]|0,c)p=c;else{re=128;break t}if(u=_-v&m,u>>>0<2147483647)if(c=Vo(u|0)|0,(c|0)==((A[p>>2]|0)+(A[p+4>>2]|0)|0)){if((c|0)!=-1){v=u,_=c,re=145;break e}}else p=c,re=136;else u=0}else re=128;while(0);do if((re|0)==128)if(h=Vo(0)|0,(h|0)!=-1&&(u=h,J=A[5948]|0,ne=J+-1|0,u=((ne&u|0)==0?0:(ne+u&0-J)-u|0)+B|0,J=A[5937]|0,ne=u+J|0,u>>>0>V>>>0&u>>>0<2147483647)){if(W=A[5939]|0,W|0&&ne>>>0<=J>>>0|ne>>>0>W>>>0){u=0;break}if(c=Vo(u|0)|0,(c|0)==(h|0)){v=u,_=h,re=145;break e}else p=c,re=136}else u=0;while(0);do if((re|0)==136){if(h=0-u|0,!(w>>>0>u>>>0&(u>>>0<2147483647&(p|0)!=-1)))if((p|0)==-1){u=0;break}else{v=u,_=p,re=145;break e}if(c=A[5949]|0,c=x-u+c&0-c,c>>>0>=2147483647){v=u,_=p,re=145;break e}if((Vo(c|0)|0)==-1){Vo(h|0)|0,u=0;break}else{v=c+u|0,_=p,re=145;break e}}while(0);A[5940]=A[5940]|4,re=143}while(0);if((re|0)==143&&B>>>0<2147483647&&(ee=Vo(B|0)|0,ne=Vo(0)|0,he=ne-ee|0,Te=he>>>0>(V+40|0)>>>0,!((ee|0)==-1|Te^1|ee>>>0<ne>>>0&((ee|0)!=-1&(ne|0)!=-1)^1))&&(v=Te?he:u,_=ee,re=145),(re|0)==145){u=(A[5937]|0)+v|0,A[5937]=u,u>>>0>(A[5938]|0)>>>0&&(A[5938]=u),x=A[5835]|0;e:do if(x){for(u=23764;;){if(c=A[u>>2]|0,h=A[u+4>>2]|0,(_|0)==(c+h|0)){re=154;break}if(p=A[u+8>>2]|0,p)u=p;else break}if((re|0)==154&&(ue=u+4|0,(A[u+12>>2]&8|0)==0)&&_>>>0>x>>>0&c>>>0<=x>>>0){A[ue>>2]=h+v,$=(A[5832]|0)+v|0,ee=x+8|0,ee=(ee&7|0)==0?0:0-ee&7,ue=x+ee|0,ee=$-ee|0,A[5835]=ue,A[5832]=ee,A[ue+4>>2]=ee|1,A[x+$+4>>2]=40,A[5836]=A[5951];break}for(_>>>0<(A[5833]|0)>>>0&&(A[5833]=_),h=_+v|0,u=23764;;){if((A[u>>2]|0)==(h|0)){re=162;break}if(c=A[u+8>>2]|0,c)u=c;else break}if((re|0)==162&&(A[u+12>>2]&8|0)==0){A[u>>2]=_,R=u+4|0,A[R>>2]=(A[R>>2]|0)+v,R=_+8|0,R=_+((R&7|0)==0?0:0-R&7)|0,u=h+8|0,u=h+((u&7|0)==0?0:0-u&7)|0,B=R+V|0,w=u-R-V|0,A[R+4>>2]=V|3;t:do if((x|0)==(u|0))$=(A[5832]|0)+w|0,A[5832]=$,A[5835]=B,A[B+4>>2]=$|1;else{if((A[5834]|0)==(u|0)){$=(A[5831]|0)+w|0,A[5831]=$,A[5834]=B,A[B+4>>2]=$|1,A[B+$>>2]=$;break}if(c=A[u+4>>2]|0,(c&3|0)==1){v=c&-8,p=c>>>3;n:do if(c>>>0<256)if(c=A[u+8>>2]|0,h=A[u+12>>2]|0,(h|0)==(c|0)){A[5829]=A[5829]&~(1<<p);break}else{A[c+12>>2]=h,A[h+8>>2]=c;break}else{_=A[u+24>>2]|0,c=A[u+12>>2]|0;do if((c|0)==(u|0)){if(h=u+16|0,p=h+4|0,c=A[p>>2]|0,c)h=p;else if(c=A[h>>2]|0,!c){c=0;break}for(;;)if(m=c+20|0,p=A[m>>2]|0,p)c=p,h=m;else if(m=c+16|0,p=A[m>>2]|0,p)c=p,h=m;else break;A[h>>2]=0}else $=A[u+8>>2]|0,A[$+12>>2]=c,A[c+8>>2]=$;while(0);if(!_)break;h=A[u+28>>2]|0,p=23620+(h<<2)|0;do if((A[p>>2]|0)!=(u|0)){if($=_+16|0,A[((A[$>>2]|0)==(u|0)?$:_+20|0)>>2]=c,!c)break n}else{if(A[p>>2]=c,c|0)break;A[5830]=A[5830]&~(1<<h);break n}while(0);if(A[c+24>>2]=_,h=u+16|0,p=A[h>>2]|0,p|0&&(A[c+16>>2]=p,A[p+24>>2]=c),h=A[h+4>>2]|0,!h)break;A[c+20>>2]=h,A[h+24>>2]=c}while(0);u=u+v|0,m=v+w|0}else m=w;if(u=u+4|0,A[u>>2]=A[u>>2]&-2,A[B+4>>2]=m|1,A[B+m>>2]=m,u=m>>>3,m>>>0<256){h=23356+(u<<1<<2)|0,c=A[5829]|0,u=1<<u,c&u?(c=h+8|0,u=A[c>>2]|0):(A[5829]=c|u,u=h,c=h+8|0),A[c>>2]=B,A[u+12>>2]=B,A[B+8>>2]=u,A[B+12>>2]=h;break}u=m>>>8;do if(!u)p=0;else{if(m>>>0>16777215){p=31;break}ue=(u+1048320|0)>>>16&8,$=u<<ue,ee=($+520192|0)>>>16&4,$=$<<ee,p=($+245760|0)>>>16&2,p=14-(ee|ue|p)+($<<p>>>15)|0,p=m>>>(p+7|0)&1|p<<1}while(0);if(u=23620+(p<<2)|0,A[B+28>>2]=p,c=B+16|0,A[c+4>>2]=0,A[c>>2]=0,c=A[5830]|0,h=1<<p,!(c&h)){A[5830]=c|h,A[u>>2]=B,A[B+24>>2]=u,A[B+12>>2]=B,A[B+8>>2]=B;break}u=A[u>>2]|0;n:do if((A[u+4>>2]&-8|0)!=(m|0)){for(p=m<<((p|0)==31?0:25-(p>>>1)|0);h=u+16+(p>>>31<<2)|0,c=A[h>>2]|0,!!c;)if((A[c+4>>2]&-8|0)==(m|0)){u=c;break n}else p=p<<1,u=c;A[h>>2]=B,A[B+24>>2]=u,A[B+12>>2]=B,A[B+8>>2]=B;break t}while(0);ue=u+8|0,$=A[ue>>2]|0,A[$+12>>2]=B,A[ue>>2]=B,A[B+8>>2]=$,A[B+12>>2]=u,A[B+24>>2]=0}while(0);return $=R+8|0,U=Se,$|0}for(u=23764;c=A[u>>2]|0,!(c>>>0<=x>>>0&&($=c+(A[u+4>>2]|0)|0,$>>>0>x>>>0));)u=A[u+8>>2]|0;m=$+-47|0,c=m+8|0,c=m+((c&7|0)==0?0:0-c&7)|0,m=x+16|0,c=c>>>0<m>>>0?x:c,u=c+8|0,h=v+-40|0,ee=_+8|0,ee=(ee&7|0)==0?0:0-ee&7,ue=_+ee|0,ee=h-ee|0,A[5835]=ue,A[5832]=ee,A[ue+4>>2]=ee|1,A[_+h+4>>2]=40,A[5836]=A[5951],h=c+4|0,A[h>>2]=27,A[u>>2]=A[5941],A[u+4>>2]=A[5942],A[u+8>>2]=A[5943],A[u+12>>2]=A[5944],A[5941]=_,A[5942]=v,A[5944]=0,A[5943]=u,u=c+24|0;do ue=u,u=u+4|0,A[u>>2]=7;while((ue+8|0)>>>0<$>>>0);if((c|0)!=(x|0)){if(_=c-x|0,A[h>>2]=A[h>>2]&-2,A[x+4>>2]=_|1,A[c>>2]=_,u=_>>>3,_>>>0<256){h=23356+(u<<1<<2)|0,c=A[5829]|0,u=1<<u,c&u?(c=h+8|0,u=A[c>>2]|0):(A[5829]=c|u,u=h,c=h+8|0),A[c>>2]=x,A[u+12>>2]=x,A[x+8>>2]=u,A[x+12>>2]=h;break}if(u=_>>>8,u?_>>>0>16777215?p=31:(ue=(u+1048320|0)>>>16&8,$=u<<ue,ee=($+520192|0)>>>16&4,$=$<<ee,p=($+245760|0)>>>16&2,p=14-(ee|ue|p)+($<<p>>>15)|0,p=_>>>(p+7|0)&1|p<<1):p=0,h=23620+(p<<2)|0,A[x+28>>2]=p,A[x+20>>2]=0,A[m>>2]=0,u=A[5830]|0,c=1<<p,!(u&c)){A[5830]=u|c,A[h>>2]=x,A[x+24>>2]=h,A[x+12>>2]=x,A[x+8>>2]=x;break}u=A[h>>2]|0;t:do if((A[u+4>>2]&-8|0)!=(_|0)){for(p=_<<((p|0)==31?0:25-(p>>>1)|0);h=u+16+(p>>>31<<2)|0,c=A[h>>2]|0,!!c;)if((A[c+4>>2]&-8|0)==(_|0)){u=c;break t}else p=p<<1,u=c;A[h>>2]=x,A[x+24>>2]=u,A[x+12>>2]=x,A[x+8>>2]=x;break e}while(0);ue=u+8|0,$=A[ue>>2]|0,A[$+12>>2]=x,A[ue>>2]=x,A[x+8>>2]=$,A[x+12>>2]=u,A[x+24>>2]=0}}else $=A[5833]|0,($|0)==0|_>>>0<$>>>0&&(A[5833]=_),A[5941]=_,A[5942]=v,A[5944]=0,A[5838]=A[5947],A[5837]=-1,A[5842]=23356,A[5841]=23356,A[5844]=23364,A[5843]=23364,A[5846]=23372,A[5845]=23372,A[5848]=23380,A[5847]=23380,A[5850]=23388,A[5849]=23388,A[5852]=23396,A[5851]=23396,A[5854]=23404,A[5853]=23404,A[5856]=23412,A[5855]=23412,A[5858]=23420,A[5857]=23420,A[5860]=23428,A[5859]=23428,A[5862]=23436,A[5861]=23436,A[5864]=23444,A[5863]=23444,A[5866]=23452,A[5865]=23452,A[5868]=23460,A[5867]=23460,A[5870]=23468,A[5869]=23468,A[5872]=23476,A[5871]=23476,A[5874]=23484,A[5873]=23484,A[5876]=23492,A[5875]=23492,A[5878]=23500,A[5877]=23500,A[5880]=23508,A[5879]=23508,A[5882]=23516,A[5881]=23516,A[5884]=23524,A[5883]=23524,A[5886]=23532,A[5885]=23532,A[5888]=23540,A[5887]=23540,A[5890]=23548,A[5889]=23548,A[5892]=23556,A[5891]=23556,A[5894]=23564,A[5893]=23564,A[5896]=23572,A[5895]=23572,A[5898]=23580,A[5897]=23580,A[5900]=23588,A[5899]=23588,A[5902]=23596,A[5901]=23596,A[5904]=23604,A[5903]=23604,$=v+-40|0,ee=_+8|0,ee=(ee&7|0)==0?0:0-ee&7,ue=_+ee|0,ee=$-ee|0,A[5835]=ue,A[5832]=ee,A[ue+4>>2]=ee|1,A[_+$+4>>2]=40,A[5836]=A[5951];while(0);if(u=A[5832]|0,u>>>0>V>>>0)return ee=u-V|0,A[5832]=ee,$=A[5835]|0,ue=$+V|0,A[5835]=ue,A[ue+4>>2]=ee|1,A[$+4>>2]=V|3,$=$+8|0,U=Se,$|0}return $=e6()|0,A[$>>2]=12,$=0,U=Se,$|0}function qe(c){c=c|0;var u=0,h=0,p=0,m=0,_=0,v=0,w=0,x=0;if(!c)return;h=c+-8|0,m=A[5833]|0,c=A[c+-4>>2]|0,u=c&-8,x=h+u|0;do if(c&1)w=h,v=h;else{if(p=A[h>>2]|0,!(c&3)||(v=h+(0-p)|0,_=p+u|0,v>>>0<m>>>0))return;if((A[5834]|0)==(v|0)){if(c=x+4|0,u=A[c>>2]|0,(u&3|0)!=3){w=v,u=_;break}A[5831]=_,A[c>>2]=u&-2,A[v+4>>2]=_|1,A[v+_>>2]=_;return}if(h=p>>>3,p>>>0<256)if(c=A[v+8>>2]|0,u=A[v+12>>2]|0,(u|0)==(c|0)){A[5829]=A[5829]&~(1<<h),w=v,u=_;break}else{A[c+12>>2]=u,A[u+8>>2]=c,w=v,u=_;break}m=A[v+24>>2]|0,c=A[v+12>>2]|0;do if((c|0)==(v|0)){if(u=v+16|0,h=u+4|0,c=A[h>>2]|0,c)u=h;else if(c=A[u>>2]|0,!c){c=0;break}for(;;)if(p=c+20|0,h=A[p>>2]|0,h)c=h,u=p;else if(p=c+16|0,h=A[p>>2]|0,h)c=h,u=p;else break;A[u>>2]=0}else w=A[v+8>>2]|0,A[w+12>>2]=c,A[c+8>>2]=w;while(0);if(m){if(u=A[v+28>>2]|0,h=23620+(u<<2)|0,(A[h>>2]|0)==(v|0)){if(A[h>>2]=c,!c){A[5830]=A[5830]&~(1<<u),w=v,u=_;break}}else if(w=m+16|0,A[((A[w>>2]|0)==(v|0)?w:m+20|0)>>2]=c,!c){w=v,u=_;break}A[c+24>>2]=m,u=v+16|0,h=A[u>>2]|0,h|0&&(A[c+16>>2]=h,A[h+24>>2]=c),u=A[u+4>>2]|0,u?(A[c+20>>2]=u,A[u+24>>2]=c,w=v,u=_):(w=v,u=_)}else w=v,u=_}while(0);if(v>>>0>=x>>>0||(c=x+4|0,p=A[c>>2]|0,!(p&1)))return;if(p&2)A[c>>2]=p&-2,A[w+4>>2]=u|1,A[v+u>>2]=u,m=u;else{if((A[5835]|0)==(x|0)){if(x=(A[5832]|0)+u|0,A[5832]=x,A[5835]=w,A[w+4>>2]=x|1,(w|0)!=(A[5834]|0))return;A[5834]=0,A[5831]=0;return}if((A[5834]|0)==(x|0)){x=(A[5831]|0)+u|0,A[5831]=x,A[5834]=v,A[w+4>>2]=x|1,A[v+x>>2]=x;return}m=(p&-8)+u|0,h=p>>>3;do if(p>>>0<256)if(u=A[x+8>>2]|0,c=A[x+12>>2]|0,(c|0)==(u|0)){A[5829]=A[5829]&~(1<<h);break}else{A[u+12>>2]=c,A[c+8>>2]=u;break}else{_=A[x+24>>2]|0,c=A[x+12>>2]|0;do if((c|0)==(x|0)){if(u=x+16|0,h=u+4|0,c=A[h>>2]|0,c)u=h;else if(c=A[u>>2]|0,!c){h=0;break}for(;;)if(p=c+20|0,h=A[p>>2]|0,h)c=h,u=p;else if(p=c+16|0,h=A[p>>2]|0,h)c=h,u=p;else break;A[u>>2]=0,h=c}else h=A[x+8>>2]|0,A[h+12>>2]=c,A[c+8>>2]=h,h=c;while(0);if(_|0){if(c=A[x+28>>2]|0,u=23620+(c<<2)|0,(A[u>>2]|0)==(x|0)){if(A[u>>2]=h,!h){A[5830]=A[5830]&~(1<<c);break}}else if(p=_+16|0,A[((A[p>>2]|0)==(x|0)?p:_+20|0)>>2]=h,!h)break;A[h+24>>2]=_,c=x+16|0,u=A[c>>2]|0,u|0&&(A[h+16>>2]=u,A[u+24>>2]=h),c=A[c+4>>2]|0,c|0&&(A[h+20>>2]=c,A[c+24>>2]=h)}}while(0);if(A[w+4>>2]=m|1,A[v+m>>2]=m,(w|0)==(A[5834]|0)){A[5831]=m;return}}if(c=m>>>3,m>>>0<256){h=23356+(c<<1<<2)|0,u=A[5829]|0,c=1<<c,u&c?(u=h+8|0,c=A[u>>2]|0):(A[5829]=u|c,c=h,u=h+8|0),A[u>>2]=w,A[c+12>>2]=w,A[w+8>>2]=c,A[w+12>>2]=h;return}c=m>>>8,c?m>>>0>16777215?p=31:(v=(c+1048320|0)>>>16&8,x=c<<v,_=(x+520192|0)>>>16&4,x=x<<_,p=(x+245760|0)>>>16&2,p=14-(_|v|p)+(x<<p>>>15)|0,p=m>>>(p+7|0)&1|p<<1):p=0,c=23620+(p<<2)|0,A[w+28>>2]=p,A[w+20>>2]=0,A[w+16>>2]=0,u=A[5830]|0,h=1<<p;e:do if(!(u&h))A[5830]=u|h,A[c>>2]=w,A[w+24>>2]=c,A[w+12>>2]=w,A[w+8>>2]=w;else{c=A[c>>2]|0;t:do if((A[c+4>>2]&-8|0)!=(m|0)){for(p=m<<((p|0)==31?0:25-(p>>>1)|0);h=c+16+(p>>>31<<2)|0,u=A[h>>2]|0,!!u;)if((A[u+4>>2]&-8|0)==(m|0)){c=u;break t}else p=p<<1,c=u;A[h>>2]=w,A[w+24>>2]=c,A[w+12>>2]=w,A[w+8>>2]=w;break e}while(0);v=c+8|0,x=A[v>>2]|0,A[x+12>>2]=w,A[v>>2]=w,A[w+8>>2]=x,A[w+12>>2]=c,A[w+24>>2]=0}while(0);if(x=(A[5837]|0)+-1|0,A[5837]=x,!(x|0)){for(c=23772;c=A[c>>2]|0,c;)c=c+8|0;A[5837]=-1}}function Ji(c,u){c=c|0,u=u|0;var h=0;return c?(h=Un(u,c)|0,(u|c)>>>0>65535&&(h=((h>>>0)/(c>>>0)|0|0)==(u|0)?h:-1)):h=0,c=Ss(h)|0,!c||!(A[c+-4>>2]&3)||Ki(c|0,0,h|0)|0,c|0}function n6(c,u,h,p){return c=c|0,u=u|0,h=h|0,p=p|0,h=c+h>>>0,ke(u+p+(h>>>0<c>>>0|0)>>>0|0),h|0|0}function bA(c,u,h,p){return c=c|0,u=u|0,h=h|0,p=p|0,p=u-p-(h>>>0>c>>>0|0)>>>0,ke(p|0),c-h>>>0|0|0}function VT(c){return c=c|0,(c?31-(Zr(c^c-1)|0)|0:32)|0}function r6(c,u,h,p,m){c=c|0,u=u|0,h=h|0,p=p|0,m=m|0;var _=0,v=0,w=0,x=0,B=0,R=0,V=0,W=0,J=0,ne=0;if(R=c,x=u,B=x,v=h,W=p,w=W,!B)return _=(m|0)!=0,w?_?(A[m>>2]=c|0,A[m+4>>2]=u&0,W=0,m=0,ke(W|0),m|0):(W=0,m=0,ke(W|0),m|0):(_&&(A[m>>2]=(R>>>0)%(v>>>0),A[m+4>>2]=0),W=0,m=(R>>>0)/(v>>>0)>>>0,ke(W|0),m|0);_=(w|0)==0;do if(v){if(!_){if(_=(Zr(w|0)|0)-(Zr(B|0)|0)|0,_>>>0<=31){V=_+1|0,w=31-_|0,u=_-31>>31,v=V,c=R>>>(V>>>0)&u|B<<w,u=B>>>(V>>>0)&u,_=0,w=R<<w;break}return m?(A[m>>2]=c|0,A[m+4>>2]=x|u&0,W=0,m=0,ke(W|0),m|0):(W=0,m=0,ke(W|0),m|0)}if(_=v-1|0,_&v|0){w=(Zr(v|0)|0)+33-(Zr(B|0)|0)|0,ne=64-w|0,V=32-w|0,x=V>>31,J=w-32|0,u=J>>31,v=w,c=V-1>>31&B>>>(J>>>0)|(B<<V|R>>>(w>>>0))&u,u=u&B>>>(w>>>0),_=R<<ne&x,w=(B<<ne|R>>>(J>>>0))&x|R<<V&w-33>>31;break}return m|0&&(A[m>>2]=_&R,A[m+4>>2]=0),(v|0)==1?(J=x|u&0,ne=c|0|0,ke(J|0),ne|0):(ne=VT(v|0)|0,J=B>>>(ne>>>0)|0,ne=B<<32-ne|R>>>(ne>>>0)|0,ke(J|0),ne|0)}else{if(_)return m|0&&(A[m>>2]=(B>>>0)%(v>>>0),A[m+4>>2]=0),J=0,ne=(B>>>0)/(v>>>0)>>>0,ke(J|0),ne|0;if(!R)return m|0&&(A[m>>2]=0,A[m+4>>2]=(B>>>0)%(w>>>0)),J=0,ne=(B>>>0)/(w>>>0)>>>0,ke(J|0),ne|0;if(_=w-1|0,!(_&w))return m|0&&(A[m>>2]=c|0,A[m+4>>2]=_&B|u&0),J=0,ne=B>>>((VT(w|0)|0)>>>0),ke(J|0),ne|0;if(_=(Zr(w|0)|0)-(Zr(B|0)|0)|0,_>>>0<=30){u=_+1|0,w=31-_|0,v=u,c=B<<w|R>>>(u>>>0),u=B>>>(u>>>0),_=0,w=R<<w;break}return m?(A[m>>2]=c|0,A[m+4>>2]=x|u&0,J=0,ne=0,ke(J|0),ne|0):(J=0,ne=0,ke(J|0),ne|0)}while(0);if(!v)B=w,x=0,w=0;else{V=h|0|0,R=W|p&0,B=n6(V|0,R|0,-1,-1)|0,h=H()|0,x=w,w=0;do p=x,x=_>>>31|x<<1,_=w|_<<1,p=c<<1|p>>>31|0,W=c>>>31|u<<1|0,bA(B|0,h|0,p|0,W|0)|0,ne=H()|0,J=ne>>31|((ne|0)<0?-1:0)<<1,w=J&1,c=bA(p|0,W|0,J&V|0,(((ne|0)<0?-1:0)>>31|((ne|0)<0?-1:0)<<1)&R|0)|0,u=H()|0,v=v-1|0;while((v|0)!=0);B=x,x=0}return v=0,m|0&&(A[m>>2]=c,A[m+4>>2]=u),J=(_|0)>>>31|(B|v)<<1|(v<<1|_>>>31)&0|x,ne=(_<<1|0>>>31)&-2|w,ke(J|0),ne|0}function zo(c,u,h,p){c=c|0,u=u|0,h=h|0,p=p|0;var m=0,_=0;return _=U,U=U+16|0,m=_|0,r6(c,u,h,p,m)|0,U=_,ke(A[m+4>>2]|0),A[m>>2]|0|0}function fe(c,u,h){return c=c|0,u=u|0,h=h|0,(h|0)<32?(ke(u>>>h|0),c>>>h|(u&(1<<h)-1)<<32-h):(ke(0),u>>>h-32|0)}function Ee(c,u,h){return c=c|0,u=u|0,h=h|0,(h|0)<32?(ke(u<<h|(c&(1<<h)-1<<32-h)>>>32-h|0),c<<h):(ke(c<<h-32|0),0)}function jT(c,u){return c=+c,u=+u,c!=c?+u:u!=u?+c:+$i(+c,+u)}function kd(c){return c=+c,c>=0?+mt(c+.5):+Qi(c-.5)}function Nd(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0,_=0;if((h|0)>=8192)return ei(c|0,u|0,h|0)|0,c|0;if(_=c|0,m=c+h|0,(c&3)==(u&3)){for(;c&3;){if(!h)return _|0;ze[c>>0]=ze[u>>0]|0,c=c+1|0,u=u+1|0,h=h-1|0}for(h=m&-4|0,p=h-64|0;(c|0)<=(p|0);)A[c>>2]=A[u>>2],A[c+4>>2]=A[u+4>>2],A[c+8>>2]=A[u+8>>2],A[c+12>>2]=A[u+12>>2],A[c+16>>2]=A[u+16>>2],A[c+20>>2]=A[u+20>>2],A[c+24>>2]=A[u+24>>2],A[c+28>>2]=A[u+28>>2],A[c+32>>2]=A[u+32>>2],A[c+36>>2]=A[u+36>>2],A[c+40>>2]=A[u+40>>2],A[c+44>>2]=A[u+44>>2],A[c+48>>2]=A[u+48>>2],A[c+52>>2]=A[u+52>>2],A[c+56>>2]=A[u+56>>2],A[c+60>>2]=A[u+60>>2],c=c+64|0,u=u+64|0;for(;(c|0)<(h|0);)A[c>>2]=A[u>>2],c=c+4|0,u=u+4|0}else for(h=m-4|0;(c|0)<(h|0);)ze[c>>0]=ze[u>>0]|0,ze[c+1>>0]=ze[u+1>>0]|0,ze[c+2>>0]=ze[u+2>>0]|0,ze[c+3>>0]=ze[u+3>>0]|0,c=c+4|0,u=u+4|0;for(;(c|0)<(m|0);)ze[c>>0]=ze[u>>0]|0,c=c+1|0,u=u+1|0;return _|0}function Ki(c,u,h){c=c|0,u=u|0,h=h|0;var p=0,m=0,_=0,v=0;if(_=c+h|0,u=u&255,(h|0)>=67){for(;c&3;)ze[c>>0]=u,c=c+1|0;for(p=_&-4|0,v=u|u<<8|u<<16|u<<24,m=p-64|0;(c|0)<=(m|0);)A[c>>2]=v,A[c+4>>2]=v,A[c+8>>2]=v,A[c+12>>2]=v,A[c+16>>2]=v,A[c+20>>2]=v,A[c+24>>2]=v,A[c+28>>2]=v,A[c+32>>2]=v,A[c+36>>2]=v,A[c+40>>2]=v,A[c+44>>2]=v,A[c+48>>2]=v,A[c+52>>2]=v,A[c+56>>2]=v,A[c+60>>2]=v,c=c+64|0;for(;(c|0)<(p|0);)A[c>>2]=v,c=c+4|0}for(;(c|0)<(_|0);)ze[c>>0]=u,c=c+1|0;return _-h|0}function HT(c){return c=+c,c>=0?+mt(c+.5):+Qi(c-.5)}function Vo(c){c=c|0;var u=0,h=0,p=0;return p=Yl()|0,h=A[At>>2]|0,u=h+c|0,(c|0)>0&(u|0)<(h|0)|(u|0)<0?(hA(u|0)|0,fA(12),-1):(u|0)>(p|0)&&!(ql(u|0)|0)?(fA(12),-1):(A[At>>2]=u,h|0)}return{___uremdi3:zo,_bitshift64Lshr:fe,_bitshift64Shl:Ee,_calloc:Ji,_cellAreaKm2:l8,_cellAreaM2:c8,_cellAreaRads2:a8,_compact:g8,_destroyLinkedPolygon:L8,_edgeLengthKm:i8,_edgeLengthM:s8,_emscripten_replace_memory:dA,_exactEdgeLengthKm:A8,_exactEdgeLengthM:f8,_exactEdgeLengthRads:u8,_experimentalH3ToLocalIj:R8,_experimentalLocalIjToH3:O8,_free:qe,_geoToH3:MT,_getDestinationH3IndexFromUnidirectionalEdge:x8,_getH3IndexesFromUnidirectionalEdge:P8,_getH3UnidirectionalEdge:T8,_getH3UnidirectionalEdgeBoundary:Od,_getH3UnidirectionalEdgesFromHexagon:M8,_getOriginH3IndexFromUnidirectionalEdge:S8,_getPentagonIndexes:by,_getRes0Indexes:zN,_h3Distance:D8,_h3GetBaseCell:CT,_h3GetFaces:IT,_h3GetResolution:h8,_h3IndexesAreNeighbors:BT,_h3IsPentagon:Mn,_h3IsResClassIII:v8,_h3IsValid:PT,_h3Line:k8,_h3LineSize:F8,_h3SetToLinkedGeo:_n,_h3ToCenterChild:p8,_h3ToChildren:Fr,_h3ToGeo:Qa,_h3ToGeoBoundary:$a,_h3ToParent:my,_h3UnidirectionalEdgeIsValid:C8,_hexAreaKm2:n8,_hexAreaM2:r8,_hexRing:D,_i64Subtract:bA,_kRing:ec,_kRingDistances:Id,_llvm_minnum_f64:jT,_llvm_round_f64:kd,_malloc:Ss,_maxFaceCount:w8,_maxH3ToChildrenSize:d8,_maxKringSize:Md,_maxPolyfillSize:j,_maxUncompactSize:y8,_memcpy:Nd,_memset:Ki,_numHexagons:o8,_pentagonIndexCount:E8,_pointDistKm:vA,_pointDistM:ZN,_pointDistRads:qN,_polyfill:Z,_res0IndexCount:GN,_round:HT,_sbrk:Vo,_sizeOfCoordIJ:Q8,_sizeOfGeoBoundary:V8,_sizeOfGeoCoord:z8,_sizeOfGeoPolygon:H8,_sizeOfGeofence:j8,_sizeOfH3Index:G8,_sizeOfLinkedGeoPolygon:W8,_uncompact:m8,establishStackSpace:uy,stackAlloc:pA,stackRestore:Xi,stackSave:Zl}}(Ed,Td,k);e.___uremdi3=ge.___uremdi3,e._bitshift64Lshr=ge._bitshift64Lshr,e._bitshift64Shl=ge._bitshift64Shl,e._calloc=ge._calloc,e._cellAreaKm2=ge._cellAreaKm2,e._cellAreaM2=ge._cellAreaM2,e._cellAreaRads2=ge._cellAreaRads2,e._compact=ge._compact,e._destroyLinkedPolygon=ge._destroyLinkedPolygon,e._edgeLengthKm=ge._edgeLengthKm,e._edgeLengthM=ge._edgeLengthM;var ly=e._emscripten_replace_memory=ge._emscripten_replace_memory;e._exactEdgeLengthKm=ge._exactEdgeLengthKm,e._exactEdgeLengthM=ge._exactEdgeLengthM,e._exactEdgeLengthRads=ge._exactEdgeLengthRads,e._experimentalH3ToLocalIj=ge._experimentalH3ToLocalIj,e._experimentalLocalIjToH3=ge._experimentalLocalIjToH3,e._free=ge._free,e._geoToH3=ge._geoToH3,e._getDestinationH3IndexFromUnidirectionalEdge=ge._getDestinationH3IndexFromUnidirectionalEdge,e._getH3IndexesFromUnidirectionalEdge=ge._getH3IndexesFromUnidirectionalEdge,e._getH3UnidirectionalEdge=ge._getH3UnidirectionalEdge,e._getH3UnidirectionalEdgeBoundary=ge._getH3UnidirectionalEdgeBoundary,e._getH3UnidirectionalEdgesFromHexagon=ge._getH3UnidirectionalEdgesFromHexagon,e._getOriginH3IndexFromUnidirectionalEdge=ge._getOriginH3IndexFromUnidirectionalEdge,e._getPentagonIndexes=ge._getPentagonIndexes,e._getRes0Indexes=ge._getRes0Indexes,e._h3Distance=ge._h3Distance,e._h3GetBaseCell=ge._h3GetBaseCell,e._h3GetFaces=ge._h3GetFaces,e._h3GetResolution=ge._h3GetResolution,e._h3IndexesAreNeighbors=ge._h3IndexesAreNeighbors,e._h3IsPentagon=ge._h3IsPentagon,e._h3IsResClassIII=ge._h3IsResClassIII,e._h3IsValid=ge._h3IsValid,e._h3Line=ge._h3Line,e._h3LineSize=ge._h3LineSize,e._h3SetToLinkedGeo=ge._h3SetToLinkedGeo,e._h3ToCenterChild=ge._h3ToCenterChild,e._h3ToChildren=ge._h3ToChildren,e._h3ToGeo=ge._h3ToGeo,e._h3ToGeoBoundary=ge._h3ToGeoBoundary,e._h3ToParent=ge._h3ToParent,e._h3UnidirectionalEdgeIsValid=ge._h3UnidirectionalEdgeIsValid,e._hexAreaKm2=ge._hexAreaKm2,e._hexAreaM2=ge._hexAreaM2,e._hexRing=ge._hexRing,e._i64Subtract=ge._i64Subtract,e._kRing=ge._kRing,e._kRingDistances=ge._kRingDistances,e._llvm_minnum_f64=ge._llvm_minnum_f64,e._llvm_round_f64=ge._llvm_round_f64,e._malloc=ge._malloc,e._maxFaceCount=ge._maxFaceCount,e._maxH3ToChildrenSize=ge._maxH3ToChildrenSize,e._maxKringSize=ge._maxKringSize,e._maxPolyfillSize=ge._maxPolyfillSize,e._maxUncompactSize=ge._maxUncompactSize,e._memcpy=ge._memcpy,e._memset=ge._memset,e._numHexagons=ge._numHexagons,e._pentagonIndexCount=ge._pentagonIndexCount,e._pointDistKm=ge._pointDistKm,e._pointDistM=ge._pointDistM,e._pointDistRads=ge._pointDistRads,e._polyfill=ge._polyfill,e._res0IndexCount=ge._res0IndexCount,e._round=ge._round,e._sbrk=ge._sbrk,e._sizeOfCoordIJ=ge._sizeOfCoordIJ,e._sizeOfGeoBoundary=ge._sizeOfGeoBoundary,e._sizeOfGeoCoord=ge._sizeOfGeoCoord,e._sizeOfGeoPolygon=ge._sizeOfGeoPolygon,e._sizeOfGeofence=ge._sizeOfGeofence,e._sizeOfH3Index=ge._sizeOfH3Index,e._sizeOfLinkedGeoPolygon=ge._sizeOfLinkedGeoPolygon,e._uncompact=ge._uncompact,e.establishStackSpace=ge.establishStackSpace;var Sd=e.stackAlloc=ge.stackAlloc,cy=e.stackRestore=ge.stackRestore,xd=e.stackSave=ge.stackSave;if(e.asm=ge,e.cwrap=I,e.setValue=b,e.getValue=E,e.getTempRet0=g,Ut){to(Ut)||(Ut=s(Ut));{bs();var uA=function(K){K.byteLength&&(K=new Uint8Array(K)),oe.set(K,y),e.memoryInitializerRequest&&delete e.memoryInitializerRequest.response,Wi()},Cd=function(){o(Ut,uA,function(){throw"could not load memory initializer "+Ut})},Pd=cA(Ut);if(Pd)uA(Pd.buffer);else if(e.memoryInitializerRequest){var Va=function(){var K=e.memoryInitializerRequest,se=K.response;if(K.status!==200&&K.status!==0){var me=cA(e.memoryInitializerRequestURL);if(me)se=me.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+K.status+", retrying "+Ut),Cd();return}}uA(se)};e.memoryInitializerRequest.response?setTimeout(Va,0):e.memoryInitializerRequest.addEventListener("load",Va)}else Cd()}}var Jl;qr=function K(){Jl||AA(),Jl||(qr=K)};function AA(K){if(vn>0||(Dt(),vn>0))return;function se(){Jl||(Jl=!0,!S&&(nn(),Nt(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),rn()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),se()},1)):se()}e.run=AA;function Es(K){throw e.onAbort&&e.onAbort(K),K+="",a(K),l(K),S=!0,"abort("+K+"). Build with -s ASSERTIONS=1 for more info."}if(e.abort=Es,e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return AA(),t}(typeof en=="object"?en:{}),Ue="number",UA=Ue,Qe=Ue,nt=Ue,Nr=Ue,pt=Ue,ZZ=[["sizeOfH3Index",Ue],["sizeOfGeoCoord",Ue],["sizeOfGeoBoundary",Ue],["sizeOfGeoPolygon",Ue],["sizeOfGeofence",Ue],["sizeOfLinkedGeoPolygon",Ue],["sizeOfCoordIJ",Ue],["h3IsValid",UA,[Qe,nt]],["geoToH3",Qe,[Ue,Ue,Nr]],["h3ToGeo",null,[Qe,nt,pt]],["h3ToGeoBoundary",null,[Qe,nt,pt]],["maxKringSize",Ue,[Ue]],["kRing",null,[Qe,nt,Ue,pt]],["kRingDistances",null,[Qe,nt,Ue,pt,pt]],["hexRing",null,[Qe,nt,Ue,pt]],["maxPolyfillSize",Ue,[pt,Nr]],["polyfill",null,[pt,Nr,pt]],["h3SetToLinkedGeo",null,[pt,Ue,pt]],["destroyLinkedPolygon",null,[pt]],["compact",Ue,[pt,pt,Ue]],["uncompact",Ue,[pt,Ue,pt,Ue,Nr]],["maxUncompactSize",Ue,[pt,Ue,Nr]],["h3IsPentagon",UA,[Qe,nt]],["h3IsResClassIII",UA,[Qe,nt]],["h3GetBaseCell",Ue,[Qe,nt]],["h3GetResolution",Ue,[Qe,nt]],["maxFaceCount",Ue,[Qe,nt]],["h3GetFaces",null,[Qe,nt,pt]],["h3ToParent",Qe,[Qe,nt,Nr]],["h3ToChildren",null,[Qe,nt,Nr,pt]],["h3ToCenterChild",Qe,[Qe,nt,Nr]],["maxH3ToChildrenSize",Ue,[Qe,nt,Nr]],["h3IndexesAreNeighbors",UA,[Qe,nt,Qe,nt]],["getH3UnidirectionalEdge",Qe,[Qe,nt,Qe,nt]],["getOriginH3IndexFromUnidirectionalEdge",Qe,[Qe,nt]],["getDestinationH3IndexFromUnidirectionalEdge",Qe,[Qe,nt]],["h3UnidirectionalEdgeIsValid",UA,[Qe,nt]],["getH3IndexesFromUnidirectionalEdge",null,[Qe,nt,pt]],["getH3UnidirectionalEdgesFromHexagon",null,[Qe,nt,pt]],["getH3UnidirectionalEdgeBoundary",null,[Qe,nt,pt]],["h3Distance",Ue,[Qe,nt,Qe,nt]],["h3Line",Ue,[Qe,nt,Qe,nt,pt]],["h3LineSize",Ue,[Qe,nt,Qe,nt]],["experimentalH3ToLocalIj",Ue,[Qe,nt,Qe,nt,pt]],["experimentalLocalIjToH3",Ue,[Qe,nt,pt,pt]],["hexAreaM2",Ue,[Nr]],["hexAreaKm2",Ue,[Nr]],["edgeLengthM",Ue,[Nr]],["edgeLengthKm",Ue,[Nr]],["pointDistM",Ue,[pt,pt]],["pointDistKm",Ue,[pt,pt]],["pointDistRads",Ue,[pt,pt]],["cellAreaM2",Ue,[Qe,nt]],["cellAreaKm2",Ue,[Qe,nt]],["cellAreaRads2",Ue,[Qe,nt]],["exactEdgeLengthM",Ue,[Qe,nt]],["exactEdgeLengthKm",Ue,[Qe,nt]],["exactEdgeLengthRads",Ue,[Qe,nt]],["numHexagons",Ue,[Nr]],["getRes0Indexes",null,[pt]],["res0IndexCount",Ue],["getPentagonIndexes",null,[Ue,pt]],["pentagonIndexCount",Ue]],Dn={};ZZ.forEach(function(e){Dn[e[0]]=en.cwrap.apply(en,e)});var Hc=16,eee=4,UP=4,Su=8,tee=Dn.sizeOfH3Index(),PD=Dn.sizeOfGeoCoord(),nee=Dn.sizeOfGeoBoundary();Dn.sizeOfGeoPolygon();Dn.sizeOfGeofence();var ree=Dn.sizeOfLinkedGeoPolygon();Dn.sizeOfCoordIJ();var GP={m:"m",m2:"m2",km:"km",km2:"km2",rads:"rads",rads2:"rads2"};function iee(t){if(typeof t!="number"||t<0||t>15||Math.floor(t)!==t)throw new Error("Invalid resolution: "+t)}var see=/[^0-9a-fA-F]/;function Cl(t){if(Array.isArray(t)&&t.length===2&&Number.isInteger(t[0])&&Number.isInteger(t[1]))return t;if(typeof t!="string"||see.test(t))return[0,0];var e=parseInt(t.substring(0,t.length-8),Hc),n=parseInt(t.substring(t.length-8),Hc);return[n,e]}function zP(t){if(t>=0)return t.toString(Hc);t=t&2147483647;var e=MD(8,t.toString(Hc)),n=(parseInt(e[0],Hc)+8).toString(Hc);return e=n+e.substring(1),e}function oee(t,e){return zP(e)+MD(8,zP(t))}function MD(t,e){for(var n=t-e.length,r="",i=0;i<n;i++)r+="0";return r=r+e,r}function aee(t){var e=en.getTempRet0();return[t,e]}function lee(t){var e=aee(t),n=e[0],r=e[1];return r?oee(n,r):null}function cee(t,e,n){en.HEAPU32.set(Cl(t),e/eee+2*n)}function uee(t,e){for(var n=e.length,r=0;r<n;r++)cee(e[r],t,r)}function xg(t){return bee(en.getValue(t,"double"))}function Qw(t){return[xg(t),xg(t+Su)]}function ID(t){return[xg(t+Su),xg(t)]}function Aee(t,e,n){for(var r=en.getValue(t,"i32"),i=t+Su,s=[],o=e?ID:Qw,a=0;a<r*2;a+=2)s.push(o(i+Su*a));return n&&s.push(s[0]),s}function fee(t,e){for(var n=[],r=e?ID:Qw,i,s,o,a;t;){for(n.push(i=[]),s=en.getValue(t,"i8*");s;){for(i.push(o=[]),a=en.getValue(s,"i8*");a;)o.push(r(a)),a=en.getValue(a+Su*2,"i8*");e&&o.push(o[0]),s=en.getValue(s+UP*2,"i8*")}t=en.getValue(t+UP*2,"i8*")}return n}function hee(t){var e=Cl(t),n=e[0],r=e[1];return Boolean(Dn.h3IsPentagon(n,r))}function dee(t){var e=Cl(t),n=e[0],r=e[1];return Dn.h3IsValid(n,r)?Dn.h3GetResolution(n,r):-1}function pee(t,e,n){var r=en._malloc(PD);en.HEAPF64.set([t,e].map(_ee),r/Su);var i=lee(Dn.geoToH3(r,n));return en._free(r),i}function $w(t){var e=en._malloc(PD),n=Cl(t),r=n[0],i=n[1];Dn.h3ToGeo(r,i,e);var s=Qw(e);return en._free(e),s}function gee(t,e){var n=en._malloc(nee),r=Cl(t),i=r[0],s=r[1];Dn.h3ToGeoBoundary(i,s,n);var o=Aee(n,e,e);return en._free(n),o}function mee(t,e){if(!t||!t.length)return[];var n=t.length,r=en._calloc(n,tee);uee(r,t);var i=en._calloc(ree),s=i;Dn.h3SetToLinkedGeo(r,n,i);var o=fee(i,e);return Dn.destroyLinkedPolygon(s),en._free(s),en._free(r),o}function yee(t,e){var n=Cl(t),r=n[0],i=n[1],s=Cl(e),o=s[0],a=s[1];return Dn.h3Distance(r,i,o,a)}function vee(t,e){switch(iee(t),e){case GP.m:return Dn.edgeLengthM(t);case GP.km:return Dn.edgeLengthKm(t);default:throw new Error("Unknown unit: "+e)}}function _ee(t){return t*Math.PI/180}function bee(t){return t*180/Math.PI}const wee={getHexagons:{type:"accessor",value:t=>t.hexagons}};class BD extends Xu{initializeState(){Ju._checkH3Lib()}updateState({props:e,changeFlags:n}){if(n.dataChanged||n.updateTriggersChanged&&n.updateTriggersChanged.getHexagons){const{data:r,getHexagons:i}=e,s=[],{iterable:o,objectInfo:a}=Oa(r);for(const l of o){a.index++;const f=i(l,a),d=mee(f,!0);for(const g of d)s.push(this.getSubLayerRow({polygon:g},l,a.index))}this.setState({polygons:s})}}indexToBounds(){return{data:this.state.polygons,getPolygon:e=>e.polygon}}}T(BD,"layerName","H3ClusterLayer");T(BD,"defaultProps",wee);const Eee=10;function LD(t,e){e=e===void 0?t[0][0]:e;for(const n of t){const r=n[0]-e;r>180?n[0]-=360:r<-180&&(n[0]+=360)}}function Tee(t,e,n){const[r,i]=$w(t),s=e.length;LD(e,i);const o=e[0]===e[s-1]?s-1:s;for(let a=0;a<o;a++)e[a][0]=Ta(i,e[a][0],n),e[a][1]=Ta(r,e[a][1],n)}function See(t,e,n){const r=t(e,n),[i,s]=$w(r);return[s,i]}function VP(t,e=1){const n=gee(t,!0);return e!==1?Tee(t,n,e):LD(n),n}function xee(t){const e=new Float64Array(t.length*2);let n=0;for(const r of t)e[n++]=r[0],e[n++]=r[1];return e}function Cee(t,e){let n;return t==null?n=e:typeof t=="object"?n={...t,coverage:e}:n={getHexagon:t,coverage:e},n}const Pee={...$u.defaultProps,highPrecision:"auto",coverage:{type:"number",min:0,max:1,value:1},centerHexagon:null,getHexagon:{type:"accessor",value:t=>t.hexagon},extruded:!0};class Ju extends Fo{constructor(...e){super(...e),T(this,"state",void 0)}initializeState(){Ju._checkH3Lib(),this.state={edgeLengthKM:0,resolution:-1}}shouldUpdateState({changeFlags:e}){return this._shouldUseHighPrecision()?e.propsOrDataChanged:e.somethingChanged}updateState({props:e,changeFlags:n}){if(e.highPrecision!==!0&&(n.dataChanged||n.updateTriggersChanged&&n.updateTriggersChanged.getHexagon)){const r=this._calculateH3DataProps();this.setState(r)}this._updateVertices(this.context.viewport)}_calculateH3DataProps(){let e=-1,n=!1,r=!1;const{iterable:i,objectInfo:s}=Oa(this.props.data);for(const o of i){s.index++;const a=this.props.getHexagon(o,s),l=dee(a);if(e<0){if(e=l,!this.props.highPrecision)break}else if(e!==l){r=!0;break}if(hee(a)){n=!0;break}}return{resolution:e,edgeLengthKM:e>=0?vee(e,"km"):0,hasMultipleRes:r,hasPentagon:n}}_shouldUseHighPrecision(){if(this.props.highPrecision==="auto"){const{resolution:e,hasPentagon:n,hasMultipleRes:r}=this.state,{viewport:i}=this.context;return Boolean(i==null?void 0:i.resolution)||r||n||e>=0&&e<=5}return this.props.highPrecision}_updateVertices(e){if(this._shouldUseHighPrecision())return;const{resolution:n,edgeLengthKM:r,centerHex:i}=this.state;if(n<0)return;const s=this.props.centerHexagon||pee(e.latitude,e.longitude,n);if(i===s)return;if(i){const y=yee(i,s);if(y>=0&&y*r<Eee)return}const{unitsPerMeter:o}=e.distanceScales;let a=VP(s);const[l,f]=$w(s),[d,g]=e.projectFlat([f,l]);a=a.map(y=>{const b=e.projectFlat(y);return[(b[0]-d)/o[0],(b[1]-g)/o[1]]}),this.setState({centerHex:s,vertices:a})}renderLayers(){return this._shouldUseHighPrecision()?this._renderPolygonLayer():this._renderColumnLayer()}_getForwardProps(){const{elevationScale:e,material:n,coverage:r,extruded:i,wireframe:s,stroked:o,filled:a,lineWidthUnits:l,lineWidthScale:f,lineWidthMinPixels:d,lineWidthMaxPixels:g,getFillColor:y,getElevation:b,getLineColor:E,getLineWidth:S,transitions:M,updateTriggers:C}=this.props;return{elevationScale:e,extruded:i,coverage:r,wireframe:s,stroked:o,filled:a,lineWidthUnits:l,lineWidthScale:f,lineWidthMinPixels:d,lineWidthMaxPixels:g,material:n,getElevation:b,getFillColor:y,getLineColor:E,getLineWidth:S,transitions:M,updateTriggers:{getFillColor:C.getFillColor,getElevation:C.getElevation,getLineColor:C.getLineColor,getLineWidth:C.getLineWidth}}}_renderPolygonLayer(){const{data:e,getHexagon:n,updateTriggers:r,coverage:i}=this.props,s=this.getSubLayerClass("hexagon-cell-hifi",$u),o=this._getForwardProps();return o.updateTriggers.getPolygon=Cee(r.getHexagon,i),new s(o,this.getSubLayerProps({id:"hexagon-cell-hifi",updateTriggers:o.updateTriggers}),{data:e,_normalize:!1,_windingOrder:"CCW",positionFormat:"XY",getPolygon:(a,l)=>{const f=n(a,l);return xee(VP(f,i))}})}_renderColumnLayer(){const{data:e,getHexagon:n,updateTriggers:r}=this.props,i=this.getSubLayerClass("hexagon-cell",Dw),s=this._getForwardProps();return s.updateTriggers.getPosition=r.getHexagon,new i(s,this.getSubLayerProps({id:"hexagon-cell",flatShading:!0,updateTriggers:s.updateTriggers}),{data:e,diskResolution:6,radius:1,vertices:this.state.vertices,getPosition:See.bind(null,n)})}}T(Ju,"defaultProps",Pee);T(Ju,"layerName","H3HexagonLayer");T(Ju,"_checkH3Lib",()=>{});const Fv=Math.PI/180,M0=new Float32Array(16),jP=new Float32Array(12);function HP(t,e,n){const r=e[0]*Fv,i=e[1]*Fv,s=e[2]*Fv,o=Math.sin(s),a=Math.sin(r),l=Math.sin(i),f=Math.cos(s),d=Math.cos(r),g=Math.cos(i),y=n[0],b=n[1],E=n[2];t[0]=y*g*d,t[1]=y*l*d,t[2]=y*-a,t[3]=b*(-l*f+g*a*o),t[4]=b*(g*f+l*a*o),t[5]=b*d*o,t[6]=E*(l*o+g*a*f),t[7]=E*(-g*o+l*a*f),t[8]=E*d*f}function WP(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}const RD={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(t,{startRow:e,endRow:n}){const{data:r,getOrientation:i,getScale:s,getTranslation:o,getTransformMatrix:a}=this.props,l=Array.isArray(a),f=l&&a.length===16,d=Array.isArray(s),g=Array.isArray(i),y=Array.isArray(o),b=f||!l&&Boolean(a(r[0]));b?t.constant=f:t.constant=g&&d&&y;const E=t.value;if(t.constant){let S;b?(M0.set(a),S=WP(M0)):(S=jP,HP(S,i,s),S.set(o,9)),t.value=new Float32Array(S)}else{let S=e*t.size;const{iterable:M,objectInfo:C}=Oa(r,e,n);for(const P of M){C.index++;let I;if(b)M0.set(f?a:a(P,C)),I=WP(M0);else{I=jP;const L=g?i:i(P,C),F=d?s:s(P,C);HP(I,L,F),I.set(y?o:o(P,C),9)}E[S++]=I[0],E[S++]=I[1],E[S++]=I[2],E[S++]=I[3],E[S++]=I[4],E[S++]=I[5],E[S++]=I[6],E[S++]=I[7],E[S++]=I[8],E[S++]=I[9],E[S++]=I[10],E[S++]=I[11]}}}};function OD(t,e){return e===Ze.CARTESIAN||e===Ze.METER_OFFSETS||e===Ze.DEFAULT&&!t.isGeospatial}const Mee=`#version 300 es
#define SHADER_NAME simple-mesh-layer-vs

// Scale the model
uniform float sizeScale;
uniform bool composeModelMatrix;

// Primitive attributes
in vec3 positions;
in vec3 normals;
in vec3 colors;
in vec2 texCoords;

// Instance attributes
in vec3 instancePositions;
in vec3 instancePositions64Low;
in vec4 instanceColors;
in vec3 instancePickingColors;
in mat3 instanceModelMatrix;
in vec3 instanceTranslation;

// Outputs to fragment shader
out vec2 vTexCoord;
out vec3 cameraPosition;
out vec3 normals_commonspace;
out vec4 position_commonspace;
out vec4 vColor;

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = texCoords;
  geometry.pickingColor = instancePickingColors;

  vTexCoord = texCoords;
  cameraPosition = project_uCameraPosition;
  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);

  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;

  if (composeModelMatrix) {
    DECKGL_FILTER_SIZE(pos, geometry);
    // using instancePositions as world coordinates
    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth
    // call project_normal before setting position to avoid rotation
    normals_commonspace = project_normal(instanceModelMatrix * normals);
    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);
    geometry.position = position_commonspace;
  }
  else {
    pos = project_size(pos);
    DECKGL_FILTER_SIZE(pos, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);
    geometry.position = position_commonspace;
    normals_commonspace = project_normal(instanceModelMatrix * normals);
  }

  geometry.normal = normals_commonspace;
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Iee=`#version 300 es
#define SHADER_NAME simple-mesh-layer-fs

precision highp float;

uniform bool hasTexture;
uniform sampler2D sampler;
uniform bool flatShading;
uniform float opacity;

in vec2 vTexCoord;
in vec3 cameraPosition;
in vec3 normals_commonspace;
in vec4 position_commonspace;
in vec4 vColor;

out vec4 fragColor;

void main(void) {
  geometry.uv = vTexCoord;

  vec3 normal;
  if (flatShading) {

// NOTE(Tarek): This is necessary because
// headless.gl reports the extension as
// available but does not support it in
// the shader.
#ifdef DERIVATIVES_AVAILABLE
    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));
#else
    normal = vec3(0.0, 0.0, 1.0);
#endif
  } else {
    normal = normals_commonspace;
  }

  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;
  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);
  fragColor = vec4(lightColor, color.a * opacity);

  DECKGL_FILTER_COLOR(fragColor, geometry);
}
`;function QP(t,e){(t.COLOR_0||t.colors)&&e||(t.colors={constant:!0,value:new Float32Array([1,1,1])}),je.assert(t.positions||t.POSITION,'no "postions" or "POSITION" attribute in mesh')}function Bee(t,e){if(t.attributes)return QP(t.attributes,e),t instanceof Di?t:new Di(t);if(t.positions||t.POSITION)return QP(t,e),new Di({attributes:t});throw Error("Invalid mesh")}const Lee=[0,0,0,255],Ree={mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:Lee},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}};class uh extends Kr{constructor(...e){super(...e),T(this,"state",void 0)}getShaders(){const e=!it(this.context.gl),n={};return bm(this.context.gl,kt.GLSL_DERIVATIVES)&&(n.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:Mee,fs:Iee,modules:[Ys,aO,qs],transpileToGLSL100:e,defines:n})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:RD}),this.setState({emptyTexture:new br(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(e){super.updateState(e);const{props:n,oldProps:r,changeFlags:i}=e;if(n.mesh!==r.mesh||i.extensionsChanged){var s;if((s=this.state.model)===null||s===void 0||s.delete(),n.mesh){this.state.model=this.getModel(n.mesh);const o=n.mesh.attributes||n.mesh;this.setState({hasNormals:Boolean(o.NORMAL||o.normals)})}this.getAttributeManager().invalidateAll()}n.texture!==r.texture&&this.setTexture(n.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(e){super.finalizeState(e),this.state.emptyTexture.delete()}draw({uniforms:e}){if(!this.state.model)return;const{viewport:n}=this.context,{sizeScale:r,coordinateSystem:i,_instanced:s}=this.props;this.state.model.setUniforms(e).setUniforms({sizeScale:r,composeModelMatrix:!s||OD(n,i),flatShading:!this.state.hasNormals}).draw()}getModel(e){const n=new Xr(this.context.gl,{...this.getShaders(),id:this.props.id,geometry:Bee(e,this.props._useMeshColors),isInstanced:!0}),{texture:r}=this.props,{emptyTexture:i}=this.state;return n.setUniforms({sampler:r||i,hasTexture:Boolean(r)}),n}setTexture(e){const{emptyTexture:n,model:r}=this.state;r&&r.setUniforms({sampler:e||n,hasTexture:Boolean(e)})}}T(uh,"defaultProps",Ree);T(uh,"layerName","SimpleMeshLayer");class iu{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:n}=e;this.id=n||$s(this.constructor.name),this.display=!0,this.position=new q,this.rotation=new q,this.scale=new q(1,1,1),this.matrix=new $e,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}setPosition(e){return _e(e.length===3,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return _e(e.length===3,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return _e(e.length===3,"setScale requires vector argument"),this.scale=e,this}setMatrix(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?this.matrix.copy(e):this.matrix=e}setMatrixComponents(e){let{position:n,rotation:r,scale:i,update:s=!0}=e;return n&&this.setPosition(n),r&&this.setRotation(r),i&&this.setScale(i),s&&this.updateMatrix(),this}updateMatrix(){const e=this.position,n=this.rotation,r=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(n),this.matrix.scale(r),this}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{position:n,rotation:r,scale:i}=e;return n&&this.setPosition(n),r&&this.setRotation(r),i&&this.setScale(i),this.updateMatrix(),this}getCoordinateUniforms(e,n){_e(e),n=n||this.matrix;const r=new $e(e).multiplyRight(n),i=r.invert(),s=i.transpose();return{viewMatrix:e,modelMatrix:n,objectMatrix:n,worldMatrix:r,worldInverseMatrix:i,worldInverseTransposeMatrix:s}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class Tf extends iu{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e=Array.isArray(e)?{children:e}:e;const{children:n=[]}=e;Ie.assert(n.every(r=>r instanceof iu),"every child must an instance of ScenegraphNode"),super(e),this.children=n}add(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(const i of n)Array.isArray(i)?this.add(...i):this.children.push(i);return this}remove(e){const n=this.children,r=n.indexOf(e);return r>-1&&n.splice(r,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}traverse(e){let{worldMatrix:n=new $e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=new $e(n).multiplyRight(this.matrix);for(const i of this.children)i instanceof Tf?i.traverse(e,{worldMatrix:r}):e(i,{worldMatrix:r})}}const Oee={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Dee={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function $P(t){if(!t._animation){const e=Dee[t.componentType],n=Oee[t.type],r=n*t.count,{buffer:i,byteOffset:s}=t.bufferView.data,o=new e(i,s+(t.byteOffset||0),r);if(n===1)t._animation=Array.from(o);else{const a=[];for(let l=0;l<o.length;l+=n)a.push(Array.from(o.slice(l,l+n)));t._animation=a}}return t._animation}const Fee=new $e;function kee(t,e){if(e.matrix.identity(),t.translation&&e.matrix.translate(t.translation),t.rotation){const n=Fee.fromQuaternion(t.rotation);e.matrix.multiplyRight(n)}t.scale&&e.matrix.scale(t.scale)}const kv=new qf;function Nee(t,e,n,r,i){if(e==="rotation"){kv.slerp({start:n,target:r,ratio:i});for(let s=0;s<kv.length;s++)t[e][s]=kv[s]}else for(let s=0;s<n.length;s++)t[e][s]=i*r[s]+(1-i)*n[s]}function Uee(t,e,n){let{p0:r,outTangent0:i,inTangent1:s,p1:o,tDiff:a,ratio:l}=n;for(let f=0;f<t[e].length;f++){const d=i[f]*a,g=s[f]*a;t[e][f]=(2*Math.pow(l,3)-3*Math.pow(l,2)+1)*r[f]+(Math.pow(l,3)-2*Math.pow(l,2)+l)*d+(-2*Math.pow(l,3)+3*Math.pow(l,2))*o[f]+(Math.pow(l,3)-Math.pow(l,2))*g}}function Gee(t,e,n){for(let r=0;r<n.length;r++)t[e][r]=n[r]}function zee(t,e,n,r){let{input:i,interpolation:s,output:o}=e;const a=i[i.length-1],l=t%a,f=i.findIndex(b=>b>=l),d=Math.max(0,f-1);if(!Array.isArray(n[r]))switch(r){case"translation":n[r]=[0,0,0];break;case"rotation":n[r]=[0,0,0,1];break;case"scale":n[r]=[1,1,1];break;default:Ie.warn("Bad animation path ".concat(r))()}_e(n[r].length===o[d].length);const g=i[d],y=i[f];switch(s){case"STEP":Gee(n,r,o[d]);break;case"LINEAR":if(y>g){const b=(l-g)/(y-g);Nee(n,r,o[d],o[f],b)}break;case"CUBICSPLINE":if(y>g){const b=(l-g)/(y-g),E=y-g,S=o[3*d+1],M=o[3*d+2],C=o[3*f+0],P=o[3*f+1];Uee(n,r,{p0:S,outTangent0:M,inTangent1:C,p1:P,tDiff:E,ratio:b})}break;default:Ie.warn("Interpolation ".concat(s," not supported"))();break}}class Vee{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const r=(e/1e3-this.startTime)*this.speed;this.channels.forEach(i=>{let{sampler:s,target:o,path:a}=i;zee(r,s,o,a),kee(o,o._node)})}}class jee{constructor(e){this.animations=e.animations.map((n,r)=>{const i=n.name||"Animation-".concat(r),s=n.samplers.map(a=>{let{input:l,interpolation:f="LINEAR",output:d}=a;return{input:$P(e.accessors[l]),interpolation:f,output:$P(e.accessors[d])}}),o=n.channels.map(a=>{let{sampler:l,target:f}=a;return{sampler:s[l],target:e.nodes[f.node],path:f.path}});return new Vee({name:i,channels:o})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(n=>n.animate(e))}getAnimations(){return this.animations}}class Hee extends iu{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(n),this.onBeforeRender=null,this.AfterRender=null,e instanceof Xr?(this.model=e,this._setModelNodeProps(n)):this.model=new Xr(e,n),this.managedResources=n.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(e){this.model.setProps(e)}}class DD{constructor(e,n){let{attributes:r,material:i,pbrDebug:s,imageBasedLightingEnvironment:o,lights:a,useTangents:l}=n;this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},bm(e,kt.GLSL_TEXTURE_LOD)&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],o&&(this.uniforms.u_DiffuseEnvSampler=o.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=o.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=o.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),s&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(r.NORMAL,"HAS_NORMALS"),this.defineIfPresent(r.TANGENT&&l,"HAS_TANGENTS"),this.defineIfPresent(r.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(o,"USE_IBL"),this.defineIfPresent(a,"USE_LIGHTS"),this.defineIfPresent(s,"PBR_DEBUG"),i&&this.parseMaterial(i)}defineIfPresent(e,n){e&&(this.defines[n]=1)}parseTexture(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;const i=e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},s=e.texture.source.image;let o,a={};s.compressed?(o=s,a={[this.gl.TEXTURE_MIN_FILTER]:s.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):o={data:s};const l=new br(this.gl,{id:e.name||e.id,parameters:{...i,...a},pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1},...o});this.uniforms[n]=l,this.defineIfPresent(r,r),this.generatedTextures.push(l)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:n=1,roughnessFactor:r=1}=e;this.uniforms.u_MetallicRoughnessValues=[n,r]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=Boolean(e.unlit),e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:n=1}=e.normalTexture;this.uniforms.u_NormalScale=n}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:n=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=n}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),e.alphaMode==="MASK"){const{alphaCutoff:n=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=n}else e.alphaMode==="BLEND"&&(Ie.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach(e=>e.delete())}}const Wee=`
#if (__VERSION__ < 300)
  #define _attr attribute
#else
  #define _attr in
#endif

  _attr vec4 POSITION;

  #ifdef HAS_NORMALS
    _attr vec4 NORMAL;
  #endif

  #ifdef HAS_TANGENTS
    _attr vec4 TANGENT;
  #endif

  #ifdef HAS_UV
    _attr vec2 TEXCOORD_0;
  #endif

  void main(void) {
    vec4 _NORMAL = vec4(0.);
    vec4 _TANGENT = vec4(0.);
    vec2 _TEXCOORD_0 = vec2(0.);

    #ifdef HAS_NORMALS
      _NORMAL = NORMAL;
    #endif

    #ifdef HAS_TANGENTS
      _TANGENT = TANGENT;
    #endif

    #ifdef HAS_UV
      _TEXCOORD_0 = TEXCOORD_0;
    #endif

    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);
    gl_Position = u_MVPMatrix * POSITION;
  }
`,Qee=`
#if (__VERSION__ < 300)
  #define fragmentColor gl_FragColor
#else
  out vec4 fragmentColor;
#endif

  void main(void) {
    fragmentColor = pbr_filterColor(vec4(0));
  }
`;function XP(t,e){return it(t)?`#version 300 es
`.concat(e):e}function $ee(t,e){const{id:n,drawMode:r,vertexCount:i,attributes:s,modelOptions:o}=e,a=new DD(t,e);Ie.info(4,"createGLTFModel defines: ",a.defines)();const l=[];l.push(...a.generatedTextures),l.push(...Object.values(s).map(d=>d.buffer));const f=new Hee(t,Object.assign({id:n,drawMode:r,vertexCount:i,modules:[mw],defines:a.defines,parameters:a.parameters,vs:XP(t,Wee),fs:XP(t,Qee),managedResources:l},o));return f.setProps({attributes:s}),f.setUniforms(a.uniforms),f}const Xee={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Jee={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class Kee{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.options=Object.assign({},Jee,n)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(r=>this.createScene(r))}createAnimator(){return Array.isArray(this.gltf.animations)?new jee(this.gltf):null}createScene(e){const r=(e.nodes||[]).map(s=>this.createNode(s));return new Tf({id:e.name||e.id,children:r})}createNode(e){if(!e._node){const r=(e.children||[]).map(s=>this.createNode(s));e.mesh&&r.push(this.createMesh(e.mesh));const i=new Tf({id:e.name||e.id,children:r});if(e.matrix)i.setMatrix(e.matrix);else{if(i.matrix.identity(),e.translation&&i.matrix.translate(e.translation),e.rotation){const s=new $e().fromQuaternion(e.rotation);i.matrix.multiplyRight(s)}e.scale&&i.matrix.scale(e.scale)}e._node=i}return e._node}createMesh(e){if(!e._mesh){const r=(e.primitives||[]).map((s,o)=>this.createPrimitive(s,o,e)),i=new Tf({id:e.name||e.id,children:r});e._mesh=i}return e._mesh}getVertexCount(e){Ie.warn("getVertexCount() not found")()}createPrimitive(e,n,r){return $ee(this.gl,Object.assign({id:e.name||"".concat(r.name||r.id,"-primitive-").concat(n),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options))}createAttributes(e,n){const r={};return Object.keys(e).forEach(i=>{r[i]=this.createAccessor(e[i],this.createBuffer(e[i],this.gl.ARRAY_BUFFER))}),n&&(r.indices=this.createAccessor(n,this.createBuffer(n,this.gl.ELEMENT_ARRAY_BUFFER))),Ie.info(4,"glTF Attributes",{attributes:e,indices:n,generated:r})(),r}createBuffer(e,n){e.bufferView||(e.bufferView={});const{bufferView:r}=e;return r.lumaBuffers||(r.lumaBuffers={}),r.lumaBuffers[n]||(r.lumaBuffers[n]=new Rt(this.gl,{id:"from-".concat(r.id),data:r.data||e.value,target:n})),r.lumaBuffers[n]}createAccessor(e,n){return new Vr({buffer:n,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:Xee[e.type]})}createSampler(e){return e}needsPOT(){return!1}}function Yee(t,e,n){const r=new Kee(t,n),i=r.instantiate(e),s=r.createAnimator();return{scenes:i,animator:s}}const qee="3.2.6",Zee="3.2.6",FD="3.2.6",ete="https://unpkg.com/@loaders.gl/textures@".concat(FD,"/dist/libs/basis_encoder.wasm"),tte="https://unpkg.com/@loaders.gl/textures@".concat(FD,"/dist/libs/basis_encoder.js");let Nv;async function JP(t){const e=t.modules||{};return e.basis?e.basis:(Nv=Nv||nte(t),await Nv)}async function nte(t){let e=null,n=null;return[e,n]=await Promise.all([await fl("basis_transcoder.js","textures",t),await fl("basis_transcoder.wasm","textures",t)]),e=e||globalThis.BASIS,await rte(e,n)}function rte(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(r=>{t(n).then(i=>{const{BasisFile:s,initializeBasis:o}=i;o(),r({BasisFile:s})})})}let Uv;async function KP(t){const e=t.modules||{};return e.basisEncoder?e.basisEncoder:(Uv=Uv||ite(t),await Uv)}async function ite(t){let e=null,n=null;return[e,n]=await Promise.all([await fl(tte,"textures",t),await fl(ete,"textures",t)]),e=e||globalThis.BASIS,await ste(e,n)}function ste(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(r=>{t(n).then(i=>{const{BasisFile:s,KTX2File:o,initializeBasis:a,BasisEncoder:l}=i;a(),r({BasisFile:s,KTX2File:o,BasisEncoder:l})})})}const Ac={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35987,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,COMPRESSED_RGBA_ASTC_4X4_KHR:37808,COMPRESSED_RGBA_ASTC_5X4_KHR:37809,COMPRESSED_RGBA_ASTC_5X5_KHR:37810,COMPRESSED_RGBA_ASTC_6X5_KHR:37811,COMPRESSED_RGBA_ASTC_6X6_KHR:37812,COMPRESSED_RGBA_ASTC_8X5_KHR:37813,COMPRESSED_RGBA_ASTC_8X6_KHR:37814,COMPRESSED_RGBA_ASTC_8X8_KHR:37815,COMPRESSED_RGBA_ASTC_10X5_KHR:37816,COMPRESSED_RGBA_ASTC_10X6_KHR:37817,COMPRESSED_RGBA_ASTC_10X8_KHR:37818,COMPRESSED_RGBA_ASTC_10X10_KHR:37819,COMPRESSED_RGBA_ASTC_12X10_KHR:37820,COMPRESSED_RGBA_ASTC_12X12_KHR:37821,COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR:37847,COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR:37853,COMPRESSED_RED_RGTC1_EXT:36283,COMPRESSED_SIGNED_RED_RGTC1_EXT:36284,COMPRESSED_RED_GREEN_RGTC2_EXT:36285,COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT:36286,COMPRESSED_SRGB_S3TC_DXT1_EXT:35916,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:35919},ote=["","WEBKIT_","MOZ_"],YP={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let I0=null;function ate(t){if(!I0){t=t||lte()||void 0,I0=new Set;for(const e of ote)for(const n in YP)if(t&&t.getExtension("".concat(e).concat(n))){const r=YP[n];I0.add(r)}}return I0}function lte(){try{return document.createElement("canvas").getContext("webgl")}catch{return null}}var qP,ZP,e3,t3,n3,r3,i3,s3;(function(t){t[t.NONE=0]="NONE",t[t.BASISLZ=1]="BASISLZ",t[t.ZSTD=2]="ZSTD",t[t.ZLIB=3]="ZLIB"})(qP||(qP={})),function(t){t[t.BASICFORMAT=0]="BASICFORMAT"}(ZP||(ZP={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ETC1S=163]="ETC1S",t[t.UASTC=166]="UASTC"}(e3||(e3={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SRGB=1]="SRGB"}(t3||(t3={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.LINEAR=1]="LINEAR",t[t.SRGB=2]="SRGB",t[t.ITU=3]="ITU",t[t.NTSC=4]="NTSC",t[t.SLOG=5]="SLOG",t[t.SLOG2=6]="SLOG2"}(n3||(n3={})),function(t){t[t.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",t[t.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(r3||(r3={})),function(t){t[t.RGB=0]="RGB",t[t.RRR=3]="RRR",t[t.GGG=4]="GGG",t[t.AAA=15]="AAA"}(i3||(i3={})),function(t){t[t.RGB=0]="RGB",t[t.RGBA=3]="RGBA",t[t.RRR=4]="RRR",t[t.RRRG=5]="RRRG"}(s3||(s3={}));const ii=[171,75,84,88,32,50,48,187,13,10,26,10];function cte(t){const e=new Uint8Array(t);return!(e.byteLength<ii.length||e[0]!==ii[0]||e[1]!==ii[1]||e[2]!==ii[2]||e[3]!==ii[3]||e[4]!==ii[4]||e[5]!==ii[5]||e[6]!==ii[6]||e[7]!==ii[7]||e[8]!==ii[8]||e[9]!==ii[9]||e[10]!==ii[10]||e[11]!==ii[11])}const ute={etc1:{basisFormat:0,compressed:!0,format:Ac.COMPRESSED_RGB_ETC1_WEBGL},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:Ac.COMPRESSED_RGB_S3TC_DXT1_EXT},bc3:{basisFormat:3,compressed:!0,format:Ac.COMPRESSED_RGBA_S3TC_DXT5_EXT},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:Ac.COMPRESSED_RGB_PVRTC_4BPPV1_IMG},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:Ac.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG},"astc-4x4":{basisFormat:10,compressed:!0,format:Ac.COMPRESSED_RGBA_ASTC_4X4_KHR},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};async function Ate(t,e){if(e.basis.containerFormat==="auto"){if(cte(t)){const r=await KP(e);return o3(r.KTX2File,t,e)}const{BasisFile:n}=await JP(e);return Gv(n,t,e)}switch(e.basis.module){case"encoder":const n=await KP(e);switch(e.basis.containerFormat){case"ktx2":return o3(n.KTX2File,t,e);case"basis":default:return Gv(n.BasisFile,t,e)}case"transcoder":default:const{BasisFile:r}=await JP(e);return Gv(r,t,e)}}function Gv(t,e,n){const r=new t(new Uint8Array(e));try{if(!r.startTranscoding())throw new Error("Failed to start basis transcoding");const i=r.getNumImages(),s=[];for(let o=0;o<i;o++){const a=r.getNumLevels(o),l=[];for(let f=0;f<a;f++)l.push(fte(r,o,f,n));s.push(l)}return s}finally{r.close(),r.delete()}}function fte(t,e,n,r){const i=t.getImageWidth(e,n),s=t.getImageHeight(e,n),o=t.getHasAlpha(),{compressed:a,format:l,basisFormat:f}=kD(r,o),d=t.getImageTranscodedSizeInBytes(e,n,f),g=new Uint8Array(d);if(!t.transcodeImage(g,e,n,f,0,0))throw new Error("failed to start Basis transcoding");return{width:i,height:s,data:g,compressed:a,format:l,hasAlpha:o}}function o3(t,e,n){const r=new t(new Uint8Array(e));try{if(!r.startTranscoding())throw new Error("failed to start KTX2 transcoding");const i=r.getLevels(),s=[];for(let o=0;o<i;o++){s.push(hte(r,o,n));break}return[s]}finally{r.close(),r.delete()}}function hte(t,e,n){const{alphaFlag:r,height:i,width:s}=t.getImageLevelInfo(e,0,0),{compressed:o,format:a,basisFormat:l}=kD(n,r),f=t.getImageTranscodedSizeInBytes(e,0,0,l),d=new Uint8Array(f);if(!t.transcodeImage(d,e,0,0,l,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:s,height:i,data:d,compressed:o,hasAlpha:r,format:a}}function kD(t,e){let n=t&&t.basis&&t.basis.format;return n==="auto"&&(n=ND()),typeof n=="object"&&(n=e?n.alpha:n.noAlpha),n=n.toLowerCase(),ute[n]}function ND(){const t=ate();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}const dte={name:"Basis",id:"basis",module:"textures",version:Zee,worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}},pte={...dte,parse:Ate};function Ai(t,e){if(!t)throw new Error(e||"assert failed: gltf")}function UD(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;const r=e.baseUri||e.uri;if(!r)throw new Error("'baseUri' must be provided to resolve relative url ".concat(t));return r.substr(0,r.lastIndexOf("/")+1)+t}function gte(t,e,n){const r=t.bufferViews[n];Ai(r);const i=r.buffer,s=e[i];Ai(s);const o=(r.byteOffset||0)+s.byteOffset;return new Uint8Array(s.arrayBuffer,o,r.byteLength)}const a3=["SCALAR","VEC2","VEC3","VEC4"],mte=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],yte=new Map(mte),vte={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},_te={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},bte={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function GD(t){return a3[t-1]||a3[0]}function zD(t){const e=yte.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function VD(t,e){const n=bte[t.componentType],r=vte[t.type],i=_te[t.componentType],s=t.count*r,o=t.count*r*i;return Ai(o>=0&&o<=e.byteLength),{ArrayType:n,length:s,byteLength:o}}const wte={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class zi{constructor(e){T(this,"gltf",void 0),T(this,"sourceBuffers",void 0),T(this,"byteLength",void 0),this.gltf=e||{json:{...wte},buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){const n=this.getUsedExtensions().find(i=>i===e),r=this.json.extensions||{};return n?r[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(r=>r===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getObjectExtension(e,n){return(e.extensions||{})[n]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,n){if(typeof n=="object")return n;const r=this.json[e]&&this.json[e][n];if(!r)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(n,"]"));return r}getTypedArrayForBufferView(e){e=this.getBufferView(e);const n=e.buffer,r=this.gltf.buffers[n];Ai(r);const i=(e.byteOffset||0)+r.byteOffset;return new Uint8Array(r.arrayBuffer,i,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const n=this.getBufferView(e.bufferView),i=this.getBuffer(n.buffer).data,{ArrayType:s,length:o}=VD(e,n),a=n.byteOffset+e.byteOffset;return new s(i,a,o)}getTypedArrayForImageData(e){e=this.getAccessor(e);const n=this.getBufferView(e.bufferView),i=this.getBuffer(n.buffer).data,s=n.byteOffset||0;return new Uint8Array(i,s,n.byteLength)}addApplicationData(e,n){return this.json[e]=n,this}addExtraData(e,n){return this.json.extras=this.json.extras||{},this.json.extras[e]=n,this}addObjectExtension(e,n,r){return e.extensions=e.extensions||{},e.extensions[n]=r,this.registerUsedExtension(n),this}setObjectExtension(e,n,r){const i=e.extensions||{};i[n]=r}removeObjectExtension(e,n){const r=e.extensions||{},i=r[n];return delete r[n],i}addExtension(e,n={}){return Ai(n),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=n,this.registerUsedExtension(e),n}addRequiredExtension(e,n={}){return Ai(n),this.addExtension(e,n),this.registerRequiredExtension(e),n}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(n=>n===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(n=>n===e)||this.json.extensionsRequired.push(e)}removeExtension(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:n}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:n}),this.json.scenes.length-1}addNode(e){const{meshIndex:n,matrix:r}=e;this.json.nodes=this.json.nodes||[];const i={mesh:n};return r&&(i.matrix=r),this.json.nodes.push(i),this.json.nodes.length-1}addMesh(e){const{attributes:n,indices:r,material:i,mode:s=4}=e,a={primitives:[{attributes:this._addAttributes(n),mode:s}]};if(r){const l=this._addIndices(r);a.primitives[0].indices=l}return Number.isFinite(i)&&(a.primitives[0].material=i),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}addPointCloud(e){const r={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(r),this.json.meshes.length-1}addImage(e,n){const r=Xb(e),i=n||(r==null?void 0:r.mimeType),o={bufferView:this.addBufferView(e),mimeType:i};return this.json.images=this.json.images||[],this.json.images.push(o),this.json.images.length-1}addBufferView(e){const n=e.byteLength;Ai(Number.isFinite(n)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const r={buffer:0,byteOffset:this.byteLength,byteLength:n};return this.byteLength+=Rh(n,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(r),this.json.bufferViews.length-1}addAccessor(e,n){const r={bufferView:e,type:GD(n.size),componentType:n.componentType,count:n.count,max:n.max,min:n.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(r),this.json.accessors.length-1}addBinaryBuffer(e,n={size:3}){const r=this.addBufferView(e);let i={min:n.min,max:n.max};(!i.min||!i.max)&&(i=this._getAccessorMinMax(e,n.size));const s={size:n.size,componentType:zD(e),count:Math.round(e.length/n.size),min:i.min,max:i.max};return this.addAccessor(r,Object.assign(s,n))}addTexture(e){const{imageIndex:n}=e,r={source:n};return this.json.textures=this.json.textures||[],this.json.textures.push(r),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,n;this.gltf.buffers=[];const r=this.byteLength,i=new ArrayBuffer(r),s=new Uint8Array(i);let o=0;for(const a of this.sourceBuffers||[])o=CG(a,s,o);(e=this.json)!==null&&e!==void 0&&(n=e.buffers)!==null&&n!==void 0&&n[0]?this.json.buffers[0].byteLength=r:this.json.buffers=[{byteLength:r}],this.gltf.binary=i,this.sourceBuffers=[i]}_removeStringFromArray(e,n){let r=!0;for(;r;){const i=e.indexOf(n);i>-1?e.splice(i,1):r=!1}}_addAttributes(e={}){const n={};for(const r in e){const i=e[r],s=this._getGltfAttributeName(r),o=this.addBinaryBuffer(i.value,i);n[s]=o}return n}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,n){const r={min:null,max:null};if(e.length<n)return r;r.min=[],r.max=[];const i=e.subarray(0,n);for(const s of i)r.min.push(s),r.max.push(s);for(let s=n;s<e.length;s+=n)for(let o=0;o<n;o++)r.min[0+o]=Math.min(r.min[0+o],e[s+o]),r.max[0+o]=Math.max(r.max[0+o],e[s+o]);return r}}const Ete="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",Tte="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",Ste=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),xte=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),Cte={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Pte={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};async function Mte(t,e,n,r,i,s="NONE"){const o=await Ite();Rte(o,o.exports[Pte[i]],t,e,n,r,o.exports[Cte[s||"NONE"]])}let zv;async function Ite(){return zv||(zv=Bte()),zv}async function Bte(){let t=Ete;WebAssembly.validate(Ste)&&(t=Tte,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const e=await WebAssembly.instantiate(Lte(t),{});return await e.instance.exports.__wasm_call_ctors(),e.instance}function Lte(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;++r){const i=t.charCodeAt(r);e[r]=i>96?i-71:i>64?i-65:i>47?i+4:i>46?63:62}let n=0;for(let r=0;r<t.length;++r)e[n++]=e[r]<60?xte[e[r]]:(e[r]-60)*64+e[++r];return e.buffer.slice(0,n)}function Rte(t,e,n,r,i,s,o){const a=t.exports.sbrk,l=r+3&-4,f=a(l*i),d=a(s.length),g=new Uint8Array(t.exports.memory.buffer);g.set(s,d);const y=e(f,r,i,d,s.length);if(y===0&&o&&o(f,l,i),n.set(g.subarray(f,f+r*i)),a(f-a(0)),y!==0)throw new Error("Malformed buffer data: ".concat(y))}const Xw="EXT_meshopt_compression",Ote=Xw;async function Dte(t,e){var n;const r=new zi(t);if(!(e!=null&&(n=e.gltf)!==null&&n!==void 0&&n.decompressMeshes))return;const i=[];for(const s of t.json.bufferViews||[])i.push(Fte(r,s));await Promise.all(i),r.removeExtension(Xw)}async function Fte(t,e){const n=t.getObjectExtension(e,Xw);if(n){const{byteOffset:r=0,byteLength:i=0,byteStride:s,count:o,mode:a,filter:l="NONE",buffer:f}=n,d=t.gltf.buffers[f],g=new Uint8Array(d.arrayBuffer,d.byteOffset+r,i),y=new Uint8Array(t.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);return await Mte(y,o,s,g,a,l),y}return null}const kte=Object.freeze(Object.defineProperty({__proto__:null,name:Ote,decode:Dte},Symbol.toStringTag,{value:"Module"})),Ec="EXT_texture_webp",Nte=Ec;function Ute(t,e){const n=new zi(t);if(!yV("image/webp")){if(n.getRequiredExtensions().includes(Ec))throw new Error("gltf: Required extension ".concat(Ec," not supported by browser"));return}const{json:r}=n;for(const i of r.textures||[]){const s=n.getObjectExtension(i,Ec);s&&(i.source=s.source),n.removeObjectExtension(i,Ec)}n.removeExtension(Ec)}const Gte=Object.freeze(Object.defineProperty({__proto__:null,name:Nte,preprocess:Ute},Symbol.toStringTag,{value:"Module"})),Ep="KHR_texture_basisu",zte=Ep;function Vte(t,e){const n=new zi(t),{json:r}=n;for(const i of r.textures||[]){const s=n.getObjectExtension(i,Ep);s&&(i.source=s.source),n.removeObjectExtension(i,Ep)}n.removeExtension(Ep)}const jte=Object.freeze(Object.defineProperty({__proto__:null,name:zte,preprocess:Vte},Symbol.toStringTag,{value:"Module"})),Hte="3.2.6",Wte={draco:{decoderType:typeof WebAssembly=="object"?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}},Qte={name:"Draco",id:"draco",module:"draco",shapes:["mesh"],version:Hte,worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:Wte};function Jw(t){let e=1/0,n=1/0,r=1/0,i=-1/0,s=-1/0,o=-1/0;const a=t.POSITION?t.POSITION.value:[],l=a&&a.length;for(let f=0;f<l;f+=3){const d=a[f],g=a[f+1],y=a[f+2];e=d<e?d:e,n=g<n?g:n,r=y<r?y:r,i=d>i?d:i,s=g>s?g:s,o=y>o?y:o}return[[e,n,r],[i,s,o]]}function $te(t,e){if(!t)throw new Error(e||"loader assertion failed.")}class Wc{constructor(e,n){T(this,"fields",void 0),T(this,"metadata",void 0),$te(Array.isArray(e)),Xte(e),this.fields=e,this.metadata=n||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let n=0;n<this.fields.length;++n)if(!this.fields[n].compareTo(e.fields[n]))return!1;return!0}select(...e){const n=Object.create(null);for(const i of e)n[i]=!0;const r=this.fields.filter(i=>n[i.name]);return new Wc(r,this.metadata)}selectAt(...e){const n=e.map(r=>this.fields[r]).filter(Boolean);return new Wc(n,this.metadata)}assign(e){let n,r=this.metadata;if(e instanceof Wc){const o=e;n=o.fields,r=l3(l3(new Map,this.metadata),o.metadata)}else n=e;const i=Object.create(null);for(const o of this.fields)i[o.name]=o;for(const o of n)i[o.name]=o;const s=Object.values(i);return new Wc(s,r)}}function Xte(t){const e={};for(const n of t)e[n.name]&&console.warn("Schema: duplicated field name",n.name,n),e[n.name]=!0}function l3(t,e){return new Map([...t||new Map,...e||new Map])}class Cg{constructor(e,n,r=!1,i=new Map){T(this,"name",void 0),T(this,"type",void 0),T(this,"nullable",void 0),T(this,"metadata",void 0),this.name=e,this.type=n,this.nullable=r,this.metadata=i}get typeId(){return this.type&&this.type.typeId}clone(){return new Cg(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}let qt;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"})(qt||(qt={}));let jD,HD,WD;class Kw{static isNull(e){return e&&e.typeId===qt.Null}static isInt(e){return e&&e.typeId===qt.Int}static isFloat(e){return e&&e.typeId===qt.Float}static isBinary(e){return e&&e.typeId===qt.Binary}static isUtf8(e){return e&&e.typeId===qt.Utf8}static isBool(e){return e&&e.typeId===qt.Bool}static isDecimal(e){return e&&e.typeId===qt.Decimal}static isDate(e){return e&&e.typeId===qt.Date}static isTime(e){return e&&e.typeId===qt.Time}static isTimestamp(e){return e&&e.typeId===qt.Timestamp}static isInterval(e){return e&&e.typeId===qt.Interval}static isList(e){return e&&e.typeId===qt.List}static isStruct(e){return e&&e.typeId===qt.Struct}static isUnion(e){return e&&e.typeId===qt.Union}static isFixedSizeBinary(e){return e&&e.typeId===qt.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===qt.FixedSizeList}static isMap(e){return e&&e.typeId===qt.Map}static isDictionary(e){return e&&e.typeId===qt.Dictionary}get typeId(){return qt.NONE}compareTo(e){return this===e}}jD=Symbol.toStringTag;class Ku extends Kw{constructor(e,n){super(),T(this,"isSigned",void 0),T(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=n}get typeId(){return qt.Int}get[jD](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class Jte extends Ku{constructor(){super(!0,8)}}class Kte extends Ku{constructor(){super(!0,16)}}class Yte extends Ku{constructor(){super(!0,32)}}class qte extends Ku{constructor(){super(!1,8)}}class Zte extends Ku{constructor(){super(!1,16)}}class ene extends Ku{constructor(){super(!1,32)}}const QD={HALF:16,SINGLE:32,DOUBLE:64};HD=Symbol.toStringTag;class $D extends Kw{constructor(e){super(),T(this,"precision",void 0),this.precision=e}get typeId(){return qt.Float}get[HD](){return"Float"}toString(){return"Float".concat(this.precision)}}class tne extends $D{constructor(){super(QD.SINGLE)}}class nne extends $D{constructor(){super(QD.DOUBLE)}}WD=Symbol.toStringTag;class rne extends Kw{constructor(e,n){super(),T(this,"listSize",void 0),T(this,"children",void 0),this.listSize=e,this.children=[n]}get typeId(){return qt.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[WD](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}function ine(t){switch(t.constructor){case Int8Array:return new Jte;case Uint8Array:return new qte;case Int16Array:return new Kte;case Uint16Array:return new Zte;case Int32Array:return new Yte;case Uint32Array:return new ene;case Float32Array:return new tne;case Float64Array:return new nne;default:throw new Error("array type not supported")}}function sne(t,e,n){const r=ine(e.value),i=n||one(e);return new Cg(t,new rne(e.size,new Cg("value",r)),!1,i)}function one(t){const e=new Map;return"byteOffset"in t&&e.set("byteOffset",t.byteOffset.toString(10)),"byteStride"in t&&e.set("byteStride",t.byteStride.toString(10)),"normalized"in t&&e.set("normalized",t.normalized.toString()),e}function ane(t,e,n){const r=XD(e.metadata),i=[],s=lne(e.attributes);for(const o in t){const a=t[o],l=c3(o,a,s[o]);i.push(l)}if(n){const o=c3("indices",n);i.push(o)}return new Wc(i,r)}function lne(t){const e={};for(const n in t){const r=t[n];e[r.name||"undefined"]=r}return e}function c3(t,e,n){const r=n?XD(n.metadata):void 0;return sne(t,e,r)}function XD(t){const e=new Map;for(const n in t)e.set("".concat(n,".string"),JSON.stringify(t[n]));return e}const u3={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},cne={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},une=4;class Ane{constructor(e){T(this,"draco",void 0),T(this,"decoder",void 0),T(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e,n={}){const r=new this.draco.DecoderBuffer;r.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(n);const i=this.decoder.GetEncodedGeometryType(r),s=i===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let o;switch(i){case this.draco.TRIANGULAR_MESH:o=this.decoder.DecodeBufferToMesh(r,s);break;case this.draco.POINT_CLOUD:o=this.decoder.DecodeBufferToPointCloud(r,s);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!o.ok()||!s.ptr){const y="DRACO decompression failed: ".concat(o.error_msg());throw new Error(y)}const a=this._getDracoLoaderData(s,i,n),l=this._getMeshData(s,a,n),f=Jw(l.attributes),d=ane(l.attributes,a,l.indices);return{loader:"draco",loaderData:a,header:{vertexCount:s.num_points(),boundingBox:f},...l,schema:d}}finally{this.draco.destroy(r),s&&this.draco.destroy(s)}}_getDracoLoaderData(e,n,r){const i=this._getTopLevelMetadata(e),s=this._getDracoAttributes(e,r);return{geometry_type:n,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:i,attributes:s}}_getDracoAttributes(e,n){const r={};for(let i=0;i<e.num_attributes();i++){const s=this.decoder.GetAttribute(e,i),o=this._getAttributeMetadata(e,i);r[s.unique_id()]={unique_id:s.unique_id(),attribute_type:s.attribute_type(),data_type:s.data_type(),num_components:s.num_components(),byte_offset:s.byte_offset(),byte_stride:s.byte_stride(),normalized:s.normalized(),attribute_index:i,metadata:o};const a=this._getQuantizationTransform(s,n);a&&(r[s.unique_id()].quantization_transform=a);const l=this._getOctahedronTransform(s,n);l&&(r[s.unique_id()].octahedron_transform=l)}return r}_getMeshData(e,n,r){const i=this._getMeshAttributes(n,e,r);if(!i.POSITION)throw new Error("DRACO: No position attribute found.");if(e instanceof this.draco.Mesh)switch(r.topology){case"triangle-strip":return{topology:"triangle-strip",mode:4,attributes:i,indices:{value:this._getTriangleStripIndices(e),size:1}};case"triangle-list":default:return{topology:"triangle-list",mode:5,attributes:i,indices:{value:this._getTriangleListIndices(e),size:1}}}return{topology:"point-list",mode:0,attributes:i}}_getMeshAttributes(e,n,r){const i={};for(const s of Object.values(e.attributes)){const o=this._deduceAttributeName(s,r);s.name=o;const{value:a,size:l}=this._getAttributeValues(n,s);i[o]={value:a,size:l,byteOffset:s.byte_offset,byteStride:s.byte_stride,normalized:s.normalized}}return i}_getTriangleListIndices(e){const r=e.num_faces()*3,i=r*une,s=this.draco._malloc(i);try{return this.decoder.GetTrianglesUInt32Array(e,i,s),new Uint32Array(this.draco.HEAPF32.buffer,s,r).slice()}finally{this.draco._free(s)}}_getTriangleStripIndices(e){const n=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,n),dne(n)}finally{this.draco.destroy(n)}}_getAttributeValues(e,n){const r=cne[n.data_type],i=n.num_components,o=e.num_points()*i,a=o*r.BYTES_PER_ELEMENT,l=fne(this.draco,r);let f;const d=this.draco._malloc(a);try{const g=this.decoder.GetAttribute(e,n.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,g,l,a,d),f=new r(this.draco.HEAPF32.buffer,d,o).slice()}finally{this.draco._free(d)}return{value:f,size:i}}_deduceAttributeName(e,n){const r=e.unique_id;for(const[o,a]of Object.entries(n.extraAttributes||{}))if(a===r)return o;const i=e.attribute_type;for(const o in u3)if(this.draco[o]===i)return u3[o];const s=n.attributeNameEntry||"name";return e.metadata[s]?e.metadata[s].string:"CUSTOM_ATTRIBUTE_".concat(r)}_getTopLevelMetadata(e){const n=this.decoder.GetMetadata(e);return this._getDracoMetadata(n)}_getAttributeMetadata(e,n){const r=this.decoder.GetAttributeMetadata(e,n);return this._getDracoMetadata(r)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const n={},r=this.metadataQuerier.NumEntries(e);for(let i=0;i<r;i++){const s=this.metadataQuerier.GetEntryName(e,i);n[s]=this._getDracoMetadataField(e,s)}return n}_getDracoMetadataField(e,n){const r=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,n,r);const i=hne(r);return{int:this.metadataQuerier.GetIntEntry(e,n),string:this.metadataQuerier.GetStringEntry(e,n),double:this.metadataQuerier.GetDoubleEntry(e,n),intArray:i}}finally{this.draco.destroy(r)}}_disableAttributeTransforms(e){const{quantizedAttributes:n=[],octahedronAttributes:r=[]}=e,i=[...n,...r];for(const s of i)this.decoder.SkipAttributeTransform(this.draco[s])}_getQuantizationTransform(e,n){const{quantizedAttributes:r=[]}=n,i=e.attribute_type();if(r.map(o=>this.decoder[o]).includes(i)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits(),range:o.range(),min_values:new Float32Array([1,2,3]).map(a=>o.min_value(a))}}finally{this.draco.destroy(o)}}return null}_getOctahedronTransform(e,n){const{octahedronAttributes:r=[]}=n,i=e.attribute_type();if(r.map(o=>this.decoder[o]).includes(i)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits()}}finally{this.draco.destroy(o)}}return null}}function fne(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}function hne(t){const e=t.size(),n=new Int32Array(e);for(let r=0;r<e;r++)n[r]=t.GetValue(r);return n}function dne(t){const e=t.size(),n=new Int32Array(e);for(let r=0;r<e;r++)n[r]=t.GetValue(r);return n}const Yw="1.4.1",pne="https://www.gstatic.com/draco/versioned/decoders/".concat(Yw,"/draco_decoder.js"),gne="https://www.gstatic.com/draco/versioned/decoders/".concat(Yw,"/draco_wasm_wrapper.js"),mne="https://www.gstatic.com/draco/versioned/decoders/".concat(Yw,"/draco_decoder.wasm");let GA;async function yne(t){const e=t.modules||{};return e.draco3d?GA=GA||e.draco3d.createDecoderModule({}).then(n=>({draco:n})):GA=GA||vne(t),await GA}async function vne(t){let e,n;switch(t.draco&&t.draco.decoderType){case"js":e=await fl(pne,"draco",t);break;case"wasm":default:[e,n]=await Promise.all([await fl(gne,"draco",t),await fl(mne,"draco",t)])}return e=e||globalThis.DracoDecoderModule,await _ne(e,n)}function _ne(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(r=>{t({...n,onModuleLoaded:i=>r({draco:i})})})}const JD={...Qte,parse:bne};async function bne(t,e){const{draco:n}=await yne(e),r=new Ane(n);try{return r.parseSync(t,e==null?void 0:e.draco)}finally{r.destroy()}}function wne(t){const e={};for(const n in t){const r=t[n];if(n!=="indices"){const i=KD(r);e[n]=i}}return e}function KD(t){const{buffer:e,size:n,count:r}=Ene(t);return{value:e,size:n,byteOffset:0,count:r,type:GD(n),componentType:zD(e)}}function Ene(t){let e=t,n=1,r=0;return t&&t.value&&(e=t.value,n=t.size||1),e&&(ArrayBuffer.isView(e)||(e=Tne(e,Float32Array)),r=e.length/n),{buffer:e,size:n,count:r}}function Tne(t,e,n=!1){return t?Array.isArray(t)?new e(t):n&&!(t instanceof e)?new e(t):t:null}const Pl="KHR_draco_mesh_compression",Sne=Pl;function xne(t,e,n){const r=new zi(t);for(const i of YD(r))r.getObjectExtension(i,Pl)}async function Cne(t,e,n){var r;if(!(e!=null&&(r=e.gltf)!==null&&r!==void 0&&r.decompressMeshes))return;const i=new zi(t),s=[];for(const o of YD(i))i.getObjectExtension(o,Pl)&&s.push(Mne(i,o,e,n));await Promise.all(s),i.removeExtension(Pl)}function Pne(t,e={}){const n=new zi(t);for(const r of n.json.meshes||[])Ine(r),n.addRequiredExtension(Pl)}async function Mne(t,e,n,r){const i=t.getObjectExtension(e,Pl);if(!i)return;const s=t.getTypedArrayForBufferView(i.bufferView),o=jb(s.buffer,s.byteOffset),{parse:a}=r,l={...n};delete l["3d-tiles"];const f=await a(o,JD,l,r),d=wne(f.attributes);for(const[g,y]of Object.entries(d))if(g in e.attributes){const b=e.attributes[g],E=t.getAccessor(b);E!=null&&E.min&&E!==null&&E!==void 0&&E.max&&(y.min=E.min,y.max=E.max)}e.attributes=d,f.indices&&(e.indices=KD(f.indices)),Bne(e)}function Ine(t,e,n=4,r,i){var s;if(!r.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const o=r.DracoWriter.encodeSync({attributes:t}),a=i==null||(s=i.parseSync)===null||s===void 0?void 0:s.call(i,{attributes:t}),l=r._addFauxAttributes(a.attributes),f=r.addBufferView(o);return{primitives:[{attributes:l,mode:n,extensions:{[Pl]:{bufferView:f,attributes:l}}}]}}function Bne(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}function*YD(t){for(const e of t.json.meshes||[])for(const n of e.primitives)yield n}const Lne=Object.freeze(Object.defineProperty({__proto__:null,name:Sne,preprocess:xne,decode:Cne,encode:Pne},Symbol.toStringTag,{value:"Module"})),cl="KHR_lights_punctual",Rne=cl;async function One(t){const e=new zi(t),{json:n}=e,r=e.getExtension(cl);r&&(e.json.lights=r.lights,e.removeExtension(cl));for(const i of n.nodes||[]){const s=e.getObjectExtension(i,cl);s&&(i.light=s.light),e.removeObjectExtension(i,cl)}}async function Dne(t){const e=new zi(t),{json:n}=e;if(n.lights){const r=e.addExtension(cl);Ai(!r.lights),r.lights=n.lights,delete n.lights}if(e.json.lights){for(const r of e.json.lights){const i=r.node;e.addObjectExtension(i,cl,r)}delete e.json.lights}}const Fne=Object.freeze(Object.defineProperty({__proto__:null,name:Rne,decode:One,encode:Dne},Symbol.toStringTag,{value:"Module"})),Ah="KHR_materials_unlit",kne=Ah;async function Nne(t){const e=new zi(t),{json:n}=e;e.removeExtension(Ah);for(const r of n.materials||[])r.extensions&&r.extensions.KHR_materials_unlit&&(r.unlit=!0),e.removeObjectExtension(r,Ah)}function Une(t){const e=new zi(t),{json:n}=e;if(e.materials)for(const r of n.materials||[])r.unlit&&(delete r.unlit,e.addObjectExtension(r,Ah,{}),e.addExtension(Ah))}const Gne=Object.freeze(Object.defineProperty({__proto__:null,name:kne,decode:Nne,encode:Une},Symbol.toStringTag,{value:"Module"})),rf="KHR_techniques_webgl",zne=rf;async function Vne(t){const e=new zi(t),{json:n}=e,r=e.getExtension(rf);if(r){const i=Hne(r,e);for(const s of n.materials||[]){const o=e.getObjectExtension(s,rf);o&&(s.technique=Object.assign({},o,i[o.technique]),s.technique.values=Wne(s.technique,e)),e.removeObjectExtension(s,rf)}e.removeExtension(rf)}}async function jne(t,e){}function Hne(t,e){const{programs:n=[],shaders:r=[],techniques:i=[]}=t,s=new TextDecoder;return r.forEach(o=>{if(Number.isFinite(o.bufferView))o.code=s.decode(e.getTypedArrayForBufferView(o.bufferView));else throw new Error("KHR_techniques_webgl: no shader code")}),n.forEach(o=>{o.fragmentShader=r[o.fragmentShader],o.vertexShader=r[o.vertexShader]}),i.forEach(o=>{o.program=n[o.program]}),i}function Wne(t,e){const n=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach(r=>{t.uniforms[r].value&&!(r in n)&&(n[r]=t.uniforms[r].value)}),Object.keys(n).forEach(r=>{typeof n[r]=="object"&&n[r].index!==void 0&&(n[r].texture=e.getTexture(n[r].index))}),n}const Qne=Object.freeze(Object.defineProperty({__proto__:null,name:zne,decode:Vne,encode:jne},Symbol.toStringTag,{value:"Module"})),qD=[kte,Gte,jte,Lne,Fne,Gne,Qne];function $ne(t,e={},n){const r=qD.filter(s=>ZD(s.name,e));for(const s of r){var i;(i=s.preprocess)===null||i===void 0||i.call(s,t,e,n)}}async function Xne(t,e={},n){const r=qD.filter(s=>ZD(s.name,e));for(const s of r){var i;await((i=s.decode)===null||i===void 0?void 0:i.call(s,t,e,n))}}function ZD(t,e){var n;const r=(e==null||(n=e.gltf)===null||n===void 0?void 0:n.excludeExtensions)||{};return!(t in r&&!r[t])}const Vv="KHR_binary_glTF";function Jne(t){const e=new zi(t),{json:n}=e;for(const r of n.images||[]){const i=e.getObjectExtension(r,Vv);i&&Object.assign(r,i),e.removeObjectExtension(r,Vv)}n.buffers&&n.buffers[0]&&delete n.buffers[0].uri,e.removeExtension(Vv)}const A3={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},Kne={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class Yne{constructor(){T(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),T(this,"json",void 0)}normalize(e,n){this.json=e.json;const r=e.json;switch(r.asset&&r.asset.version){case"2.0":return;case void 0:case"1.0":break;default:console.warn("glTF: Unknown version ".concat(r.asset.version));return}if(!n.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(r),this._convertTopLevelObjectsToArrays(r),Jne(e),this._convertObjectIdsToArrayIndices(r),this._updateObjects(r),this._updateMaterial(r)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const n in A3)this._convertTopLevelObjectToArray(e,n)}_convertTopLevelObjectToArray(e,n){const r=e[n];if(!(!r||Array.isArray(r))){e[n]=[];for(const i in r){const s=r[i];s.id=s.id||i;const o=e[n].length;e[n].push(s),this.idToIndexMap[n][i]=o}}}_convertObjectIdsToArrayIndices(e){for(const n in A3)this._convertIdsToIndices(e,n);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const n of e.textures)this._convertTextureIds(n);for(const n of e.meshes)this._convertMeshIds(n);for(const n of e.nodes)this._convertNodeIds(n);for(const n of e.scenes)this._convertSceneIds(n)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const n of e.primitives){const{attributes:r,indices:i,material:s}=n;for(const o in r)r[o]=this._convertIdToIndex(r[o],"accessor");i&&(n.indices=this._convertIdToIndex(i,"accessor")),s&&(n.material=this._convertIdToIndex(s,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(n=>this._convertIdToIndex(n,"node"))),e.meshes&&(e.meshes=e.meshes.map(n=>this._convertIdToIndex(n,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(n=>this._convertIdToIndex(n,"node")))}_convertIdsToIndices(e,n){e[n]||(console.warn("gltf v1: json doesn't contain attribute ".concat(n)),e[n]=[]);for(const r of e[n])for(const i in r){const s=r[i],o=this._convertIdToIndex(s,i);r[i]=o}}_convertIdToIndex(e,n){const r=Kne[n];if(r in this.idToIndexMap){const i=this.idToIndexMap[r][e];if(!Number.isFinite(i))throw new Error("gltf v1: failed to resolve ".concat(n," with id ").concat(e));return i}return e}_updateObjects(e){for(const n of this.json.buffers)delete n.type}_updateMaterial(e){for(const i of e.materials){var n,r;i.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const s=((n=i.values)===null||n===void 0?void 0:n.tex)||((r=i.values)===null||r===void 0?void 0:r.texture2d_0),o=e.textures.findIndex(a=>a.id===s);o!==-1&&(i.pbrMetallicRoughness.baseColorTexture={index:o})}}}function qne(t,e={}){return new Yne().normalize(t,e)}const Zne={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ere={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Ei={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},tre={magFilter:Ei.TEXTURE_MAG_FILTER,minFilter:Ei.TEXTURE_MIN_FILTER,wrapS:Ei.TEXTURE_WRAP_S,wrapT:Ei.TEXTURE_WRAP_T},nre={[Ei.TEXTURE_MAG_FILTER]:Ei.LINEAR,[Ei.TEXTURE_MIN_FILTER]:Ei.NEAREST_MIPMAP_LINEAR,[Ei.TEXTURE_WRAP_S]:Ei.REPEAT,[Ei.TEXTURE_WRAP_T]:Ei.REPEAT};function rre(t){return ere[t]}function ire(t){return Zne[t]}class sre{constructor(){T(this,"baseUri",""),T(this,"json",{}),T(this,"buffers",[]),T(this,"images",[])}postProcess(e,n={}){const{json:r,buffers:i=[],images:s=[],baseUri:o=""}=e;return Ai(r),this.baseUri=o,this.json=r,this.buffers=i,this.images=s,this._resolveTree(this.json,n),this.json}_resolveTree(e,n={}){e.bufferViews&&(e.bufferViews=e.bufferViews.map((r,i)=>this._resolveBufferView(r,i))),e.images&&(e.images=e.images.map((r,i)=>this._resolveImage(r,i))),e.samplers&&(e.samplers=e.samplers.map((r,i)=>this._resolveSampler(r,i))),e.textures&&(e.textures=e.textures.map((r,i)=>this._resolveTexture(r,i))),e.accessors&&(e.accessors=e.accessors.map((r,i)=>this._resolveAccessor(r,i))),e.materials&&(e.materials=e.materials.map((r,i)=>this._resolveMaterial(r,i))),e.meshes&&(e.meshes=e.meshes.map((r,i)=>this._resolveMesh(r,i))),e.nodes&&(e.nodes=e.nodes.map((r,i)=>this._resolveNode(r,i))),e.skins&&(e.skins=e.skins.map((r,i)=>this._resolveSkin(r,i))),e.scenes&&(e.scenes=e.scenes.map((r,i)=>this._resolveScene(r,i))),e.scene!==void 0&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,n){if(typeof n=="object")return n;const r=this.json[e]&&this.json[e][n];return r||console.warn("glTF file error: Could not find ".concat(e,"[").concat(n,"]")),r}_resolveScene(e,n){return e.id=e.id||"scene-".concat(n),e.nodes=(e.nodes||[]).map(r=>this.getNode(r)),e}_resolveNode(e,n){return e.id=e.id||"node-".concat(n),e.children&&(e.children=e.children.map(r=>this.getNode(r))),e.mesh!==void 0?e.mesh=this.getMesh(e.mesh):e.meshes!==void 0&&e.meshes.length&&(e.mesh=e.meshes.reduce((r,i)=>{const s=this.getMesh(i);return r.id=s.id,r.primitives=r.primitives.concat(s.primitives),r},{primitives:[]})),e.camera!==void 0&&(e.camera=this.getCamera(e.camera)),e.skin!==void 0&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,n){return e.id=e.id||"skin-".concat(n),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,n){return e.id=e.id||"mesh-".concat(n),e.primitives&&(e.primitives=e.primitives.map(r=>{r={...r};const i=r.attributes;r.attributes={};for(const s in i)r.attributes[s]=this.getAccessor(i[s]);return r.indices!==void 0&&(r.indices=this.getAccessor(r.indices)),r.material!==void 0&&(r.material=this.getMaterial(r.material)),r})),e}_resolveMaterial(e,n){if(e.id=e.id||"material-".concat(n),e.normalTexture&&(e.normalTexture={...e.normalTexture},e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture={...e.occlustionTexture},e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture={...e.emmisiveTexture},e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness={...e.pbrMetallicRoughness};const r=e.pbrMetallicRoughness;r.baseColorTexture&&(r.baseColorTexture={...r.baseColorTexture},r.baseColorTexture.texture=this.getTexture(r.baseColorTexture.index)),r.metallicRoughnessTexture&&(r.metallicRoughnessTexture={...r.metallicRoughnessTexture},r.metallicRoughnessTexture.texture=this.getTexture(r.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,n){if(e.id=e.id||"accessor-".concat(n),e.bufferView!==void 0&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=rre(e.componentType),e.components=ire(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const r=e.bufferView.buffer,{ArrayType:i,byteLength:s}=VD(e,e.bufferView),o=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+r.byteOffset;let a=r.arrayBuffer.slice(o,o+s);e.bufferView.byteStride&&(a=this._getValueFromInterleavedBuffer(r,o,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new i(a)}return e}_getValueFromInterleavedBuffer(e,n,r,i,s){const o=new Uint8Array(s*i);for(let a=0;a<s;a++){const l=n+a*r;o.set(new Uint8Array(e.arrayBuffer.slice(l,l+i)),a*i)}return o.buffer}_resolveTexture(e,n){return e.id=e.id||"texture-".concat(n),e.sampler="sampler"in e?this.getSampler(e.sampler):nre,e.source=this.getImage(e.source),e}_resolveSampler(e,n){e.id=e.id||"sampler-".concat(n),e.parameters={};for(const r in e){const i=this._enumSamplerParameter(r);i!==void 0&&(e.parameters[i]=e[r])}return e}_enumSamplerParameter(e){return tre[e]}_resolveImage(e,n){e.id=e.id||"image-".concat(n),e.bufferView!==void 0&&(e.bufferView=this.getBufferView(e.bufferView));const r=this.images[n];return r&&(e.image=r),e}_resolveBufferView(e,n){const r=e.buffer,i={id:"bufferView-".concat(n),...e,buffer:this.buffers[r]},s=this.buffers[r].arrayBuffer;let o=this.buffers[r].byteOffset||0;return"byteOffset"in e&&(o+=e.byteOffset),i.data=new Uint8Array(s,o,e.byteLength),i}_resolveCamera(e,n){return e.id=e.id||"camera-".concat(n),e.perspective,e.orthographic,e}}function ore(t,e){return new sre().postProcess(t,e)}const f3=1735152710,qw=12,Pg=8,are=1313821514,lre=5130562,cre=0,ure=1,Are=0,xu=!0;function fre(t,e=0){return"".concat(String.fromCharCode(t.getUint8(e+0))).concat(String.fromCharCode(t.getUint8(e+1))).concat(String.fromCharCode(t.getUint8(e+2))).concat(String.fromCharCode(t.getUint8(e+3)))}function hre(t,e=0,n={}){const r=new DataView(t),{magic:i=f3}=n,s=r.getUint32(e,!1);return s===i||s===f3}function dre(t,e,n=0,r={}){const i=new DataView(e),s=fre(i,n+0),o=i.getUint32(n+4,xu),a=i.getUint32(n+8,xu);switch(Object.assign(t,{header:{byteOffset:n,byteLength:a,hasBinChunk:!1},type:s,version:o,json:{},binChunks:[]}),n+=qw,t.version){case 1:return pre(t,i,n);case 2:return gre(t,i,n,r={});default:throw new Error("Invalid GLB version ".concat(t.version,". Only supports v1 and v2."))}}function pre(t,e,n){Lt(t.header.byteLength>qw+Pg);const r=e.getUint32(n+0,xu),i=e.getUint32(n+4,xu);return n+=Pg,Lt(i===Are),u2(t,e,n,r),n+=r,n+=A2(t,e,n,t.header.byteLength),n}function gre(t,e,n,r){return Lt(t.header.byteLength>qw+Pg),mre(t,e,n,r),n+t.header.byteLength}function mre(t,e,n,r){for(;n+8<=t.header.byteLength;){const i=e.getUint32(n+0,xu),s=e.getUint32(n+4,xu);switch(n+=Pg,s){case are:u2(t,e,n,i);break;case lre:A2(t,e,n,i);break;case cre:r.strict||u2(t,e,n,i);break;case ure:r.strict||A2(t,e,n,i);break}n+=Rh(i,4)}return n}function u2(t,e,n,r){const i=new Uint8Array(e.buffer,n,r),o=new TextDecoder("utf8").decode(i);return t.json=JSON.parse(o),Rh(r,4)}function A2(t,e,n,r){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:n,byteLength:r,arrayBuffer:e.buffer}),Rh(r,4)}async function yre(t,e,n=0,r,i){var s,o,a,l;vre(t,e,n,r),qne(t,{normalize:r==null||(s=r.gltf)===null||s===void 0?void 0:s.normalize}),$ne(t,r,i);const f=[];if(r!=null&&(o=r.gltf)!==null&&o!==void 0&&o.loadBuffers&&t.json.buffers&&await _re(t,r,i),r!=null&&(a=r.gltf)!==null&&a!==void 0&&a.loadImages){const g=bre(t,r,i);f.push(g)}const d=Xne(t,r,i);return f.push(d),await Promise.all(f),r!=null&&(l=r.gltf)!==null&&l!==void 0&&l.postProcess?ore(t,r):t}function vre(t,e,n,r){if(r.uri&&(t.baseUri=r.uri),e instanceof ArrayBuffer&&!hre(e,n,r)&&(e=new TextDecoder().decode(e)),typeof e=="string")t.json=EG(e);else if(e instanceof ArrayBuffer){const o={};n=dre(o,e,n,r.glb),Ai(o.type==="glTF","Invalid GLB magic string ".concat(o.type)),t._glb=o,t.json=o.json}else Ai(!1,"GLTF: must be ArrayBuffer or string");const i=t.json.buffers||[];if(t.buffers=new Array(i.length).fill(null),t._glb&&t._glb.header.hasBinChunk){const{binChunks:o}=t._glb;t.buffers[0]={arrayBuffer:o[0].arrayBuffer,byteOffset:o[0].byteOffset,byteLength:o[0].byteLength}}const s=t.json.images||[];t.images=new Array(s.length).fill({})}async function _re(t,e,n){const r=t.json.buffers||[];for(let o=0;o<r.length;++o){const a=r[o];if(a.uri){var i,s;const{fetch:l}=n;Ai(l);const f=UD(a.uri,e),d=await(n==null||(i=n.fetch)===null||i===void 0?void 0:i.call(n,f)),g=await(d==null||(s=d.arrayBuffer)===null||s===void 0?void 0:s.call(d));t.buffers[o]={arrayBuffer:g,byteOffset:0,byteLength:g.byteLength},delete a.uri}else t.buffers[o]===null&&(t.buffers[o]={arrayBuffer:new ArrayBuffer(a.byteLength),byteOffset:0,byteLength:a.byteLength})}}async function bre(t,e,n){const r=wre(t),i=t.json.images||[],s=[];for(const o of r)s.push(Ere(t,i[o],o,e,n));return await Promise.all(s)}function wre(t){const e=new Set,n=t.json.textures||[];for(const r of n)r.source!==void 0&&e.add(r.source);return Array.from(e).sort()}async function Ere(t,e,n,r,i){const{fetch:s,parse:o}=i;let a;if(e.uri){const f=UD(e.uri,r);a=await(await s(f)).arrayBuffer()}if(Number.isFinite(e.bufferView)){const f=gte(t.json,t.buffers,e.bufferView);a=jb(f.buffer,f.byteOffset,f.byteLength)}Ai(a,"glTF image has no data");let l=await o(a,[Jb,pte],{mimeType:e.mimeType,basis:r.basis||{format:ND()}},i);l&&l[0]&&(l={compressed:!0,mipmaps:!1,width:l[0].width,height:l[0].height,data:l[0]}),t.images=t.images||[],t.images[n]=l}const fh={name:"glTF",id:"gltf",module:"gltf",version:qee,extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:Tre,options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};async function Tre(t,e={},n){e={...fh.options,...e},e.gltf={...fh.options.gltf,...e.gltf};const{byteOffset:r=0}=e;return await yre({},t,r,e,n)}async function Sre(t){const e=[];return t.scenes.forEach(n=>{n.traverse(r=>{Object.values(r.model.getUniforms()).forEach(i=>{i.loaded===!1&&e.push(i)})})}),await xre(()=>e.some(n=>!n.loaded))}async function xre(t){for(;t();)await new Promise(e=>requestAnimationFrame(e))}const Cre=`#version 300 es

// Instance attributes
in vec3 instancePositions;
in vec3 instancePositions64Low;
in vec4 instanceColors;
in vec3 instancePickingColors;
in mat3 instanceModelMatrix;
in vec3 instanceTranslation;

// Uniforms
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform mat4 sceneModelMatrix;
uniform bool composeModelMatrix;

// Attributes
in vec4 POSITION;

#ifdef HAS_UV
  in vec2 TEXCOORD_0;
#endif

#ifdef MODULE_PBR
  #ifdef HAS_NORMALS
    in vec4 NORMAL;
  #endif
#endif

// Varying
out vec4 vColor;

// MODULE_PBR contains all the varying definitions needed
#ifndef MODULE_PBR
  #ifdef HAS_UV
    out vec2 vTEXCOORD_0;
  #endif
#endif

// Main
void main(void) {
  #if defined(HAS_UV) && !defined(MODULE_PBR)
    vTEXCOORD_0 = TEXCOORD_0;
    geometry.uv = vTEXCOORD_0;
  #endif

  geometry.worldPosition = instancePositions;
  geometry.pickingColor = instancePickingColors;

  vec3 normal = vec3(0.0, 0.0, 1.0);
  #ifdef MODULE_PBR
    #ifdef HAS_NORMALS
      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;
    #endif
  #endif

  float originalSize = project_size_to_pixel(sizeScale);
  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);

  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;
  if(composeModelMatrix) {
    DECKGL_FILTER_SIZE(pos, geometry);
    // using instancePositions as world coordinates
    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth
    // call project_normal before setting position to avoid rotation
    geometry.normal = project_normal(normal);
    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
  }
  else {
    pos = project_size(pos);
    DECKGL_FILTER_SIZE(pos, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);
    geometry.normal = project_normal(normal);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  #ifdef MODULE_PBR
    // set PBR data
    pbr_vPosition = geometry.position.xyz;
    #ifdef HAS_NORMALS
      pbr_vNormal = geometry.normal;
    #endif

    #ifdef HAS_UV
      pbr_vUV = TEXCOORD_0;
    #else
      pbr_vUV = vec2(0., 0.);
    #endif
    geometry.uv = pbr_vUV;
  #endif

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Pre=`#version 300 es

// Uniforms
uniform float opacity;

// Varying
in vec4 vColor;

out vec4 fragmentColor;

// MODULE_PBR contains all the varying definitions needed
#ifndef MODULE_PBR
  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)
    in vec2 vTEXCOORD_0;
    uniform sampler2D u_BaseColorSampler;
  #endif
#endif

void main(void) {
  #ifdef MODULE_PBR
    fragmentColor = vColor * pbr_filterColor(vec4(0));
    geometry.uv = pbr_vUV;
  #else
    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)
      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);
      geometry.uv = vTEXCOORD_0;
    #else
      fragmentColor = vColor;
    #endif
  #endif

  fragmentColor.a *= opacity;
  DECKGL_FILTER_COLOR(fragmentColor, geometry);
}
`,eF=[255,255,255,255],Mre={scenegraph:{type:"object",value:null,async:!0},getScene:t=>t&&t.scenes?typeof t.scene=="object"?t.scene:t.scenes[t.scene||0]:t,getAnimator:t=>t&&t.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:eF},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[fh]};class Zw extends Kr{constructor(...e){super(...e),T(this,"state",void 0)}getShaders(){const e=[Ys,qs];return this.props._lighting==="pbr"&&e.push(mw),{vs:Cre,fs:Pre,modules:e}}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:eF,transition:!0},instanceModelMatrix:RD})}updateState(e){super.updateState(e);const{props:n,oldProps:r}=e;n.scenegraph!==r.scenegraph?this._updateScenegraph():n._animations!==r._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,n._animations)}finalizeState(e){super.finalizeState(e),this._deleteScenegraph()}_updateScenegraph(){const e=this.props,{gl:n}=this.context;let r=null;if(e.scenegraph instanceof iu)r={scenes:[e.scenegraph]};else if(e.scenegraph&&!e.scenegraph.gltf){const a=e.scenegraph,l=Yee(n,a,this._getModelOptions());r={gltf:a,...l},Sre(l).then(()=>this.setNeedsRedraw())}else e.scenegraph&&(je.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),r=e.scenegraph);const i={layer:this,gl:n},s=e.getScene(r,i),o=e.getAnimator(r,i);s instanceof iu?(this._deleteScenegraph(),this._applyAllAttributes(s),this._applyAnimationsProp(s,o,e._animations),this.setState({scenegraph:s,animator:o})):s!==null&&je.warn("invalid scenegraph:",s)()}_applyAllAttributes(e){if(this.state.attributesAvailable){const n=this.getAttributeManager().getAttributes();e.traverse(r=>{this._setModelAttributes(r.model,n)})}}_applyAnimationsProp(e,n,r){if(!e||!n||!r)return;const i=n.getAnimations();Object.keys(r).sort().forEach(s=>{const o=r[s];if(s==="*")i.forEach(a=>{Object.assign(a,o)});else if(Number.isFinite(Number(s))){const a=Number(s);a>=0&&a<i.length?Object.assign(i[a],o):je.warn("animation ".concat(s," not found"))()}else{const a=i.find(({name:l})=>l===s);a?Object.assign(a,o):je.warn("animation ".concat(s," not found"))()}})}_deleteScenegraph(){const{scenegraph:e}=this.state;e instanceof iu&&e.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:e}=this.props;let n=null;return e&&(typeof e=="function"?n=e({gl:this.context.gl,layer:this}):n=e),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:n,modelOptions:{isInstanced:!0,transpileToGLSL100:!it(this.context.gl),...this.getShaders()},useTangents:!1}}updateAttributes(e){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(n=>{this._setModelAttributes(n.model,e)})}draw({moduleParameters:e=null,parameters:n={},context:r}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(r.timeline.getTime()),this.setNeedsRedraw());const{viewport:i}=this.context,{sizeScale:s,sizeMinPixels:o,sizeMaxPixels:a,opacity:l,coordinateSystem:f}=this.props,d=this.getNumInstances();this.state.scenegraph.traverse((g,{worldMatrix:y})=>{g.model.setInstanceCount(d),g.updateModuleSettings(e),g.draw({parameters:n,uniforms:{sizeScale:s,opacity:l,sizeMinPixels:o,sizeMaxPixels:a,composeModelMatrix:OD(i,f),sceneModelMatrix:y,u_Camera:g.model.getUniforms().project_uCameraPosition}})})}}T(Zw,"defaultProps",Mre);T(Zw,"layerName","ScenegraphLayer");const Ire=`#version 300 es
#define SHADER_NAME simple-mesh-layer-vs

// Scale the model
uniform float sizeScale;
uniform bool composeModelMatrix;
uniform bool pickFeatureIds;

// Primitive attributes
in vec3 positions;
in vec3 normals;
in vec3 colors;
in vec2 texCoords;
in vec4 uvRegions;
in vec3 featureIdsPickingColors;

// Instance attributes
in vec4 instanceColors;
in vec3 instancePickingColors;
in mat3 instanceModelMatrix;

// Outputs to fragment shader
out vec2 vTexCoord;
out vec3 cameraPosition;
out vec3 normals_commonspace;
out vec4 position_commonspace;
out vec4 vColor;

vec2 applyUVRegion(vec2 uv) {
  #ifdef HAS_UV_REGIONS
    // https://github.com/Esri/i3s-spec/blob/master/docs/1.7/geometryUVRegion.cmn.md
    return fract(uv) * (uvRegions.zw - uvRegions.xy) + uvRegions.xy;
  #else
    return uv;
  #endif
}

void main(void) {
  vec2 uv = applyUVRegion(texCoords);
  geometry.uv = uv;

  if (pickFeatureIds) {
    geometry.pickingColor = featureIdsPickingColors;
  } else {
    geometry.pickingColor = instancePickingColors;
  }

  vTexCoord = uv;
  cameraPosition = project_uCameraPosition;
  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);

  vec3 pos = (instanceModelMatrix * positions) * sizeScale;
  vec3 projectedPosition = project_position(positions);
  position_commonspace = vec4(projectedPosition, 1.0);
  gl_Position = project_common_position_to_clipspace(position_commonspace);

  geometry.position = position_commonspace;
  normals_commonspace = project_normal(instanceModelMatrix * normals);
  geometry.normal = normals_commonspace;

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  #ifdef MODULE_PBR
    // set PBR data
    pbr_vPosition = geometry.position.xyz;
    #ifdef HAS_NORMALS
      pbr_vNormal = geometry.normal;
    #endif

    #ifdef HAS_UV
      pbr_vUV = uv;
    #else
      pbr_vUV = vec2(0., 0.);
    #endif
    geometry.uv = pbr_vUV;
  #endif

  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Bre=`#version 300 es
#define SHADER_NAME simple-mesh-layer-fs

precision highp float;

uniform bool hasTexture;
uniform sampler2D sampler;
uniform bool flatShading;
uniform float opacity;

in vec2 vTexCoord;
in vec3 cameraPosition;
in vec3 normals_commonspace;
in vec4 position_commonspace;
in vec4 vColor;

out vec4 fragColor;

void main(void) {
  
#ifdef MODULE_PBR

  fragColor = vColor * pbr_filterColor(vec4(0));
  geometry.uv = pbr_vUV;
  fragColor.a *= opacity;

#else

  geometry.uv = vTexCoord;

  vec3 normal;
  if (flatShading) {

// NOTE(Tarek): This is necessary because
// headless.gl reports the extension as
// available but does not support it in
// the shader.
#ifdef DERIVATIVES_AVAILABLE
    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));
#else
    normal = vec3(0.0, 0.0, 1.0);
#endif
  } else {
    normal = normals_commonspace;
  }

  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;
  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);
  fragColor = vec4(lightColor, color.a * opacity);

#endif

  DECKGL_FILTER_COLOR(fragColor, geometry);
}
`;function Lre(t){t.COLOR_0||t.colors||(t.colors={constant:!0,value:new Float32Array([1,1,1])})}const Rre={pbrMaterial:{type:"object",value:null},featureIds:{type:"array",value:null,optional:!0}};class eE extends uh{getShaders(){const e=super.getShaders();return e.modules.push(mw),{...e,vs:Ire,fs:Bre}}initializeState(){const{featureIds:e}=this.props;super.initializeState();const n=this.getAttributeManager();e&&n.add({featureIdsPickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateFeatureIdsPickingColors}})}updateState(e){super.updateState(e);const{props:n,oldProps:r}=e;n.pbrMaterial!==r.pbrMaterial&&this.updatePbrMaterialUniforms(n.pbrMaterial)}draw(e){const{featureIds:n}=this.props;!this.state.model||(this.state.model.setUniforms({u_Camera:this.state.model.getUniforms().project_uCameraPosition,pickFeatureIds:Boolean(n)}),super.draw(e))}getModel(e){const{id:n,pbrMaterial:r}=this.props,i=this.parseMaterial(r,e);this.setState({materialParser:i});const s=this.getShaders();return Lre(e.attributes),new Xr(this.context.gl,{...this.getShaders(),id:n,geometry:e,defines:{...s.defines,...i==null?void 0:i.defines,HAS_UV_REGIONS:e.attributes.uvRegions},parameters:i==null?void 0:i.parameters,isInstanced:!0})}updatePbrMaterialUniforms(e){const{model:n}=this.state;if(n){const{mesh:r}=this.props,i=this.parseMaterial(e,r);this.setState({materialParser:i}),n.setUniforms(i.uniforms)}}parseMaterial(e,n){var r;const i=Boolean(e.pbrMetallicRoughness&&e.pbrMetallicRoughness.baseColorTexture);return(r=this.state.materialParser)===null||r===void 0||r.delete(),new DD(this.context.gl,{attributes:{NORMAL:n.attributes.normals,TEXCOORD_0:n.attributes.texCoords},material:{unlit:i,...e},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1})}calculateFeatureIdsPickingColors(e){const n=this.props.featureIds,r=new Uint8ClampedArray(n.length*e.size),i=[];for(let s=0;s<n.length;s++)this.encodePickingColor(n[s],i),r[s*3]=i[0],r[s*3+1]=i[1],r[s*3+2]=i[2];e.value=r}finalizeState(e){var n;super.finalizeState(e),(n=this.state.materialParser)===null||n===void 0||n.delete(),this.setState({materialParser:null})}}T(eE,"layerName","MeshLayer");T(eE,"defaultProps",Rre);const Ore=6378137,Dre=6378137,Fre=6356752314245179e-9;function Om(t){return t}new q;function kre(t,e=[],n=Om){return"longitude"in t?(e[0]=n(t.longitude),e[1]=n(t.latitude),e[2]=t.height):"x"in t?(e[0]=n(t.x),e[1]=n(t.y),e[2]=t.z):(e[0]=n(t[0]),e[1]=n(t[1]),e[2]=t[2]),e}function Nre(t,e=[]){return kre(t,e,Sn._cartographicRadians?Om:u7)}function Ure(t,e,n=Om){return"longitude"in e?(e.longitude=n(t[0]),e.latitude=n(t[1]),e.height=t[2]):"x"in e?(e.x=n(t[0]),e.y=n(t[1]),e.z=t[2]):(e[0]=n(t[0]),e[1]=n(t[1]),e[2]=t[2]),e}function Gre(t,e){return Ure(t,e,Sn._cartographicRadians?Om:A7)}const fc=new q,zre=new q,Vre=new q;function jre(t,e,n=[]){const{oneOverRadii:r,oneOverRadiiSquared:i,centerToleranceSquared:s}=e;fc.from(t);const o=fc.x,a=fc.y,l=fc.z,f=r.x,d=r.y,g=r.z,y=o*o*f*f,b=a*a*d*d,E=l*l*g*g,S=y+b+E,M=Math.sqrt(1/S);if(!Number.isFinite(M))return;const C=zre;if(C.copy(t).scale(M),S<s)return C.to(n);const P=i.x,I=i.y,L=i.z,F=Vre;F.set(C.x*P*2,C.y*I*2,C.z*L*2);let z=(1-M)*fc.len()/(.5*F.len()),X=0,Y,Q,N,k;do{z-=X,Y=1/(1+z*P),Q=1/(1+z*I),N=1/(1+z*L);const te=Y*Y,oe=Q*Q,ae=N*N,Re=te*Y,Oe=oe*Q,He=ae*N;k=y*te+b*oe+E*ae-1;const le=y*Re*P+b*Oe*I+E*He*L,be=-2*le;X=k/be}while(Math.abs(k)>Zf.EPSILON12);return fc.scale([Y,Q,N]).to(n)}const h3=1e-14,Hre=new q,d3={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},jv={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},zA={east:new q,north:new q,up:new q,west:new q,south:new q,down:new q},Wre=new q,Qre=new q,$re=new q;function p3(t,e,n,r,i,s){const o=d3[e]&&d3[e][n];rs(o&&(!r||r===o));let a,l,f;const d=Hre.copy(i);if(vr(d.x,0,h3)&&vr(d.y,0,h3)){const y=Math.sign(d.z);a=Wre.fromArray(jv[e]),e!=="east"&&e!=="west"&&a.scale(y),l=Qre.fromArray(jv[n]),n!=="east"&&n!=="west"&&l.scale(y),f=$re.fromArray(jv[r]),r!=="east"&&r!=="west"&&f.scale(y)}else{const{up:y,east:b,north:E}=zA;b.set(-d.y,d.x,0).normalize(),t.geodeticSurfaceNormal(d,y),E.copy(y).cross(b);const{down:S,west:M,south:C}=zA;S.copy(y).scale(-1),M.copy(b).scale(-1),C.copy(E).scale(-1),a=zA[e],l=zA[n],f=zA[r]}return s[0]=a.x,s[1]=a.y,s[2]=a.z,s[3]=0,s[4]=l.x,s[5]=l.y,s[6]=l.z,s[7]=0,s[8]=f.x,s[9]=f.y,s[10]=f.z,s[11]=0,s[12]=d.x,s[13]=d.y,s[14]=d.z,s[15]=1,s}const B0=new q,g3=new q,Xre=new q,qi=new q,Jre=new q,L0=new q;class Wn{constructor(e=0,n=0,r=0){T(this,"radii",void 0),T(this,"radiiSquared",void 0),T(this,"radiiToTheFourth",void 0),T(this,"oneOverRadii",void 0),T(this,"oneOverRadiiSquared",void 0),T(this,"minimumRadius",void 0),T(this,"maximumRadius",void 0),T(this,"centerToleranceSquared",Zf.EPSILON1),T(this,"squaredXOverSquaredZ",void 0),rs(e>=0),rs(n>=0),rs(r>=0),this.radii=new q(e,n,r),this.radiiSquared=new q(e*e,n*n,r*r),this.radiiToTheFourth=new q(e*e*e*e,n*n*n*n,r*r*r*r),this.oneOverRadii=new q(e===0?0:1/e,n===0?0:1/n,r===0?0:1/r),this.oneOverRadiiSquared=new q(e===0?0:1/(e*e),n===0?0:1/(n*n),r===0?0:1/(r*r)),this.minimumRadius=Math.min(e,n,r),this.maximumRadius=Math.max(e,n,r),this.radiiSquared.z!==0&&(this.squaredXOverSquaredZ=this.radiiSquared.x/this.radiiSquared.z),Object.freeze(this)}equals(e){return this===e||Boolean(e&&this.radii.equals(e.radii))}toString(){return this.radii.toString()}cartographicToCartesian(e,n=[0,0,0]){const r=g3,i=Xre,[,,s]=e;this.geodeticSurfaceNormalCartographic(e,r),i.copy(this.radiiSquared).scale(r);const o=Math.sqrt(r.dot(i));return i.scale(1/o),r.scale(s),i.add(r),i.to(n)}cartesianToCartographic(e,n=[0,0,0]){L0.from(e);const r=this.scaleToGeodeticSurface(L0,qi);if(!r)return;const i=this.geodeticSurfaceNormal(r,g3),s=Jre;s.copy(L0).subtract(r);const o=Math.atan2(i.y,i.x),a=Math.asin(i.z),l=Math.sign(uw(s,L0))*cw(s);return Gre([o,a,l],n)}eastNorthUpToFixedFrame(e,n=new $e){return p3(this,"east","north","up",e,n)}localFrameToFixedFrame(e,n,r,i,s=new $e){return p3(this,e,n,r,i,s)}geocentricSurfaceNormal(e,n=[0,0,0]){return B0.from(e).normalize().to(n)}geodeticSurfaceNormalCartographic(e,n=[0,0,0]){const r=Nre(e),i=r[0],s=r[1],o=Math.cos(s);return B0.set(o*Math.cos(i),o*Math.sin(i),Math.sin(s)).normalize(),B0.to(n)}geodeticSurfaceNormal(e,n=[0,0,0]){return B0.from(e).scale(this.oneOverRadiiSquared).normalize().to(n)}scaleToGeodeticSurface(e,n){return jre(e,this,n)}scaleToGeocentricSurface(e,n=[0,0,0]){qi.from(e);const r=qi.x,i=qi.y,s=qi.z,o=this.oneOverRadiiSquared,a=1/Math.sqrt(r*r*o.x+i*i*o.y+s*s*o.z);return qi.multiplyScalar(a).to(n)}transformPositionToScaledSpace(e,n=[0,0,0]){return qi.from(e).scale(this.oneOverRadii).to(n)}transformPositionFromScaledSpace(e,n=[0,0,0]){return qi.from(e).scale(this.radii).to(n)}getSurfaceNormalIntersectionWithZAxis(e,n=0,r=[0,0,0]){rs(vr(this.radii.x,this.radii.y,Zf.EPSILON15)),rs(this.radii.z>0),qi.from(e);const i=qi.z*(1-this.squaredXOverSquaredZ);if(!(Math.abs(i)>=this.radii.z-n))return qi.set(0,0,i).to(r)}}T(Wn,"WGS84",new Wn(Ore,Dre,Fre));class Kre{constructor(e,n,r){T(this,"item",void 0),T(this,"previous",void 0),T(this,"next",void 0),this.item=e,this.previous=n,this.next=r}}class Yre{constructor(){T(this,"head",null),T(this,"tail",null),T(this,"_length",0)}get length(){return this._length}add(e){const n=new Kre(e,this.tail,null);return this.tail?(this.tail.next=n,this.tail=n):(this.head=n,this.tail=n),++this._length,n}remove(e){!e||(e.previous&&e.next?(e.previous.next=e.next,e.next.previous=e.previous):e.previous?(e.previous.next=null,this.tail=e.previous):e.next?(e.next.previous=null,this.head=e.next):(this.head=null,this.tail=null),e.next=null,e.previous=null,--this._length)}splice(e,n){e!==n&&(this.remove(n),this._insert(e,n))}_insert(e,n){const r=e.next;e.next=n,this.tail===e?this.tail=n:r.previous=n,n.next=r,n.previous=e,++this._length}}function Hv(t){return t!=null}class qre{constructor(){T(this,"_list",void 0),T(this,"_sentinel",void 0),T(this,"_trimTiles",void 0),this._list=new Yre,this._sentinel=this._list.add("sentinel"),this._trimTiles=!1}reset(){this._list.splice(this._list.tail,this._sentinel)}touch(e){const n=e._cacheNode;Hv(n)&&this._list.splice(this._sentinel,n)}add(e,n,r){Hv(n._cacheNode)||(n._cacheNode=this._list.add(n),r&&r(e,n))}unloadTile(e,n,r){const i=n._cacheNode;!Hv(i)||(this._list.remove(i),n._cacheNode=void 0,r&&r(e,n))}unloadTiles(e,n){const r=this._trimTiles;this._trimTiles=!1;const i=this._list,s=e.maximumMemoryUsage*1024*1024,o=this._sentinel;let a=i.head;for(;a!==o&&(e.gpuMemoryUsageInBytes>s||r);){const l=a.item;a=a.next,this.unloadTile(e,l,n)}}trim(){this._trimTiles=!0}}function Zre(t,e){Lt(t),Lt(e);const{rtcCenter:n,gltfUpAxis:r}=e,{computedTransform:i,boundingVolume:{center:s}}=t;let o=new $e(i);switch(n&&o.translate(n),r){case"Z":break;case"Y":const g=new $e().rotateX(Math.PI/2);o=o.multiplyRight(g);break;case"X":const y=new $e().rotateY(-Math.PI/2);o=o.multiplyRight(y);break}e.isQuantized&&o.translate(e.quantizedVolumeOffset).scale(e.quantizedVolumeScale);const a=new q(s);e.cartesianModelMatrix=o,e.cartesianOrigin=a;const l=Wn.WGS84.cartesianToCartographic(a,new q),d=Wn.WGS84.eastNorthUpToFixedFrame(a).invert();e.cartographicModelMatrix=d.multiplyRight(o),e.cartographicOrigin=l,e.coordinateSystem||(e.modelMatrix=e.cartographicModelMatrix)}const m3=new q,Wv=new q,f2=new ui([new Ci,new Ci,new Ci,new Ci,new Ci,new Ci]);function eie(t,e){const{cameraDirection:n,cameraUp:r,height:i}=t,{metersPerUnit:s}=t.distanceScales,o=Tp(t,t.center),a=Wn.WGS84.eastNorthUpToFixedFrame(o),l=t.unprojectPosition(t.cameraPosition),f=Wn.WGS84.cartographicToCartesian(l,new q),d=new q(a.transformAsVector(new q(n).scale(s))).normalize(),g=new q(a.transformAsVector(new q(r).scale(s))).normalize();nie(t);const y=t.constructor,{longitude:b,latitude:E,width:S,bearing:M,zoom:C}=t,P=new y({longitude:b,latitude:E,height:i,width:S,bearing:M,zoom:C,pitch:0});return{camera:{position:f,direction:d,up:g},viewport:t,topDownViewport:P,height:i,cullingVolume:f2,frameNumber:e,sseDenominator:1.15}}function tie(t,e,n){if(n===0||t.length<=n)return[t,[]];const r=[],{longitude:i,latitude:s}=e.viewport;for(const[f,d]of t.entries()){const[g,y]=d.header.mbs,b=Math.abs(i-g),E=Math.abs(s-y),S=Math.sqrt(E*E+b*b);r.push([f,S])}const o=r.sort((f,d)=>f[1]-d[1]),a=[];for(let f=0;f<n;f++)a.push(t[o[f][0]]);const l=[];for(let f=n;f<o.length;f++)l.push(t[o[f][0]]);return[a,l]}function nie(t){const e=t.getFrustumPlanes(),n=y3(e.near,t.cameraPosition),r=Tp(t,n),i=Tp(t,t.cameraPosition,Wv);let s=0;f2.planes[s++].fromPointNormal(r,m3.copy(r).subtract(i));for(const o in e){if(o==="near")continue;const a=e[o],l=y3(a,n,Wv),f=Tp(t,l,Wv);f2.planes[s++].fromPointNormal(f,m3.copy(r).subtract(f))}}function y3(t,e,n=new q){const r=t.normal.dot(e);return n.copy(t.normal).scale(t.distance-r).add(e),n}function Tp(t,e,n=new q){const r=t.unprojectPosition(e);return Wn.WGS84.cartographicToCartesian(r,n)}const rie=6378137,iie=6378137,h2=6356752314245179e-9,v3=new q;function sie(t,e){if(t instanceof Kh){const{halfAxes:n}=t,r=aie(n);return Math.log2(h2/(r+e[2]))}else if(t instanceof Jh){const{radius:n}=t;return Math.log2(h2/(n+e[2]))}else if(t.width&&t.height){const{width:n,height:r}=t,i=Math.log2(rie/n),s=Math.log2(iie/r);return(i+s)/2}return 1}function tF(t,e,n){const r=Wn.WGS84.cartographicToCartesian([t.xmax,t.ymax,t.zmax],new q),i=Math.sqrt(Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2)+Math.pow(r[2]-n[2],2));return Math.log2(h2/(i+e[2]))}function oie(t,e,n){const[r,i,s,o]=t;return tF({xmin:r,xmax:s,ymin:i,ymax:o,zmin:0,zmax:0},e,n)}function aie(t){t.getColumn(0,v3);const e=t.getColumn(1),n=t.getColumn(2);return v3.add(e).add(n).len()}const si={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5},ho={ADD:1,REPLACE:2},su={EMPTY:"empty",SCENEGRAPH:"scenegraph",POINTCLOUD:"pointcloud",MESH:"mesh"},Ls={I3S:"I3S",TILES3D:"TILES3D"},Dm={GEOMETRIC_ERROR:"geometricError",MAX_SCREEN_THRESHOLD:"maxScreenThreshold"},lie={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0};function nF(t){return t!=null}const cie=new q,uie=new q,Aie=new q;function Qv(t,e,n){if(Lt(t,"3D Tile: boundingVolume must be defined"),t.box)return fie(t.box,e,n);if(t.region){const[r,i,s,o,a,l]=t.region,f=Wn.WGS84.cartographicToCartesian([ns(r),ns(o),a],uie),d=Wn.WGS84.cartographicToCartesian([ns(s),ns(i),l],Aie),g=new q().addVectors(f,d).multiplyScalar(.5),y=new q().subVectors(f,d).len()/2;return _3([g[0],g[1],g[2],y],new $e)}if(t.sphere)return _3(t.sphere,e,n);throw new Error("3D Tile: boundingVolume must contain a sphere, region, or box")}function fie(t,e,n){const r=new q(t[0],t[1],t[2]);e.transform(r,r);let i=[];if(t.length===10){const f=t.slice(3,6),d=new qf;d.fromArray(t,6);const g=new q([1,0,0]),y=new q([0,1,0]),b=new q([0,0,1]);g.transformByQuaternion(d),g.scale(f[0]),y.transformByQuaternion(d),y.scale(f[1]),b.transformByQuaternion(d),b.scale(f[2]),i=[...g.toArray(),...y.toArray(),...b.toArray()]}else i=[...t.slice(3,6),...t.slice(6,9),...t.slice(9,12)];const s=e.transformAsVector(i.slice(0,3)),o=e.transformAsVector(i.slice(3,6)),a=e.transformAsVector(i.slice(6,9)),l=new On([s[0],s[1],s[2],o[0],o[1],o[2],a[0],a[1],a[2]]);return nF(n)?(n.center=r,n.halfAxes=l,n):new Kh(r,l)}function _3(t,e,n){const r=new q(t[0],t[1],t[2]);e.transform(r,r);const i=e.getScale(cie),s=Math.max(Math.max(i[0],i[1]),i[2]),o=t[3]*s;return nF(n)?(n.center=r,n.radius=o,n):new Jh(r,o)}new q;new q;new $e;new q;new q;new q;function hie(t,e){const n=t*e;return 1-Math.exp(-(n*n))}function die(t,e){if(t.dynamicScreenSpaceError&&t.dynamicScreenSpaceErrorComputedDensity){const n=t.dynamicScreenSpaceErrorComputedDensity,r=t.dynamicScreenSpaceErrorFactor;return hie(e,n)*r}return 0}function pie(t,e,n){const r=t.tileset,i=t.parent&&t.parent.lodMetricValue||t.lodMetricValue,s=n?i:t.lodMetricValue;if(s===0)return 0;const o=Math.max(t._distanceToCamera,1e-7),{height:a,sseDenominator:l}=e,{viewDistanceScale:f}=r.options;let d=s*a*(f||1)/(o*l);return d-=die(r,o),d}const $v=new q,b3=new q,Ko=new q,w3=new q,gie=new q,Xv=new $e,E3=new $e;function mie(t,e){if(t.lodMetricValue===0||isNaN(t.lodMetricValue))return"DIG";const n=2*rF(t,e);return n<2?"OUT":!t.header.children||n<=t.lodMetricValue?"DRAW":t.header.children?"DIG":"OUT"}function rF(t,e){const{topDownViewport:n}=e,r=t.header.mbs[1],i=t.header.mbs[0],s=t.header.mbs[2],o=t.header.mbs[3],a=[...t.boundingVolume.center],l=n.unprojectPosition(n.cameraPosition);Wn.WGS84.cartographicToCartesian(l,$v),b3.copy($v).subtract(a).normalize(),Wn.WGS84.eastNorthUpToFixedFrame(a,Xv),E3.copy(Xv).invert(),Ko.copy($v).transform(E3);const f=Math.sqrt(Ko[0]*Ko[0]+Ko[1]*Ko[1]),d=f*f/Ko[2];w3.copy([Ko[0],Ko[1],d]);const y=w3.transform(Xv).subtract(a).normalize(),E=b3.cross(y).normalize().scale(o).add(a),S=Wn.WGS84.cartesianToCartographic(E),M=n.project([i,r,s]),C=n.project(S);return gie.copy(M).subtract(C).magnitude()}function yie(t){return{assetGltfUpAxis:t.asset&&t.asset.gltfUpAxis||"Y"}}class T3{constructor(e=0){T(this,"_map",new Map),T(this,"_array",void 0),T(this,"_length",void 0),this._array=new Array(e),this._length=e}get length(){return this._length}set length(e){this._length=e,e>this._array.length&&(this._array.length=e)}get values(){return this._array}get(e){return Lt(e<this._array.length),this._array[e]}set(e,n){Lt(e>=0),e>=this.length&&(this.length=e+1),this._map.has(this._array[e])&&this._map.delete(this._array[e]),this._array[e]=n,this._map.set(n,e)}delete(e){const n=this._map.get(e);n>=0&&(this._array.splice(n,1),this._map.delete(e),this.length--)}peek(){return this._array[this._length-1]}push(e){if(!this._map.has(e)){const n=this.length++;this._array[n]=e,this._map.set(e,n)}}pop(){const e=this._array[--this.length];return this._map.delete(e),e}reserve(e){Lt(e>=0),e>this._array.length&&(this._array.length=e)}resize(e){Lt(e>=0),this.length=e}trim(e){e==null&&(e=this.length),this._array.length=e}reset(){this._array=[],this._map=new Map,this._length=0}find(e){return this._map.has(e)}}const vie={loadSiblings:!1,skipLevelOfDetail:!1,maximumScreenSpaceError:2,updateTransforms:!0,onTraversalEnd:()=>{},viewportTraversersMap:{},basePath:""};class Fm{traversalFinished(e){return!0}constructor(e){T(this,"options",void 0),T(this,"root",void 0),T(this,"requestedTiles",void 0),T(this,"selectedTiles",void 0),T(this,"emptyTiles",void 0),T(this,"lastUpdate",new Date().getTime()),T(this,"updateDebounceTime",1e3),T(this,"_traversalStack",void 0),T(this,"_emptyTraversalStack",void 0),T(this,"_frameNumber",void 0),this.options={...vie,...e},this._traversalStack=new T3,this._emptyTraversalStack=new T3,this._frameNumber=null,this.root=null,this.selectedTiles={},this.requestedTiles={},this.emptyTiles={}}traverse(e,n,r){this.root=e,this.options={...this.options,...r},this.reset(),this.updateTile(e,n),this._frameNumber=n.frameNumber,this.executeTraversal(e,n)}reset(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()}executeTraversal(e,n){const r=this._traversalStack;for(e._selectionDepth=1,r.push(e);r.length>0;){const s=r.pop();let o=!1;this.canTraverse(s,n)&&(this.updateChildTiles(s,n),o=this.updateAndPushChildren(s,n,r,s.hasRenderContent?s._selectionDepth+1:s._selectionDepth));const a=s.parent,l=Boolean(!a||a._shouldRefine),f=!o;s.hasRenderContent?s.refine===ho.ADD?(this.loadTile(s,n),this.selectTile(s,n)):s.refine===ho.REPLACE&&(this.loadTile(s,n),f&&this.selectTile(s,n)):(this.emptyTiles[s.id]=s,this.loadTile(s,n),f&&this.selectTile(s,n)),this.touchTile(s,n),s._shouldRefine=o&&l}const i=new Date().getTime();(this.traversalFinished(n)||i-this.lastUpdate>this.updateDebounceTime)&&(this.lastUpdate=i,this.options.onTraversalEnd(n))}updateChildTiles(e,n){const r=e.children;for(const i of r)this.updateTile(i,n);return!0}updateAndPushChildren(e,n,r,i){const{loadSiblings:s,skipLevelOfDetail:o}=this.options,a=e.children;a.sort(this.compareDistanceToCamera.bind(this));const l=e.refine===ho.REPLACE&&e.hasRenderContent&&!o;let f=!1,d=!0;for(const g of a)if(g._selectionDepth=i,g.isVisibleAndInRequestVolume?(r.find(g)&&r.delete(g),r.push(g),f=!0):(l||s)&&(this.loadTile(g,n),this.touchTile(g,n)),l){let y;if(g._inRequestVolume?g.hasRenderContent?y=g.contentAvailable:y=this.executeEmptyTraversal(g,n):y=!1,d=d&&y,!d)return!1}return f||(d=!1),d}updateTile(e,n){this.updateTileVisibility(e,n)}selectTile(e,n){this.shouldSelectTile(e)&&(e._selectedFrame=n.frameNumber,this.selectedTiles[e.id]=e)}loadTile(e,n){this.shouldLoadTile(e)&&(e._requestedFrame=n.frameNumber,e._priority=e._getPriority(),this.requestedTiles[e.id]=e)}touchTile(e,n){e.tileset._cache.touch(e),e._touchedFrame=n.frameNumber}canTraverse(e,n,r=!1,i=!1){return e.hasChildren?e.hasTilesetContent?!e.contentExpired:!i&&!e.isVisibleAndInRequestVolume?!1:this.shouldRefine(e,n,r):!1}shouldLoadTile(e){return e.hasUnloadedContent||e.contentExpired}shouldSelectTile(e){return e.contentAvailable&&!this.options.skipLevelOfDetail}shouldRefine(e,n,r){let i=e._screenSpaceError;return r&&(i=e.getScreenSpaceError(n,!0)),i>this.options.maximumScreenSpaceError}updateTileVisibility(e,n){const r=[];if(this.options.viewportTraversersMap)for(const i in this.options.viewportTraversersMap)this.options.viewportTraversersMap[i]===n.viewport.id&&r.push(i);else r.push(n.viewport.id);e.updateVisibility(n,r)}compareDistanceToCamera(e,n){return e._distanceToCamera-n._distanceToCamera}anyChildrenVisible(e,n){let r=!1;for(const i of e.children)i.updateVisibility(n),r=r||i.isVisibleAndInRequestVolume;return r}executeEmptyTraversal(e,n){let r=!0;const i=this._emptyTraversalStack;for(i.push(e);i.length>0&&r;){const s=i.pop();if(this.updateTile(s,n),s.isVisibleAndInRequestVolume||this.loadTile(s,n),this.touchTile(s,n),!s.hasRenderContent&&this.canTraverse(s,n,!1,!0)){const a=s.children;for(const l of a)i.find(l)&&i.delete(l),i.push(l)}else s.contentAvailable||(r=!1)}return r}}const S3=new q;function _ie(t){return t!=null}class d2{constructor(e,n,r,i=""){T(this,"tileset",void 0),T(this,"header",void 0),T(this,"id",void 0),T(this,"url",void 0),T(this,"parent",void 0),T(this,"refine",void 0),T(this,"type",void 0),T(this,"contentUrl",void 0),T(this,"lodMetricType",void 0),T(this,"lodMetricValue",void 0),T(this,"boundingVolume",void 0),T(this,"content",void 0),T(this,"contentState",void 0),T(this,"gpuMemoryUsageInBytes",void 0),T(this,"children",void 0),T(this,"depth",void 0),T(this,"viewportIds",void 0),T(this,"transform",void 0),T(this,"extensions",void 0),T(this,"userData",void 0),T(this,"computedTransform",void 0),T(this,"hasEmptyContent",void 0),T(this,"hasTilesetContent",void 0),T(this,"traverser",void 0),T(this,"_cacheNode",void 0),T(this,"_frameNumber",void 0),T(this,"_lodJudge",void 0),T(this,"_expireDate",void 0),T(this,"_expiredContent",void 0),T(this,"_shouldRefine",void 0),T(this,"_distanceToCamera",void 0),T(this,"_centerZDepth",void 0),T(this,"_screenSpaceError",void 0),T(this,"_visibilityPlaneMask",void 0),T(this,"_visible",void 0),T(this,"_inRequestVolume",void 0),T(this,"_stackLength",void 0),T(this,"_selectionDepth",void 0),T(this,"_touchedFrame",void 0),T(this,"_visitedFrame",void 0),T(this,"_selectedFrame",void 0),T(this,"_requestedFrame",void 0),T(this,"_priority",void 0),T(this,"_contentBoundingVolume",void 0),T(this,"_viewerRequestVolume",void 0),T(this,"_initialTransform",void 0),this.header=n,this.tileset=e,this.id=i||n.id,this.url=n.url,this.parent=r,this.refine=this._getRefine(n.refine),this.type=n.type,this.contentUrl=n.contentUrl,this.lodMetricType="geometricError",this.lodMetricValue=0,this.boundingVolume=null,this.content=null,this.contentState=si.UNLOADED,this.gpuMemoryUsageInBytes=0,this.children=[],this.hasEmptyContent=!1,this.hasTilesetContent=!1,this.depth=0,this.viewportIds=[],this.userData={},this.extensions=null,this._priority=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._screenSpaceError=0,this._cacheNode=null,this._frameNumber=null,this._cacheNode=null,this.traverser=new Fm({}),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._visible=void 0,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._initialTransform=new $e,this.transform=new $e,this._initializeLodMetric(n),this._initializeTransforms(n),this._initializeBoundingVolumes(n),this._initializeContent(n),this._initializeRenderingState(n),this._lodJudge=null,this._expireDate=null,this._expiredContent=null,Object.seal(this)}destroy(){this.header=null}isDestroyed(){return this.header===null}get selected(){return this._selectedFrame===this.tileset._frameNumber}get isVisible(){return this._visible}get isVisibleAndInRequestVolume(){return this._visible&&this._inRequestVolume}get hasRenderContent(){return!this.hasEmptyContent&&!this.hasTilesetContent}get hasChildren(){return this.children.length>0||this.header.children&&this.header.children.length>0}get contentReady(){return this.contentState===si.READY||this.hasEmptyContent}get contentAvailable(){return Boolean(this.contentReady&&this.hasRenderContent||this._expiredContent&&!this.contentFailed)}get hasUnloadedContent(){return this.hasRenderContent&&this.contentUnloaded}get contentUnloaded(){return this.contentState===si.UNLOADED}get contentExpired(){return this.contentState===si.EXPIRED}get contentFailed(){return this.contentState===si.FAILED}getScreenSpaceError(e,n){switch(this.tileset.type){case Ls.I3S:return rF(this,e);case Ls.TILES3D:return pie(this,e,n);default:throw new Error("Unsupported tileset type")}}unselect(){this._selectedFrame=0}_getPriority(){const e=this.tileset._traverser,{skipLevelOfDetail:n}=e.options,r=this.refine===ho.ADD||n;if(r&&!this.isVisible&&this._visible!==void 0||this.tileset._frameNumber-this._touchedFrame>=1||this.contentState===si.UNLOADED)return-1;const i=this.parent,o=i&&(!r||this._screenSpaceError===0||i.hasTilesetContent)?i._screenSpaceError:this._screenSpaceError,a=e.root?e.root._screenSpaceError:0;return Math.max(a-o,0)}async loadContent(){if(this.hasEmptyContent)return!1;if(this.content)return!0;this.contentExpired&&(this._expireDate=null),this.contentState=si.LOADING;const n=await this.tileset._requestScheduler.scheduleRequest(this.id,this._getPriority.bind(this));if(!n)return this.contentState=si.UNLOADED,!1;try{const r=this.tileset.getTileUrl(this.contentUrl),i=this.tileset.loader,s={...this.tileset.loadOptions,[i.id]:{...this.tileset.loadOptions[i.id],isTileset:this.type==="json",...this._getLoaderSpecificOptions(i.id)}};return this.content=await To(r,i,s),this.tileset.options.contentLoader&&await this.tileset.options.contentLoader(this),this._isTileset()&&this.tileset._initializeTileHeaders(this.content,this),this.contentState=si.READY,this._onContentLoaded(),!0}catch(r){throw this.contentState=si.FAILED,r}finally{n.done()}}unloadContent(){return this.content&&this.content.destroy&&this.content.destroy(),this.content=null,this.header.content&&this.header.content.destroy&&this.header.content.destroy(),this.header.content=null,this.contentState=si.UNLOADED,!0}updateVisibility(e,n){if(this._frameNumber===e.frameNumber)return;const r=this.parent,i=r?r._visibilityPlaneMask:ui.MASK_INDETERMINATE;if(this.tileset._traverser.options.updateTransforms){const s=r?r.computedTransform:this.tileset.modelMatrix;this._updateTransform(s)}this._distanceToCamera=this.distanceToTile(e),this._screenSpaceError=this.getScreenSpaceError(e,!1),this._visibilityPlaneMask=this.visibility(e,i),this._visible=this._visibilityPlaneMask!==ui.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(e),this._frameNumber=e.frameNumber,this.viewportIds=n}visibility(e,n){const{cullingVolume:r}=e,{boundingVolume:i}=this;return r.computeVisibilityWithPlaneMask(i,n)}contentVisibility(){return!0}distanceToTile(e){const n=this.boundingVolume;return Math.sqrt(Math.max(n.distanceSquaredTo(e.camera.position),0))}cameraSpaceZDepth({camera:e}){const n=this.boundingVolume;return S3.subVectors(n.center,e.position),e.direction.dot(S3)}insideViewerRequestVolume(e){const n=this._viewerRequestVolume;return!n||n.distanceSquaredTo(e.camera.position)<=0}updateExpiration(){if(_ie(this._expireDate)&&this.contentReady&&!this.hasEmptyContent){const e=Date.now();Date.lessThan(this._expireDate,e)&&(this.contentState=si.EXPIRED,this._expiredContent=this.content)}}get extras(){return this.header.extras}_initializeLodMetric(e){"lodMetricType"in e?this.lodMetricType=e.lodMetricType:(this.lodMetricType=this.parent&&this.parent.lodMetricType||this.tileset.lodMetricType,console.warn("3D Tile: Required prop lodMetricType is undefined. Using parent lodMetricType")),"lodMetricValue"in e?this.lodMetricValue=e.lodMetricValue:(this.lodMetricValue=this.parent&&this.parent.lodMetricValue||this.tileset.lodMetricValue,console.warn("3D Tile: Required prop lodMetricValue is undefined. Using parent lodMetricValue"))}_initializeTransforms(e){this.transform=e.transform?new $e(e.transform):new $e;const n=this.parent,r=this.tileset,i=n&&n.computedTransform?n.computedTransform.clone():r.modelMatrix.clone();this.computedTransform=new $e(i).multiplyRight(this.transform);const s=n&&n._initialTransform?n._initialTransform.clone():new $e;this._initialTransform=new $e(s).multiplyRight(this.transform)}_initializeBoundingVolumes(e){this._contentBoundingVolume=null,this._viewerRequestVolume=null,this._updateBoundingVolume(e)}_initializeContent(e){this.content={_tileset:this.tileset,_tile:this},this.hasEmptyContent=!0,this.contentState=si.UNLOADED,this.hasTilesetContent=!1,e.contentUrl&&(this.content=null,this.hasEmptyContent=!1)}_initializeRenderingState(e){this.depth=e.level||(this.parent?this.parent.depth+1:0),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._visibilityPlaneMask=ui.MASK_INDETERMINATE,this._visible=void 0,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._frameNumber=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._priority=0}_getRefine(e){return e||this.parent&&this.parent.refine||ho.REPLACE}_isTileset(){return this.contentUrl.indexOf(".json")!==-1}_onContentLoaded(){switch(this.content&&this.content.type){case"vctr":case"geom":this.tileset._traverser.disableSkipLevelOfDetail=!0;break}this._isTileset()&&(this.hasTilesetContent=!0)}_updateBoundingVolume(e){this.boundingVolume=Qv(e.boundingVolume,this.computedTransform,this.boundingVolume);const n=e.content;!n||(n.boundingVolume&&(this._contentBoundingVolume=Qv(n.boundingVolume,this.computedTransform,this._contentBoundingVolume)),e.viewerRequestVolume&&(this._viewerRequestVolume=Qv(e.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)))}_updateTransform(e=new $e){const n=e.clone().multiplyRight(this.transform);n.equals(this.computedTransform)||(this.computedTransform=n,this._updateBoundingVolume(this.header))}_getLoaderSpecificOptions(e){switch(e){case"i3s":return{...this.tileset.options.i3s,tile:this.header,tileset:this.tileset.tileset,isTileHeader:!1};case"3d-tiles":case"cesium-ion":default:return yie(this.tileset.tileset)}}}class bie extends Fm{compareDistanceToCamera(e,n){return n._distanceToCamera===0&&e._distanceToCamera===0?n._centerZDepth-e._centerZDepth:n._distanceToCamera-e._distanceToCamera}updateTileVisibility(e,n){if(super.updateTileVisibility(e,n),!e.isVisibleAndInRequestVolume)return;const r=e.children.length>0;if(e.hasTilesetContent&&r){const o=e.children[0];this.updateTileVisibility(o,n),e._visible=o._visible;return}if(this.meetsScreenSpaceErrorEarly(e,n)){e._visible=!1;return}const i=e.refine===ho.REPLACE,s=e._optimChildrenWithinParent===lie.USE_OPTIMIZATION;if(i&&s&&r&&!this.anyChildrenVisible(e,n)){e._visible=!1;return}}meetsScreenSpaceErrorEarly(e,n){const{parent:r}=e;return!r||r.hasTilesetContent||r.refine!==ho.ADD?!1:!this.shouldRefine(e,n,!0)}}class wie{constructor(){T(this,"frameNumberMap",new Map)}register(e,n){const r=this.frameNumberMap.get(e)||new Map,i=r.get(n)||0;r.set(n,i+1),this.frameNumberMap.set(e,r)}deregister(e,n){const r=this.frameNumberMap.get(e);if(!r)return;const i=r.get(n)||1;r.set(n,i-1)}isZero(e,n){var r;return(((r=this.frameNumberMap.get(e))===null||r===void 0?void 0:r.get(n))||0)===0}}const Jv={REQUESTED:"REQUESTED",COMPLETED:"COMPLETED",ERROR:"ERROR"};class Eie{constructor(){T(this,"_statusMap",void 0),T(this,"pendingTilesRegister",new wie),this._statusMap={}}add(e,n,r,i){if(!this._statusMap[n]){const{frameNumber:s,viewport:{id:o}}=i;this._statusMap[n]={request:e,callback:r,key:n,frameState:i,status:Jv.REQUESTED},this.pendingTilesRegister.register(o,s),e().then(a=>{this._statusMap[n].status=Jv.COMPLETED;const{frameNumber:l,viewport:{id:f}}=this._statusMap[n].frameState;this.pendingTilesRegister.deregister(f,l),this._statusMap[n].callback(a,i)}).catch(a=>{this._statusMap[n].status=Jv.ERROR;const{frameNumber:l,viewport:{id:f}}=this._statusMap[n].frameState;this.pendingTilesRegister.deregister(f,l),r(a)})}}update(e,n){if(this._statusMap[e]){const{frameNumber:r,viewport:{id:i}}=this._statusMap[e].frameState;this.pendingTilesRegister.deregister(i,r);const{frameNumber:s,viewport:{id:o}}=n;this.pendingTilesRegister.register(o,s),this._statusMap[e].frameState=n}}find(e){return this._statusMap[e]}hasPendingTiles(e,n){return!this.pendingTilesRegister.isZero(e,n)}}class Tie extends Fm{traversalFinished(e){return!this._tileManager.hasPendingTiles(e.viewport.id,this._frameNumber||0)}constructor(e){super(e),T(this,"_tileManager",void 0),this._tileManager=new Eie}shouldRefine(e,n){return e._lodJudge=mie(e,n),e._lodJudge==="DIG"}updateChildTiles(e,n){const r=e.header.children||[],i=e.children,s=e.tileset;for(const o of r){const a="".concat(o.id,"-").concat(n.viewport.id),l=i&&i.find(f=>f.id===a);if(l)l&&this.updateTile(l,n);else{let f=()=>this._loadTile(o.id,s);this._tileManager.find(a)?this._tileManager.update(a,n):(s.tileset.nodePages&&(f=()=>s.tileset.nodePagesTile.formTileFromNodePages(o.id)),this._tileManager.add(f,a,g=>this._onTileLoad(g,e,a),n))}}return!1}async _loadTile(e,n){const{loader:r}=n,i=n.getTileUrl("".concat(n.url,"/nodes/").concat(e)),s={...n.loadOptions,i3s:{...n.loadOptions.i3s,isTileHeader:!0,loadContent:!1}};return await To(i,r,s)}_onTileLoad(e,n,r){const i=new d2(n.tileset,e,n,r);n.children.push(i);const s=this._tileManager.find(i.id).frameState;this.updateTile(i,s),this._frameNumber===s.frameNumber&&(this.traversalFinished(s)||new Date().getTime()-this.lastUpdate>this.updateDebounceTime)&&this.executeTraversal(i,s)}}const Sie={description:"",ellipsoid:Wn.WGS84,modelMatrix:new $e,throttleRequests:!0,maxRequests:64,maximumMemoryUsage:32,maximumTilesSelected:0,debounceTime:0,onTileLoad:()=>{},onTileUnload:()=>{},onTileError:()=>{},onTraversalComplete:t=>t,contentLoader:void 0,viewDistanceScale:1,maximumScreenSpaceError:8,loadTiles:!0,updateTransforms:!0,viewportTraversersMap:null,loadOptions:{fetch:{}},attributions:[],basePath:"",i3s:{}},R0="Tiles In Tileset(s)",Kv="Tiles In Memory",x3="Tiles In View",C3="Tiles To Render",P3="Tiles Loaded",Yv="Tiles Loading",M3="Tiles Unloaded",I3="Failed Tile Loads",B3="Points/Vertices",qv="Tile Memory Use";class xie{constructor(e,n){T(this,"options",void 0),T(this,"loadOptions",void 0),T(this,"type",void 0),T(this,"tileset",void 0),T(this,"loader",void 0),T(this,"url",void 0),T(this,"basePath",void 0),T(this,"modelMatrix",void 0),T(this,"ellipsoid",void 0),T(this,"lodMetricType",void 0),T(this,"lodMetricValue",void 0),T(this,"refine",void 0),T(this,"root",void 0),T(this,"roots",void 0),T(this,"asset",void 0),T(this,"description",void 0),T(this,"properties",void 0),T(this,"extras",void 0),T(this,"attributions",void 0),T(this,"credits",void 0),T(this,"stats",void 0),T(this,"traverseCounter",void 0),T(this,"geometricError",void 0),T(this,"selectedTiles",void 0),T(this,"updatePromise",null),T(this,"tilesetInitializationPromise",void 0),T(this,"cartographicCenter",void 0),T(this,"cartesianCenter",void 0),T(this,"zoom",void 0),T(this,"boundingVolume",void 0),T(this,"gpuMemoryUsageInBytes",void 0),T(this,"dynamicScreenSpaceErrorComputedDensity",void 0),T(this,"_traverser",void 0),T(this,"_cache",void 0),T(this,"_requestScheduler",void 0),T(this,"_frameNumber",void 0),T(this,"_queryParamsString",void 0),T(this,"_queryParams",void 0),T(this,"_extensionsUsed",void 0),T(this,"_tiles",void 0),T(this,"_pendingCount",void 0),T(this,"lastUpdatedVieports",void 0),T(this,"_requestedTiles",void 0),T(this,"_emptyTiles",void 0),T(this,"frameStateData",void 0),T(this,"maximumMemoryUsage",void 0),Lt(e),this.options={...Sie,...n},this.tileset=e,this.loader=e.loader,this.type=e.type,this.url=e.url,this.basePath=e.basePath||WL(this.url),this.modelMatrix=this.options.modelMatrix,this.ellipsoid=this.options.ellipsoid,this.lodMetricType=e.lodMetricType,this.lodMetricValue=e.lodMetricValue,this.refine=e.root.refine,this.loadOptions=this.options.loadOptions||{},this.root=null,this.roots={},this.cartographicCenter=null,this.cartesianCenter=null,this.zoom=1,this.boundingVolume=null,this.traverseCounter=0,this.geometricError=0,this._traverser=this._initializeTraverser(),this._cache=new qre,this._requestScheduler=new HL({throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests}),this._frameNumber=0,this._pendingCount=0,this._tiles={},this.selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this.frameStateData={},this.lastUpdatedVieports=null,this._queryParams={},this._queryParamsString="",this.maximumMemoryUsage=this.options.maximumMemoryUsage||32,this.gpuMemoryUsageInBytes=0,this.stats=new Oh({id:this.url}),this._initializeStats(),this._extensionsUsed=void 0,this.dynamicScreenSpaceErrorComputedDensity=0,this.extras=null,this.asset={},this.credits={},this.description=this.options.description||"",this.tilesetInitializationPromise=this._initializeTileSet(e)}destroy(){this._destroy()}isLoaded(){return this._pendingCount===0&&this._frameNumber!==0&&this._requestedTiles.length===0}get tiles(){return Object.values(this._tiles)}get frameNumber(){return this._frameNumber}get queryParams(){return this._queryParamsString||(this._queryParamsString=Cie(this._queryParams)),this._queryParamsString}setProps(e){this.options={...this.options,...e}}setOptions(e){this.options={...this.options,...e}}getTileUrl(e){return e.startsWith("data:")?e:"".concat(e).concat(this.queryParams)}hasExtension(e){return Boolean(this._extensionsUsed&&this._extensionsUsed.indexOf(e)>-1)}update(e=null){this.tilesetInitializationPromise.then(()=>{!e&&this.lastUpdatedVieports?e=this.lastUpdatedVieports:this.lastUpdatedVieports=e,e&&this.doUpdate(e)})}async selectTiles(e=null){return await this.tilesetInitializationPromise,e&&(this.lastUpdatedVieports=e),this.updatePromise||(this.updatePromise=new Promise(n=>{setTimeout(()=>{this.lastUpdatedVieports&&this.doUpdate(this.lastUpdatedVieports),n(this._frameNumber),this.updatePromise=null},this.options.debounceTime)})),this.updatePromise}doUpdate(e){if("loadTiles"in this.options&&!this.options.loadTiles||this.traverseCounter>0)return;const n=e instanceof Array?e:[e];this._cache.reset(),this._frameNumber++,this.traverseCounter=n.length;const r=[];for(const i of n){const s=i.id;this._needTraverse(s)?r.push(s):this.traverseCounter--}for(const i of n){const s=i.id;if(this.roots[s]||(this.roots[s]=this._initializeTileHeaders(this.tileset,null)),!r.includes(s))continue;const o=eie(i,this._frameNumber);this._traverser.traverse(this.roots[s],o,this.options)}}_needTraverse(e){let n=e;return this.options.viewportTraversersMap&&(n=this.options.viewportTraversersMap[e]),n===e}_onTraversalEnd(e){const n=e.viewport.id;this.frameStateData[n]||(this.frameStateData[n]={selectedTiles:[],_requestedTiles:[],_emptyTiles:[]});const r=this.frameStateData[n],i=Object.values(this._traverser.selectedTiles),[s,o]=tie(i,e,this.options.maximumTilesSelected);r.selectedTiles=s;for(const a of o)a.unselect();r._requestedTiles=Object.values(this._traverser.requestedTiles),r._emptyTiles=Object.values(this._traverser.emptyTiles),this.traverseCounter--,!(this.traverseCounter>0)&&this._updateTiles()}_updateTiles(){this.selectedTiles=[],this._requestedTiles=[],this._emptyTiles=[];for(const e in this.frameStateData){const n=this.frameStateData[e];this.selectedTiles=this.selectedTiles.concat(n.selectedTiles),this._requestedTiles=this._requestedTiles.concat(n._requestedTiles),this._emptyTiles=this._emptyTiles.concat(n._emptyTiles)}this.selectedTiles=this.options.onTraversalComplete(this.selectedTiles);for(const e of this.selectedTiles)this._tiles[e.id]=e;this._loadTiles(),this._unloadTiles(),this._updateStats()}_tilesChanged(e,n){if(e.length!==n.length)return!0;const r=new Set(e.map(o=>o.id)),i=new Set(n.map(o=>o.id));let s=e.filter(o=>!i.has(o.id)).length>0;return s=s||n.filter(o=>!r.has(o.id)).length>0,s}_loadTiles(){for(const e of this._requestedTiles)e.contentUnloaded&&this._loadTile(e)}_unloadTiles(){this._cache.unloadTiles(this,(e,n)=>e._unloadTile(n))}_updateStats(){let e=0,n=0;for(const r of this.selectedTiles)r.contentAvailable&&r.content&&(e++,r.content.pointCount?n+=r.content.pointCount:n+=r.content.vertexCount);this.stats.get(x3).count=this.selectedTiles.length,this.stats.get(C3).count=e,this.stats.get(B3).count=n}async _initializeTileSet(e){this.type===Ls.I3S&&(this.calculateViewPropsI3S(),e.root=await e.root),this.root=this._initializeTileHeaders(e,null),this.type===Ls.TILES3D&&(this._initializeTiles3DTileset(e),this.calculateViewPropsTiles3D()),this.type===Ls.I3S&&this._initializeI3STileset()}calculateViewPropsI3S(){var e;const n=this.tileset.fullExtent;if(n){const{xmin:i,xmax:s,ymin:o,ymax:a,zmin:l,zmax:f}=n;this.cartographicCenter=new q(i+(s-i)/2,o+(a-o)/2,l+(f-l)/2),this.cartesianCenter=Wn.WGS84.cartographicToCartesian(this.cartographicCenter,new q),this.zoom=tF(n,this.cartographicCenter,this.cartesianCenter);return}const r=(e=this.tileset.store)===null||e===void 0?void 0:e.extent;if(r){const[i,s,o,a]=r;this.cartographicCenter=new q(i+(o-i)/2,s+(a-s)/2,0),this.cartesianCenter=Wn.WGS84.cartographicToCartesian(this.cartographicCenter,new q),this.zoom=oie(r,this.cartographicCenter,this.cartesianCenter);return}console.warn("Extent is not defined in the tileset header"),this.cartographicCenter=new q,this.zoom=1}calculateViewPropsTiles3D(){const e=this.root;Lt(e);const{center:n}=e.boundingVolume;if(!n){console.warn("center was not pre-calculated for the root tile"),this.cartographicCenter=new q,this.zoom=1;return}this.cartographicCenter=Wn.WGS84.cartesianToCartographic(n,new q),this.cartesianCenter=n,this.zoom=sie(e.boundingVolume,this.cartographicCenter)}_initializeStats(){this.stats.get(R0),this.stats.get(Yv),this.stats.get(Kv),this.stats.get(x3),this.stats.get(C3),this.stats.get(P3),this.stats.get(M3),this.stats.get(I3),this.stats.get(B3,"memory"),this.stats.get(qv,"memory")}_initializeTileHeaders(e,n){const r=new d2(this,e.root,n);if(n&&(n.children.push(r),r.depth=n.depth+1),this.type===Ls.TILES3D){const i=[];for(i.push(r);i.length>0;){const s=i.pop();this.stats.get(R0).incrementCount();const o=s.header.children||[];for(const a of o){const l=new d2(this,a,s);s.children.push(l),l.depth=s.depth+1,i.push(l)}}}return r}_initializeTraverser(){let e;switch(this.type){case Ls.TILES3D:e=bie;break;case Ls.I3S:e=Tie;break;default:e=Fm}return new e({basePath:this.basePath,onTraversalEnd:this._onTraversalEnd.bind(this)})}_destroyTileHeaders(e){this._destroySubtree(e)}async _loadTile(e){let n;try{this._onStartTileLoading(),n=await e.loadContent()}catch(r){this._onTileLoadError(e,r)}finally{this._onEndTileLoading(),this._onTileLoad(e,n)}}_onTileLoadError(e,n){this.stats.get(I3).incrementCount();const r=n.message||n.toString(),i=e.url;console.error("A 3D tile failed to load: ".concat(e.url," ").concat(r)),this.options.onTileError(e,r,i)}_onTileLoad(e,n){if(!!n){if(this.type===Ls.I3S){var r,i;const s=((r=this.tileset)===null||r===void 0||(i=r.nodePagesTile)===null||i===void 0?void 0:i.nodesInNodePages)||0;this.stats.get(R0).reset(),this.stats.get(R0).addCount(s)}e&&e.content&&Zre(e,e.content),this._addTileToCache(e),this.options.onTileLoad(e)}}_onStartTileLoading(){this._pendingCount++,this.stats.get(Yv).incrementCount()}_onEndTileLoading(){this._pendingCount--,this.stats.get(Yv).decrementCount()}_addTileToCache(e){this._cache.add(this,e,n=>n._updateCacheStats(e))}_updateCacheStats(e){this.stats.get(P3).incrementCount(),this.stats.get(Kv).incrementCount(),this.gpuMemoryUsageInBytes+=e.content.byteLength||0,this.stats.get(qv).count=this.gpuMemoryUsageInBytes}_unloadTile(e){this.gpuMemoryUsageInBytes-=e.content&&e.content.byteLength||0,this.stats.get(Kv).decrementCount(),this.stats.get(M3).incrementCount(),this.stats.get(qv).count=this.gpuMemoryUsageInBytes,this.options.onTileUnload(e),e.unloadContent()}_destroy(){const e=[];for(this.root&&e.push(this.root);e.length>0;){const n=e.pop();for(const r of n.children)e.push(r);this._destroyTile(n)}this.root=null}_destroySubtree(e){const n=e,r=[];for(r.push(n);r.length>0;){e=r.pop();for(const i of e.children)r.push(i);e!==n&&this._destroyTile(e)}n.children=[]}_destroyTile(e){this._cache.unloadTile(this,e),this._unloadTile(e),e.destroy()}_initializeTiles3DTileset(e){if(this.asset=e.asset,!this.asset)throw new Error("Tileset must have an asset property.");if(this.asset.version!=="0.0"&&this.asset.version!=="1.0")throw new Error("The tileset must be 3D Tiles version 0.0 or 1.0.");"tilesetVersion"in this.asset&&(this._queryParams.v=this.asset.tilesetVersion),this.credits={attributions:this.options.attributions||[]},this.description=this.options.description||"",this.properties=e.properties,this.geometricError=e.geometricError,this._extensionsUsed=e.extensionsUsed,this.extras=e.extras}_initializeI3STileset(){this.loadOptions.i3s&&"token"in this.loadOptions.i3s&&(this._queryParams.token=this.loadOptions.i3s.token)}}function Cie(t){const e=[];for(const n of Object.keys(t))e.push("".concat(n,"=").concat(t[n]));switch(e.length){case 0:return"";case 1:return"?".concat(e[0]);default:return"?".concat(e.join("&"))}}const iF="3.2.6",VA={COMPOSITE:"cmpt",POINT_CLOUD:"pnts",BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",GEOMETRY:"geom",VECTOR:"vect",GLTF:"glTF"};function sF(t,e,n){Lt(t instanceof ArrayBuffer);const r=new TextDecoder("utf8"),i=new Uint8Array(t,e,n);return r.decode(i)}function Pie(t,e=0){const n=new DataView(t);return"".concat(String.fromCharCode(n.getUint8(e+0))).concat(String.fromCharCode(n.getUint8(e+1))).concat(String.fromCharCode(n.getUint8(e+2))).concat(String.fromCharCode(n.getUint8(e+3)))}const Mie={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},wn={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130},_t={...Mie,...wn},Zv={[wn.DOUBLE]:Float64Array,[wn.FLOAT]:Float32Array,[wn.UNSIGNED_SHORT]:Uint16Array,[wn.UNSIGNED_INT]:Uint32Array,[wn.UNSIGNED_BYTE]:Uint8Array,[wn.BYTE]:Int8Array,[wn.SHORT]:Int16Array,[wn.INT]:Int32Array},Iie={DOUBLE:wn.DOUBLE,FLOAT:wn.FLOAT,UNSIGNED_SHORT:wn.UNSIGNED_SHORT,UNSIGNED_INT:wn.UNSIGNED_INT,UNSIGNED_BYTE:wn.UNSIGNED_BYTE,BYTE:wn.BYTE,SHORT:wn.SHORT,INT:wn.INT},e_="Failed to convert GL type";class Us{static fromTypedArray(e){e=ArrayBuffer.isView(e)?e.constructor:e;for(const n in Zv)if(Zv[n]===e)return n;throw new Error(e_)}static fromName(e){const n=Iie[e];if(!n)throw new Error(e_);return n}static getArrayType(e){switch(e){case wn.UNSIGNED_SHORT_5_6_5:case wn.UNSIGNED_SHORT_4_4_4_4:case wn.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;default:const n=Zv[e];if(!n)throw new Error(e_);return n}}static getByteSize(e){return Us.getArrayType(e).BYTES_PER_ELEMENT}static validate(e){return Boolean(Us.getArrayType(e))}static createTypedArray(e,n,r=0,i){i===void 0&&(i=(n.byteLength-r)/Us.getByteSize(e));const s=Us.getArrayType(e);return new s(n,r,i)}}function Bie(t,e){if(!t)throw new Error("math.gl assertion failed. ".concat(e))}function Lie(t,e=[0,0,0]){const n=t>>11&31,r=t>>5&63,i=t&31;return e[0]=n<<3,e[1]=r<<2,e[2]=i<<3,e}new lw;new q;new lw;new lw;function L3(t,e=255){return dn(t,0,e)/e*2-1}function R3(t){return t<0?-1:1}function Rie(t,e,n,r){if(Bie(r),t<0||t>n||e<0||e>n)throw new Error("x and y must be unsigned normalized integers between 0 and ".concat(n));if(r.x=L3(t,n),r.y=L3(e,n),r.z=1-(Math.abs(r.x)+Math.abs(r.y)),r.z<0){const i=r.x;r.x=(1-Math.abs(r.y))*R3(i),r.y=(1-Math.abs(i))*R3(r.y)}return r.normalize()}function Oie(t,e,n){return Rie(t,e,255,n)}class tE{constructor(e,n){T(this,"json",void 0),T(this,"buffer",void 0),T(this,"featuresLength",0),T(this,"_cachedTypedArrays",{}),this.json=e,this.buffer=n}getExtension(e){return this.json.extensions&&this.json.extensions[e]}hasProperty(e){return Boolean(this.json[e])}getGlobalProperty(e,n=_t.UNSIGNED_INT,r=1){const i=this.json[e];return i&&Number.isFinite(i.byteOffset)?this._getTypedArrayFromBinary(e,n,r,1,i.byteOffset):i}getPropertyArray(e,n,r){const i=this.json[e];return i&&Number.isFinite(i.byteOffset)?("componentType"in i&&(n=Us.fromName(i.componentType)),this._getTypedArrayFromBinary(e,n,r,this.featuresLength,i.byteOffset)):this._getTypedArrayFromArray(e,n,i)}getProperty(e,n,r,i,s){const o=this.json[e];if(!o)return o;const a=this.getPropertyArray(e,n,r);if(r===1)return a[i];for(let l=0;l<r;++l)s[l]=a[r*i+l];return s}_getTypedArrayFromBinary(e,n,r,i,s){const o=this._cachedTypedArrays;let a=o[e];return a||(a=Us.createTypedArray(n,this.buffer.buffer,this.buffer.byteOffset+s,i*r),o[e]=a),a}_getTypedArrayFromArray(e,n,r){const i=this._cachedTypedArrays;let s=i[e];return s||(s=Us.createTypedArray(n,r),i[e]=s),s}}const Die={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Fie={SCALAR:(t,e)=>t[e],VEC2:(t,e)=>[t[2*e+0],t[2*e+1]],VEC3:(t,e)=>[t[3*e+0],t[3*e+1],t[3*e+2]],VEC4:(t,e)=>[t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]],MAT2:(t,e)=>[t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]],MAT3:(t,e)=>[t[9*e+0],t[9*e+1],t[9*e+2],t[9*e+3],t[9*e+4],t[9*e+5],t[9*e+6],t[9*e+7],t[9*e+8]],MAT4:(t,e)=>[t[16*e+0],t[16*e+1],t[16*e+2],t[16*e+3],t[16*e+4],t[16*e+5],t[16*e+6],t[16*e+7],t[16*e+8],t[16*e+9],t[16*e+10],t[16*e+11],t[16*e+12],t[16*e+13],t[16*e+14],t[16*e+15]]},kie={SCALAR:(t,e,n)=>{e[n]=t},VEC2:(t,e,n)=>{e[2*n+0]=t[0],e[2*n+1]=t[1]},VEC3:(t,e,n)=>{e[3*n+0]=t[0],e[3*n+1]=t[1],e[3*n+2]=t[2]},VEC4:(t,e,n)=>{e[4*n+0]=t[0],e[4*n+1]=t[1],e[4*n+2]=t[2],e[4*n+3]=t[3]},MAT2:(t,e,n)=>{e[4*n+0]=t[0],e[4*n+1]=t[1],e[4*n+2]=t[2],e[4*n+3]=t[3]},MAT3:(t,e,n)=>{e[9*n+0]=t[0],e[9*n+1]=t[1],e[9*n+2]=t[2],e[9*n+3]=t[3],e[9*n+4]=t[4],e[9*n+5]=t[5],e[9*n+6]=t[6],e[9*n+7]=t[7],e[9*n+8]=t[8],e[9*n+9]=t[9]},MAT4:(t,e,n)=>{e[16*n+0]=t[0],e[16*n+1]=t[1],e[16*n+2]=t[2],e[16*n+3]=t[3],e[16*n+4]=t[4],e[16*n+5]=t[5],e[16*n+6]=t[6],e[16*n+7]=t[7],e[16*n+8]=t[8],e[16*n+9]=t[9],e[16*n+10]=t[10],e[16*n+11]=t[11],e[16*n+12]=t[12],e[16*n+13]=t[13],e[16*n+14]=t[14],e[16*n+15]=t[15]}};function Nie(t,e,n,r){const{componentType:i}=t;Lt(t.componentType);const s=typeof i=="string"?Us.fromName(i):i,o=Die[t.type],a=Fie[t.type],l=kie[t.type];return n+=t.byteOffset,{values:Us.createTypedArray(s,e,n,o*r),type:s,size:o,unpacker:a,packer:l}}const ks=t=>t!==void 0;function Uie(t,e,n){if(!e)return null;let r=t.getExtension("3DTILES_batch_table_hierarchy");const i=e.HIERARCHY;return i&&(console.warn("3D Tile Parser: HIERARCHY is deprecated. Use 3DTILES_batch_table_hierarchy."),e.extensions=e.extensions||{},e.extensions["3DTILES_batch_table_hierarchy"]=i,r=i),r?Gie(r,n):null}function Gie(t,e){let n,r,i;const s=t.instancesLength,o=t.classes;let a=t.classIds,l=t.parentCounts,f=t.parentIds,d=s;ks(a.byteOffset)&&(a.componentType=defaultValue(a.componentType,GL.UNSIGNED_SHORT),a.type=AttributeType.SCALAR,i=getBinaryAccessor(a),a=i.createArrayBufferView(e.buffer,e.byteOffset+a.byteOffset,s));let g;if(ks(l))for(ks(l.byteOffset)&&(l.componentType=defaultValue(l.componentType,GL.UNSIGNED_SHORT),l.type=AttributeType.SCALAR,i=getBinaryAccessor(l),l=i.createArrayBufferView(e.buffer,e.byteOffset+l.byteOffset,s)),g=new Uint16Array(s),d=0,n=0;n<s;++n)g[n]=d,d+=l[n];ks(f)&&ks(f.byteOffset)&&(f.componentType=defaultValue(f.componentType,GL.UNSIGNED_SHORT),f.type=AttributeType.SCALAR,i=getBinaryAccessor(f),f=i.createArrayBufferView(e.buffer,e.byteOffset+f.byteOffset,d));const y=o.length;for(n=0;n<y;++n){const M=o[n].length,C=o[n].instances,P=getBinaryProperties(M,C,e);o[n].instances=combine(P,C)}const b=new Array(y).fill(0),E=new Uint16Array(s);for(n=0;n<s;++n)r=a[n],E[n]=b[r],++b[r];const S={classes:o,classIds:a,classIndexes:E,parentCounts:l,parentIndexes:g,parentIds:f};return jie(S),S}function jA(t,e,n){if(!t)return;const r=t.parentCounts;return t.parentIds?n(t,e):r>0?zie(t,e,n):Vie(t,e,n)}function zie(t,e,n){const r=t.classIds,i=t.parentCounts,s=t.parentIds,o=t.parentIndexes,a=r.length,l=scratchVisited;l.length=Math.max(l.length,a);const f=++marker,d=scratchStack;for(d.length=0,d.push(e);d.length>0;){if(e=d.pop(),l[e]===f)continue;l[e]=f;const g=n(t,e);if(ks(g))return g;const y=i[e],b=o[e];for(let E=0;E<y;++E){const S=s[b+E];S!==e&&d.push(S)}}return null}function Vie(t,e,n){let r=!0;for(;r;){const i=n(t,e);if(ks(i))return i;const s=t.parentIds[e];r=s!==e,e=s}throw new Error("traverseHierarchySingleParent")}function jie(t){const n=t.classIds.length;for(let r=0;r<n;++r)oF(t,r,stack)}function oF(t,e,n){const r=t.parentCounts,i=t.parentIds,s=t.parentIndexes,a=t.classIds.length;if(!ks(i))return;assert(e<a,"Parent index ".concat(e," exceeds the total number of instances: ").concat(a)),assert(n.indexOf(e)===-1,"Circular dependency detected in the batch table hierarchy."),n.push(e);const l=ks(r)?r[e]:1,f=ks(r)?s[e]:e;for(let d=0;d<l;++d){const g=i[f+d];g!==e&&oF(t,g,n)}n.pop(e)}function Ur(t){return t!=null}const O0=(t,e)=>t,Hie={HIERARCHY:!0,extensions:!0,extras:!0};class aF{constructor(e,n,r,i={}){var s;T(this,"json",void 0),T(this,"binary",void 0),T(this,"featureCount",void 0),T(this,"_extensions",void 0),T(this,"_properties",void 0),T(this,"_binaryProperties",void 0),T(this,"_hierarchy",void 0),Lt(r>=0),this.json=e||{},this.binary=n,this.featureCount=r,this._extensions=((s=this.json)===null||s===void 0?void 0:s.extensions)||{},this._properties={};for(const o in this.json)Hie[o]||(this._properties[o]=this.json[o]);this._binaryProperties=this._initializeBinaryProperties(),i["3DTILES_batch_table_hierarchy"]&&(this._hierarchy=Uie(this,this.json,this.binary))}getExtension(e){return this.json&&this.json.extensions&&this.json.extensions[e]}memorySizeInBytes(){return 0}isClass(e,n){if(this._checkBatchId(e),Lt(typeof n=="string",n),this._hierarchy){const r=jA(this._hierarchy,e,(i,s)=>{const o=i.classIds[s];return i.classes[o].name===n});return Ur(r)}return!1}isExactClass(e,n){return Lt(typeof n=="string",n),this.getExactClassName(e)===n}getExactClassName(e){if(this._checkBatchId(e),this._hierarchy){const n=this._hierarchy.classIds[e];return this._hierarchy.classes[n].name}}hasProperty(e,n){return this._checkBatchId(e),Lt(typeof n=="string",n),Ur(this._properties[n])||this._hasPropertyInHierarchy(e,n)}getPropertyNames(e,n){this._checkBatchId(e),n=Ur(n)?n:[],n.length=0;const r=Object.keys(this._properties);return n.push(...r),this._hierarchy&&this._getPropertyNamesInHierarchy(e,n),n}getProperty(e,n){if(this._checkBatchId(e),Lt(typeof n=="string",n),this._binaryProperties){const i=this._binaryProperties[n];if(Ur(i))return this._getBinaryProperty(i,e)}const r=this._properties[n];if(Ur(r))return O0(r[e]);if(this._hierarchy){const i=this._getHierarchyProperty(e,n);if(Ur(i))return i}}setProperty(e,n,r){const i=this.featureCount;if(this._checkBatchId(e),Lt(typeof n=="string",n),this._binaryProperties){const o=this._binaryProperties[n];if(o){this._setBinaryProperty(o,e,r);return}}if(this._hierarchy&&this._setHierarchyProperty(this,e,n,r))return;let s=this._properties[n];Ur(s)||(this._properties[n]=new Array(i),s=this._properties[n]),s[e]=O0(r)}_checkBatchId(e){if(!(e>=0&&e<this.featureCount))throw new Error("batchId not in range [0, featureCount - 1].")}_getBinaryProperty(e,n){return e.unpack(e.typedArray,n)}_setBinaryProperty(e,n,r){e.pack(r,e.typedArray,n)}_initializeBinaryProperties(){let e=null;for(const n in this._properties){const r=this._properties[n],i=this._initializeBinaryProperty(n,r);i&&(e=e||{},e[n]=i)}return e}_initializeBinaryProperty(e,n){if("byteOffset"in n){const r=n;Lt(this.binary,"Property ".concat(e," requires a batch table binary.")),Lt(r.type,"Property ".concat(e," requires a type."));const i=Nie(r,this.binary.buffer,this.binary.byteOffset|0,this.featureCount);return{typedArray:i.values,componentCount:i.size,unpack:i.unpacker,pack:i.packer}}return null}_hasPropertyInHierarchy(e,n){if(!this._hierarchy)return!1;const r=jA(this._hierarchy,e,(i,s)=>{const o=i.classIds[s],a=i.classes[o].instances;return Ur(a[n])});return Ur(r)}_getPropertyNamesInHierarchy(e,n){jA(this._hierarchy,e,(r,i)=>{const s=r.classIds[i],o=r.classes[s].instances;for(const a in o)o.hasOwnProperty(a)&&n.indexOf(a)===-1&&n.push(a)})}_getHierarchyProperty(e,n){return jA(this._hierarchy,e,(r,i)=>{const s=r.classIds[i],o=r.classes[s],a=r.classIndexes[i],l=o.instances[n];return Ur(l)?Ur(l.typedArray)?this._getBinaryProperty(l,a):O0(l[a]):null})}_setHierarchyProperty(e,n,r,i){const s=jA(this._hierarchy,n,(o,a)=>{const l=o.classIds[a],f=o.classes[l],d=o.classIndexes[a],g=f.instances[r];return Ur(g)?(Lt(a===n,'Inherited property "'.concat(r,'" is read-only.')),Ur(g.typedArray)?this._setBinaryProperty(g,d,i):g[d]=O0(i),!0):!1});return Ur(s)}}const t_=4;function km(t,e,n=0){const r=new DataView(e);if(t.magic=r.getUint32(n,!0),n+=t_,t.version=r.getUint32(n,!0),n+=t_,t.byteLength=r.getUint32(n,!0),n+=t_,t.version!==1)throw new Error("3D Tile Version ".concat(t.version," not supported"));return n}const hc=4,O3="b3dm tile in legacy format.";function nE(t,e,n){const r=new DataView(e);let i;t.header=t.header||{};let s=r.getUint32(n,!0);n+=hc;let o=r.getUint32(n,!0);n+=hc;let a=r.getUint32(n,!0);n+=hc;let l=r.getUint32(n,!0);return n+=hc,a>=570425344?(n-=hc*2,i=s,a=o,l=0,s=0,o=0,console.warn(O3)):l>=570425344&&(n-=hc,i=a,a=s,l=o,s=0,o=0,console.warn(O3)),t.header.featureTableJsonByteLength=s,t.header.featureTableBinaryByteLength=o,t.header.batchTableJsonByteLength=a,t.header.batchTableBinaryByteLength=l,t.header.batchLength=i,n}function rE(t,e,n,r){return n=Wie(t,e,n),n=Qie(t,e,n),n}function Wie(t,e,n,r){const{featureTableJsonByteLength:i,featureTableBinaryByteLength:s,batchLength:o}=t.header;if(t.featureTableJson={BATCH_LENGTH:o||0},i>0){const a=sF(e,n,i);t.featureTableJson=JSON.parse(a)}return n+=i,t.featureTableBinary=new Uint8Array(e,n,s),n+=s,n}function Qie(t,e,n,r){const{batchTableJsonByteLength:i,batchTableBinaryByteLength:s}=t.header;if(i>0){const o=sF(e,n,i);t.batchTableJson=JSON.parse(o),n+=i,s>0&&(t.batchTableBinary=new Uint8Array(e,n,s),t.batchTableBinary=new Uint8Array(t.batchTableBinary),n+=s)}return n}function lF(t,e,n){if(!e&&(!t||!t.batchIds||!n))return null;const{batchIds:r,isRGB565:i,pointCount:s}=t;if(r&&n){const o=new Uint8ClampedArray(s*3);for(let a=0;a<s;a++){const l=r[a],d=n.getProperty(l,"dimensions").map(g=>g*255);o[a*3]=d[0],o[a*3+1]=d[1],o[a*3+2]=d[2]}return{type:_t.UNSIGNED_BYTE,value:o,size:3,normalized:!0}}if(i){const o=new Uint8ClampedArray(s*3);for(let a=0;a<s;a++){const l=Lie(e[a]);o[a*3]=l[0],o[a*3+1]=l[1],o[a*3+2]=l[2]}return{type:_t.UNSIGNED_BYTE,value:o,size:3,normalized:!0}}return e&&e.length===s*3?{type:_t.UNSIGNED_BYTE,value:e,size:3,normalized:!0}:{type:_t.UNSIGNED_BYTE,value:e,size:4,normalized:!0}}const D3=new q;function $ie(t,e){if(!e)return null;if(t.isOctEncoded16P){const n=new Float32Array(t.pointsLength*3);for(let r=0;r<t.pointsLength;r++)Oie(e[r*2],e[r*2+1],D3),D3.toArray(n,r*3);return{type:_t.FLOAT,size:2,value:n}}return{type:_t.FLOAT,size:2,value:e}}function Xie(t,e,n){return t.isQuantized?n["3d-tiles"]&&n["3d-tiles"].decodeQuantizedPositions?(t.isQuantized=!1,Jie(t,e)):{type:_t.UNSIGNED_SHORT,value:e,size:3,normalized:!0}:e}function Jie(t,e){const n=new q,r=new Float32Array(t.pointCount*3);for(let i=0;i<t.pointCount;i++)n.set(e[i*3],e[i*3+1],e[i*3+2]).scale(1/t.quantizedRange).multiply(t.quantizedVolumeScale).add(t.quantizedVolumeOffset).toArray(r,i*3);return r}async function Kie(t,e,n,r,i){n=km(t,e,n),n=nE(t,e,n),n=rE(t,e,n),Yie(t);const{featureTable:s,batchTable:o}=qie(t);return await rse(t,s,o,r,i),Zie(t,s,r),ese(t,s,o),tse(t,s),n}function Yie(t){t.attributes={positions:null,colors:null,normals:null,batchIds:null},t.isQuantized=!1,t.isTranslucent=!1,t.isRGB565=!1,t.isOctEncoded16P=!1}function qie(t){const e=new tE(t.featureTableJson,t.featureTableBinary),n=e.getGlobalProperty("POINTS_LENGTH");if(!Number.isFinite(n))throw new Error("POINTS_LENGTH must be defined");e.featuresLength=n,t.featuresLength=n,t.pointsLength=n,t.pointCount=n,t.rtcCenter=e.getGlobalProperty("RTC_CENTER",_t.FLOAT,3);const r=nse(t,e);return{featureTable:e,batchTable:r}}function Zie(t,e,n){if(!t.attributes.positions){if(e.hasProperty("POSITION"))t.attributes.positions=e.getPropertyArray("POSITION",_t.FLOAT,3);else if(e.hasProperty("POSITION_QUANTIZED")){const r=e.getPropertyArray("POSITION_QUANTIZED",_t.UNSIGNED_SHORT,3);if(t.isQuantized=!0,t.quantizedRange=(1<<16)-1,t.quantizedVolumeScale=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",_t.FLOAT,3),!t.quantizedVolumeScale)throw new Error("QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");if(t.quantizedVolumeOffset=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",_t.FLOAT,3),!t.quantizedVolumeOffset)throw new Error("QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");t.attributes.positions=Xie(t,r,n)}}if(!t.attributes.positions)throw new Error("Either POSITION or POSITION_QUANTIZED must be defined.")}function ese(t,e,n){if(!t.attributes.colors){let r=null;e.hasProperty("RGBA")?(r=e.getPropertyArray("RGBA",_t.UNSIGNED_BYTE,4),t.isTranslucent=!0):e.hasProperty("RGB")?r=e.getPropertyArray("RGB",_t.UNSIGNED_BYTE,3):e.hasProperty("RGB565")&&(r=e.getPropertyArray("RGB565",_t.UNSIGNED_SHORT,1),t.isRGB565=!0),t.attributes.colors=lF(t,r,n)}e.hasProperty("CONSTANT_RGBA")&&(t.constantRGBA=e.getGlobalProperty("CONSTANT_RGBA",_t.UNSIGNED_BYTE,4))}function tse(t,e){if(!t.attributes.normals){let n=null;e.hasProperty("NORMAL")?n=e.getPropertyArray("NORMAL",_t.FLOAT,3):e.hasProperty("NORMAL_OCT16P")&&(n=e.getPropertyArray("NORMAL_OCT16P",_t.UNSIGNED_BYTE,2),t.isOctEncoded16P=!0),t.attributes.normals=$ie(t,n)}}function nse(t,e){let n=null;if(!t.batchIds&&e.hasProperty("BATCH_ID")&&(t.batchIds=e.getPropertyArray("BATCH_ID",_t.UNSIGNED_SHORT,1),t.batchIds)){const r=e.getGlobalProperty("BATCH_LENGTH");if(!r)throw new Error("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");const{batchTableJson:i,batchTableBinary:s}=t;n=new aF(i,s,r)}return n}async function rse(t,e,n,r,i){let s,o,a;const l=t.batchTableJson&&t.batchTableJson.extensions&&t.batchTableJson.extensions["3DTILES_draco_point_compression"];l&&(a=l.properties);const f=e.getExtension("3DTILES_draco_point_compression");if(f){o=f.properties;const g=f.byteOffset,y=f.byteLength;if(!o||!Number.isFinite(g)||!y)throw new Error("Draco properties, byteOffset, and byteLength must be defined");s=t.featureTableBinary.slice(g,g+y),t.hasPositions=Number.isFinite(o.POSITION),t.hasColors=Number.isFinite(o.RGB)||Number.isFinite(o.RGBA),t.hasNormals=Number.isFinite(o.NORMAL),t.hasBatchIds=Number.isFinite(o.BATCH_ID),t.isTranslucent=Number.isFinite(o.RGBA)}if(!s)return!0;const d={buffer:s,properties:{...o,...a},featureTableProperties:o,batchTableProperties:a,dequantizeInShader:!1};return await ise(t,d,r,i)}async function ise(t,e,n,r){const{parse:i}=r,s={...n,draco:{...n.draco,extraAttributes:e.batchTableProperties||{}}};delete s["3d-tiles"];const o=await i(e.buffer,JD,s),a=o.attributes.POSITION&&o.attributes.POSITION.value,l=o.attributes.COLOR_0&&o.attributes.COLOR_0.value,f=o.attributes.NORMAL&&o.attributes.NORMAL.value,d=o.attributes.BATCH_ID&&o.attributes.BATCH_ID.value,g=a&&o.attributes.POSITION.value.quantization,y=f&&o.attributes.NORMAL.value.quantization;if(g){const E=o.POSITION.data.quantization,S=E.range;t.quantizedVolumeScale=new q(S,S,S),t.quantizedVolumeOffset=new q(E.minValues),t.quantizedRange=(1<<E.quantizationBits)-1,t.isQuantizedDraco=!0}y&&(t.octEncodedRange=(1<<o.NORMAL.data.quantization.quantizationBits)-1,t.isOctEncodedDraco=!0);const b={};if(e.batchTableProperties)for(const E of Object.keys(e.batchTableProperties))o.attributes[E]&&o.attributes[E].value&&(b[E.toLowerCase()]=o.attributes[E].value);t.attributes={positions:a,colors:lF(t,l,void 0),normals:f,batchIds:d,...b}}const p2={URI:0,EMBEDDED:1};function cF(t,e,n,r){t.rotateYtoZ=!0;const i=t.byteOffset+t.byteLength-n;if(i===0)throw new Error("glTF byte length must be greater than 0.");return t.gltfUpAxis=r["3d-tiles"]&&r["3d-tiles"].assetGltfUpAxis?r["3d-tiles"].assetGltfUpAxis:"Y",t.gltfArrayBuffer=jb(e,n,i),t.gltfByteOffset=0,t.gltfByteLength=i,n%4===0||console.warn("".concat(t.type,": embedded glb is not aligned to a 4-byte boundary.")),t.byteOffset+t.byteLength}async function uF(t,e,n,r){const i=n["3d-tiles"]||{};if(sse(t,e),i.loadGLTF){const{parse:s,fetch:o}=r;t.gltfUrl&&(t.gltfArrayBuffer=await o(t.gltfUrl,n),t.gltfByteOffset=0),t.gltfArrayBuffer&&(t.gltf=await s(t.gltfArrayBuffer,fh,n,r),delete t.gltfArrayBuffer,delete t.gltfByteOffset,delete t.gltfByteLength)}}function sse(t,e,n){switch(e){case p2.URI:const r=new Uint8Array(t.gltfArrayBuffer,t.gltfByteOffset),s=new TextDecoder().decode(r);t.gltfUrl=s.replace(/[\s\0]+$/,""),delete t.gltfArrayBuffer,delete t.gltfByteOffset,delete t.gltfByteLength;break;case p2.EMBEDDED:break;default:throw new Error("b3dm: Illegal glTF format field")}}async function ose(t,e,n,r,i){var s;n=ase(t,e,n,r),await uF(t,p2.EMBEDDED,r,i);const o=t==null||(s=t.gltf)===null||s===void 0?void 0:s.extensions;return o&&o.CESIUM_RTC&&(t.rtcCenter=o.CESIUM_RTC.center),n}function ase(t,e,n,r,i){n=km(t,e,n),n=nE(t,e,n),n=rE(t,e,n),n=cF(t,e,n,r);const s=new tE(t.featureTableJson,t.featureTableBinary);return t.rtcCenter=s.getGlobalProperty("RTC_CENTER",_t.FLOAT,3),n}async function lse(t,e,n,r,i){return n=cse(t,e,n,r),await uF(t,t.gltfFormat,r,i),n}function cse(t,e,n,r,i){if(n=km(t,e,n),t.version!==1)throw new Error("Instanced 3D Model version ".concat(t.version," is not supported"));n=nE(t,e,n);const s=new DataView(e);if(t.gltfFormat=s.getUint32(n,!0),n+=4,n=rE(t,e,n),n=cF(t,e,n,r),t.featureTableJsonByteLength===0)throw new Error("i3dm parser: featureTableJsonByteLength is zero.");const o=new tE(t.featureTableJson,t.featureTableBinary),a=o.getGlobalProperty("INSTANCES_LENGTH");if(o.featuresLength=a,!Number.isFinite(a))throw new Error("i3dm parser: INSTANCES_LENGTH must be defined");t.eastNorthUp=o.getGlobalProperty("EAST_NORTH_UP"),t.rtcCenter=o.getGlobalProperty("RTC_CENTER",_t.FLOAT,3);const l=new aF(t.batchTableJson,t.batchTableBinary,a);return use(t,o,l,a),n}function use(t,e,n,r){const s={instances:new Array(r),batchTable:t._batchTable,cull:!1,url:void 0,gltf:void 0,basePath:void 0,incrementallyLoadTextures:!1,forwardAxis:[1,0,0]}.instances,o=new q;new q,new q,new q;const a=new On,l=new qf,f=new q,d={},g=new $e,y=[],b=[],E=new q,S=new q;for(let M=0;M<r;M++){let C;if(e.hasProperty("POSITION"))C=e.getProperty("POSITION",_t.FLOAT,3,M,o);else if(e.hasProperty("POSITION_QUANTIZED")){C=e.getProperty("POSITION_QUANTIZED",_t.UNSIGNED_SHORT,3,M,o);const X=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",_t.FLOAT,3,E);if(!X)throw new Error("i3dm parser: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");const Y=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",_t.FLOAT,3,S);if(!Y)throw new Error("i3dm parser: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");const Q=65535;for(let N=0;N<3;N++)C[N]=C[N]/Q*Y[N]+X[N]}if(!C)throw new Error("i3dm: POSITION or POSITION_QUANTIZED must be defined for each instance.");if(o.copy(C),d.translation=o,t.normalUp=e.getProperty("NORMAL_UP",_t.FLOAT,3,M,y),t.normalRight=e.getProperty("NORMAL_RIGHT",_t.FLOAT,3,M,b),t.normalUp){if(!t.normalRight)throw new Error("i3dm: Custom orientation requires both NORMAL_UP and NORMAL_RIGHT.");t.hasCustomOrientation=!0}else{if(t.octNormalUp=e.getProperty("NORMAL_UP_OCT32P",_t.UNSIGNED_SHORT,2,y),t.octNormalRight=e.getProperty("NORMAL_RIGHT_OCT32P",_t.UNSIGNED_SHORT,2,b),t.octNormalUp)throw t.octNormalRight?new Error("i3dm: oct-encoded orientation not implemented"):new Error("i3dm: oct-encoded orientation requires NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P");t.eastNorthUp?(Wn.WGS84.eastNorthUpToFixedFrame(o,g),g.getRotationMatrix3(a)):a.identity()}l.fromMatrix3(a),d.rotation=l,f.set(1,1,1);const P=e.getProperty("SCALE",_t.FLOAT,1,M);Number.isFinite(P)&&f.multiplyByScalar(P);const I=e.getProperty("SCALE_NON_UNIFORM",_t.FLOAT,3,M,y);I&&f.scale(I),d.scale=f;let L=e.getProperty("BATCH_ID",_t.UNSIGNED_SHORT,1,M);L===void 0&&(L=M);const F=new $e().fromQuaternion(d.rotation);g.identity(),g.translate(d.translation),g.multiplyRight(F),g.scale(d.scale);const z=g.clone();s[M]={modelMatrix:z,batchId:L}}t.instances=s}async function Ase(t,e,n,r,i,s){n=km(t,e,n);const o=new DataView(e);for(t.tilesLength=o.getUint32(n,!0),n+=4,t.tiles=[];t.tiles.length<t.tilesLength&&t.byteLength-n>12;){const a={};t.tiles.push(a),n=await s(e,n,r,i,a)}return n}async function fse(t,e,n,r){t.rotateYtoZ=!0,t.gltfUpAxis=n["3d-tiles"]&&n["3d-tiles"].assetGltfUpAxis?n["3d-tiles"].assetGltfUpAxis:"Y";const{parse:i}=r;t.gltf=await i(e,fh,n,r)}async function AF(t,e=0,n,r,i={}){switch(i.byteOffset=e,i.type=Pie(t,e),i.type){case VA.COMPOSITE:return await Ase(i,t,e,n,r,AF);case VA.BATCHED_3D_MODEL:return await ose(i,t,e,n,r);case VA.GLTF:return await fse(i,t,n,r);case VA.INSTANCED_3D_MODEL:return await lse(i,t,e,n,r);case VA.POINT_CLOUD:return await Kie(i,t,e,n,r);default:throw new Error("3DTileLoader: unknown type ".concat(i.type))}}const hse=1952609651,dse=1;async function pse(t){if(new Uint32Array(t.slice(0,4))[0]!==hse)throw new Error("Wrong subtree file magic number");if(new Uint32Array(t.slice(4,8))[0]!==dse)throw new Error("Wrong subtree file verson, must be 1");const r=F3(t.slice(8,16)),i=new Uint8Array(t,24,r),o=new TextDecoder("utf8").decode(i),a=JSON.parse(o),l=F3(t.slice(16,24));let f=new ArrayBuffer(0);return l&&(f=t.slice(24+r)),"bufferView"in a.tileAvailability&&(a.tileAvailability.explicitBitstream=await n_(a,"tileAvailability",f)),"bufferView"in a.contentAvailability&&(a.contentAvailability.explicitBitstream=await n_(a,"contentAvailability",f)),"bufferView"in a.childSubtreeAvailability&&(a.childSubtreeAvailability.explicitBitstream=await n_(a,"childSubtreeAvailability",f)),a}async function n_(t,e,n){const r=t[e].bufferView,i=t.bufferViews[r],s=t.buffers[i.buffer];if(s.uri){const a=await(await T1(s.uri)).arrayBuffer();return new Uint8Array(a,i.byteOffset,i.byteLength)}return new Uint8Array(n,i.byteOffset,i.byteLength)}function F3(t){const e=new DataView(t),n=e.getUint32(0,!0),r=e.getUint32(4,!0);return n+2**32*r}const fF={id:"3d-tiles-subtree",name:"3D Tiles Subtree",module:"3d-tiles",version:iF,extensions:["subtree"],mimeTypes:["application/octet-stream"],tests:["subtree"],parse:pse,options:{}},gse=4,mse=8,yse={QUADTREE:gse,OCTREE:mse};async function hF(t){const{options:e,parentData:n={mortonIndex:0,x:0,y:0,z:0},childIndex:r=0,globalData:i={level:0,mortonIndex:0,x:0,y:0,z:0}}=t;let{subtree:s,level:o=0}=t;const{subdivisionScheme:a,subtreeLevels:l,maximumLevel:f,contentUrlTemplate:d,subtreesUriTemplate:g,basePath:y}=e,b={children:[],lodMetricValue:0,contentUrl:""},E=yse[a],S=r&1,M=r>>1&1,C=r>>2&1,P=(E**o-1)/(E-1);let I=Ya(n.mortonIndex,r),L=P+I,F=Ya(n.x,S),z=Ya(n.y,M),X=Ya(n.z,C),Y=!1;o+1>l&&(Y=r_(s.childSubtreeAvailability,I));const Q=Ya(i.x,F),N=Ya(i.y,z),k=Ya(i.z,X),te=o+i.level;if(Y){const He="".concat(y,"/").concat(g),le=g2(He,te,Q,N,k);s=await To(le,fF),i.mortonIndex=I,i.x=F,i.y=z,i.z=X,i.level=o,I=0,L=0,F=0,z=0,X=0,o=0}if(!r_(s.tileAvailability,L)||o>f)return b;r_(s.contentAvailability,L)&&(b.contentUrl=g2(d,te,Q,N,k));const Re=o+1,Oe={mortonIndex:I,x:F,y:z,z:X};for(let He=0;He<E;He++){const le=await hF({subtree:s,options:e,parentData:Oe,childIndex:He,level:Re,globalData:i});if(le.contentUrl||le.children.length){const be=te+1,Fe=vse(le,be,{childTileX:F,childTileY:z,childTileZ:X},e);b.children.push(Fe)}}return b}function r_(t,e){return"constant"in t?Boolean(t.constant):t.explicitBitstream?wse(e,t.explicitBitstream):!1}function vse(t,e,n,r){const{basePath:i,refine:s,getRefine:o,lodMetricType:a,getTileType:l,rootLodMetricValue:f,rootBoundingVolume:d}=r,g=t.contentUrl&&t.contentUrl.replace("".concat(i,"/"),""),y=f/2**e,b=_se(e,d,n);return{children:t.children,contentUrl:t.contentUrl,content:{uri:g},id:t.contentUrl,refine:o(s),type:l(t),lodMetricType:a,lodMetricValue:y,boundingVolume:b}}function _se(t,e,n){if(e.region){const{childTileX:r,childTileY:i,childTileZ:s}=n,[o,a,l,f,d,g]=e.region,y=2**t,b=(l-o)/y,E=(f-a)/y,S=(g-d)/y,[M,C]=[o+b*r,o+b*(r+1)],[P,I]=[a+E*i,a+E*(i+1)],[L,F]=[d+S*s,d+S*(s+1)];return{region:[M,P,C,I,L,F]}}return console.warn("Unsupported bounding volume type: ",e),null}function Ya(t,e){return parseInt(t.toString(2)+e.toString(2),2)}function g2(t,e,n,r,i){const s=bse({level:e,x:n,y:r,z:i});return t.replace(/{level}|{x}|{y}|{z}/gi,o=>s[o])}function bse(t){const e={};for(const n in t)e["{".concat(n,"}")]=t[n];return e}function wse(t,e){const n=Math.floor(t/8),r=t%8;return(e[n]>>r&1)===1}function iE(t){if(!t.contentUrl)return su.EMPTY;const n=t.contentUrl.split(".").pop();switch(n){case"pnts":return su.POINTCLOUD;case"i3dm":case"b3dm":case"glb":case"gltf":return su.SCENEGRAPH;default:return n}}function sE(t){switch(t){case"REPLACE":case"replace":return ho.REPLACE;case"ADD":case"add":return ho.ADD;default:return t}}function k3(t,e){if(!t)return null;if(t.content){const n=t.content.uri||t.content.url;t.contentUrl="".concat(e.basePath,"/").concat(n)}return t.id=t.contentUrl,t.lodMetricType=Dm.GEOMETRIC_ERROR,t.lodMetricValue=t.geometricError,t.transformMatrix=t.transform,t.type=iE(t),t.refine=sE(t.refine),t}function Ese(t){const e=t.basePath,n=k3(t.root,t),r=[];for(r.push(n);r.length>0;){const s=(r.pop()||{}).children||[];for(const o of s)k3(o,{basePath:e}),r.push(o)}return n}async function Tse(t){if(!t.root)return null;const e=t.basePath,n=t.root.extensions["3DTILES_implicit_tiling"],{subdivisionScheme:r,maximumLevel:i,subtreeLevels:s,subtrees:{uri:o}}=n,a=g2(o,0,0,0,0),l="".concat(e,"/").concat(a),f=await To(l,fF),d="".concat(e,"/").concat(t.root.content.uri),g=t.root.refine,y=t.root.geometricError,b=t.root.boundingVolume,E={contentUrlTemplate:d,subtreesUriTemplate:o,subdivisionScheme:r,subtreeLevels:s,maximumLevel:i,refine:g,basePath:e,lodMetricType:Dm.GEOMETRIC_ERROR,rootLodMetricValue:y,rootBoundingVolume:b,getTileType:iE,getRefine:sE};return await Sse(t.root,f,E)}async function Sse(t,e,n){if(!t)return null;t.lodMetricType=Dm.GEOMETRIC_ERROR,t.lodMetricValue=t.geometricError,t.transformMatrix=t.transform;const{children:r,contentUrl:i}=await hF({subtree:e,options:n});return i&&(t.contentUrl=i,t.content={uri:i.replace("".concat(n.basePath,"/"),"")}),t.refine=sE(t.refine),t.type=iE(t),t.children=r,t.id=t.contentUrl,t}const N3="3DTILES_implicit_tiling",dF={id:"3d-tiles",name:"3D Tiles",module:"3d-tiles",version:iF,extensions:["cmpt","pnts","b3dm","i3dm"],mimeTypes:["application/octet-stream"],tests:["cmpt","pnts","b3dm","i3dm"],parse:Mse,options:{"3d-tiles":{loadGLTF:!0,decodeQuantizedPositions:!1,isTileset:"auto",assetGltfUpAxis:null}}};function xse(t){return WL(t.url)}async function Cse(t,e,n){const r={content:{featureIds:null}};return await AF(t,0,e,n,r.content),r.content}async function Pse(t,e,n){var r;const i=JSON.parse(new TextDecoder().decode(t));return i.loader=e.loader||dF,i.url=n.url,i.basePath=xse(i),i.root=Ise(i)?await Tse(i):Ese(i),i.type=Ls.TILES3D,i.lodMetricType=Dm.GEOMETRIC_ERROR,i.lodMetricValue=((r=i.root)===null||r===void 0?void 0:r.lodMetricValue)||0,i}async function Mse(t,e,n){const r=e["3d-tiles"]||{};let i;return r.isTileset==="auto"?i=n.url&&n.url.indexOf(".json")!==-1:i=r.isTileset,i?t=await Pse(t,e,n):t=await Cse(t,e,n),t}function Ise(t){var e,n;return(t==null||(e=t.extensionsRequired)===null||e===void 0?void 0:e.includes(N3))&&(t==null||(n=t.extensionsUsed)===null||n===void 0?void 0:n.includes(N3))}const U3=[0],Bse={getPointColor:{type:"accessor",value:[0,0,0,255]},pointSize:1,data:null,loader:dF,onTilesetLoad:{type:"function",value:t=>{},compare:!1},onTileLoad:{type:"function",value:t=>{},compare:!1},onTileUnload:{type:"function",value:t=>{},compare:!1},onTileError:{type:"function",value:(t,e,n)=>{},compare:!1},_getMeshColor:{type:"function",value:t=>[255,255,255],compare:!1}};class pF extends Fo{constructor(...e){super(...e),T(this,"state",void 0)}initializeState(){"onTileLoadFail"in this.props&&je.removed("onTileLoadFail","onTileError")(),this.state={layerMap:{},tileset3d:null,activeViewports:{},lastUpdatedViewports:null}}get isLoaded(){const{tileset3d:e}=this.state;return e!==null&&e.isLoaded()}shouldUpdateState({changeFlags:e}){return e.somethingChanged}updateState({props:e,oldProps:n,changeFlags:r}){if(e.data&&e.data!==n.data&&this._loadTileset(e.data),r.viewportChanged){const{activeViewports:i}=this.state;Object.keys(i).length&&(this._updateTileset(i),this.state.lastUpdatedViewports=i,this.state.activeViewports={})}if(r.propsChanged){const{layerMap:i}=this.state;for(const s in i)i[s].needsUpdate=!0}}activateViewport(e){const{activeViewports:n,lastUpdatedViewports:r}=this.state;this.internalState.viewport=e,n[e.id]=e;const i=r==null?void 0:r[e.id];(!i||!e.equals(i))&&(this.setChangeFlags({viewportChanged:!0}),this.setNeedsUpdate())}getPickingInfo({info:e,sourceLayer:n}){const{layerMap:r}=this.state,i=n&&n.id;if(i){const s=i.substring(this.id.length+1),o=s.substring(s.indexOf("-")+1);e.object=r[o]&&r[o].tile}return e}filterSubLayer({layer:e,viewport:n}){const{tile:r}=e.props,{id:i}=n;return r.selected&&r.viewportIds.includes(i)}_updateAutoHighlight(e){e.sourceLayer&&e.sourceLayer.updateAutoHighlight(e)}async _loadTileset(e){const{loadOptions:n={}}=this.props;let r=this.props.loader||this.props.loaders;Array.isArray(r)&&(r=r[0]);const i={loadOptions:{...n}};if(r.preload){const a=await r.preload(e,n);a.headers&&(i.loadOptions.fetch={...i.loadOptions.fetch,headers:a.headers}),Object.assign(i,a)}const s=await To(e,r,i.loadOptions),o=new xie(s,{onTileLoad:this._onTileLoad.bind(this),onTileUnload:this._onTileUnload.bind(this),onTileError:this.props.onTileError,...i});this.setState({tileset3d:o,layerMap:{}}),this._updateTileset(this.state.activeViewports),this.props.onTilesetLoad(o)}_onTileLoad(e){const{lastUpdatedViewports:n}=this.state;this.props.onTileLoad(e),this._updateTileset(n),this.setNeedsUpdate()}_onTileUnload(e){delete this.state.layerMap[e.id],this.props.onTileUnload(e)}_updateTileset(e){if(!e)return;const{tileset3d:n}=this.state,{timeline:r}=this.context,i=Object.keys(e).length;!r||!i||!n||n.selectTiles(Object.values(e)).then(s=>{this.state.frameNumber!==s&&this.setState({frameNumber:s})})}_getSubLayer(e,n){if(!e.content)return null;switch(e.type){case su.POINTCLOUD:return this._makePointCloudLayer(e,n);case su.SCENEGRAPH:return this._make3DModelLayer(e);case su.MESH:return this._makeSimpleMeshLayer(e,n);default:throw new Error("Tile3DLayer: Failed to render layer of type ".concat(e.content.type))}}_makePointCloudLayer(e,n){const{attributes:r,pointCount:i,constantRGBA:s,cartographicOrigin:o,modelMatrix:a}=e.content,{positions:l,normals:f,colors:d}=r;if(!l)return null;const g=n&&n.props.data||{header:{vertexCount:i},attributes:{POSITION:l,NORMAL:f,COLOR_0:d}},{pointSize:y,getPointColor:b}=this.props,E=this.getSubLayerClass("pointcloud",Bw);return new E({pointSize:y},this.getSubLayerProps({id:"pointcloud"}),{id:"".concat(this.id,"-pointcloud-").concat(e.id),tile:e,data:g,coordinateSystem:Ze.METER_OFFSETS,coordinateOrigin:o,modelMatrix:a,getColor:s||b,_offset:0})}_make3DModelLayer(e){const{gltf:n,instances:r,cartographicOrigin:i,modelMatrix:s}=e.content,o=this.getSubLayerClass("scenegraph",Zw);return new o({_lighting:"pbr"},this.getSubLayerProps({id:"scenegraph"}),{id:"".concat(this.id,"-scenegraph-").concat(e.id),tile:e,data:r||U3,scenegraph:n,coordinateSystem:Ze.METER_OFFSETS,coordinateOrigin:i,modelMatrix:s,getTransformMatrix:a=>a.modelMatrix,getPosition:[0,0,0],_offset:0})}_makeSimpleMeshLayer(e,n){const r=e.content,{attributes:i,indices:s,modelMatrix:o,cartographicOrigin:a,coordinateSystem:l=Ze.METER_OFFSETS,material:f,featureIds:d}=r,{_getMeshColor:g}=this.props,y=n&&n.props.mesh||new Di({drawMode:4,attributes:Lse(i),indices:s}),b=this.getSubLayerClass("mesh",eE);return new b(this.getSubLayerProps({id:"mesh"}),{id:"".concat(this.id,"-mesh-").concat(e.id),tile:e,mesh:y,data:U3,getColor:g(e),pbrMaterial:f,modelMatrix:o,coordinateOrigin:a,coordinateSystem:l,featureIds:d,_offset:0})}renderLayers(){const{tileset3d:e,layerMap:n}=this.state;return e?e.tiles.map(r=>{const i=n[r.id]=n[r.id]||{tile:r};let{layer:s}=i;return r.selected&&(s?i.needsUpdate&&(s=this._getSubLayer(r,s),i.needsUpdate=!1):s=this._getSubLayer(r)),i.layer=s,s}).filter(Boolean):null}}T(pF,"defaultProps",Bse);T(pF,"layerName","Tile3DLayer");function Lse(t){const e={};return e.positions={...t.positions,value:new Float32Array(t.positions.value)},t.normals&&(e.normals=t.normals),t.texCoords&&(e.texCoords=t.texCoords),t.colors&&(e.colors=t.colors),t.uvRegions&&(e.uvRegions=t.uvRegions),e}const Rse=new Map([["centerX",Float64Array.BYTES_PER_ELEMENT],["centerY",Float64Array.BYTES_PER_ELEMENT],["centerZ",Float64Array.BYTES_PER_ELEMENT],["minHeight",Float32Array.BYTES_PER_ELEMENT],["maxHeight",Float32Array.BYTES_PER_ELEMENT],["boundingSphereCenterX",Float64Array.BYTES_PER_ELEMENT],["boundingSphereCenterY",Float64Array.BYTES_PER_ELEMENT],["boundingSphereCenterZ",Float64Array.BYTES_PER_ELEMENT],["boundingSphereRadius",Float64Array.BYTES_PER_ELEMENT],["horizonOcclusionPointX",Float64Array.BYTES_PER_ELEMENT],["horizonOcclusionPointY",Float64Array.BYTES_PER_ELEMENT],["horizonOcclusionPointZ",Float64Array.BYTES_PER_ELEMENT]]);function i_(t){return t>>1^-(t&1)}function Ose(t){let e=0;const n={};for(const[r,i]of Rse){const s=i===8?t.getFloat64:t.getFloat32;n[r]=s.call(t,e,!0),e+=i}return{header:n,headerEndPosition:e}}function Dse(t,e){let n=e;const r=3,i=t.getUint32(n,!0),s=new Uint16Array(i*r);n+=Uint32Array.BYTES_PER_ELEMENT;const o=Uint16Array.BYTES_PER_ELEMENT,a=i*o,l=n,f=l+a,d=f+a;let g=0,y=0,b=0;for(let E=0;E<i;E++)g+=i_(t.getUint16(l+o*E,!0)),y+=i_(t.getUint16(f+o*E,!0)),b+=i_(t.getUint16(d+o*E,!0)),s[E]=g,s[E+i]=y,s[E+i*2]=b;return n+=a*3,{vertexData:s,vertexDataEndPosition:n}}function sf(t,e,n,r,i=!0){let s;if(r===2?s=new Uint16Array(t,e,n):s=new Uint32Array(t,e,n),!i)return s;let o=0;for(let a=0;a<s.length;++a){const l=s[a];s[a]=o-l,l===0&&++o}return s}function Fse(t,e,n){let r=n;const i=3,o=e.length/i>65536?Uint32Array.BYTES_PER_ELEMENT:Uint16Array.BYTES_PER_ELEMENT;r%o!==0&&(r+=o-r%o);const a=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;const l=a*3,f=sf(t.buffer,r,l,o);return r+=l*o,{triangleIndicesEndPosition:r,triangleIndices:f}}function kse(t,e,n){let r=n;const i=3,o=e.length/i>65536?Uint32Array.BYTES_PER_ELEMENT:Uint16Array.BYTES_PER_ELEMENT,a=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;const l=sf(t.buffer,r,a,o,!1);r+=a*o;const f=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;const d=sf(t.buffer,r,f,o,!1);r+=f*o;const g=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;const y=sf(t.buffer,r,g,o,!1);r+=g*o;const b=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;const E=sf(t.buffer,r,b,o,!1);return r+=b*o,{edgeIndicesEndPosition:r,westIndices:l,southIndices:d,eastIndices:y,northIndices:E}}function Nse(t){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}function Use(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}function Gse(t,e){const n={};if(t.byteLength<=e)return{extensions:n,extensionsEndPosition:e};let r=e;for(;r<t.byteLength;){const i=t.getUint8(r,!0);r+=Uint8Array.BYTES_PER_ELEMENT;const s=t.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;const o=new DataView(t.buffer,r,s);switch(i){case 1:{n.vertexNormals=Nse(o);break}case 2:{n.waterMask=Use(o);break}}r+=s}return{extensions:n,extensionsEndPosition:r}}const Qc={header:0,vertices:1,triangleIndices:2,edgeIndices:3,extensions:4},zse={maxDecodingStep:Qc.extensions};function Vse(t,e){const n=Object.assign({},zse,e),r=new DataView(t),{header:i,headerEndPosition:s}=Ose(r);if(n.maxDecodingStep<Qc.vertices)return{header:i};const{vertexData:o,vertexDataEndPosition:a}=Dse(r,s);if(n.maxDecodingStep<Qc.triangleIndices)return{header:i,vertexData:o};const{triangleIndices:l,triangleIndicesEndPosition:f}=Fse(r,o,a);if(n.maxDecodingStep<Qc.edgeIndices)return{header:i,vertexData:o,triangleIndices:l};const{westIndices:d,southIndices:g,eastIndices:y,northIndices:b,edgeIndicesEndPosition:E}=kse(r,o,f);if(n.maxDecodingStep<Qc.extensions)return{header:i,vertexData:o,triangleIndices:l,westIndices:d,northIndices:b,eastIndices:y,southIndices:g};const{extensions:S}=Gse(r,E);return{header:i,vertexData:o,triangleIndices:l,westIndices:d,northIndices:b,eastIndices:y,southIndices:g,extensions:S}}function gF(t,e,n,r){const i=r?Hse(r,t.POSITION.value):jse(e),s=new t.POSITION.value.constructor(i.length*6),o=new t.TEXCOORD_0.value.constructor(i.length*4),a=new e.constructor(i.length*6);for(let f=0;f<i.length;f++){const d=i[f];Wse({edge:d,edgeIndex:f,attributes:t,skirtHeight:n,newPosition:s,newTexcoord0:o,newTriangles:a})}t.POSITION.value=tv(t.POSITION.value,s),t.TEXCOORD_0.value=tv(t.TEXCOORD_0.value,o);const l=e instanceof Array?e.concat(a):tv(e,a);return{attributes:t,triangles:l}}function jse(t){const e=[];for(let o=0;o<t.length;o+=3)e.push([t[o],t[o+1]]),e.push([t[o+1],t[o+2]]),e.push([t[o+2],t[o]]);e.sort((o,a)=>Math.min(...o)-Math.min(...a)||Math.max(...o)-Math.max(...a));const n=[];let r=0;for(;r<e.length;){var i,s;e[r][0]===((i=e[r+1])===null||i===void 0?void 0:i[1])&&e[r][1]===((s=e[r+1])===null||s===void 0?void 0:s[0])?r+=2:(n.push(e[r]),r++)}return n}function Hse(t,e){t.westIndices.sort((r,i)=>e[3*r+1]-e[3*i+1]),t.eastIndices.sort((r,i)=>e[3*i+1]-e[3*r+1]),t.southIndices.sort((r,i)=>e[3*i]-e[3*r]),t.northIndices.sort((r,i)=>e[3*r]-e[3*i]);const n=[];for(const r in t){const i=t[r];for(let s=0;s<i.length-1;s++)n.push([i[s],i[s+1]])}return n}function Wse({edge:t,edgeIndex:e,attributes:n,skirtHeight:r,newPosition:i,newTexcoord0:s,newTriangles:o}){const a=n.POSITION.value.length,l=e*2,f=e*2+1;i.set(n.POSITION.value.subarray(t[0]*3,t[0]*3+3),l*3),i[l*3+2]=i[l*3+2]-r,i.set(n.POSITION.value.subarray(t[1]*3,t[1]*3+3),f*3),i[f*3+2]=i[f*3+2]-r,s.set(n.TEXCOORD_0.value.subarray(t[0]*2,t[0]*2+2),l*2),s.set(n.TEXCOORD_0.value.subarray(t[1]*2,t[1]*2+2),f*2);const d=e*2*3;o[d]=t[0],o[d+1]=a/3+f,o[d+2]=t[1],o[d+3]=a/3+f,o[d+4]=t[0],o[d+5]=a/3+l}function Qse(t,e,n){const{minHeight:r,maxHeight:i}=e,[s,o,a,l]=n||[0,0,1,1],f=a-s,d=l-o,g=i-r,y=t.length/3,b=new Float32Array(y*3),E=new Float32Array(y*2);for(let S=0;S<y;S++){const M=t[S]/32767,C=t[S+y]/32767,P=t[S+y*2]/32767;b[3*S+0]=M*f+s,b[3*S+1]=C*d+o,b[3*S+2]=P*g+r,E[2*S+0]=M,E[2*S+1]=C}return{POSITION:{value:b,size:3},TEXCOORD_0:{value:E,size:2}}}function $se(t,e){if(!t)return null;const{bounds:n}=e,{header:r,vertexData:i,triangleIndices:s,westIndices:o,northIndices:a,eastIndices:l,southIndices:f}=Vse(t,Qc.triangleIndices);let d=s,g=Qse(i,r,n);const y=Jw(g);if(e.skirtHeight){const{attributes:b,triangles:E}=gF(g,d,e.skirtHeight,{westIndices:o,northIndices:a,eastIndices:l,southIndices:f});g=b,d=E}return{loaderData:{header:{}},header:{vertexCount:d.length,boundingBox:y},mode:4,indices:{value:d,size:1},attributes:g}}function G3(t,e){return $se(t,e["quantized-mesh"])}class Xse{constructor(e=257){this.gridSize=e;const n=e-1;if(n&n-1)throw new Error(`Expected grid size to be 2^n+1, got ${e}.`);this.numTriangles=n*n*2-2,this.numParentTriangles=this.numTriangles-n*n,this.indices=new Uint32Array(this.gridSize*this.gridSize),this.coords=new Uint16Array(this.numTriangles*4);for(let r=0;r<this.numTriangles;r++){let i=r+2,s=0,o=0,a=0,l=0,f=0,d=0;for(i&1?a=l=f=n:s=o=d=n;(i>>=1)>1;){const y=s+a>>1,b=o+l>>1;i&1?(a=s,l=o,s=f,o=d):(s=a,o=l,a=f,l=d),f=y,d=b}const g=r*4;this.coords[g+0]=s,this.coords[g+1]=o,this.coords[g+2]=a,this.coords[g+3]=l}}createTile(e){return new Jse(e,this)}}class Jse{constructor(e,n){const r=n.gridSize;if(e.length!==r*r)throw new Error(`Expected terrain data of length ${r*r} (${r} x ${r}), got ${e.length}.`);this.terrain=e,this.martini=n,this.errors=new Float32Array(e.length),this.update()}update(){const{numTriangles:e,numParentTriangles:n,coords:r,gridSize:i}=this.martini,{terrain:s,errors:o}=this;for(let a=e-1;a>=0;a--){const l=a*4,f=r[l+0],d=r[l+1],g=r[l+2],y=r[l+3],b=f+g>>1,E=d+y>>1,S=b+E-d,M=E+f-b,C=(s[d*i+f]+s[y*i+g])/2,P=E*i+b,I=Math.abs(C-s[P]);if(o[P]=Math.max(o[P],I),a<n){const L=(d+M>>1)*i+(f+S>>1),F=(y+M>>1)*i+(g+S>>1);o[P]=Math.max(o[P],o[L],o[F])}}}getMesh(e=0){const{gridSize:n,indices:r}=this.martini,{errors:i}=this;let s=0,o=0;const a=n-1;r.fill(0);function l(b,E,S,M,C,P){const I=b+S>>1,L=E+M>>1;Math.abs(b-C)+Math.abs(E-P)>1&&i[L*n+I]>e?(l(C,P,b,E,I,L),l(S,M,C,P,I,L)):(r[E*n+b]=r[E*n+b]||++s,r[M*n+S]=r[M*n+S]||++s,r[P*n+C]=r[P*n+C]||++s,o++)}l(0,0,a,a,a,0),l(a,a,0,0,0,a);const f=new Uint16Array(s*2),d=new Uint32Array(o*3);let g=0;function y(b,E,S,M,C,P){const I=b+S>>1,L=E+M>>1;if(Math.abs(b-C)+Math.abs(E-P)>1&&i[L*n+I]>e)y(C,P,b,E,I,L),y(S,M,C,P,I,L);else{const F=r[E*n+b]-1,z=r[M*n+S]-1,X=r[P*n+C]-1;f[2*F]=b,f[2*F+1]=E,f[2*z]=S,f[2*z+1]=M,f[2*X]=C,f[2*X+1]=P,d[g++]=F,d[g++]=z,d[g++]=X}}return y(0,0,a,a,a,0),y(a,a,0,0,0,a),{vertices:f,triangles:d}}}class Kse{constructor(e,n,r=n){this.data=e,this.width=n,this.height=r,this.coords=[],this.triangles=[],this._halfedges=[],this._candidates=[],this._queueIndices=[],this._queue=[],this._errors=[],this._rms=[],this._pending=[],this._pendingLen=0,this._rmsSum=0;const i=n-1,s=r-1,o=this._addPoint(0,0),a=this._addPoint(i,0),l=this._addPoint(0,s),f=this._addPoint(i,s),d=this._addTriangle(f,o,l,-1,-1,-1);this._addTriangle(o,f,a,d,-1,-1),this._flush()}run(e=1){for(;this.getMaxError()>e;)this.refine()}refine(){this._step(),this._flush()}getMaxError(){return this._errors[0]}getRMSD(){return this._rmsSum>0?Math.sqrt(this._rmsSum/(this.width*this.height)):0}heightAt(e,n){return this.data[this.width*n+e]}_flush(){const e=this.coords;for(let n=0;n<this._pendingLen;n++){const r=this._pending[n],i=2*this.triangles[r*3+0],s=2*this.triangles[r*3+1],o=2*this.triangles[r*3+2];this._findCandidate(e[i],e[i+1],e[s],e[s+1],e[o],e[o+1],r)}this._pendingLen=0}_findCandidate(e,n,r,i,s,o,a){const l=Math.min(e,r,s),f=Math.min(n,i,o),d=Math.max(e,r,s),g=Math.max(n,i,o);let y=qa(r,i,s,o,l,f),b=qa(s,o,e,n,l,f),E=qa(e,n,r,i,l,f);const S=i-n,M=e-r,C=o-i,P=r-s,I=n-o,L=s-e,F=qa(e,n,r,i,s,o),z=this.heightAt(e,n)/F,X=this.heightAt(r,i)/F,Y=this.heightAt(s,o)/F;let Q=0,N=0,k=0,te=0;for(let oe=f;oe<=g;oe++){let ae=0;y<0&&C!==0&&(ae=Math.max(ae,Math.floor(-y/C))),b<0&&I!==0&&(ae=Math.max(ae,Math.floor(-b/I))),E<0&&S!==0&&(ae=Math.max(ae,Math.floor(-E/S)));let Re=y+C*ae,Oe=b+I*ae,He=E+S*ae,le=!1;for(let be=l+ae;be<=d;be++){if(Re>=0&&Oe>=0&&He>=0){le=!0;const Pe=z*Re+X*Oe+Y*He,Fe=Math.abs(Pe-this.heightAt(be,oe));te+=Fe*Fe,Fe>Q&&(Q=Fe,N=be,k=oe)}else if(le)break;Re+=C,Oe+=I,He+=S}y+=P,b+=L,E+=M}(N===e&&k===n||N===r&&k===i||N===s&&k===o)&&(Q=0),this._candidates[2*a]=N,this._candidates[2*a+1]=k,this._rms[a]=te,this._queuePush(a,Q,te)}_step(){const e=this._queuePop(),n=e*3+0,r=e*3+1,i=e*3+2,s=this.triangles[n],o=this.triangles[r],a=this.triangles[i],l=this.coords[2*s],f=this.coords[2*s+1],d=this.coords[2*o],g=this.coords[2*o+1],y=this.coords[2*a],b=this.coords[2*a+1],E=this._candidates[2*e],S=this._candidates[2*e+1],M=this._addPoint(E,S);if(qa(l,f,d,g,E,S)===0)this._handleCollinear(M,n);else if(qa(d,g,y,b,E,S)===0)this._handleCollinear(M,r);else if(qa(y,b,l,f,E,S)===0)this._handleCollinear(M,i);else{const C=this._halfedges[n],P=this._halfedges[r],I=this._halfedges[i],L=this._addTriangle(s,o,M,C,-1,-1,n),F=this._addTriangle(o,a,M,P,-1,L+1),z=this._addTriangle(a,s,M,I,L+2,F+1);this._legalize(L),this._legalize(F),this._legalize(z)}}_addPoint(e,n){const r=this.coords.length>>1;return this.coords.push(e,n),r}_addTriangle(e,n,r,i,s,o,a=this.triangles.length){const l=a/3;return this.triangles[a+0]=e,this.triangles[a+1]=n,this.triangles[a+2]=r,this._halfedges[a+0]=i,this._halfedges[a+1]=s,this._halfedges[a+2]=o,i>=0&&(this._halfedges[i]=a+0),s>=0&&(this._halfedges[s]=a+1),o>=0&&(this._halfedges[o]=a+2),this._candidates[2*l+0]=0,this._candidates[2*l+1]=0,this._queueIndices[l]=-1,this._rms[l]=0,this._pending[this._pendingLen++]=l,a}_legalize(e){const n=this._halfedges[e];if(n<0)return;const r=e-e%3,i=n-n%3,s=r+(e+1)%3,o=r+(e+2)%3,a=i+(n+2)%3,l=i+(n+1)%3,f=this.triangles[o],d=this.triangles[e],g=this.triangles[s],y=this.triangles[a],b=this.coords;if(!Yse(b[2*f],b[2*f+1],b[2*d],b[2*d+1],b[2*g],b[2*g+1],b[2*y],b[2*y+1]))return;const E=this._halfedges[s],S=this._halfedges[o],M=this._halfedges[a],C=this._halfedges[l];this._queueRemove(r/3),this._queueRemove(i/3);const P=this._addTriangle(f,y,g,-1,M,E,r),I=this._addTriangle(y,f,d,P,S,C,i);this._legalize(P+1),this._legalize(I+2)}_handleCollinear(e,n){const r=n-n%3,i=r+(n+1)%3,s=r+(n+2)%3,o=this.triangles[s],a=this.triangles[n],l=this.triangles[i],f=this._halfedges[i],d=this._halfedges[s],g=this._halfedges[n];if(g<0){const z=this._addTriangle(e,o,a,-1,d,-1,r),X=this._addTriangle(o,e,l,z,-1,f);this._legalize(z+1),this._legalize(X+2);return}const y=g-g%3,b=y+(g+2)%3,E=y+(g+1)%3,S=this.triangles[b],M=this._halfedges[b],C=this._halfedges[E];this._queueRemove(y/3);const P=this._addTriangle(o,a,e,d,-1,-1,r),I=this._addTriangle(a,S,e,C,-1,P+1,y),L=this._addTriangle(S,l,e,M,-1,I+1),F=this._addTriangle(l,o,e,f,P+2,L+1);this._legalize(P),this._legalize(I),this._legalize(L),this._legalize(F)}_queuePush(e,n,r){const i=this._queue.length;this._queueIndices[e]=i,this._queue.push(e),this._errors.push(n),this._rmsSum+=r,this._queueUp(i)}_queuePop(){const e=this._queue.length-1;return this._queueSwap(0,e),this._queueDown(0,e),this._queuePopBack()}_queuePopBack(){const e=this._queue.pop();return this._errors.pop(),this._rmsSum-=this._rms[e],this._queueIndices[e]=-1,e}_queueRemove(e){const n=this._queueIndices[e];if(n<0){const i=this._pending.indexOf(e);if(i!==-1)this._pending[i]=this._pending[--this._pendingLen];else throw new Error("Broken triangulation (something went wrong).");return}const r=this._queue.length-1;r!==n&&(this._queueSwap(n,r),this._queueDown(n,r)||this._queueUp(n)),this._queuePopBack()}_queueLess(e,n){return this._errors[e]>this._errors[n]}_queueSwap(e,n){const r=this._queue[e],i=this._queue[n];this._queue[e]=i,this._queue[n]=r,this._queueIndices[r]=n,this._queueIndices[i]=e;const s=this._errors[e];this._errors[e]=this._errors[n],this._errors[n]=s}_queueUp(e){let n=e;for(;;){const r=n-1>>1;if(r===n||!this._queueLess(n,r))break;this._queueSwap(r,n),n=r}}_queueDown(e,n){let r=e;for(;;){const i=2*r+1;if(i>=n||i<0)break;const s=i+1;let o=i;if(s<n&&this._queueLess(s,i)&&(o=s),!this._queueLess(o,r))break;this._queueSwap(r,o),r=o}return r>e}}function qa(t,e,n,r,i,s){return(n-i)*(e-s)-(r-s)*(t-i)}function Yse(t,e,n,r,i,s,o,a){const l=t-o,f=e-a,d=n-o,g=r-a,y=i-o,b=s-a,E=l*l+f*f,S=d*d+g*g,M=y*y+b*b;return l*(g*M-S*b)-f*(d*M-S*y)+E*(d*b-g*y)<0}function D0(t,e,n,r,i){const{rScaler:s,bScaler:o,gScaler:a,offset:l}=r,f=new Float32Array((e+1)*(n+1));for(let d=0,g=0;g<n;g++)for(let y=0;y<e;y++,d++){const b=d*4,E=t[b+0],S=t[b+1],M=t[b+2];f[d+g]=E*s+S*a+M*o+l}if(i==="martini"){for(let d=(e+1)*e,g=0;g<e;g++,d++)f[d]=f[d-e-1];for(let d=n,g=0;g<n+1;g++,d+=n+1)f[d]=f[d-1]}return f}function qse(t,e,n,r,i){const s=n+1,o=t.length/2,a=new Float32Array(o*3),l=new Float32Array(o*2),[f,d,g,y]=i||[0,0,n,r],b=(g-f)/n,E=(y-d)/r;for(let S=0;S<o;S++){const M=t[S*2],C=t[S*2+1],P=C*s+M;a[3*S+0]=M*b+f,a[3*S+1]=-C*E+y,a[3*S+2]=e[P],l[2*S+0]=M/n,l[2*S+1]=C/r}return{POSITION:{value:a,size:3},TEXCOORD_0:{value:l,size:2}}}function Zse(t,e){if(t===null)return null;const{meshMaxError:n,bounds:r,elevationDecoder:i}=e,{data:s,width:o,height:a}=t;let l,f;switch(e.tesselator){case"martini":l=D0(s,o,a,i,e.tesselator),f=z3(n,o,l);break;case"delatin":l=D0(s,o,a,i,e.tesselator),f=V3(n,o,a,l);break;default:o===a&&!(a&o-1)?(l=D0(s,o,a,i,"martini"),f=z3(n,o,l)):(l=D0(s,o,a,i,"delatin"),f=V3(n,o,a,l));break}const{vertices:d}=f;let{triangles:g}=f,y=qse(d,l,o,a,r);const b=Jw(y);if(e.skirtHeight){const{attributes:E,triangles:S}=gF(y,g,e.skirtHeight);y=E,g=S}return{loaderData:{header:{}},header:{vertexCount:g.length,boundingBox:b},mode:4,indices:{value:Uint32Array.from(g),size:1},attributes:y}}function z3(t,e,n){const r=e+1,s=new Xse(r).createTile(n),{vertices:o,triangles:a}=s.getMesh(t);return{vertices:o,triangles:a}}function V3(t,e,n,r){const i=new Kse(r,e+1,n+1);i.run(t);const{coords:s,triangles:o}=i;return{vertices:s,triangles:o}}async function eoe(t,e,n){const r={...e,mimeType:"application/x.image",image:{...e.image,type:"data"}},i=await n.parse(t,r);return Zse(i,e.terrain)}const mF="3.2.6",yF={name:"Terrain",id:"terrain",module:"terrain",version:mF,worker:!0,extensions:["png","pngraw","jpg","jpeg","gif","webp","bmp"],mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp"],options:{terrain:{tesselator:"auto",bounds:null,meshMaxError:10,elevationDecoder:{rScaler:1,gScaler:0,bScaler:0,offset:0},skirtHeight:null}}},toe={name:"Quantized Mesh",id:"quantized-mesh",module:"terrain",version:mF,worker:!0,extensions:["terrain"],mimeTypes:["application/vnd.quantized-mesh"],options:{"quantized-mesh":{bounds:[0,0,1,1],skirtHeight:null}}};({...yF});({...toe});const j3=[1],noe={...Yh.defaultProps,elevationData:l2,texture:{...l2,optional:!0},meshMaxError:{type:"number",value:4},bounds:{type:"array",value:null,optional:!0,compare:!0},color:{type:"color",value:[255,255,255]},elevationDecoder:{type:"object",value:{rScaler:1,gScaler:0,bScaler:0,offset:0}},workerUrl:{type:"string",value:null},wireframe:!1,material:!0,loaders:[yF]};function H3(t){return Array.isArray(t)?t.join(";"):t||""}class vF extends Fo{constructor(...e){super(...e),T(this,"state",void 0)}updateState({props:e,oldProps:n}){const r=e.elevationData!==n.elevationData;if(r){const{elevationData:s}=e,o=s&&(Array.isArray(s)||s.includes("{x}")&&s.includes("{y}"));this.setState({isTiled:o})}const i=r||e.meshMaxError!==n.meshMaxError||e.elevationDecoder!==n.elevationDecoder||e.bounds!==n.bounds;if(!this.state.isTiled&&i){const s=this.loadTerrain(e);this.setState({terrain:s})}e.workerUrl&&je.removed("workerUrl","loadOptions.terrain.workerUrl")()}loadTerrain({elevationData:e,bounds:n,elevationDecoder:r,meshMaxError:i,signal:s}){var o;if(!e)return null;let a=this.getLoadOptions();a={...a,terrain:{skirtHeight:this.state.isTiled?i*2:0,...(o=a)===null||o===void 0?void 0:o.terrain,bounds:n,meshMaxError:i,elevationDecoder:r}};const{fetch:l}=this.props;return l(e,{propName:"elevationData",layer:this,loadOptions:a,signal:s})}getTiledTerrainData(e){const{elevationData:n,fetch:r,texture:i,elevationDecoder:s,meshMaxError:o}=this.props,{viewport:a}=this.context,l=Tg(n,e),f=i&&Tg(i,e),{signal:d}=e;let g=[0,0],y=[0,0];if(a.isGeospatial){const M=e.bbox;g=a.projectFlat([M.west,M.south]),y=a.projectFlat([M.east,M.north])}else{const M=e.bbox;g=[M.left,M.bottom],y=[M.right,M.top]}const b=[g[0],g[1],y[0],y[1]],E=this.loadTerrain({elevationData:l,bounds:b,elevationDecoder:s,meshMaxError:o,signal:d}),S=f?r(f,{propName:"texture",layer:this,loaders:[],signal:d}).catch(M=>null):Promise.resolve(null);return Promise.all([E,S])}renderSubLayers(e){const n=this.getSubLayerClass("mesh",uh),{color:r,wireframe:i,material:s}=this.props,{data:o}=e;if(!o)return null;const[a,l]=o;return new n(e,{data:j3,mesh:a,texture:l,_instanced:!1,coordinateSystem:Ze.CARTESIAN,getPosition:f=>[0,0,0],getColor:r,wireframe:i,material:s})}onViewportLoad(e){if(!e)return;const{zRange:n}=this.state,r=e.map(o=>o.content).filter(Boolean).map(o=>o[0].header.boundingBox.map(l=>l[2]));if(r.length===0)return;const i=Math.min(...r.map(o=>o[0])),s=Math.max(...r.map(o=>o[1]));(!n||i<n[0]||s>n[1])&&this.setState({zRange:[i,s]})}renderLayers(){const{color:e,material:n,elevationData:r,texture:i,wireframe:s,meshMaxError:o,elevationDecoder:a,tileSize:l,maxZoom:f,minZoom:d,extent:g,maxRequests:y,onTileLoad:b,onTileUnload:E,onTileError:S,maxCacheSize:M,maxCacheByteSize:C,refinementStrategy:P}=this.props;if(this.state.isTiled)return new Yh(this.getSubLayerProps({id:"tiles"}),{getTileData:this.getTiledTerrainData.bind(this),renderSubLayers:this.renderSubLayers.bind(this),updateTriggers:{getTileData:{elevationData:H3(r),texture:H3(i),meshMaxError:o,elevationDecoder:a}},onViewportLoad:this.onViewportLoad.bind(this),zRange:this.state.zRange||null,tileSize:l,maxZoom:f,minZoom:d,extent:g,maxRequests:y,onTileLoad:b,onTileUnload:E,onTileError:S,maxCacheSize:M,maxCacheByteSize:C,refinementStrategy:P});const I=this.getSubLayerClass("mesh",uh);return new I(this.getSubLayerProps({id:"mesh"}),{data:j3,mesh:this.state.terrain,texture:i,_instanced:!1,getPosition:L=>[0,0,0],getColor:e,material:n,wireframe:s})}}T(vF,"defaultProps",noe);T(vF,"layerName","TerrainLayer");function roe(t,e,n){const r=ioe(t),i=Object.keys(r).filter(s=>r[s]!==Array);return soe(t,{propArrayTypes:r,...e},{numericPropKeys:n&&n.numericPropKeys||i,PositionDataType:n?n.PositionDataType:Float32Array})}function ioe(t){const e={};for(const n of t)if(n.properties)for(const r in n.properties){const i=n.properties[r];e[r]=Aoe(i,e[r])}return e}function soe(t,e,n){const{pointPositionsCount:r,pointFeaturesCount:i,linePositionsCount:s,linePathsCount:o,lineFeaturesCount:a,polygonPositionsCount:l,polygonObjectsCount:f,polygonRingsCount:d,polygonFeaturesCount:g,propArrayTypes:y,coordLength:b}=e,{numericPropKeys:E=[],PositionDataType:S=Float32Array}=n,M=t[0]&&"id"in t[0],C=t.length>65535?Uint32Array:Uint16Array,P={type:"Point",positions:new S(r*b),globalFeatureIds:new C(r),featureIds:i>65535?new Uint32Array(r):new Uint16Array(r),numericProps:{},properties:[],fields:[]},I={type:"LineString",pathIndices:s>65535?new Uint32Array(o+1):new Uint16Array(o+1),positions:new S(s*b),globalFeatureIds:new C(s),featureIds:a>65535?new Uint32Array(s):new Uint16Array(s),numericProps:{},properties:[],fields:[]},L={type:"Polygon",polygonIndices:l>65535?new Uint32Array(f+1):new Uint16Array(f+1),primitivePolygonIndices:l>65535?new Uint32Array(d+1):new Uint16Array(d+1),positions:new S(l*b),triangles:[],globalFeatureIds:new C(l),featureIds:g>65535?new Uint32Array(l):new Uint16Array(l),numericProps:{},properties:[],fields:[]};for(const z of[P,I,L])for(const X of E){const Y=y[X];z.numericProps[X]=new Y(z.positions.length/b)}I.pathIndices[o]=s,L.polygonIndices[f]=l,L.primitivePolygonIndices[d]=l;const F={pointPosition:0,pointFeature:0,linePosition:0,linePath:0,lineFeature:0,polygonPosition:0,polygonObject:0,polygonRing:0,polygonFeature:0,feature:0};for(const z of t){const X=z.geometry,Y=z.properties||{};switch(X.type){case"Point":ooe(X,P,F,b,Y),P.properties.push(o_(Y,E)),M&&P.fields.push({id:z.id}),F.pointFeature++;break;case"LineString":aoe(X,I,F,b,Y),I.properties.push(o_(Y,E)),M&&I.fields.push({id:z.id}),F.lineFeature++;break;case"Polygon":loe(X,L,F,b,Y),L.properties.push(o_(Y,E)),M&&L.fields.push({id:z.id}),F.polygonFeature++;break;default:throw new Error("Invalid geometry type")}F.feature++}return uoe(P,I,L,b)}function ooe(t,e,n,r,i){e.positions.set(t.data,n.pointPosition*r);const s=t.data.length/r;oE(e,i,n.pointPosition,s),e.globalFeatureIds.fill(n.feature,n.pointPosition,n.pointPosition+s),e.featureIds.fill(n.pointFeature,n.pointPosition,n.pointPosition+s),n.pointPosition+=s}function aoe(t,e,n,r,i){e.positions.set(t.data,n.linePosition*r);const s=t.data.length/r;oE(e,i,n.linePosition,s),e.globalFeatureIds.fill(n.feature,n.linePosition,n.linePosition+s),e.featureIds.fill(n.lineFeature,n.linePosition,n.linePosition+s);for(let o=0,a=t.indices.length;o<a;++o){const l=t.indices[o],f=o===a-1?t.data.length:t.indices[o+1];e.pathIndices[n.linePath++]=n.linePosition,n.linePosition+=(f-l)/r}}function loe(t,e,n,r,i){e.positions.set(t.data,n.polygonPosition*r);const s=t.data.length/r;oE(e,i,n.polygonPosition,s),e.globalFeatureIds.fill(n.feature,n.polygonPosition,n.polygonPosition+s),e.featureIds.fill(n.polygonFeature,n.polygonPosition,n.polygonPosition+s);for(let o=0,a=t.indices.length;o<a;++o){const l=n.polygonPosition;e.polygonIndices[n.polygonObject++]=l;const f=t.areas[o],d=t.indices[o],g=t.indices[o+1];for(let b=0,E=d.length;b<E;++b){const S=d[b],M=b===E-1?g===void 0?t.data.length:g[0]:d[b+1];e.primitivePolygonIndices[n.polygonRing++]=n.polygonPosition,n.polygonPosition+=(M-S)/r}const y=n.polygonPosition;coe(e,f,d,{startPosition:l,endPosition:y,coordLength:r})}}function coe(t,e,n,{startPosition:r,endPosition:i,coordLength:s}){const o=r*s,a=i*s,l=t.positions.subarray(o,a),f=n[0],d=n.slice(1).map(y=>(y-f)/s),g=nY(l,d,s,e);for(let y=0,b=g.length;y<b;++y)t.triangles.push(r+g[y])}function s_(t,e){const n={};for(const r in t)n[r]={value:t[r],size:e};return n}function uoe(t,e,n,r){return{points:{...t,positions:{value:t.positions,size:r},globalFeatureIds:{value:t.globalFeatureIds,size:1},featureIds:{value:t.featureIds,size:1},numericProps:s_(t.numericProps,1)},lines:{...e,positions:{value:e.positions,size:r},pathIndices:{value:e.pathIndices,size:1},globalFeatureIds:{value:e.globalFeatureIds,size:1},featureIds:{value:e.featureIds,size:1},numericProps:s_(e.numericProps,1)},polygons:{...n,positions:{value:n.positions,size:r},polygonIndices:{value:n.polygonIndices,size:1},primitivePolygonIndices:{value:n.primitivePolygonIndices,size:1},triangles:{value:new Uint32Array(n.triangles),size:1},globalFeatureIds:{value:n.globalFeatureIds,size:1},featureIds:{value:n.featureIds,size:1},numericProps:s_(n.numericProps,1)}}}function oE(t,e,n,r){for(const i in t.numericProps)if(i in e){const s=e[i];t.numericProps[i].fill(s,n,n+r)}}function o_(t,e){const n={};for(const r in t)e.includes(r)||(n[r]=t[r]);return n}function Aoe(t,e){return e===Array||!Number.isFinite(t)?Array:e===Float64Array||Math.fround(t)!==t?Float64Array:Float32Array}function W3(t,e){const n=e==null?void 0:e.globalFeatureId;return n!==void 0?foe(t,n):hoe(t,e==null?void 0:e.type)}function foe(t,e){const n=_F(t);for(const r of n){let i=0,s=r.featureIds.value[0];for(let o=0;o<r.featureIds.value.length;o++){const a=r.featureIds.value[o];if(a!==s){if(e===r.globalFeatureIds.value[i])return Mg(r,i,o);i=o,s=a}}if(e===r.globalFeatureIds.value[i])return Mg(r,i,r.featureIds.value.length)}throw new Error("featureId:".concat(e," not found"))}function hoe(t,e){const n=_F(t,e);return poe(n)}function doe(t,e,n){switch(t.type){case"Point":return voe(t,e,n);case"LineString":return yoe(t,e,n);case"Polygon":return bF(t,e,n);default:const r=t;throw new Error("Unsupported geometry type: ".concat(r==null?void 0:r.type))}}function _F(t,e){if(!Boolean(t.points||t.lines||t.polygons))return t.type=e||_oe(t),[t];const r=[];return t.points&&(t.points.type="Point",r.push(t.points)),t.lines&&(t.lines.type="LineString",r.push(t.lines)),t.polygons&&(t.polygons.type="Polygon",r.push(t.polygons)),r}function poe(t){const e=[];for(const n of t){if(n.featureIds.value.length===0)continue;let r=0,i=n.featureIds.value[0];for(let s=0;s<n.featureIds.value.length;s++){const o=n.featureIds.value[s];o!==i&&(e.push(Mg(n,r,s)),r=s,i=o)}e.push(Mg(n,r,n.featureIds.value.length))}return e}function Mg(t,e,n){const r=doe(t,e,n),i=moe(t,e),s=goe(t,e);return{type:"Feature",geometry:r,properties:i,...s}}function goe(t,e=0,n){return t.fields&&t.fields[t.featureIds.value[e]]}function moe(t,e=0,n){const r=Object.assign({},t.properties[t.featureIds.value[e]]);for(const i in t.numericProps)r[i]=t.numericProps[i].value[e];return r}function bF(t,e=-1/0,n=1/0){const{positions:r}=t,i=t.polygonIndices.value.filter(l=>l>=e&&l<=n),s=t.primitivePolygonIndices.value.filter(l=>l>=e&&l<=n);if(!(i.length>2)){const l=[];for(let f=0;f<s.length-1;f++){const d=s[f],g=s[f+1],y=Ig(r,d,g);l.push(y)}return{type:"Polygon",coordinates:l}}const a=[];for(let l=0;l<i.length-1;l++){const f=i[l],d=i[l+1],g=bF(t,f,d).coordinates;a.push(g)}return{type:"MultiPolygon",coordinates:a}}function yoe(t,e=-1/0,n=1/0){const{positions:r}=t,i=t.pathIndices.value.filter(a=>a>=e&&a<=n);if(!(i.length>2)){const a=Ig(r,i[0],i[1]);return{type:"LineString",coordinates:a}}const o=[];for(let a=0;a<i.length-1;a++){const l=Ig(r,i[a],i[a+1]);o.push(l)}return{type:"MultiLineString",coordinates:o}}function voe(t,e,n){const{positions:r}=t,i=Ig(r,e,n);return i.length>1?{type:"MultiPoint",coordinates:i}:{type:"Point",coordinates:i[0]}}function Ig(t,e,n){e=e||0,n=n||t.value.length/t.size;const r=[];for(let i=e;i<n;i++){const s=Array();for(let o=i*t.size;o<(i+1)*t.size;o++)s.push(Number(t.value[o]));r.push(s)}return r}function _oe(t){return t.pathIndices?"LineString":t.polygonIndices?"Polygon":"Point"}var aE={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */aE.read=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,f=l>>1,d=-7,g=n?i-1:0,y=n?-1:1,b=t[e+g];for(g+=y,s=b&(1<<-d)-1,b>>=-d,d+=a;d>0;s=s*256+t[e+g],g+=y,d-=8);for(o=s&(1<<-d)-1,s>>=-d,d+=r;d>0;o=o*256+t[e+g],g+=y,d-=8);if(s===0)s=1-f;else{if(s===l)return o?NaN:(b?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-f}return(b?-1:1)*o*Math.pow(2,s-r)};aE.write=function(t,e,n,r,i,s){var o,a,l,f=s*8-i-1,d=(1<<f)-1,g=d>>1,y=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=r?0:s-1,E=r?1:-1,S=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+g>=1?e+=y/l:e+=y*Math.pow(2,1-g),e*l>=2&&(o++,l/=2),o+g>=d?(a=0,o=d):o+g>=1?(a=(e*l-1)*Math.pow(2,i),o=o+g):(a=e*Math.pow(2,g-1)*Math.pow(2,i),o=0));i>=8;t[n+b]=a&255,b+=E,a/=256,i-=8);for(o=o<<i|a,f+=i;f>0;t[n+b]=o&255,b+=E,o/=256,f-=8);t[n+b-E]|=S*128};var wF=St,F0=aE;function St(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}St.Varint=0;St.Fixed64=1;St.Bytes=2;St.Fixed32=5;var m2=(1<<16)*(1<<16),Q3=1/m2,boe=12,EF=typeof TextDecoder>"u"?null:new TextDecoder("utf8");St.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,s=this.pos;this.type=r&7,t(i,e,this),this.pos===s&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=k0(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=X3(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=k0(this.buf,this.pos)+k0(this.buf,this.pos+4)*m2;return this.pos+=8,t},readSFixed64:function(){var t=k0(this.buf,this.pos)+X3(this.buf,this.pos+4)*m2;return this.pos+=8,t},readFloat:function(){var t=F0.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=F0.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e=this.buf,n,r;return r=e[this.pos++],n=r&127,r<128||(r=e[this.pos++],n|=(r&127)<<7,r<128)||(r=e[this.pos++],n|=(r&127)<<14,r<128)||(r=e[this.pos++],n|=(r&127)<<21,r<128)?n:(r=e[this.pos],n|=(r&15)<<28,woe(n,t,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=boe&&EF?Foe(this.buf,e,t):Doe(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==St.Bytes)return t.push(this.readVarint(e));var n=so(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==St.Bytes)return t.push(this.readSVarint());var e=so(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==St.Bytes)return t.push(this.readBoolean());var e=so(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==St.Bytes)return t.push(this.readFloat());var e=so(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==St.Bytes)return t.push(this.readDouble());var e=so(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==St.Bytes)return t.push(this.readFixed32());var e=so(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==St.Bytes)return t.push(this.readSFixed32());var e=so(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==St.Bytes)return t.push(this.readFixed64());var e=so(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==St.Bytes)return t.push(this.readSFixed64());var e=so(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=t&7;if(e===St.Varint)for(;this.buf[this.pos++]>127;);else if(e===St.Bytes)this.pos=this.readVarint()+this.pos;else if(e===St.Fixed32)this.pos+=4;else if(e===St.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+e)},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),pc(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),pc(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),pc(this.buf,t&-1,this.pos),pc(this.buf,Math.floor(t*Q3),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),pc(this.buf,t&-1,this.pos),pc(this.buf,Math.floor(t*Q3),this.pos+4),this.pos+=8},writeVarint:function(t){if(t=+t||0,t>268435455||t<0){Eoe(t,this);return}this.realloc(4),this.buf[this.pos++]=t&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=t>>>7&127)))},writeSVarint:function(t){this.writeVarint(t<0?-t*2-1:t*2)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(t.length*4),this.pos++;var e=this.pos;this.pos=koe(this.buf,t,this.pos);var n=this.pos-e;n>=128&&$3(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),F0.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),F0.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&$3(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,St.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,xoe,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Coe,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Ioe,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,Poe,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Moe,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Boe,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Loe,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Roe,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Ooe,e)},writeBytesField:function(t,e){this.writeTag(t,St.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,St.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,St.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,St.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,St.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,St.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,St.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,St.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,St.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,St.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};function woe(t,e,n){var r=n.buf,i,s;if(s=r[n.pos++],i=(s&112)>>4,s<128||(s=r[n.pos++],i|=(s&127)<<3,s<128)||(s=r[n.pos++],i|=(s&127)<<10,s<128)||(s=r[n.pos++],i|=(s&127)<<17,s<128)||(s=r[n.pos++],i|=(s&127)<<24,s<128)||(s=r[n.pos++],i|=(s&1)<<31,s<128))return dc(t,i,e);throw new Error("Expected varint not more than 10 bytes")}function so(t){return t.type===St.Bytes?t.readVarint()+t.pos:t.pos+1}function dc(t,e,n){return n?e*4294967296+(t>>>0):(e>>>0)*4294967296+(t>>>0)}function Eoe(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(n=~(-t%4294967296),r=~(-t/4294967296),n^4294967295?n=n+1|0:(n=0,r=r+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),Toe(n,r,e),Soe(r,e)}function Toe(t,e,n){n.buf[n.pos++]=t&127|128,t>>>=7,n.buf[n.pos++]=t&127|128,t>>>=7,n.buf[n.pos++]=t&127|128,t>>>=7,n.buf[n.pos++]=t&127|128,t>>>=7,n.buf[n.pos]=t&127}function Soe(t,e){var n=(t&7)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127)))))}function $3(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function xoe(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function Coe(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function Poe(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function Moe(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function Ioe(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function Boe(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function Loe(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function Roe(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function Ooe(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function k0(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+t[e+3]*16777216}function pc(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function X3(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function Doe(t,e,n){for(var r="",i=e;i<n;){var s=t[i],o=null,a=s>239?4:s>223?3:s>191?2:1;if(i+a>n)break;var l,f,d;a===1?s<128&&(o=s):a===2?(l=t[i+1],(l&192)===128&&(o=(s&31)<<6|l&63,o<=127&&(o=null))):a===3?(l=t[i+1],f=t[i+2],(l&192)===128&&(f&192)===128&&(o=(s&15)<<12|(l&63)<<6|f&63,(o<=2047||o>=55296&&o<=57343)&&(o=null))):a===4&&(l=t[i+1],f=t[i+2],d=t[i+3],(l&192)===128&&(f&192)===128&&(d&192)===128&&(o=(s&15)<<18|(l&63)<<12|(f&63)<<6|d&63,(o<=65535||o>=1114112)&&(o=null))),o===null?(o=65533,a=1):o>65535&&(o-=65536,r+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),r+=String.fromCharCode(o),i+=a}return r}function Foe(t,e,n){return EF.decode(t.subarray(e,n))}function koe(t,e,n){for(var r=0,i,s;r<e.length;r++){if(i=e.charCodeAt(r),i>55295&&i<57344)if(s)if(i<56320){t[n++]=239,t[n++]=191,t[n++]=189,s=i;continue}else i=s-55296<<10|i-56320|65536,s=null;else{i>56319||r+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):s=i;continue}else s&&(t[n++]=239,t[n++]=191,t[n++]=189,s=null);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=i&63|128)}return n}function Noe(t){const e=t.length;if(e<=1)return[t];const n=[];let r,i;for(let s=0;s<e;s++){const o=Uoe(t[s]);o!==0&&(i===void 0&&(i=o<0),i===o<0?(r&&n.push(r),r=[t[s]]):r&&r.push(t[s]))}return r&&n.push(r),n}function Uoe(t){let e=0;for(let n=0,r=t.length-1,i,s;n<t.length;r=n++)i=t[n],s=t[r],e+=(s[0]-i[0])*(i[1]+s[1]);return e}function Goe(t,e,n){e&&n&&(t===1?e.id=n.readVarint():t===2?zoe(n,e):t===3?e.type=n.readVarint():t===4&&(e._geometry=n.pos))}function zoe(t,e){const n=t.readVarint()+t.pos;for(;t.pos<n;){const r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}class lE{static get types(){return["Unknown","Point","LineString","Polygon"]}constructor(e,n,r,i,s){T(this,"properties",void 0),T(this,"extent",void 0),T(this,"type",void 0),T(this,"id",void 0),T(this,"_pbf",void 0),T(this,"_geometry",void 0),T(this,"_keys",void 0),T(this,"_values",void 0),this.properties={},this.extent=r,this.type=0,this.id=null,this._pbf=e,this._geometry=-1,this._keys=i,this._values=s,e.readFields(Goe,this,n)}loadGeometry(){const e=this._pbf;e.pos=this._geometry;const n=e.readVarint()+e.pos;let r=1,i=0,s=0,o=0;const a=[];let l;for(;e.pos<n;){if(i<=0){const f=e.readVarint();r=f&7,i=f>>3}if(i--,r===1||r===2)s+=e.readSVarint(),o+=e.readSVarint(),r===1&&(l&&a.push(l),l=[]),l&&l.push([s,o]);else if(r===7)l&&l.push(l[0].slice());else throw new Error("unknown command ".concat(r))}return l&&a.push(l),a}bbox(){const e=this._pbf;e.pos=this._geometry;const n=e.readVarint()+e.pos;let r=1,i=0,s=0,o=0,a=1/0,l=-1/0,f=1/0,d=-1/0;for(;e.pos<n;){if(i<=0){const g=e.readVarint();r=g&7,i=g>>3}if(i--,r===1||r===2)s+=e.readSVarint(),o+=e.readSVarint(),s<a&&(a=s),s>l&&(l=s),o<f&&(f=o),o>d&&(d=o);else if(r!==7)throw new Error("unknown command ".concat(r))}return[a,f,l,d]}_toGeoJSON(e){let n=this.loadGeometry(),r=lE.types[this.type],i,s;switch(this.type){case 1:const a=[];for(i=0;i<n.length;i++)a[i]=n[i][0];n=a,e(n,this);break;case 2:for(i=0;i<n.length;i++)e(n[i],this);break;case 3:for(n=Noe(n),i=0;i<n.length;i++)for(s=0;s<n[i].length;s++)e(n[i][s],this);break}n.length===1?n=n[0]:r="Multi".concat(r);const o={type:"Feature",geometry:{type:r,coordinates:n},properties:this.properties};return this.id!==null&&(o.id=this.id),o}toGeoJSON(e){if(typeof e=="function")return this._toGeoJSON(e);const{x:n,y:r,z:i}=e,s=this.extent*Math.pow(2,i),o=this.extent*n,a=this.extent*r;function l(f){for(let d=0;d<f.length;d++){const g=f[d];g[0]=(g[0]+o)*360/s-180;const y=180-(g[1]+a)*360/s;g[1]=360/Math.PI*Math.atan(Math.exp(y*Math.PI/180))-90}}return this._toGeoJSON(l)}}class Voe{constructor(e,n){T(this,"version",void 0),T(this,"name",void 0),T(this,"extent",void 0),T(this,"length",void 0),T(this,"_pbf",void 0),T(this,"_keys",void 0),T(this,"_values",void 0),T(this,"_features",void 0),this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(joe,this,n),this.length=this._features.length}feature(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];const n=this._pbf.readVarint()+this._pbf.pos;return new lE(this._pbf,n,this.extent,this._keys,this._values)}}function joe(t,e,n){e&&n&&(t===15?e.version=n.readVarint():t===1?e.name=n.readString():t===5?e.extent=n.readVarint():t===2?e._features.push(n.pos):t===3?e._keys.push(n.readString()):t===4&&e._values.push(Hoe(n)))}function Hoe(t){let e=null;const n=t.readVarint()+t.pos;for(;t.pos<n;){const r=t.readVarint()>>3;e=r===1?t.readString():r===2?t.readFloat():r===3?t.readDouble():r===4?t.readVarint64():r===5?t.readVarint():r===6?t.readSVarint():r===7?t.readBoolean():null}return e}class Woe{constructor(e,n){T(this,"layers",void 0),this.layers=e.readFields(Qoe,{},n)}}function Qoe(t,e,n){if(t===3&&n){const r=new Voe(n,n.readVarint()+n.pos);r.length&&e&&(e[r.name]=r)}}function $oe(t){const e=t.indices.length,n="Polygon";if(e<=1)return{type:n,data:t.data,areas:[[_g(t.data)]],indices:[t.indices]};const r=[],i=[];let s=[],o=[],a,l=0;for(let f,d=0,g;d<e;d++){g=t.indices[d]-l,f=t.indices[d+1]-l||t.data.length;const y=t.data.slice(g,f),b=_g(y);if(b===0){const E=t.data.slice(0,g),S=t.data.slice(f);t.data=E.concat(S),l+=f-g;continue}a===void 0&&(a=b<0),a===b<0?(o.length&&(r.push(s),i.push(o)),o=[g],s=[b]):(s.push(b),o.push(g))}return s&&r.push(s),o.length&&i.push(o),{type:n,areas:r,indices:i,data:t.data}}function Xoe(t,e,n,r){for(let i=0,s=t.length;i<s;i+=2){t[i]=(t[i]+e)*360/r-180;const o=180-(t[i+1]+n)*360/r;t[i+1]=360/Math.PI*Math.atan(Math.exp(o*Math.PI/180))-90}}function Joe(t,e,n){e&&n&&(t===1?e.id=n.readVarint():t===2?Koe(n,e):t===3?e.type=n.readVarint():t===4&&(e._geometry=n.pos))}function Koe(t,e){const n=t.readVarint()+t.pos;for(;t.pos<n;){const r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}let J3,Za,a_,N0,l_,c_,HA;class Yoe{constructor(e,n,r,i,s,o){T(this,"properties",void 0),T(this,"extent",void 0),T(this,"type",void 0),T(this,"id",void 0),T(this,"_pbf",void 0),T(this,"_geometry",void 0),T(this,"_keys",void 0),T(this,"_values",void 0),T(this,"_geometryInfo",void 0),this.properties={},this.extent=r,this.type=0,this.id=null,this._pbf=e,this._geometry=-1,this._keys=i,this._values=s,this._geometryInfo=o,e.readFields(Joe,this,n)}loadGeometry(){const e=this._pbf;e.pos=this._geometry,J3=e.readVarint()+e.pos,Za=1,N0=0,l_=0,c_=0,HA=0;const n=[],r=[];for(;e.pos<J3;)if(N0<=0&&(a_=e.readVarint(),Za=a_&7,N0=a_>>3),N0--,Za===1||Za===2)l_+=e.readSVarint(),c_+=e.readSVarint(),Za===1&&n.push(HA),r.push(l_,c_),HA+=2;else if(Za===7){if(HA>0){const i=n[n.length-1];r.push(r[i],r[i+1]),HA+=2}}else throw new Error("unknown command ".concat(Za));return{data:r,indices:n}}_toBinaryCoordinates(e){const n=this.loadGeometry();let r;e(n.data,this);const i=2;switch(this.type){case 1:this._geometryInfo.pointFeaturesCount++,this._geometryInfo.pointPositionsCount+=n.indices.length,r={type:"Point",...n};break;case 2:this._geometryInfo.lineFeaturesCount++,this._geometryInfo.linePathsCount+=n.indices.length,this._geometryInfo.linePositionsCount+=n.data.length/i,r={type:"LineString",...n};break;case 3:r=$oe(n),this._geometryInfo.polygonFeaturesCount++,this._geometryInfo.polygonObjectsCount+=r.indices.length;for(const o of r.indices)this._geometryInfo.polygonRingsCount+=o.length;this._geometryInfo.polygonPositionsCount+=r.data.length/i;break;default:throw new Error("Invalid geometry type: ".concat(this.type))}const s={type:"Feature",geometry:r,properties:this.properties};return this.id!==null&&(s.id=this.id),s}toBinaryCoordinates(e){if(typeof e=="function")return this._toBinaryCoordinates(e);const{x:n,y:r,z:i}=e,s=this.extent*Math.pow(2,i),o=this.extent*n,a=this.extent*r;return this._toBinaryCoordinates(l=>Xoe(l,o,a,s))}}class qoe{constructor(e,n){T(this,"version",void 0),T(this,"name",void 0),T(this,"extent",void 0),T(this,"length",void 0),T(this,"_pbf",void 0),T(this,"_keys",void 0),T(this,"_values",void 0),T(this,"_features",void 0),this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Zoe,this,n),this.length=this._features.length}feature(e,n){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];const r=this._pbf.readVarint()+this._pbf.pos;return new Yoe(this._pbf,r,this.extent,this._keys,this._values,n)}}function Zoe(t,e,n){e&&n&&(t===15?e.version=n.readVarint():t===1?e.name=n.readString():t===5?e.extent=n.readVarint():t===2?e._features.push(n.pos):t===3?e._keys.push(n.readString()):t===4&&e._values.push(eae(n)))}function eae(t){let e=null;const n=t.readVarint()+t.pos;for(;t.pos<n;){const r=t.readVarint()>>3;e=r===1?t.readString():r===2?t.readFloat():r===3?t.readDouble():r===4?t.readVarint64():r===5?t.readVarint():r===6?t.readSVarint():r===7?t.readBoolean():null}return e}class tae{constructor(e,n){T(this,"layers",void 0),this.layers=e.readFields(nae,{},n)}}function nae(t,e,n){if(t===3&&n){const r=new qoe(n,n.readVarint()+n.pos);r.length&&e&&(e[r.name]=r)}}function K3(t,e){var n,r;const i=iae(e),s=(e==null||(n=e.gis)===null||n===void 0?void 0:n.format)||(e==null||(r=e.mvt)===null||r===void 0?void 0:r.shape);switch(s){case"columnar-table":return{shape:"columnar-table",data:u_(t,i)};case"geojson-row-table":return{shape:"geojson-row-table",data:Y3(t,i)};case"geojson":return Y3(t,i);case"binary-geometry":return u_(t,i);case"binary":return u_(t,i);default:throw new Error(s)}}function u_(t,e){const[n,r]=rae(t,e),i=roe(n,r);return i.byteLength=t.byteLength,i}function rae(t,e){const n=[],r={coordLength:2,pointPositionsCount:0,pointFeaturesCount:0,linePositionsCount:0,linePathsCount:0,lineFeaturesCount:0,polygonPositionsCount:0,polygonObjectsCount:0,polygonRingsCount:0,polygonFeaturesCount:0};if(t.byteLength<=0)return[n,r];const i=new tae(new wF(t));return(e&&Array.isArray(e.layers)?e.layers:Object.keys(i.layers)).forEach(o=>{const a=i.layers[o];if(!!a)for(let l=0;l<a.length;l++){const f=a.feature(l,r),d=oae(f,e,o);n.push(d)}}),[n,r]}function Y3(t,e){if(t.byteLength<=0)return[];const n=[],r=new Woe(new wF(t));return(Array.isArray(e.layers)?e.layers:Object.keys(r.layers)).forEach(s=>{const o=r.layers[s];if(!!o)for(let a=0;a<o.length;a++){const l=o.feature(a),f=sae(l,e,s);n.push(f)}}),n}function iae(t){var e;if(!(t!=null&&t.mvt))throw new Error("mvt options required");const n=((e=t.mvt)===null||e===void 0?void 0:e.coordinates)==="wgs84",{tileIndex:r}=t.mvt,i=r&&Number.isFinite(r.x)&&Number.isFinite(r.y)&&Number.isFinite(r.z);if(n&&!i)throw new Error("MVT Loader: WGS84 coordinates need tileIndex property");return t.mvt}function sae(t,e,n){const r=t.toGeoJSON(e.coordinates==="wgs84"?e.tileIndex:aae);return e.layerProperty&&(r.properties[e.layerProperty]=n),r}function oae(t,e,n){const r=t.toBinaryCoordinates(e.coordinates==="wgs84"?e.tileIndex:lae);return e.layerProperty&&r.properties&&(r.properties[e.layerProperty]=n),r}function aae(t,e){const{extent:n}=e;for(let r=0;r<t.length;r++){const i=t[r];i[0]/=n,i[1]/=n}}function lae(t,e){const{extent:n}=e;for(let r=0,i=t.length;r<i;++r)t[r]/=n}const cae="3.2.6",uae={mvt:{shape:"geojson",coordinates:"local",layerProperty:"layerName",layers:void 0,tileIndex:null}},TF={name:"Mapbox Vector Tile",id:"mvt",module:"mvt",version:cae,extensions:["mvt","pbf"],mimeTypes:["application/vnd.mapbox-vector-tile","application/x-protobuf"],worker:!0,category:"geometry",options:uae};({...TF});const SF={clipBounds:[0,0,1,1]},xF=`
uniform vec4 clip_bounds;

bool clip_isInBounds(vec2 position) {
  return position.x >= clip_bounds[0] && position.y >= clip_bounds[1] && position.x < clip_bounds[2] && position.y < clip_bounds[3];
}
`,Aae={name:"clip-vs",vs:xF},fae={"vs:#decl":`
varying float clip_isVisible;
`,"vs:DECKGL_FILTER_GL_POSITION":`
  clip_isVisible = float(clip_isInBounds(geometry.worldPosition.xy));
`,"fs:#decl":`
varying float clip_isVisible;
`,"fs:DECKGL_FILTER_COLOR":`
  if (clip_isVisible < 0.5) discard;
`},hae={name:"clip-fs",fs:xF},dae={"vs:#decl":`
varying vec2 clip_commonPosition;
`,"vs:DECKGL_FILTER_GL_POSITION":`
  clip_commonPosition = geometry.position.xy;
`,"fs:#decl":`
varying vec2 clip_commonPosition;
`,"fs:DECKGL_FILTER_COLOR":`
  if (!clip_isInBounds(clip_commonPosition)) discard;
`};class cE extends WO{getShaders(){let e="instancePositions"in this.getAttributeManager().attributes;return"clipByInstance"in this.props&&(e=this.props.clipByInstance),this.state.clipByInstance=e,e?{modules:[Aae],inject:fae}:{modules:[hae],inject:dae}}draw({uniforms:e}){const{clipBounds:n=SF.clipBounds}=this.props;if(this.state.clipByInstance)e.clip_bounds=n;else{const r=this.projectPosition([n[0],n[1],0]),i=this.projectPosition([n[2],n[3],0]);e.clip_bounds=[Math.min(r[0],i[0]),Math.min(r[1],i[1]),Math.max(r[0],i[0]),Math.max(r[1],i[1])]}}}T(cE,"defaultProps",SF);T(cE,"extensionName","ClipExtension");const pae={Point:CF,MultiPoint:gae,LineString:PF,MultiLineString:mae,Polygon:MF,MultiPolygon:yae};function CF([t,e],[n,r],i){const s=Ta(n[0],r[0],t),o=Ta(n[1],r[1],e);return i.unprojectFlat([s,o])}function uE(t,e,n){return t.map(r=>CF(r,e,n))}function gae(t,e,n){return uE(t,e,n)}function PF(t,e,n){return uE(t,e,n)}function mae(t,e,n){return t.map(r=>PF(r,e,n))}function MF(t,e,n){return t.map(r=>uE(r,e,n))}function yae(t,e,n){return t.map(r=>MF(r,e,n))}function vae(t,e,n){const r=n.projectFlat([e.west,e.north]),i=n.projectFlat([e.east,e.south]),s=[r,i];return{...t,coordinates:pae[t.type](t.coordinates,s,n)}}const _ae=["points","lines","polygons"];function bae(t,e,n,r){for(const i of _ae){const s=t[i]&&wae(t[i],e,n,r);if(s>=0)return s}return-1}function wae(t,e,n,r){const i=t.featureIds.value;if(!i.length)return-1;let s=0,o=i[i.length-1]+1;if(r){const l=Eae(t,r);if(l)s=l[0],o=l[1]+1;else return-1}let a=-1;if(e in t.numericProps){const l=t.numericProps[e].value.findIndex((f,d)=>f===n&&i[d]>=s&&i[d]<o);return l>=0?t.globalFeatureIds.value[l]:-1}else e?a=q3(t.properties,l=>l[e]===n,s,o):t.fields&&(a=q3(t.fields,l=>l.id===n,s,o));return a>=0?Tae(t,a):-1}function Eae(t,e){if(!t.__layers){const n={},{properties:r}=t;for(let i=0;i<r.length;i++){const{layerName:s}=r[i];s&&(n[s]?n[s][1]=i:n[s]=[i,i])}t.__layers=n}return t.__layers[e]}function Tae(t,e){if(!t.__ids){const n=[],r=t.featureIds.value,i=t.globalFeatureIds.value;for(let s=0;s<r.length;s++)n[r[s]]=i[s];t.__ids=n}return t.__ids[e]}function q3(t,e,n,r){for(let i=n;i<r;i++)if(e(t[i],i))return i;return-1}const A_=512,Sae={...Xh.defaultProps,onDataLoad:{type:"function",value:null,optional:!0,compare:!1},uniqueIdProperty:"",highlightedFeatureId:null,loaders:[TF],binary:!0};class IF extends Yh{initializeState(){super.initializeState();const e=this.context.viewport.resolution!==void 0?!1:this.props.binary;this.setState({binary:e,data:null,tileJSON:null})}get isLoaded(){return this.state&&this.state.data&&this.state.tileset&&super.isLoaded}updateState({props:e,oldProps:n,context:r,changeFlags:i}){var s;i.dataChanged&&this._updateTileData(),(s=this.state)!==null&&s!==void 0&&s.data&&(super.updateState({props:e,oldProps:n,context:r,changeFlags:i}),this._setWGS84PropertyForTiles());const{highlightColor:o}=e;o!==n.highlightColor&&Array.isArray(o)&&this.setState({highlightColor:o})}async _updateTileData(){let e=this.props.data,n=null;if(typeof e=="string"&&!VZ(e)){const{onDataLoad:r,fetch:i}=this.props;this.setState({data:null,tileJSON:null});try{n=await i(e,{propName:"data",layer:this,loaders:[]})}catch(s){this.raiseError(s,"loading TileJSON"),e=null}r&&r(n,{propName:"data",layer:this})}else e.tilejson&&(n=e);n&&(e=n.tiles),this.setState({data:e,tileJSON:n})}_getTilesetOptions(){const e=super._getTilesetOptions(),n=this.state.tileJSON,{minZoom:r,maxZoom:i}=this.props;return n&&(Number.isFinite(n.minzoom)&&n.minzoom>r&&(e.minZoom=n.minzoom),Number.isFinite(n.maxzoom)&&(!Number.isFinite(i)||n.maxzoom<i)&&(e.maxZoom=n.maxzoom)),e}renderLayers(){var e;return(e=this.state)!==null&&e!==void 0&&e.data?super.renderLayers():null}getTileData(e){var n;const{data:r,binary:i}=this.state,{index:s,signal:o}=e,a=Tg(r,e);if(!a)return Promise.reject("Invalid URL");let l=this.getLoadOptions();const{fetch:f}=this.props;return l={...l,mimeType:"application/x-protobuf",mvt:{...(n=l)===null||n===void 0?void 0:n.mvt,coordinates:this.context.viewport.resolution?"wgs84":"local",tileIndex:s},gis:i?{format:"binary"}:{}},f(a,{propName:"data",layer:this,loadOptions:l,signal:o})}renderSubLayers(e){const{x:n,y:r,z:i}=e.tile.index,s=Math.pow(2,i),o=A_/s,a=-o,l=A_*n/s,f=A_*(1-r/s),d=new $e().scale([o,a,1]);e.autoHighlight=!1,this.context.viewport.resolution||(e.modelMatrix=d,e.coordinateOrigin=[l,f,0],e.coordinateSystem=Ze.CARTESIAN,e.extensions=[...e.extensions||[],new cE]);const g=super.renderSubLayers(e);return this.state.binary&&!(g instanceof Xh)&&je.warn("renderSubLayers() must return GeoJsonLayer when using binary:true")(),g}_updateAutoHighlight(e){const{uniqueIdProperty:n}=this.props,{hoveredFeatureId:r,hoveredFeatureLayerName:i}=this.state,s=e.object;let o,a;s&&(o=f_(s,n),a=Z3(s));let{highlightColor:l}=this.props;typeof l=="function"&&(l=l(e)),(r!==o||i!==a)&&this.setState({highlightColor:l,hoveredFeatureId:o,hoveredFeatureLayerName:a})}getPickingInfo(e){const n=super.getPickingInfo(e),r=Boolean(this.context.viewport.resolution);if(this.state.binary&&n.index!==-1){const{data:i}=e.sourceLayer.props;n.object=W3(i,{globalFeatureId:n.index})}return n.object&&!r&&(n.object=tM(n.object,n.tile.bbox,this.context.viewport)),n}getSubLayerPropsByTile(e){return{highlightedObjectIndex:this.getHighlightedObjectIndex(e),highlightColor:this.state.highlightColor}}getHighlightedObjectIndex(e){const{hoveredFeatureId:n,hoveredFeatureLayerName:r,binary:i}=this.state,{uniqueIdProperty:s,highlightedFeatureId:o}=this.props,a=e.content,l=eM(o);if(!(eM(n)||l))return-1;const d=l?o:n;return Array.isArray(a)?a.findIndex(g=>{const y=f_(g,s)===d,b=l||Z3(g)===r;return y&&b}):a&&i?bae(a,s,d,l?"":r):-1}_pickObjects(e){const{deck:n,viewport:r}=this.context,i=r.width,s=r.height,o=r.x,a=r.y,l=[this.id];return n.pickObjects({x:o,y:a,width:i,height:s,layerIds:l,maxObjects:e})}getRenderedFeatures(e=null){const n=this._pickObjects(e),r=new Set,i=[];for(const s of n){const o=f_(s.object,this.props.uniqueIdProperty);o===void 0?i.push(s.object):r.has(o)||(r.add(o),i.push(s.object))}return i}_setWGS84PropertyForTiles(){const e="dataInWGS84";this.state.tileset.selectedTiles.forEach(r=>{r.hasOwnProperty(e)||Object.defineProperty(r,e,{get:()=>{if(!r.content)return null;if(this.state.binary&&Array.isArray(r.content)&&!r.content.length)return[];const{bbox:i}=r;if(r._contentWGS84===void 0&&jZ(i)){const s=this.state.binary?W3(r.content):r.content;r._contentWGS84=s.map(o=>tM(o,i,this.context.viewport))}return r._contentWGS84}})})}}T(IF,"layerName","MVTLayer");T(IF,"defaultProps",Sae);function f_(t,e){if(t.properties&&e)return t.properties[e];if("id"in t)return t.id}function Z3(t){var e;return((e=t.properties)===null||e===void 0?void 0:e.layerName)||null}function eM(t){return t!=null&&t!==""}function tM(t,e,n){const r={...t,geometry:{type:t.geometry.type}};return Object.defineProperty(r.geometry,"coordinates",{get:()=>vae(t.geometry,e,n).coordinates}),r}const nM="0123456789bcdefghjkmnpqrstuvwxyz",BF={};for(let t=0;t<nM.length;t++)BF[nM.charAt(t)]=t;const xae=-90,Cae=90,Pae=-180,Mae=180;function Iae(t){let e=!0,n=Cae,r=xae,i=Mae,s=Pae,o,a=0;for(let l=0,f=t.length;l<f;l++){const d=t[l].toLowerCase();a=BF[d];for(let g=4;g>=0;g--){const y=a>>g&1;e?(o=(i+s)/2,y===1?s=o:i=o):(o=(n+r)/2,y===1?r=o:n=o),e=!e}}return[r,s,n,i]}function Bae(t){const[e,n,r,i]=Iae(t);return[i,r,i,e,n,e,n,r,i,r]}const Lae={getGeohash:{type:"accessor",value:t=>t.geohash}};class LF extends Xu{indexToBounds(){const{data:e,getGeohash:n}=this.props;return{data:e,_normalize:!1,positionFormat:"XY",getPolygon:(r,i)=>Bae(n(r,i))}}}T(LF,"layerName","GeohashLayer");T(LF,"defaultProps",Lae);const Rae=[165921696e4,165928242e4],Oae="pk.eyJ1IjoibWF5cTA0MjIiLCJhIjoiY2phamMwOHV4MjllajMzbnFyeTMwcmZvYiJ9.aFMw4Aws5zY9Y4NwYqFMlQ",Dae=new yO({color:[255,255,255],intensity:1}),Fae=new x$({color:[255,255,255],intensity:2,position:[-74.05,40.7,8e3]}),kae=new ww({ambientLight:Dae,pointLight:Fae}),Nae={ambient:.1,diffuse:.6,shininess:32,specularColor:[60,64,70]},Uae={buildingColor:[74,80,87],trailColor0:[253,128,93],trailColor1:[23,184,190],material:Nae,effects:[kae]},Gae={longitude:104.392,latitude:36.067,zoom:4,pitch:0,bearing:0},zae="mapbox://styles/mapbox/dark-v10";function Vae(t,e){t.setFilter("admin-0-boundary-disputed",["all",["==",["get","disputed"],"true"],["==",["get","admin_level"],0],["==",["get","maritime"],"false"],["match",["get","worldview"],["all",e],!0,!1]]),t.setFilter("admin-0-boundary",["all",["==",["get","admin_level"],0],["==",["get","disputed"],"false"],["==",["get","maritime"],"false"],["match",["get","worldview"],["all",e],!0,!1]]),t.setFilter("admin-0-boundary-bg",["all",["==",["get","admin_level"],0],["==",["get","maritime"],"false"],["match",["get","worldview"],["all",e],!0,!1]])}function jae({trailLength:t=180,initialViewState:e=Gae,mapStyle:n=zae,theme:r=Uae,loopLength:i=1e3,animationSpeed:s=1e5,timeRange:o=Rae}){const[a,l]=ie.exports.useState(o[0]),f=ie.exports.useRef(!0),d=ie.exports.useRef(0),g=ie.exports.useRef(),y=ie.exports.useCallback(()=>{const S=g.current.getMap();Vae(S,"CN")},[]),b=()=>{f.current&&l(S=>{const M=S+s;return M>o[1]?o[0]:M}),d.current=window.requestAnimationFrame(b)};ie.exports.useEffect(()=>(l(o[0]),d.current=window.requestAnimationFrame(b),()=>{window.cancelAnimationFrame(d.current),d.current=0}),[d,o[0],o[1]]);const E=[new Ww({id:"trips",data:"trips.json",getPath:S=>S.waypoints.map(M=>M.coords),getTimestamps:S=>S.waypoints.map(M=>M.timestamp),getColor:[0,187,221],opacity:.8,widthMinPixels:2,rounded:!0,fadeTrail:!0,trailLength:1e7,currentTime:a,shadowEnabled:!1})];return Gt(JO,{layers:E,effects:r.effects,initialViewState:e,controller:!0,children:Gt(zb,{reuseMaps:!0,ref:g,onLoad:y,mapStyle:n,mapboxAccessToken:Oae})})}function Je(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw new Error(typeof t=="number"?"[MobX] minified error nr: "+t+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+t)}var Hae={};function AE(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:Hae}var Wae=Object.assign,Bg=Object.getOwnPropertyDescriptor,po=Object.defineProperty,qh=Object.prototype,y2=[];Object.freeze(y2);var fE={};Object.freeze(fE);var Qae=typeof Proxy<"u",$ae=Object.toString();function RF(){Qae||Je("Proxy not available")}function OF(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var $c=function(){};function mi(t){return typeof t=="function"}function Ml(t){var e=typeof t;switch(e){case"string":case"symbol":case"number":return!0}return!1}function Nm(t){return t!==null&&typeof t=="object"}function Po(t){if(!Nm(t))return!1;var e=Object.getPrototypeOf(t);if(e==null)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n.toString()===$ae}function DF(t){var e=t==null?void 0:t.constructor;return e?e.name==="GeneratorFunction"||e.displayName==="GeneratorFunction":!1}function Zh(t,e,n){po(t,e,{enumerable:!1,writable:!0,configurable:!0,value:n})}function FF(t,e,n){po(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}function Da(t,e){var n="isMobX"+t;return e.prototype[n]=!0,function(r){return Nm(r)&&r[n]===!0}}function Yu(t){return t instanceof Map}function ed(t){return t instanceof Set}var kF=typeof Object.getOwnPropertySymbols<"u";function Xae(t){var e=Object.keys(t);if(!kF)return e;var n=Object.getOwnPropertySymbols(t);return n.length?[].concat(e,n.filter(function(r){return qh.propertyIsEnumerable.call(t,r)})):e}var Cu=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:kF?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames;function NF(t){return t===null?null:typeof t=="object"?""+t:t}function go(t,e){return qh.hasOwnProperty.call(t,e)}var Jae=Object.getOwnPropertyDescriptors||function(e){var n={};return Cu(e).forEach(function(r){n[r]=Bg(e,r)}),n};function rM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hE(t,e,n){return e&&rM(t.prototype,e),n&&rM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Il(){return Il=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Il.apply(this,arguments)}function UF(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,v2(t,e)}function v2(t,e){return v2=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},v2(t,e)}function h_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kae(t,e){if(!!t){if(typeof t=="string")return iM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iM(t,e)}}function iM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xc(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=Kae(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Gs=Symbol("mobx-stored-annotations");function us(t){function e(n,r){td(n,r,t)}return Object.assign(e,t)}function td(t,e,n){go(t,Gs)||Zh(t,Gs,Il({},t[Gs])),sle(n)||(t[Gs][e]=n)}function Yae(t){return go(t,Gs)||Zh(t,Gs,Il({},t[Gs])),t[Gs]}var Ne=Symbol("mobx administration"),nd=function(){function t(n){n===void 0&&(n="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Et.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=n}var e=t.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(r){return r()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(r){return r()})},e.reportObserved=function(){return ak(this)},e.reportChanged=function(){mr(),lk(this),yr()},e.toString=function(){return this.name_},t}(),dE=Da("Atom",nd);function Fa(t,e,n){e===void 0&&(e=$c),n===void 0&&(n=$c);var r=new nd(t);return e!==$c&&vk(r,e),n!==$c&&vE(r,n),r}function qae(t,e){return t===e}function Zae(t,e){return CE(t,e)}function ele(t,e){return CE(t,e,1)}function tle(t,e){return Object.is?Object.is(t,e):t===e?t!==0||1/t===1/e:t!==t&&e!==e}var Bl={identity:qae,structural:Zae,default:tle,shallow:ele};function Pu(t,e,n){return Mo(t)?t:Array.isArray(t)?gt.array(t,{name:n}):Po(t)?gt.object(t,void 0,{name:n}):Yu(t)?gt.map(t,{name:n}):ed(t)?gt.set(t,{name:n}):typeof t=="function"&&!jm(t)&&!dh(t)?DF(t)?Iu(t):Mu(n,t):t}function nle(t,e,n){if(t==null||pn(t)||nr(t)||Qn(t)||wr(t))return t;if(Array.isArray(t))return gt.array(t,{name:n,deep:!1});if(Po(t))return gt.object(t,void 0,{name:n,deep:!1});if(Yu(t))return gt.map(t,{name:n,deep:!1});if(ed(t))return gt.set(t,{name:n,deep:!1})}function Um(t){return t}function rle(t,e){return CE(t,e)?e:t}var GF="override",ile=us({annotationType_:GF,make_:ole,extend_:ale});function sle(t){return t.annotationType_===GF}function ole(t,e){return 0}function ale(t,e,n,r){Je("'"+this.annotationType_+"' can only be used with 'makeObservable'")}function rd(t,e){return{annotationType_:t,options_:e,make_:lle,extend_:cle}}function lle(t,e,n,r){var i;if((i=this.options_)!=null&&i.bound)return this.extend_(t,e,n,!1)===null?0:1;if(r===t.target_)return this.extend_(t,e,n,!1)===null?0:2;if(jm(n.value))return 1;var s=zF(t,this,e,n,!1);return po(r,e,s),2}function cle(t,e,n,r){var i=zF(t,this,e,n);return t.defineProperty_(e,i,r)}function ule(t,e,n,r){e.annotationType_,r.value}function zF(t,e,n,r,i){var s,o,a,l,f,d,g;i===void 0&&(i=pe.safeDescriptors),ule(t,e,n,r);var y=r.value;if((s=e.options_)!=null&&s.bound){var b;y=y.bind((b=t.proxy_)!=null?b:t.target_)}return{value:Ll((o=(a=e.options_)==null?void 0:a.name)!=null?o:n.toString(),y,(l=(f=e.options_)==null?void 0:f.autoAction)!=null?l:!1,(d=e.options_)!=null&&d.bound?(g=t.proxy_)!=null?g:t.target_:void 0),configurable:i?t.isPlainObject_:!0,enumerable:!1,writable:!i}}function VF(t,e){return{annotationType_:t,options_:e,make_:Ale,extend_:fle}}function Ale(t,e,n,r){var i;if(r===t.target_)return this.extend_(t,e,n,!1)===null?0:2;if((i=this.options_)!=null&&i.bound&&(!go(t.target_,e)||!dh(t.target_[e]))&&this.extend_(t,e,n,!1)===null)return 0;if(dh(n.value))return 1;var s=jF(t,this,e,n,!1,!1);return po(r,e,s),2}function fle(t,e,n,r){var i,s=jF(t,this,e,n,(i=this.options_)==null?void 0:i.bound);return t.defineProperty_(e,s,r)}function hle(t,e,n,r){e.annotationType_,r.value}function jF(t,e,n,r,i,s){s===void 0&&(s=pe.safeDescriptors),hle(t,e,n,r);var o=r.value;if(dh(o)||(o=Iu(o)),i){var a;o=o.bind((a=t.proxy_)!=null?a:t.target_),o.isMobXFlow=!0}return{value:o,configurable:s?t.isPlainObject_:!0,enumerable:!1,writable:!s}}function pE(t,e){return{annotationType_:t,options_:e,make_:dle,extend_:ple}}function dle(t,e,n){return this.extend_(t,e,n,!1)===null?0:1}function ple(t,e,n,r){return gle(t,this,e,n),t.defineComputedProperty_(e,Il({},this.options_,{get:n.get,set:n.set}),r)}function gle(t,e,n,r){e.annotationType_,r.get}function Gm(t,e){return{annotationType_:t,options_:e,make_:mle,extend_:yle}}function mle(t,e,n){return this.extend_(t,e,n,!1)===null?0:1}function yle(t,e,n,r){var i,s;return vle(t,this),t.defineObservableProperty_(e,n.value,(i=(s=this.options_)==null?void 0:s.enhancer)!=null?i:Pu,r)}function vle(t,e,n,r){e.annotationType_}var _le="true",ble=HF();function HF(t){return{annotationType_:_le,options_:t,make_:wle,extend_:Ele}}function wle(t,e,n,r){var i,s;if(n.get)return yn.make_(t,e,n,r);if(n.set){var o=Ll(e.toString(),n.set);return r===t.target_?t.defineProperty_(e,{configurable:pe.safeDescriptors?t.isPlainObject_:!0,set:o})===null?0:2:(po(r,e,{configurable:!0,set:o}),2)}if(r!==t.target_&&typeof n.value=="function"){var a;if(DF(n.value)){var l,f=(l=this.options_)!=null&&l.autoBind?Iu.bound:Iu;return f.make_(t,e,n,r)}var d=(a=this.options_)!=null&&a.autoBind?Mu.bound:Mu;return d.make_(t,e,n,r)}var g=((i=this.options_)==null?void 0:i.deep)===!1?gt.ref:gt;if(typeof n.value=="function"&&(s=this.options_)!=null&&s.autoBind){var y;n.value=n.value.bind((y=t.proxy_)!=null?y:t.target_)}return g.make_(t,e,n,r)}function Ele(t,e,n,r){var i,s;if(n.get)return yn.extend_(t,e,n,r);if(n.set)return t.defineProperty_(e,{configurable:pe.safeDescriptors?t.isPlainObject_:!0,set:Ll(e.toString(),n.set)},r);if(typeof n.value=="function"&&(i=this.options_)!=null&&i.autoBind){var o;n.value=n.value.bind((o=t.proxy_)!=null?o:t.target_)}var a=((s=this.options_)==null?void 0:s.deep)===!1?gt.ref:gt;return a.extend_(t,e,n,r)}var Tle="observable",Sle="observable.ref",xle="observable.shallow",Cle="observable.struct",WF={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(WF);function U0(t){return t||WF}var QF=Gm(Tle),Ple=Gm(Sle,{enhancer:Um}),Mle=Gm(xle,{enhancer:nle}),Ile=Gm(Cle,{enhancer:rle}),$F=us(QF);function G0(t){return t.deep===!0?Pu:t.deep===!1?Um:Lle(t.defaultDecorator)}function Ble(t){var e;return t?(e=t.defaultDecorator)!=null?e:HF(t):void 0}function Lle(t){var e,n;return t&&(e=(n=t.options_)==null?void 0:n.enhancer)!=null?e:Pu}function XF(t,e,n){if(Ml(e)){td(t,e,QF);return}return Mo(t)?t:Po(t)?gt.object(t,e,n):Array.isArray(t)?gt.array(t,e):Yu(t)?gt.map(t,e):ed(t)?gt.set(t,e):typeof t=="object"&&t!==null?t:gt.box(t,e)}Object.assign(XF,$F);var Rle={box:function(e,n){var r=U0(n);return new dl(e,G0(r),r.name,!0,r.equals)},array:function(e,n){var r=U0(n);return(pe.useProxies===!1||r.proxy===!1?zce:Lce)(e,G0(r),r.name)},map:function(e,n){var r=U0(n);return new TE(e,G0(r),r.name)},set:function(e,n){var r=U0(n);return new SE(e,G0(r),r.name)},object:function(e,n,r){return _E(pe.useProxies===!1||(r==null?void 0:r.proxy)===!1?ld({},r):Pce({},r),e,n)},ref:us(Ple),shallow:us(Mle),deep:$F,struct:us(Ile)},gt=Wae(XF,Rle),JF="computed",Ole="computed.struct",KF=pE(JF),Dle=pE(Ole,{equals:Bl.structural}),yn=function(e,n){if(Ml(n))return td(e,n,KF);if(Po(e))return us(pE(JF,e));var r=Po(n)?n:{};return r.get=e,r.name||(r.name=e.name||""),new hh(r)};Object.assign(yn,KF);yn.struct=us(Dle);var sM,oM,Lg=0,Fle=1,kle=(sM=(oM=Bg(function(){},"name"))==null?void 0:oM.configurable)!=null?sM:!1,aM={value:"action",configurable:!0,writable:!1,enumerable:!1};function Ll(t,e,n,r){n===void 0&&(n=!1);function i(){return YF(t,n,e,r||this,arguments)}return i.isMobxAction=!0,kle&&(aM.value=t,Object.defineProperty(i,"name",aM)),i}function YF(t,e,n,r,i){var s=qF(t,e);try{return n.apply(r,i)}catch(o){throw s.error_=o,o}finally{ZF(s)}}function qF(t,e,n,r){var i=!1,s=0,o=pe.trackingDerivation,a=!e||!o;mr();var l=pe.allowStateChanges;a&&(qu(),l=id(!0));var f=Vm(!0),d={runAsAction_:a,prevDerivation_:o,prevAllowStateChanges_:l,prevAllowStateReads_:f,notifySpy_:i,startTime_:s,actionId_:Fle++,parentActionId_:Lg};return Lg=d.actionId_,d}function ZF(t){Lg!==t.actionId_&&Je(30),Lg=t.parentActionId_,t.error_!==void 0&&(pe.suppressReactionErrors=!0),sd(t.prevAllowStateChanges_),ou(t.prevAllowStateReads_),yr(),t.runAsAction_&&va(t.prevDerivation_),pe.suppressReactionErrors=!1}function zm(t,e){var n=id(t);try{return e()}finally{sd(n)}}function id(t){var e=pe.allowStateChanges;return pe.allowStateChanges=t,e}function sd(t){pe.allowStateChanges=t}var ek;ek=Symbol.toPrimitive;var dl=function(t){UF(e,t);function e(r,i,s,o,a){var l;return s===void 0&&(s="ObservableValue"),a===void 0&&(a=Bl.default),l=t.call(this,s)||this,l.enhancer=void 0,l.name_=void 0,l.equals=void 0,l.hasUnreportedChange_=!1,l.interceptors_=void 0,l.changeListeners_=void 0,l.value_=void 0,l.dehancer=void 0,l.enhancer=i,l.name_=s,l.equals=a,l.value_=i(r,void 0,s),l}var n=e.prototype;return n.dehanceValue=function(i){return this.dehancer!==void 0?this.dehancer(i):i},n.set=function(i){this.value_,i=this.prepareNewValue_(i),i!==pe.UNCHANGED&&this.setNewValue_(i)},n.prepareNewValue_=function(i){if(Pi(this)){var s=Mi(this,{object:this,type:js,newValue:i});if(!s)return pe.UNCHANGED;i=s.newValue}return i=this.enhancer(i,this.value_,this.name_),this.equals(this.value_,i)?pe.UNCHANGED:i},n.setNewValue_=function(i){var s=this.value_;this.value_=i,this.reportChanged(),As(this)&&fs(this,{type:js,object:this,newValue:i,oldValue:s})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(i){return od(this,i)},n.observe_=function(i,s){return s&&i({observableKind:"value",debugObjectName:this.name_,object:this,type:js,newValue:this.value_,oldValue:void 0}),ad(this,i)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return NF(this.get())},n[ek]=function(){return this.valueOf()},e}(nd),gE=Da("ObservableValue",dl),tk;tk=Symbol.toPrimitive;var hh=function(){function t(n){this.dependenciesState_=Et.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Et.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Rg(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=pl.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,n.get||Je(31),this.derivation=n.get,this.name_=n.name||"ComputedValue",n.set&&(this.setter_=Ll("ComputedValue-setter",n.set)),this.equals_=n.equals||(n.compareStructural||n.struct?Bl.structural:Bl.default),this.scope_=n.context,this.requiresReaction_=n.requiresReaction,this.keepAlive_=!!n.keepAlive}var e=t.prototype;return e.onBecomeStale_=function(){Xle(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(r){return r()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(r){return r()})},e.get=function(){if(this.isComputing_&&Je(32,this.name_,this.derivation),pe.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)_2(this)&&(this.warnAboutUntrackedRead_(),mr(),this.value_=this.computeValue_(!1),yr());else if(ak(this),_2(this)){var r=pe.trackingContext;this.keepAlive_&&!r&&(pe.trackingContext=this),this.trackAndCompute()&&$le(this),pe.trackingContext=r}var i=this.value_;if(Sp(i))throw i.cause;return i},e.set=function(r){if(this.setter_){this.isRunningSetter_&&Je(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,r)}finally{this.isRunningSetter_=!1}}else Je(34,this.name_)},e.trackAndCompute=function(){var r=this.value_,i=this.dependenciesState_===Et.NOT_TRACKING_,s=this.computeValue_(!0),o=i||Sp(r)||Sp(s)||!this.equals_(r,s);return o&&(this.value_=s),o},e.computeValue_=function(r){this.isComputing_=!0;var i=id(!1),s;if(r)s=nk(this,this.derivation,this.scope_);else if(pe.disableErrorBoundaries===!0)s=this.derivation.call(this.scope_);else try{s=this.derivation.call(this.scope_)}catch(o){s=new Rg(o)}return sd(i),this.isComputing_=!1,s},e.suspend_=function(){this.keepAlive_||(b2(this),this.value_=void 0)},e.observe_=function(r,i){var s=this,o=!0,a=void 0;return yE(function(){var l=s.get();if(!o||i){var f=qu();r({observableKind:"computed",debugObjectName:s.name_,type:js,object:s,newValue:l,oldValue:a}),va(f)}o=!1,a=l})},e.warnAboutUntrackedRead_=function(){},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return NF(this.get())},e[tk]=function(){return this.valueOf()},t}(),Rl=Da("ComputedValue",hh),Et;(function(t){t[t.NOT_TRACKING_=-1]="NOT_TRACKING_",t[t.UP_TO_DATE_=0]="UP_TO_DATE_",t[t.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",t[t.STALE_=2]="STALE_"})(Et||(Et={}));var pl;(function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"})(pl||(pl={}));var Rg=function(e){this.cause=void 0,this.cause=e};function Sp(t){return t instanceof Rg}function _2(t){switch(t.dependenciesState_){case Et.UP_TO_DATE_:return!1;case Et.NOT_TRACKING_:case Et.STALE_:return!0;case Et.POSSIBLY_STALE_:{for(var e=Vm(!0),n=qu(),r=t.observing_,i=r.length,s=0;s<i;s++){var o=r[s];if(Rl(o)){if(pe.disableErrorBoundaries)o.get();else try{o.get()}catch{return va(n),ou(e),!0}if(t.dependenciesState_===Et.STALE_)return va(n),ou(e),!0}}return rk(t),va(n),ou(e),!1}}}function Nle(){return pe.trackingDerivation!==null}function nk(t,e,n){var r=Vm(!0);rk(t),t.newObserving_=new Array(t.observing_.length+100),t.unboundDepsCount_=0,t.runId_=++pe.runId;var i=pe.trackingDerivation;pe.trackingDerivation=t,pe.inBatch++;var s;if(pe.disableErrorBoundaries===!0)s=e.call(n);else try{s=e.call(n)}catch(o){s=new Rg(o)}return pe.inBatch--,pe.trackingDerivation=i,Ule(t),ou(r),s}function Ule(t){for(var e=t.observing_,n=t.observing_=t.newObserving_,r=Et.UP_TO_DATE_,i=0,s=t.unboundDepsCount_,o=0;o<s;o++){var a=n[o];a.diffValue_===0&&(a.diffValue_=1,i!==o&&(n[i]=a),i++),a.dependenciesState_>r&&(r=a.dependenciesState_)}for(n.length=i,t.newObserving_=null,s=e.length;s--;){var l=e[s];l.diffValue_===0&&sk(l,t),l.diffValue_=0}for(;i--;){var f=n[i];f.diffValue_===1&&(f.diffValue_=0,Qle(f,t))}r!==Et.UP_TO_DATE_&&(t.dependenciesState_=r,t.onBecomeStale_())}function b2(t){var e=t.observing_;t.observing_=[];for(var n=e.length;n--;)sk(e[n],t);t.dependenciesState_=Et.NOT_TRACKING_}function mE(t){var e=qu();try{return t()}finally{va(e)}}function qu(){var t=pe.trackingDerivation;return pe.trackingDerivation=null,t}function va(t){pe.trackingDerivation=t}function Vm(t){var e=pe.allowStateReads;return pe.allowStateReads=t,e}function ou(t){pe.allowStateReads=t}function rk(t){if(t.dependenciesState_!==Et.UP_TO_DATE_){t.dependenciesState_=Et.UP_TO_DATE_;for(var e=t.observing_,n=e.length;n--;)e[n].lowestObserverState_=Et.UP_TO_DATE_}}var Gle=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","allowStateReads","disableErrorBoundaries","runId","UNCHANGED","useProxies"],Sf=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},xp=!0,ik=!1,pe=function(){var t=AE();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(xp=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==new Sf().version&&(xp=!1),xp?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new Sf):(setTimeout(function(){ik||Je(35)},1),new Sf)}();function zle(){if((pe.pendingReactions.length||pe.inBatch||pe.isRunningReactions)&&Je(36),ik=!0,xp){var t=AE();--t.__mobxInstanceCount===0&&(t.__mobxGlobals=void 0),pe=new Sf}}function Vle(){return pe}function jle(){var t=new Sf;for(var e in t)Gle.indexOf(e)===-1&&(pe[e]=t[e]);pe.allowStateChanges=!pe.enforceActions}function Hle(t){return t.observers_&&t.observers_.size>0}function Wle(t){return t.observers_}function Qle(t,e){t.observers_.add(e),t.lowestObserverState_>e.dependenciesState_&&(t.lowestObserverState_=e.dependenciesState_)}function sk(t,e){t.observers_.delete(e),t.observers_.size===0&&ok(t)}function ok(t){t.isPendingUnobservation_===!1&&(t.isPendingUnobservation_=!0,pe.pendingUnobservations.push(t))}function mr(){pe.inBatch++}function yr(){if(--pe.inBatch===0){ck();for(var t=pe.pendingUnobservations,e=0;e<t.length;e++){var n=t[e];n.isPendingUnobservation_=!1,n.observers_.size===0&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof hh&&n.suspend_())}pe.pendingUnobservations=[]}}function ak(t){var e=pe.trackingDerivation;return e!==null?(e.runId_!==t.lastAccessedBy_&&(t.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=t,!t.isBeingObserved_&&pe.trackingContext&&(t.isBeingObserved_=!0,t.onBO())),!0):(t.observers_.size===0&&pe.inBatch>0&&ok(t),!1)}function lk(t){t.lowestObserverState_!==Et.STALE_&&(t.lowestObserverState_=Et.STALE_,t.observers_.forEach(function(e){e.dependenciesState_===Et.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=Et.STALE_}))}function $le(t){t.lowestObserverState_!==Et.STALE_&&(t.lowestObserverState_=Et.STALE_,t.observers_.forEach(function(e){e.dependenciesState_===Et.POSSIBLY_STALE_?e.dependenciesState_=Et.STALE_:e.dependenciesState_===Et.UP_TO_DATE_&&(t.lowestObserverState_=Et.UP_TO_DATE_)}))}function Xle(t){t.lowestObserverState_===Et.UP_TO_DATE_&&(t.lowestObserverState_=Et.POSSIBLY_STALE_,t.observers_.forEach(function(e){e.dependenciesState_===Et.UP_TO_DATE_&&(e.dependenciesState_=Et.POSSIBLY_STALE_,e.onBecomeStale_())}))}var Ol=function(){function t(n,r,i,s){n===void 0&&(n="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Et.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=pl.NONE,this.name_=n,this.onInvalidate_=r,this.errorHandler_=i,this.requiresObservable_=s}var e=t.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,pe.pendingReactions.push(this),ck())},e.isScheduled=function(){return this.isScheduled_},e.runReaction_=function(){if(!this.isDisposed_){mr(),this.isScheduled_=!1;var r=pe.trackingContext;if(pe.trackingContext=this,_2(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(i){this.reportExceptionInDerivation_(i)}}pe.trackingContext=r,yr()}},e.track=function(r){if(!this.isDisposed_){mr(),this.isRunning_=!0;var i=pe.trackingContext;pe.trackingContext=this;var s=nk(this,r,void 0);pe.trackingContext=i,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&b2(this),Sp(s)&&this.reportExceptionInDerivation_(s.cause),yr()}},e.reportExceptionInDerivation_=function(r){var i=this;if(this.errorHandler_){this.errorHandler_(r,this);return}if(pe.disableErrorBoundaries)throw r;var s="[mobx] uncaught error in '"+this+"'";pe.suppressReactionErrors||console.error(s,r),pe.globalReactionErrorHandlers.forEach(function(o){return o(r,i)})},e.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(mr(),b2(this),yr()))},e.getDisposer_=function(){var r=this.dispose.bind(this);return r[Ne]=this,r},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(r){r===void 0&&(r=!1),Ik(this,r)},t}();function Jle(t){return pe.globalReactionErrorHandlers.push(t),function(){var e=pe.globalReactionErrorHandlers.indexOf(t);e>=0&&pe.globalReactionErrorHandlers.splice(e,1)}}var Kle=100,w2=function(e){return e()};function ck(){pe.inBatch>0||pe.isRunningReactions||w2(Yle)}function Yle(){pe.isRunningReactions=!0;for(var t=pe.pendingReactions,e=0;t.length>0;){++e===Kle&&(console.error("[mobx] cycle in reaction: "+t[0]),t.splice(0));for(var n=t.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction_()}pe.isRunningReactions=!1}var Og=Da("Reaction",Ol);function qle(t){var e=w2;w2=function(r){return t(function(){return e(r)})}}function xf(){return!1}function uk(t){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var Ak="action",Zle="action.bound",fk="autoAction",ece="autoAction.bound",hk="<unnamed action>",dk=rd(Ak),tce=rd(Zle,{bound:!0}),pk=rd(fk,{autoAction:!0}),nce=rd(ece,{autoAction:!0,bound:!0});function gk(t){var e=function(r,i){if(mi(r))return Ll(r.name||hk,r,t);if(mi(i))return Ll(r,i,t);if(Ml(i))return td(r,i,t?pk:dk);if(Ml(r))return us(rd(t?fk:Ak,{name:r,autoAction:t}))};return e}var Ve=gk(!1);Object.assign(Ve,dk);var Mu=gk(!0);Object.assign(Mu,pk);Ve.bound=us(tce);Mu.bound=us(nce);function E2(t){return YF(t.name||hk,!1,t,this,void 0)}function jm(t){return mi(t)&&t.isMobxAction===!0}function yE(t,e){var n,r;e===void 0&&(e=fE);var i=(n=(r=e)==null?void 0:r.name)!=null?n:"Autorun",s=!e.scheduler&&!e.delay,o;if(s)o=new Ol(i,function(){this.track(f)},e.onError,e.requiresObservable);else{var a=mk(e),l=!1;o=new Ol(i,function(){l||(l=!0,a(function(){l=!1,o.isDisposed_||o.track(f)}))},e.onError,e.requiresObservable)}function f(){t(o)}return o.schedule_(),o.getDisposer_()}var rce=function(e){return e()};function mk(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:rce}function yk(t,e,n){var r;n===void 0&&(n=fE);var i=(r=n.name)!=null?r:"Reaction",s=Ve(i,n.onError?ice(n.onError,e):e),o=!n.scheduler&&!n.delay,a=mk(n),l=!0,f=!1,d,g,y=n.compareStructural?Bl.structural:n.equals||Bl.default,b=new Ol(i,function(){l||o?E():f||(f=!0,a(E))},n.onError,n.requiresObservable);function E(){if(f=!1,!b.isDisposed_){var S=!1;b.track(function(){var M=zm(!1,function(){return t(b)});S=l||!y(d,M),g=d,d=M}),(l&&n.fireImmediately||!l&&S)&&s(d,g,b),l=!1}}return b.schedule_(),b.getDisposer_()}function ice(t,e){return function(){try{return e.apply(this,arguments)}catch(n){t.call(this,n)}}}var sce="onBO",oce="onBUO";function vk(t,e,n){return _k(sce,t,e,n)}function vE(t,e,n){return _k(oce,t,e,n)}function _k(t,e,n,r){var i=typeof r=="function"?ys(e,n):ys(e),s=mi(r)?r:n,o=t+"L";return i[o]?i[o].add(s):i[o]=new Set([s]),function(){var a=i[o];a&&(a.delete(s),a.size===0&&delete i[o])}}var ace="never",z0="always",lce="observed";function bk(t){t.isolateGlobalState===!0&&zle();var e=t.useProxies,n=t.enforceActions;if(e!==void 0&&(pe.useProxies=e===z0?!0:e===ace?!1:typeof Proxy<"u"),e==="ifavailable"&&(pe.verifyProxies=!0),n!==void 0){var r=n===z0?z0:n===lce;pe.enforceActions=r,pe.allowStateChanges=!(r===!0||r===z0)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(i){i in t&&(pe[i]=!!t[i])}),pe.allowStateReads=!pe.observableRequiresReaction,t.reactionScheduler&&qle(t.reactionScheduler)}function _E(t,e,n,r){var i=Jae(e),s=ld(t,r)[Ne];mr();try{Cu(i).forEach(function(o){s.extend_(o,i[o],n&&o in n?n[o]:!0)})}finally{yr()}return t}function wk(t,e){return Ek(ys(t,e))}function Ek(t){var e={name:t.name_};return t.observing_&&t.observing_.length>0&&(e.dependencies=uce(t.observing_).map(Ek)),e}function cce(t,e){return Tk(ys(t,e))}function Tk(t){var e={name:t.name_};return Hle(t)&&(e.observers=Array.from(Wle(t)).map(Tk)),e}function uce(t){return Array.from(new Set(t))}var Ace=0;function Hm(){this.message="FLOW_CANCELLED"}Hm.prototype=Object.create(Error.prototype);function fce(t){return t instanceof Hm}var lM=VF("flow"),hce=VF("flow.bound",{bound:!0}),Iu=Object.assign(function(e,n){if(Ml(n))return td(e,n,lM);var r=e,i=r.name||"<unnamed flow>",s=function(){var a=this,l=arguments,f=++Ace,d=Ve(i+" - runid: "+f+" - init",r).apply(a,l),g,y=void 0,b=new Promise(function(E,S){var M=0;g=S;function C(L){y=void 0;var F;try{F=Ve(i+" - runid: "+f+" - yield "+M++,d.next).call(d,L)}catch(z){return S(z)}I(F)}function P(L){y=void 0;var F;try{F=Ve(i+" - runid: "+f+" - yield "+M++,d.throw).call(d,L)}catch(z){return S(z)}I(F)}function I(L){if(mi(L==null?void 0:L.then)){L.then(I,S);return}return L.done?E(L.value):(y=Promise.resolve(L.value),y.then(C,P))}C(void 0)});return b.cancel=Ve(i+" - runid: "+f+" - cancel",function(){try{y&&cM(y);var E=d.return(void 0),S=Promise.resolve(E.value);S.then($c,$c),cM(S),g(new Hm)}catch(M){g(M)}}),b};return s.isMobXFlow=!0,s},lM);Iu.bound=us(hce);function cM(t){mi(t.cancel)&&t.cancel()}function dce(t){return t}function dh(t){return(t==null?void 0:t.isMobXFlow)===!0}function pce(t,e,n){var r;return Qn(t)||nr(t)||gE(t)?r=Io(t):pn(t)&&(r=Io(t,e)),r.dehancer=typeof e=="function"?e:n,function(){r.dehancer=void 0}}function Zu(t,e,n){return mi(n)?mce(t,e,n):gce(t,e)}function gce(t,e){return Io(t).intercept_(e)}function mce(t,e,n){return Io(t,e).intercept_(n)}function Sk(t,e){if(e===void 0)return Rl(t);if(pn(t)===!1||!t[Ne].values_.has(e))return!1;var n=ys(t,e);return Rl(n)}function yce(t){return Sk(t)}function vce(t,e){return Sk(t,e)}function xk(t,e){return t?e!==void 0?pn(t)?t[Ne].values_.has(e):!1:pn(t)||!!t[Ne]||dE(t)||Og(t)||Rl(t):!1}function Mo(t){return xk(t)}function _ce(t,e){return xk(t,e)}function Dl(t){if(pn(t))return t[Ne].keys_();if(Qn(t)||wr(t))return Array.from(t.keys());if(nr(t))return t.map(function(e,n){return n});Je(5)}function bE(t){if(pn(t))return Dl(t).map(function(e){return t[e]});if(Qn(t))return Dl(t).map(function(e){return t.get(e)});if(wr(t))return Array.from(t.values());if(nr(t))return t.slice();Je(6)}function Ck(t){if(pn(t))return Dl(t).map(function(e){return[e,t[e]]});if(Qn(t))return Dl(t).map(function(e){return[e,t.get(e)]});if(wr(t))return Array.from(t.entries());if(nr(t))return t.map(function(e,n){return[n,e]});Je(7)}function tn(t,e,n){if(arguments.length===2&&!wr(t)){mr();var r=e;try{for(var i in r)tn(t,i,r[i])}finally{yr()}return}pn(t)?t[Ne].set_(e,n):Qn(t)?t.set(e,n):wr(t)?t.add(e):nr(t)?(typeof e!="number"&&(e=parseInt(e,10)),e<0&&Je("Invalid index: '"+e+"'"),mr(),e>=t.length&&(t.length=e+1),t[e]=n,yr()):Je(8)}function ms(t,e){pn(t)?t[Ne].delete_(e):Qn(t)||wr(t)?t.delete(e):nr(t)?(typeof e!="number"&&(e=parseInt(e,10)),t.splice(e,1)):Je(9)}function wE(t,e){if(pn(t))return t[Ne].has_(e);if(Qn(t))return t.has(e);if(wr(t))return t.has(e);if(nr(t))return e>=0&&e<t.length;Je(10)}function Pk(t,e){if(!!wE(t,e)){if(pn(t))return t[Ne].get_(e);if(Qn(t))return t.get(e);if(nr(t))return t[e];Je(11)}}function bce(t,e,n){if(pn(t))return t[Ne].defineProperty_(e,n);Je(39)}function Mk(t){if(pn(t))return t[Ne].ownKeys_();Je(38)}function eA(t,e,n,r){return mi(n)?Ece(t,e,n,r):wce(t,e,n)}function wce(t,e,n){return Io(t).observe_(e,n)}function Ece(t,e,n,r){return Io(t,e).observe_(n,r)}function V0(t,e,n){return t.set(e,n),n}function Tc(t,e){if(t==null||typeof t!="object"||t instanceof Date||!Mo(t))return t;if(gE(t)||Rl(t))return Tc(t.get(),e);if(e.has(t))return e.get(t);if(nr(t)){var n=V0(e,t,new Array(t.length));return t.forEach(function(o,a){n[a]=Tc(o,e)}),n}if(wr(t)){var r=V0(e,t,new Set);return t.forEach(function(o){r.add(Tc(o,e))}),r}if(Qn(t)){var i=V0(e,t,new Map);return t.forEach(function(o,a){i.set(a,Tc(o,e))}),i}else{var s=V0(e,t,{});return Mk(t).forEach(function(o){qh.propertyIsEnumerable.call(t,o)&&(s[o]=Tc(t[o],e))}),s}}function T2(t,e){return Tc(t,new Map)}function Ik(){Je("trace() is not available in production builds");for(var t=!1,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];typeof n[n.length-1]=="boolean"&&(t=n.pop());var i=Tce(n);if(!i)return Je("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");i.isTracing_===pl.NONE&&console.log("[mobx.trace] '"+i.name_+"' tracing enabled"),i.isTracing_=t?pl.BREAK:pl.LOG}function Tce(t){switch(t.length){case 0:return pe.trackingDerivation;case 1:return ys(t[0]);case 2:return ys(t[0],t[1])}}function Ns(t,e){e===void 0&&(e=void 0),mr();try{return t.apply(e)}finally{yr()}}function Sce(t,e,n){return arguments.length===1||e&&typeof e=="object"?xce(t,e):Bk(t,e,n||{})}function Bk(t,e,n){var r;if(typeof n.timeout=="number"){var i=new Error("WHEN_TIMEOUT");r=setTimeout(function(){if(!o[Ne].isDisposed_)if(o(),n.onError)n.onError(i);else throw i},n.timeout)}n.name="When";var s=Ll("When-effect",e),o=yE(function(a){var l=zm(!1,t);l&&(a.dispose(),r&&clearTimeout(r),s())},n);return o}function xce(t,e){var n,r=new Promise(function(i,s){var o=Bk(t,i,Il({},e,{onError:s}));n=function(){o(),s(new Error("WHEN_CANCELLED"))}});return r.cancel=n,r}function gc(t){return t[Ne]}var Cce={has:function(e,n){return gc(e).has_(n)},get:function(e,n){return gc(e).get_(n)},set:function(e,n,r){var i;return Ml(n)?(i=gc(e).set_(n,r,!0))!=null?i:!0:!1},deleteProperty:function(e,n){var r;return Ml(n)?(r=gc(e).delete_(n,!0))!=null?r:!0:!1},defineProperty:function(e,n,r){var i;return(i=gc(e).defineProperty_(n,r))!=null?i:!0},ownKeys:function(e){return gc(e).ownKeys_()},preventExtensions:function(e){Je(13)}};function Pce(t,e){var n,r;return RF(),t=ld(t,e),(r=(n=t[Ne]).proxy_)!=null?r:n.proxy_=new Proxy(t,Cce)}function Pi(t){return t.interceptors_!==void 0&&t.interceptors_.length>0}function od(t,e){var n=t.interceptors_||(t.interceptors_=[]);return n.push(e),OF(function(){var r=n.indexOf(e);r!==-1&&n.splice(r,1)})}function Mi(t,e){var n=qu();try{for(var r=[].concat(t.interceptors_||[]),i=0,s=r.length;i<s&&(e=r[i](e),e&&!e.type&&Je(14),!!e);i++);return e}finally{va(n)}}function As(t){return t.changeListeners_!==void 0&&t.changeListeners_.length>0}function ad(t,e){var n=t.changeListeners_||(t.changeListeners_=[]);return n.push(e),OF(function(){var r=n.indexOf(e);r!==-1&&n.splice(r,1)})}function fs(t,e){var n=qu(),r=t.changeListeners_;if(!!r){r=r.slice();for(var i=0,s=r.length;i<s;i++)r[i](e);va(n)}}function Lk(t,e,n){var r=ld(t,n)[Ne];mr();try{var i;(i=e)!=null||(e=Yae(t)),Cu(e).forEach(function(s){return r.make_(s,e[s])})}finally{yr()}return t}var d_=Symbol("mobx-keys");function Mce(t,e,n){if(Po(t))return _E(t,t,e,n);var r=ld(t,n)[Ne];if(!t[d_]){var i=Object.getPrototypeOf(t),s=new Set([].concat(Cu(t),Cu(i)));s.delete("constructor"),s.delete(Ne),Zh(i,d_,s)}mr();try{t[d_].forEach(function(o){return r.make_(o,e&&o in e?e[o]:!0)})}finally{yr()}return t}var uM="splice",js="update",Ice=1e4,Bce={get:function(e,n){var r=e[Ne];return n===Ne?r:n==="length"?r.getArrayLength_():typeof n=="string"&&!isNaN(n)?r.get_(parseInt(n)):go(Dg,n)?Dg[n]:e[n]},set:function(e,n,r){var i=e[Ne];return n==="length"&&i.setArrayLength_(r),typeof n=="symbol"||isNaN(n)?e[n]=r:i.set_(parseInt(n),r),!0},preventExtensions:function(){Je(15)}},EE=function(){function t(n,r,i,s){n===void 0&&(n="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=i,this.legacyMode_=s,this.atom_=new nd(n),this.enhancer_=function(o,a){return r(o,a,"ObservableArray[..]")}}var e=t.prototype;return e.dehanceValue_=function(r){return this.dehancer!==void 0?this.dehancer(r):r},e.dehanceValues_=function(r){return this.dehancer!==void 0&&r.length>0?r.map(this.dehancer):r},e.intercept_=function(r){return od(this,r)},e.observe_=function(r,i){return i===void 0&&(i=!1),i&&r({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),ad(this,r)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(r){(typeof r!="number"||isNaN(r)||r<0)&&Je("Out of range: "+r);var i=this.values_.length;if(r!==i)if(r>i){for(var s=new Array(r-i),o=0;o<r-i;o++)s[o]=void 0;this.spliceWithArray_(i,0,s)}else this.spliceWithArray_(r,i-r)},e.updateArrayLength_=function(r,i){r!==this.lastKnownLength_&&Je(16),this.lastKnownLength_+=i,this.legacyMode_&&i>0&&zk(r+i+1)},e.spliceWithArray_=function(r,i,s){var o=this;this.atom_;var a=this.values_.length;if(r===void 0?r=0:r>a?r=a:r<0&&(r=Math.max(0,a+r)),arguments.length===1?i=a-r:i==null?i=0:i=Math.max(0,Math.min(i,a-r)),s===void 0&&(s=y2),Pi(this)){var l=Mi(this,{object:this.proxy_,type:uM,index:r,removedCount:i,added:s});if(!l)return y2;i=l.removedCount,s=l.added}if(s=s.length===0?s:s.map(function(g){return o.enhancer_(g,void 0)}),this.legacyMode_){var f=s.length-i;this.updateArrayLength_(a,f)}var d=this.spliceItemsIntoValues_(r,i,s);return(i!==0||s.length!==0)&&this.notifyArraySplice_(r,s,d),this.dehanceValues_(d)},e.spliceItemsIntoValues_=function(r,i,s){if(s.length<Ice){var o;return(o=this.values_).splice.apply(o,[r,i].concat(s))}else{var a=this.values_.slice(r,r+i),l=this.values_.slice(r+i);this.values_.length+=s.length-i;for(var f=0;f<s.length;f++)this.values_[r+f]=s[f];for(var d=0;d<l.length;d++)this.values_[r+s.length+d]=l[d];return a}},e.notifyArrayChildUpdate_=function(r,i,s){var o=!this.owned_&&xf(),a=As(this),l=a||o?{observableKind:"array",object:this.proxy_,type:js,debugObjectName:this.atom_.name_,index:r,newValue:i,oldValue:s}:null;this.atom_.reportChanged(),a&&fs(this,l)},e.notifyArraySplice_=function(r,i,s){var o=!this.owned_&&xf(),a=As(this),l=a||o?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:uM,index:r,removed:s,added:i,removedCount:s.length,addedCount:i.length}:null;this.atom_.reportChanged(),a&&fs(this,l)},e.get_=function(r){if(r<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[r]);console.warn("[mobx.array] Attempt to read an array index ("+r+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},e.set_=function(r,i){var s=this.values_;if(r<s.length){this.atom_;var o=s[r];if(Pi(this)){var a=Mi(this,{type:js,object:this.proxy_,index:r,newValue:i});if(!a)return;i=a.newValue}i=this.enhancer_(i,o);var l=i!==o;l&&(s[r]=i,this.notifyArrayChildUpdate_(r,i,o))}else r===s.length?this.spliceWithArray_(r,0,[i]):Je(17,r,s.length)},t}();function Lce(t,e,n,r){n===void 0&&(n="ObservableArray"),r===void 0&&(r=!1),RF();var i=new EE(n,e,r,!1);FF(i.values_,Ne,i);var s=new Proxy(i.values_,Bce);if(i.proxy_=s,t&&t.length){var o=id(!0);i.spliceWithArray_(0,0,t),sd(o)}return s}var Dg={clear:function(){return this.splice(0)},replace:function(e){var n=this[Ne];return n.spliceWithArray_(0,n.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];var o=this[Ne];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray_(e);case 2:return o.spliceWithArray_(e,n)}return o.spliceWithArray_(e,n,i)},spliceWithArray:function(e,n,r){return this[Ne].spliceWithArray_(e,n,r)},push:function(){for(var e=this[Ne],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.spliceWithArray_(e.values_.length,0,r),e.values_.length},pop:function(){return this.splice(Math.max(this[Ne].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[Ne],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.spliceWithArray_(0,0,r),e.values_.length},reverse:function(){return pe.trackingDerivation&&Je(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){pe.trackingDerivation&&Je(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var n=this[Ne],r=n.dehanceValues_(n.values_).indexOf(e);return r>-1?(this.splice(r,1),!0):!1}};Fn("concat",ko);Fn("flat",ko);Fn("includes",ko);Fn("indexOf",ko);Fn("join",ko);Fn("lastIndexOf",ko);Fn("slice",ko);Fn("toString",ko);Fn("toLocaleString",ko);Fn("every",ka);Fn("filter",ka);Fn("find",ka);Fn("findIndex",ka);Fn("flatMap",ka);Fn("forEach",ka);Fn("map",ka);Fn("some",ka);Fn("reduce",Rk);Fn("reduceRight",Rk);function Fn(t,e){typeof Array.prototype[t]=="function"&&(Dg[t]=e(t))}function ko(t){return function(){var e=this[Ne];e.atom_.reportObserved();var n=e.dehanceValues_(e.values_);return n[t].apply(n,arguments)}}function ka(t){return function(e,n){var r=this,i=this[Ne];i.atom_.reportObserved();var s=i.dehanceValues_(i.values_);return s[t](function(o,a){return e.call(n,o,a,r)})}}function Rk(t){return function(){var e=this,n=this[Ne];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),i=arguments[0];return arguments[0]=function(s,o,a){return i(s,o,a,e)},r[t].apply(r,arguments)}}var Rce=Da("ObservableArrayAdministration",EE);function nr(t){return Nm(t)&&Rce(t[Ne])}var Ok,Dk,Oce={},la="add",Fg="delete";Ok=Symbol.iterator;Dk=Symbol.toStringTag;var TE=function(){function t(n,r,i){var s=this;r===void 0&&(r=Pu),i===void 0&&(i="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Ne]=Oce,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=r,this.name_=i,mi(Map)||Je(18),this.keysAtom_=Fa("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,zm(!0,function(){s.merge(n)})}var e=t.prototype;return e.has_=function(r){return this.data_.has(r)},e.has=function(r){var i=this;if(!pe.trackingDerivation)return this.has_(r);var s=this.hasMap_.get(r);if(!s){var o=s=new dl(this.has_(r),Um,"ObservableMap.key?",!1);this.hasMap_.set(r,o),vE(o,function(){return i.hasMap_.delete(r)})}return s.get()},e.set=function(r,i){var s=this.has_(r);if(Pi(this)){var o=Mi(this,{type:s?js:la,object:this,newValue:i,name:r});if(!o)return this;i=o.newValue}return s?this.updateValue_(r,i):this.addValue_(r,i),this},e.delete=function(r){var i=this;if(this.keysAtom_,Pi(this)){var s=Mi(this,{type:Fg,object:this,name:r});if(!s)return!1}if(this.has_(r)){var o=xf(),a=As(this),l=a||o?{observableKind:"map",debugObjectName:this.name_,type:Fg,object:this,oldValue:this.data_.get(r).value_,name:r}:null;return Ns(function(){var f;i.keysAtom_.reportChanged(),(f=i.hasMap_.get(r))==null||f.setNewValue_(!1);var d=i.data_.get(r);d.setNewValue_(void 0),i.data_.delete(r)}),a&&fs(this,l),!0}return!1},e.updateValue_=function(r,i){var s=this.data_.get(r);if(i=s.prepareNewValue_(i),i!==pe.UNCHANGED){var o=xf(),a=As(this),l=a||o?{observableKind:"map",debugObjectName:this.name_,type:js,object:this,oldValue:s.value_,name:r,newValue:i}:null;s.setNewValue_(i),a&&fs(this,l)}},e.addValue_=function(r,i){var s=this;this.keysAtom_,Ns(function(){var f,d=new dl(i,s.enhancer_,"ObservableMap.key",!1);s.data_.set(r,d),i=d.value_,(f=s.hasMap_.get(r))==null||f.setNewValue_(!0),s.keysAtom_.reportChanged()});var o=xf(),a=As(this),l=a||o?{observableKind:"map",debugObjectName:this.name_,type:la,object:this,name:r,newValue:i}:null;a&&fs(this,l)},e.get=function(r){return this.has(r)?this.dehanceValue_(this.data_.get(r).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(r){return this.dehancer!==void 0?this.dehancer(r):r},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var r=this,i=this.keys();return ph({next:function(){var o=i.next(),a=o.done,l=o.value;return{done:a,value:a?void 0:r.get(l)}}})},e.entries=function(){var r=this,i=this.keys();return ph({next:function(){var o=i.next(),a=o.done,l=o.value;return{done:a,value:a?void 0:[l,r.get(l)]}}})},e[Ok]=function(){return this.entries()},e.forEach=function(r,i){for(var s=Xc(this),o;!(o=s()).done;){var a=o.value,l=a[0],f=a[1];r.call(i,f,l,this)}},e.merge=function(r){var i=this;return Qn(r)&&(r=new Map(r)),Ns(function(){Po(r)?Xae(r).forEach(function(s){return i.set(s,r[s])}):Array.isArray(r)?r.forEach(function(s){var o=s[0],a=s[1];return i.set(o,a)}):Yu(r)?(r.constructor!==Map&&Je(19,r),r.forEach(function(s,o){return i.set(o,s)})):r!=null&&Je(20,r)}),this},e.clear=function(){var r=this;Ns(function(){mE(function(){for(var i=Xc(r.keys()),s;!(s=i()).done;){var o=s.value;r.delete(o)}})})},e.replace=function(r){var i=this;return Ns(function(){for(var s=Dce(r),o=new Map,a=!1,l=Xc(i.data_.keys()),f;!(f=l()).done;){var d=f.value;if(!s.has(d)){var g=i.delete(d);if(g)a=!0;else{var y=i.data_.get(d);o.set(d,y)}}}for(var b=Xc(s.entries()),E;!(E=b()).done;){var S=E.value,M=S[0],C=S[1],P=i.data_.has(M);if(i.set(M,C),i.data_.has(M)){var I=i.data_.get(M);o.set(M,I),P||(a=!0)}}if(!a)if(i.data_.size!==o.size)i.keysAtom_.reportChanged();else for(var L=i.data_.keys(),F=o.keys(),z=L.next(),X=F.next();!z.done;){if(z.value!==X.value){i.keysAtom_.reportChanged();break}z=L.next(),X=F.next()}i.data_=o}),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(r,i){return ad(this,r)},e.intercept_=function(r){return od(this,r)},hE(t,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Dk,get:function(){return"Map"}}]),t}(),Qn=Da("ObservableMap",TE);function Dce(t){if(Yu(t)||Qn(t))return t;if(Array.isArray(t))return new Map(t);if(Po(t)){var e=new Map;for(var n in t)e.set(n,t[n]);return e}else return Je(21,t)}var Fk,kk,Fce={};Fk=Symbol.iterator;kk=Symbol.toStringTag;var SE=function(){function t(n,r,i){r===void 0&&(r=Pu),i===void 0&&(i="ObservableSet"),this.name_=void 0,this[Ne]=Fce,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=i,mi(Set)||Je(22),this.atom_=Fa(this.name_),this.enhancer_=function(s,o){return r(s,o,i)},n&&this.replace(n)}var e=t.prototype;return e.dehanceValue_=function(r){return this.dehancer!==void 0?this.dehancer(r):r},e.clear=function(){var r=this;Ns(function(){mE(function(){for(var i=Xc(r.data_.values()),s;!(s=i()).done;){var o=s.value;r.delete(o)}})})},e.forEach=function(r,i){for(var s=Xc(this),o;!(o=s()).done;){var a=o.value;r.call(i,a,a,this)}},e.add=function(r){var i=this;if(this.atom_,Pi(this)){var s=Mi(this,{type:la,object:this,newValue:r});if(!s)return this}if(!this.has(r)){Ns(function(){i.data_.add(i.enhancer_(r,void 0)),i.atom_.reportChanged()});var o=!1,a=As(this),l=a||o?{observableKind:"set",debugObjectName:this.name_,type:la,object:this,newValue:r}:null;a&&fs(this,l)}return this},e.delete=function(r){var i=this;if(Pi(this)){var s=Mi(this,{type:Fg,object:this,oldValue:r});if(!s)return!1}if(this.has(r)){var o=!1,a=As(this),l=a||o?{observableKind:"set",debugObjectName:this.name_,type:Fg,object:this,oldValue:r}:null;return Ns(function(){i.atom_.reportChanged(),i.data_.delete(r)}),a&&fs(this,l),!0}return!1},e.has=function(r){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(r))},e.entries=function(){var r=0,i=Array.from(this.keys()),s=Array.from(this.values());return ph({next:function(){var a=r;return r+=1,a<s.length?{value:[i[a],s[a]],done:!1}:{done:!0}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var r=this,i=0,s=Array.from(this.data_.values());return ph({next:function(){return i<s.length?{value:r.dehanceValue_(s[i++]),done:!1}:{done:!0}}})},e.replace=function(r){var i=this;return wr(r)&&(r=new Set(r)),Ns(function(){Array.isArray(r)?(i.clear(),r.forEach(function(s){return i.add(s)})):ed(r)?(i.clear(),r.forEach(function(s){return i.add(s)})):r!=null&&Je("Cannot initialize set from "+r)}),this},e.observe_=function(r,i){return ad(this,r)},e.intercept_=function(r){return od(this,r)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[Fk]=function(){return this.values()},hE(t,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:kk,get:function(){return"Set"}}]),t}(),wr=Da("ObservableSet",SE),AM=Object.create(null),fM="remove",Nk=function(){function t(n,r,i,s){r===void 0&&(r=new Map),s===void 0&&(s=ble),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=n,this.values_=r,this.name_=i,this.defaultAnnotation_=s,this.keysAtom_=new nd("ObservableObject.keys"),this.isPlainObject_=Po(this.target_)}var e=t.prototype;return e.getObservablePropValue_=function(r){return this.values_.get(r).get()},e.setObservablePropValue_=function(r,i){var s=this.values_.get(r);if(s instanceof hh)return s.set(i),!0;if(Pi(this)){var o=Mi(this,{type:js,object:this.proxy_||this.target_,name:r,newValue:i});if(!o)return null;i=o.newValue}if(i=s.prepareNewValue_(i),i!==pe.UNCHANGED){var a=As(this),l=!1,f=a||l?{type:js,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:s.value_,name:r,newValue:i}:null;s.setNewValue_(i),a&&fs(this,f)}return!0},e.get_=function(r){return pe.trackingDerivation&&!go(this.target_,r)&&this.has_(r),this.target_[r]},e.set_=function(r,i,s){return s===void 0&&(s=!1),go(this.target_,r)?this.values_.has(r)?this.setObservablePropValue_(r,i):s?Reflect.set(this.target_,r,i):(this.target_[r]=i,!0):this.extend_(r,{value:i,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,s)},e.has_=function(r){if(!pe.trackingDerivation)return r in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var i=this.pendingKeys_.get(r);return i||(i=new dl(r in this.target_,Um,"ObservableObject.key?",!1),this.pendingKeys_.set(r,i)),i.get()},e.make_=function(r,i){if(i===!0&&(i=this.defaultAnnotation_),i!==!1){if(!(r in this.target_)){var s;if((s=this.target_[Gs])!=null&&s[r])return;Je(1,i.annotationType_,this.name_+"."+r.toString())}for(var o=this.target_;o&&o!==qh;){var a=Bg(o,r);if(a){var l=i.make_(this,r,a,o);if(l===0)return;if(l===1)break}o=Object.getPrototypeOf(o)}dM(this,i,r)}},e.extend_=function(r,i,s,o){if(o===void 0&&(o=!1),s===!0&&(s=this.defaultAnnotation_),s===!1)return this.defineProperty_(r,i,o);var a=s.extend_(this,r,i,o);return a&&dM(this,s,r),a},e.defineProperty_=function(r,i,s){s===void 0&&(s=!1);try{mr();var o=this.delete_(r);if(!o)return o;if(Pi(this)){var a=Mi(this,{object:this.proxy_||this.target_,name:r,type:la,newValue:i.value});if(!a)return null;var l=a.newValue;i.value!==l&&(i=Il({},i,{value:l}))}if(s){if(!Reflect.defineProperty(this.target_,r,i))return!1}else po(this.target_,r,i);this.notifyPropertyAddition_(r,i.value)}finally{yr()}return!0},e.defineObservableProperty_=function(r,i,s,o){o===void 0&&(o=!1);try{mr();var a=this.delete_(r);if(!a)return a;if(Pi(this)){var l=Mi(this,{object:this.proxy_||this.target_,name:r,type:la,newValue:i});if(!l)return null;i=l.newValue}var f=hM(r),d={configurable:pe.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:f.get,set:f.set};if(o){if(!Reflect.defineProperty(this.target_,r,d))return!1}else po(this.target_,r,d);var g=new dl(i,s,"ObservableObject.key",!1);this.values_.set(r,g),this.notifyPropertyAddition_(r,g.value_)}finally{yr()}return!0},e.defineComputedProperty_=function(r,i,s){s===void 0&&(s=!1);try{mr();var o=this.delete_(r);if(!o)return o;if(Pi(this)){var a=Mi(this,{object:this.proxy_||this.target_,name:r,type:la,newValue:void 0});if(!a)return null}i.name||(i.name="ObservableObject.key"),i.context=this.proxy_||this.target_;var l=hM(r),f={configurable:pe.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:l.get,set:l.set};if(s){if(!Reflect.defineProperty(this.target_,r,f))return!1}else po(this.target_,r,f);this.values_.set(r,new hh(i)),this.notifyPropertyAddition_(r,void 0)}finally{yr()}return!0},e.delete_=function(r,i){if(i===void 0&&(i=!1),!go(this.target_,r))return!0;if(Pi(this)){var s=Mi(this,{object:this.proxy_||this.target_,name:r,type:fM});if(!s)return null}try{var o,a;mr();var l=As(this),f=!1,d=this.values_.get(r),g=void 0;if(!d&&(l||f)){var y;g=(y=Bg(this.target_,r))==null?void 0:y.value}if(i){if(!Reflect.deleteProperty(this.target_,r))return!1}else delete this.target_[r];if(d&&(this.values_.delete(r),d instanceof dl&&(g=d.value_),lk(d)),this.keysAtom_.reportChanged(),(o=this.pendingKeys_)==null||(a=o.get(r))==null||a.set(r in this.target_),l||f){var b={type:fM,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:g,name:r};l&&fs(this,b)}}finally{yr()}return!0},e.observe_=function(r,i){return ad(this,r)},e.intercept_=function(r){return od(this,r)},e.notifyPropertyAddition_=function(r,i){var s,o,a=As(this),l=!1;if(a||l){var f=a||l?{type:la,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:r,newValue:i}:null;a&&fs(this,f)}(s=this.pendingKeys_)==null||(o=s.get(r))==null||o.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),Cu(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},t}();function ld(t,e){var n;if(go(t,Ne))return t;var r=(n=e==null?void 0:e.name)!=null?n:"ObservableObject",i=new Nk(t,new Map,String(r),Ble(e));return Zh(t,Ne,i),t}var kce=Da("ObservableObjectAdministration",Nk);function hM(t){return AM[t]||(AM[t]={get:function(){return this[Ne].getObservablePropValue_(t)},set:function(n){return this[Ne].setObservablePropValue_(t,n)}})}function pn(t){return Nm(t)?kce(t[Ne]):!1}function dM(t,e,n){var r;(r=t.target_[Gs])==null||delete r[n]}var Nce=Gk(0),p_=0,Uk=function(){};function Uce(t,e){Object.setPrototypeOf?Object.setPrototypeOf(t.prototype,e):t.prototype.__proto__!==void 0?t.prototype.__proto__=e:t.prototype=e}Uce(Uk,Array.prototype);var xE=function(t,e,n){UF(r,t);function r(s,o,a,l){var f;a===void 0&&(a="ObservableArray"),l===void 0&&(l=!1),f=t.call(this)||this;var d=new EE(a,o,l,!0);if(d.proxy_=h_(f),FF(h_(f),Ne,d),s&&s.length){var g=id(!0);f.spliceWithArray(0,0,s),sd(g)}return Object.defineProperty(h_(f),"0",Nce),f}var i=r.prototype;return i.concat=function(){this[Ne].atom_.reportObserved();for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return Array.prototype.concat.apply(this.slice(),a.map(function(f){return nr(f)?f.slice():f}))},i[n]=function(){var s=this,o=0;return ph({next:function(){return o<s.length?{value:s[o++],done:!1}:{done:!0,value:void 0}}})},hE(r,[{key:"length",get:function(){return this[Ne].getArrayLength_()},set:function(o){this[Ne].setArrayLength_(o)}},{key:e,get:function(){return"Array"}}]),r}(Uk,Symbol.toStringTag,Symbol.iterator);Object.entries(Dg).forEach(function(t){var e=t[0],n=t[1];e!=="concat"&&Zh(xE.prototype,e,n)});function Gk(t){return{enumerable:!1,configurable:!0,get:function(){return this[Ne].get_(t)},set:function(n){this[Ne].set_(t,n)}}}function Gce(t){po(xE.prototype,""+t,Gk(t))}function zk(t){if(t>p_){for(var e=p_;e<t+100;e++)Gce(e);p_=t}}zk(1e3);function zce(t,e,n){return new xE(t,e,n)}function ys(t,e){if(typeof t=="object"&&t!==null){if(nr(t))return e!==void 0&&Je(23),t[Ne].atom_;if(wr(t))return t[Ne];if(Qn(t)){if(e===void 0)return t.keysAtom_;var n=t.data_.get(e)||t.hasMap_.get(e);return n||Je(25,e,kg(t)),n}if(pn(t)){if(!e)return Je(26);var r=t[Ne].values_.get(e);return r||Je(27,e,kg(t)),r}if(dE(t)||Rl(t)||Og(t))return t}else if(mi(t)&&Og(t[Ne]))return t[Ne];Je(28)}function Io(t,e){if(t||Je(29),e!==void 0)return Io(ys(t,e));if(dE(t)||Rl(t)||Og(t)||Qn(t)||wr(t))return t;if(t[Ne])return t[Ne];Je(24,t)}function kg(t,e){var n;if(e!==void 0)n=ys(t,e);else{if(jm(t))return t.name;pn(t)||Qn(t)||wr(t)?n=Io(t):n=ys(t)}return n.name_}var pM=qh.toString;function CE(t,e,n){return n===void 0&&(n=-1),S2(t,e,n)}function S2(t,e,n,r,i){if(t===e)return t!==0||1/t===1/e;if(t==null||e==null)return!1;if(t!==t)return e!==e;var s=typeof t;if(s!=="function"&&s!=="object"&&typeof e!="object")return!1;var o=pM.call(t);if(o!==pM.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:+t==0?1/+t===1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(t)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":n>=0&&n++;break}t=gM(t),e=gM(e);var a=o==="[object Array]";if(!a){if(typeof t!="object"||typeof e!="object")return!1;var l=t.constructor,f=e.constructor;if(l!==f&&!(mi(l)&&l instanceof l&&mi(f)&&f instanceof f)&&"constructor"in t&&"constructor"in e)return!1}if(n===0)return!1;n<0&&(n=-1),r=r||[],i=i||[];for(var d=r.length;d--;)if(r[d]===t)return i[d]===e;if(r.push(t),i.push(e),a){if(d=t.length,d!==e.length)return!1;for(;d--;)if(!S2(t[d],e[d],n-1,r,i))return!1}else{var g=Object.keys(t),y;if(d=g.length,Object.keys(e).length!==d)return!1;for(;d--;)if(y=g[d],!(go(e,y)&&S2(t[y],e[y],n-1,r,i)))return!1}return r.pop(),i.pop(),!0}function gM(t){return nr(t)?t.slice():Yu(t)||Qn(t)||ed(t)||wr(t)?Array.from(t.entries()):t}function ph(t){return t[Symbol.iterator]=Vce,t}function Vce(){return this}["Symbol","Map","Set"].forEach(function(t){var e=AE();typeof e[t]>"u"&&Je("MobX requires global '"+t+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:uk,extras:{getDebugName:kg},$mobx:Ne});const jce=Object.freeze(Object.defineProperty({__proto__:null,$mobx:Ne,FlowCancellationError:Hm,ObservableMap:TE,ObservableSet:SE,Reaction:Ol,_allowStateChanges:zm,_allowStateChangesInsideComputed:E2,_allowStateReadsEnd:ou,_allowStateReadsStart:Vm,_autoAction:Mu,_endAction:ZF,_getAdministration:Io,_getGlobalState:Vle,_interceptReads:pce,_isComputingDerivation:Nle,_resetGlobalState:jle,_startAction:qF,action:Ve,autorun:yE,comparer:Bl,computed:yn,configure:bk,createAtom:Fa,defineProperty:bce,entries:Ck,extendObservable:_E,flow:Iu,flowResult:dce,get:Pk,getAtom:ys,getDebugName:kg,getDependencyTree:wk,getObserverTree:cce,has:wE,intercept:Zu,isAction:jm,isBoxedObservable:gE,isComputed:yce,isComputedProp:vce,isFlow:dh,isFlowCancellationError:fce,isObservable:Mo,isObservableArray:nr,isObservableMap:Qn,isObservableObject:pn,isObservableProp:_ce,isObservableSet:wr,keys:Dl,makeAutoObservable:Mce,makeObservable:Lk,observable:gt,observe:eA,onBecomeObserved:vk,onBecomeUnobserved:vE,onReactionError:Jle,override:ile,ownKeys:Mk,reaction:yk,remove:ms,runInAction:E2,set:tn,spy:uk,toJS:T2,trace:Ik,transaction:Ns,untracked:mE,values:bE,when:Sce},Symbol.toStringTag,{value:"Module"}));if(!ie.exports.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!Lk)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function Hce(t){t()}function Wce(t){t||(t=Hce),bk({reactionScheduler:t})}function Qce(t){return wk(t)}var mM=typeof FinalizationRegistry>"u"?void 0:FinalizationRegistry;function Vk(t){var e={reaction:t,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+$ce};return e}var $ce=1e4,Xce=1e4;function Jce(t){var e=new Map,n=1,r=new t(function(s){var o=e.get(s);o&&(o.reaction.dispose(),e.delete(s))});return{addReactionToTrack:function(i,s,o){var a=n++;return r.register(o,a,i),i.current=Vk(s),i.current.finalizationRegistryCleanupToken=a,e.set(a,i.current),i.current},recordReactionAsCommitted:function(i){r.unregister(i),i.current&&i.current.finalizationRegistryCleanupToken&&e.delete(i.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}var Kce=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Yce(){var t=new Set,e;function n(){e&&(clearTimeout(e),a())}function r(){var l,f;if(t.size>0){try{for(var d=Kce(t),g=d.next();!g.done;g=d.next()){var y=g.value,b=y.current;b&&(b.reaction.dispose(),y.current=null)}}catch(E){l={error:E}}finally{try{g&&!g.done&&(f=d.return)&&f.call(d)}finally{if(l)throw l.error}}t.clear()}e&&(clearTimeout(e),e=void 0)}function i(){e===void 0&&(e=setTimeout(a,Xce))}function s(l){t.add(l),i()}function o(l){t.delete(l)}function a(){e=void 0;var l=Date.now();t.forEach(function(f){var d=f.current;d&&l>=d.cleanAt&&(d.reaction.dispose(),f.current=null,t.delete(f))}),t.size>0&&i()}return{addReactionToTrack:function(l,f,d){return l.current=Vk(f),s(l),l.current},recordReactionAsCommitted:o,forceCleanupTimerToRunNowForTests:n,resetCleanupScheduleForTests:r}}var jk=mM?Jce(mM):Yce(),qce=jk.addReactionToTrack,Zce=jk.recordReactionAsCommitted,yM=globalThis&&globalThis.__read||function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s};function vM(t){return"observer".concat(t)}var eue=function(){function t(){}return t}();function tue(){return new eue}function nue(t,e){e===void 0&&(e="observed");var n=yM(rl.useState(tue),1),r=n[0],i=yM(rl.useState(),2),s=i[1],o=function(){return s([])},a=rl.useRef(null);if(!a.current)var l=new Ol(vM(e),function(){f.mounted?o():f.changedBeforeMount=!0}),f=qce(a,l,r);var d=a.current.reaction;rl.useDebugValue(d,Qce),rl.useEffect(function(){return Zce(a),a.current?(a.current.mounted=!0,a.current.changedBeforeMount&&(a.current.changedBeforeMount=!1,o())):(a.current={reaction:new Ol(vM(e),function(){o()}),mounted:!0,changedBeforeMount:!1,cleanAt:1/0},o()),function(){a.current.reaction.dispose(),a.current=null}},[]);var g,y;if(d.track(function(){try{g=t()}catch(b){y=b}}),y)throw y;return g}var Hk=typeof Symbol=="function"&&Symbol.for,_M=Hk?Symbol.for("react.forward_ref"):typeof ie.exports.forwardRef=="function"&&ie.exports.forwardRef(function(t){return null}).$$typeof,bM=Hk?Symbol.for("react.memo"):typeof ie.exports.memo=="function"&&ie.exports.memo(function(t){return null}).$$typeof;function Wk(t,e){var n;if(bM&&t.$$typeof===bM)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var r=(n=e==null?void 0:e.forwardRef)!==null&&n!==void 0?n:!1,i=t,s=t.displayName||t.name;if(_M&&t.$$typeof===_M&&(r=!0,i=t.render,typeof i!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var o=function(a,l){return nue(function(){return i(a,l)},s)};return s!==""&&(o.displayName=s),t.contextTypes&&(o.contextTypes=t.contextTypes),r&&(o=ie.exports.forwardRef(o)),o=ie.exports.memo(o),iue(t,o),o}var rue={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function iue(t,e){Object.keys(t).forEach(function(n){rue[n]||Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}globalThis&&globalThis.__read;Wce(Ch.exports.unstable_batchedUpdates);function x2(){return x2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x2.apply(this,arguments)}function Qk(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var sue=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,oue=Qk(function(t){return sue.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91});function aue(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function lue(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var cue=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(lue(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=aue(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),ur="-ms-",Ng="-moz-",Tt="-webkit-",$k="comm",PE="rule",ME="decl",uue="@import",Xk="@keyframes",Aue=Math.abs,Wm=String.fromCharCode,fue=Object.assign;function hue(t,e){return(((e<<2^Gr(t,0))<<2^Gr(t,1))<<2^Gr(t,2))<<2^Gr(t,3)}function Jk(t){return t.trim()}function due(t,e){return(t=e.exec(t))?t[0]:t}function It(t,e,n){return t.replace(e,n)}function C2(t,e){return t.indexOf(e)}function Gr(t,e){return t.charCodeAt(e)|0}function gh(t,e,n){return t.slice(e,n)}function Rs(t){return t.length}function IE(t){return t.length}function j0(t,e){return e.push(t),t}function pue(t,e){return t.map(e).join("")}var Qm=1,Bu=1,Kk=0,Jr=0,En=0,tA="";function $m(t,e,n,r,i,s,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:Qm,column:Bu,length:o,return:""}}function WA(t,e){return fue($m("",null,null,"",null,null,0),t,{length:-t.length},e)}function gue(){return En}function mue(){return En=Jr>0?Gr(tA,--Jr):0,Bu--,En===10&&(Bu=1,Qm--),En}function di(){return En=Jr<Kk?Gr(tA,Jr++):0,Bu++,En===10&&(Bu=1,Qm++),En}function Hs(){return Gr(tA,Jr)}function Cp(){return Jr}function cd(t,e){return gh(tA,t,e)}function mh(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Yk(t){return Qm=Bu=1,Kk=Rs(tA=t),Jr=0,[]}function qk(t){return tA="",t}function Pp(t){return Jk(cd(Jr-1,P2(t===91?t+2:t===40?t+1:t)))}function yue(t){for(;(En=Hs())&&En<33;)di();return mh(t)>2||mh(En)>3?"":" "}function vue(t,e){for(;--e&&di()&&!(En<48||En>102||En>57&&En<65||En>70&&En<97););return cd(t,Cp()+(e<6&&Hs()==32&&di()==32))}function P2(t){for(;di();)switch(En){case t:return Jr;case 34:case 39:t!==34&&t!==39&&P2(En);break;case 40:t===41&&P2(t);break;case 92:di();break}return Jr}function _ue(t,e){for(;di()&&t+En!==47+10;)if(t+En===42+42&&Hs()===47)break;return"/*"+cd(e,Jr-1)+"*"+Wm(t===47?t:di())}function bue(t){for(;!mh(Hs());)di();return cd(t,Jr)}function wue(t){return qk(Mp("",null,null,null,[""],t=Yk(t),0,[0],t))}function Mp(t,e,n,r,i,s,o,a,l){for(var f=0,d=0,g=o,y=0,b=0,E=0,S=1,M=1,C=1,P=0,I="",L=i,F=s,z=r,X=I;M;)switch(E=P,P=di()){case 40:if(E!=108&&X.charCodeAt(g-1)==58){C2(X+=It(Pp(P),"&","&\f"),"&\f")!=-1&&(C=-1);break}case 34:case 39:case 91:X+=Pp(P);break;case 9:case 10:case 13:case 32:X+=yue(E);break;case 92:X+=vue(Cp()-1,7);continue;case 47:switch(Hs()){case 42:case 47:j0(Eue(_ue(di(),Cp()),e,n),l);break;default:X+="/"}break;case 123*S:a[f++]=Rs(X)*C;case 125*S:case 59:case 0:switch(P){case 0:case 125:M=0;case 59+d:b>0&&Rs(X)-g&&j0(b>32?EM(X+";",r,n,g-1):EM(It(X," ","")+";",r,n,g-2),l);break;case 59:X+=";";default:if(j0(z=wM(X,e,n,f,d,i,a,I,L=[],F=[],g),s),P===123)if(d===0)Mp(X,e,z,z,L,s,g,a,F);else switch(y){case 100:case 109:case 115:Mp(t,z,z,r&&j0(wM(t,z,z,0,0,i,a,I,i,L=[],g),F),i,F,g,a,r?L:F);break;default:Mp(X,z,z,z,[""],F,0,a,F)}}f=d=b=0,S=C=1,I=X="",g=o;break;case 58:g=1+Rs(X),b=E;default:if(S<1){if(P==123)--S;else if(P==125&&S++==0&&mue()==125)continue}switch(X+=Wm(P),P*S){case 38:C=d>0?1:(X+="\f",-1);break;case 44:a[f++]=(Rs(X)-1)*C,C=1;break;case 64:Hs()===45&&(X+=Pp(di())),y=Hs(),d=g=Rs(I=X+=bue(Cp())),P++;break;case 45:E===45&&Rs(X)==2&&(S=0)}}return s}function wM(t,e,n,r,i,s,o,a,l,f,d){for(var g=i-1,y=i===0?s:[""],b=IE(y),E=0,S=0,M=0;E<r;++E)for(var C=0,P=gh(t,g+1,g=Aue(S=o[E])),I=t;C<b;++C)(I=Jk(S>0?y[C]+" "+P:It(P,/&\f/g,y[C])))&&(l[M++]=I);return $m(t,e,n,i===0?PE:a,l,f,d)}function Eue(t,e,n){return $m(t,e,n,$k,Wm(gue()),gh(t,2,-2),0)}function EM(t,e,n,r){return $m(t,e,n,ME,gh(t,0,r),gh(t,r+1,-1),r)}function Zk(t,e){switch(hue(t,e)){case 5103:return Tt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Tt+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Tt+t+Ng+t+ur+t+t;case 6828:case 4268:return Tt+t+ur+t+t;case 6165:return Tt+t+ur+"flex-"+t+t;case 5187:return Tt+t+It(t,/(\w+).+(:[^]+)/,Tt+"box-$1$2"+ur+"flex-$1$2")+t;case 5443:return Tt+t+ur+"flex-item-"+It(t,/flex-|-self/,"")+t;case 4675:return Tt+t+ur+"flex-line-pack"+It(t,/align-content|flex-|-self/,"")+t;case 5548:return Tt+t+ur+It(t,"shrink","negative")+t;case 5292:return Tt+t+ur+It(t,"basis","preferred-size")+t;case 6060:return Tt+"box-"+It(t,"-grow","")+Tt+t+ur+It(t,"grow","positive")+t;case 4554:return Tt+It(t,/([^-])(transform)/g,"$1"+Tt+"$2")+t;case 6187:return It(It(It(t,/(zoom-|grab)/,Tt+"$1"),/(image-set)/,Tt+"$1"),t,"")+t;case 5495:case 3959:return It(t,/(image-set\([^]*)/,Tt+"$1$`$1");case 4968:return It(It(t,/(.+:)(flex-)?(.*)/,Tt+"box-pack:$3"+ur+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Tt+t+t;case 4095:case 3583:case 4068:case 2532:return It(t,/(.+)-inline(.+)/,Tt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Rs(t)-1-e>6)switch(Gr(t,e+1)){case 109:if(Gr(t,e+4)!==45)break;case 102:return It(t,/(.+:)(.+)-([^]+)/,"$1"+Tt+"$2-$3$1"+Ng+(Gr(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~C2(t,"stretch")?Zk(It(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Gr(t,e+1)!==115)break;case 6444:switch(Gr(t,Rs(t)-3-(~C2(t,"!important")&&10))){case 107:return It(t,":",":"+Tt)+t;case 101:return It(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Tt+(Gr(t,14)===45?"inline-":"")+"box$3$1"+Tt+"$2$3$1"+ur+"$2box$3")+t}break;case 5936:switch(Gr(t,e+11)){case 114:return Tt+t+ur+It(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Tt+t+ur+It(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Tt+t+ur+It(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Tt+t+ur+t+t}return t}function au(t,e){for(var n="",r=IE(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function Tue(t,e,n,r){switch(t.type){case uue:case ME:return t.return=t.return||t.value;case $k:return"";case Xk:return t.return=t.value+"{"+au(t.children,r)+"}";case PE:t.value=t.props.join(",")}return Rs(n=au(t.children,r))?t.return=t.value+"{"+n+"}":""}function Sue(t){var e=IE(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function xue(t){return function(e){e.root||(e=e.return)&&t(e)}}function Cue(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case ME:t.return=Zk(t.value,t.length);break;case Xk:return au([WA(t,{value:It(t.value,"@","@"+Tt)})],r);case PE:if(t.length)return pue(t.props,function(i){switch(due(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return au([WA(t,{props:[It(i,/:(read-\w+)/,":"+Ng+"$1")]})],r);case"::placeholder":return au([WA(t,{props:[It(i,/:(plac\w+)/,":"+Tt+"input-$1")]}),WA(t,{props:[It(i,/:(plac\w+)/,":"+Ng+"$1")]}),WA(t,{props:[It(i,/:(plac\w+)/,ur+"input-$1")]})],r)}return""})}}var Pue=function(e,n,r){for(var i=0,s=0;i=s,s=Hs(),i===38&&s===12&&(n[r]=1),!mh(s);)di();return cd(e,Jr)},Mue=function(e,n){var r=-1,i=44;do switch(mh(i)){case 0:i===38&&Hs()===12&&(n[r]=1),e[r]+=Pue(Jr-1,n,r);break;case 2:e[r]+=Pp(i);break;case 4:if(i===44){e[++r]=Hs()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=Wm(i)}while(i=di());return e},Iue=function(e,n){return qk(Mue(Yk(e),n))},TM=new WeakMap,Bue=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!TM.get(r))&&!i){TM.set(e,!0);for(var s=[],o=Iue(n,s),a=r.props,l=0,f=0;l<o.length;l++)for(var d=0;d<a.length;d++,f++)e.props[f]=s[l]?o[l].replace(/&\f/g,a[d]):a[d]+" "+o[l]}}},Lue=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}},Rue=[Cue],Oue=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(S){var M=S.getAttribute("data-emotion");M.indexOf(" ")!==-1&&(document.head.appendChild(S),S.setAttribute("data-s",""))})}var i=e.stylisPlugins||Rue,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(S){for(var M=S.getAttribute("data-emotion").split(" "),C=1;C<M.length;C++)s[M[C]]=!0;a.push(S)});var l,f=[Bue,Lue];{var d,g=[Tue,xue(function(S){d.insert(S)})],y=Sue(f.concat(i,g)),b=function(M){return au(wue(M),y)};l=function(M,C,P,I){d=P,b(M?M+"{"+C.styles+"}":C.styles),I&&(E.inserted[C.name]=!0)}}var E={key:n,sheet:new cue({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return E.sheet.hydrate(a),E},Due=!0;function Fue(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var e4=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||Due===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},kue=function(e,n,r){e4(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function Nue(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Uue={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Gue=/[A-Z]|^ms/g,zue=/_EMO_([^_]+?)_([^]*?)_EMO_/g,t4=function(e){return e.charCodeAt(1)===45},SM=function(e){return e!=null&&typeof e!="boolean"},g_=Qk(function(t){return t4(t)?t:t.replace(Gue,"-$&").toLowerCase()}),xM=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(zue,function(r,i,s){return Os={name:i,styles:s,next:Os},i})}return Uue[e]!==1&&!t4(e)&&typeof n=="number"&&n!==0?n+"px":n};function yh(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Os={name:n.name,styles:n.styles,next:Os},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)Os={name:r.name,styles:r.styles,next:Os},r=r.next;var i=n.styles+";";return i}return Vue(t,e,n)}case"function":{if(t!==void 0){var s=Os,o=n(t);return Os=s,yh(t,e,o)}break}}if(e==null)return n;var a=e[n];return a!==void 0?a:n}function Vue(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=yh(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")e!=null&&e[o]!==void 0?r+=s+"{"+e[o]+"}":SM(o)&&(r+=g_(s)+":"+xM(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var a=0;a<o.length;a++)SM(o[a])&&(r+=g_(s)+":"+xM(s,o[a])+";");else{var l=yh(t,e,o);switch(s){case"animation":case"animationName":{r+=g_(s)+":"+l+";";break}default:r+=s+"{"+l+"}"}}}return r}var CM=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Os,jue=function(e,n,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,s="";Os=void 0;var o=e[0];o==null||o.raw===void 0?(i=!1,s+=yh(r,n,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=yh(r,n,e[a]),i&&(s+=o[a]);CM.lastIndex=0;for(var l="",f;(f=CM.exec(s))!==null;)l+="-"+f[1];var d=Nue(s)+l;return{name:d,styles:s,next:Os}},Hue=function(e){return e()},Wue=XT["useInsertionEffect"]?XT["useInsertionEffect"]:!1,Que=Wue||Hue,n4=ie.exports.createContext(typeof HTMLElement<"u"?Oue({key:"css"}):null);n4.Provider;var $ue=function(e){return ie.exports.forwardRef(function(n,r){var i=ie.exports.useContext(n4);return e(n,i,r)})},Xue=ie.exports.createContext({}),Jue=oue,Kue=function(e){return e!=="theme"},PM=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?Jue:Kue},MM=function(e,n,r){var i;if(n){var s=n.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},Yue=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return e4(n,r,i),Que(function(){return kue(n,r,i)}),null},que=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var a=MM(e,n,r),l=a||PM(i),f=!l("as");return function(){var d=arguments,g=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&g.push("label:"+s+";"),d[0]==null||d[0].raw===void 0)g.push.apply(g,d);else{g.push(d[0][0]);for(var y=d.length,b=1;b<y;b++)g.push(d[b],d[0][b])}var E=$ue(function(S,M,C){var P=f&&S.as||i,I="",L=[],F=S;if(S.theme==null){F={};for(var z in S)F[z]=S[z];F.theme=ie.exports.useContext(Xue)}typeof S.className=="string"?I=Fue(M.registered,L,S.className):S.className!=null&&(I=S.className+" ");var X=jue(g.concat(L),M.registered,F);I+=M.key+"-"+X.name,o!==void 0&&(I+=" "+o);var Y=f&&a===void 0?PM(P):l,Q={};for(var N in S)f&&N==="as"||Y(N)&&(Q[N]=S[N]);return Q.className=I,Q.ref=C,ie.exports.createElement(ie.exports.Fragment,null,ie.exports.createElement(Yue,{cache:M,serialized:X,isStringTag:typeof P=="string"}),ie.exports.createElement(P,Q))});return E.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",E.defaultProps=e.defaultProps,E.__emotion_real=E,E.__emotion_base=i,E.__emotion_styles=g,E.__emotion_forwardProp=a,Object.defineProperty(E,"toString",{value:function(){return"."+o}}),E.withComponent=function(S,M){return t(S,x2({},n,M,{shouldForwardProp:MM(E,M,!0)})).apply(void 0,g)},E}},Zue=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],M2=que.bind();Zue.forEach(function(t){M2[t]=M2(t)});const eAe=M2;/** @license MUI v5.10.5
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function r4(t,e){return eAe(t,e)}const tAe=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))};function Ug(){return Ug=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ug.apply(this,arguments)}function of(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function mo(t,e,n={clone:!0}){const r=n.clone?Ug({},t):t;return of(t)&&of(e)&&Object.keys(e).forEach(i=>{i!=="__proto__"&&(of(e[i])&&i in t&&of(t[i])?r[i]=mo(t[i],e[i],n):r[i]=e[i])}),r}function Lu(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}function Ar(t){if(typeof t!="string")throw new Error(Lu(7));return t.charAt(0).toUpperCase()+t.slice(1)}function Ip(t){return t&&t.ownerDocument||document}function IM(t,e){typeof t=="function"?t(e):t&&(t.current=e)}const nAe=typeof window<"u"?ie.exports.useLayoutEffect:ie.exports.useEffect,i4=nAe;function rAe({controlled:t,default:e,name:n,state:r="value"}){const{current:i}=ie.exports.useRef(t!==void 0),[s,o]=ie.exports.useState(e),a=i?t:s,l=ie.exports.useCallback(f=>{i||o(f)},[]);return[a,l]}function m_(t){const e=ie.exports.useRef(t);return i4(()=>{e.current=t}),ie.exports.useCallback((...n)=>(0,e.current)(...n),[])}function Gg(t,e){return ie.exports.useMemo(()=>t==null&&e==null?null:n=>{IM(t,n),IM(e,n)},[t,e])}let Xm=!0,I2=!1,BM;const iAe={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function sAe(t){const{type:e,tagName:n}=t;return!!(n==="INPUT"&&iAe[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function oAe(t){t.metaKey||t.altKey||t.ctrlKey||(Xm=!0)}function y_(){Xm=!1}function aAe(){this.visibilityState==="hidden"&&I2&&(Xm=!0)}function lAe(t){t.addEventListener("keydown",oAe,!0),t.addEventListener("mousedown",y_,!0),t.addEventListener("pointerdown",y_,!0),t.addEventListener("touchstart",y_,!0),t.addEventListener("visibilitychange",aAe,!0)}function cAe(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return Xm||sAe(e)}function uAe(){const t=ie.exports.useCallback(i=>{i!=null&&lAe(i.ownerDocument)},[]),e=ie.exports.useRef(!1);function n(){return e.current?(I2=!0,window.clearTimeout(BM),BM=window.setTimeout(()=>{I2=!1},100),e.current=!1,!0):!1}function r(i){return cAe(i)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:r,onBlur:n,ref:t}}const AAe={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},fAe=AAe;function hAe(t,e){const n=Ug({},e);return Object.keys(t).forEach(r=>{n[r]===void 0&&(n[r]=t[r])}),n}function dAe(t,e,n){const r={};return Object.keys(t).forEach(i=>{r[i]=t[i].reduce((s,o)=>(o&&(s.push(e(o)),n&&n[o]&&s.push(n[o])),s),[]).join(" ")}),r}const LM=t=>t,pAe=()=>{let t=LM;return{configure(e){t=e},generate(e){return t(e)},reset(){t=LM}}},gAe=pAe(),s4=gAe,mAe={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function o4(t,e,n="Mui"){const r=mAe[e];return r?`${n}-${r}`:`${s4.generate(t)}-${e}`}function a4(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=o4(t,i,n)}),r}function Mr(){return Mr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mr.apply(this,arguments)}function Cf(t,e){return e?mo(t,e,{clone:!1}):t}const BE={xs:0,sm:600,md:900,lg:1200,xl:1536},RM={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${BE[t]}px)`};function Na(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const s=r.breakpoints||RM;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=n(e[l]),o),{})}if(typeof e=="object"){const s=r.breakpoints||RM;return Object.keys(e).reduce((o,a)=>{if(Object.keys(s.values||BE).indexOf(a)!==-1){const l=s.up(a);o[l]=n(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return n(e)}function yAe(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((r,i)=>{const s=t.up(i);return r[s]={},r},{}))||{}}function vAe(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function LE(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function OM(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=LE(t,n)||r,e&&(i=e(i)),i}function Be(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,f=LE(l,r)||{};return Na(o,a,g=>{let y=OM(f,i,g);return g===y&&typeof g=="string"&&(y=OM(f,i,`${e}${g==="default"?"":Ar(g)}`,g)),n===!1?y:{[n]:y}})};return s.propTypes={},s.filterProps=[e],s}function Ua(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),n=r=>Object.keys(r).reduce((i,s)=>e[s]?Cf(i,e[s](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function _Ae(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const bAe={m:"margin",p:"padding"},wAe={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},DM={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},EAe=_Ae(t=>{if(t.length>2)if(DM[t])t=DM[t];else return[t];const[e,n]=t.split(""),r=bAe[e],i=wAe[n]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),TAe=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],SAe=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],l4=[...TAe,...SAe];function ud(t,e,n,r){var i;const s=(i=LE(t,e,!1))!=null?i:n;return typeof s=="number"?o=>typeof o=="string"?o:s*o:Array.isArray(s)?o=>typeof o=="string"?o:s[o]:typeof s=="function"?s:()=>{}}function c4(t){return ud(t,"spacing",8)}function Ad(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),r=t(n);return e>=0?r:typeof r=="number"?-r:`-${r}`}function xAe(t,e){return n=>t.reduce((r,i)=>(r[i]=Ad(e,n),r),{})}function CAe(t,e,n,r){if(e.indexOf(n)===-1)return null;const i=EAe(n),s=xAe(i,r),o=t[n];return Na(t,o,s)}function PAe(t,e){const n=c4(t.theme);return Object.keys(t).map(r=>CAe(t,e,r,n)).reduce(Cf,{})}function Jm(t){return PAe(t,l4)}Jm.propTypes={};Jm.filterProps=l4;function fd(t){return typeof t!="number"?t:`${t}px solid`}const MAe=Be({prop:"border",themeKey:"borders",transform:fd}),IAe=Be({prop:"borderTop",themeKey:"borders",transform:fd}),BAe=Be({prop:"borderRight",themeKey:"borders",transform:fd}),LAe=Be({prop:"borderBottom",themeKey:"borders",transform:fd}),RAe=Be({prop:"borderLeft",themeKey:"borders",transform:fd}),OAe=Be({prop:"borderColor",themeKey:"palette"}),DAe=Be({prop:"borderTopColor",themeKey:"palette"}),FAe=Be({prop:"borderRightColor",themeKey:"palette"}),kAe=Be({prop:"borderBottomColor",themeKey:"palette"}),NAe=Be({prop:"borderLeftColor",themeKey:"palette"}),RE=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=ud(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:Ad(e,r)});return Na(t,t.borderRadius,n)}return null};RE.propTypes={};RE.filterProps=["borderRadius"];const UAe=Ua(MAe,IAe,BAe,LAe,RAe,OAe,DAe,FAe,kAe,NAe,RE),u4=UAe,GAe=Be({prop:"displayPrint",cssProperty:!1,transform:t=>({"@media print":{display:t}})}),zAe=Be({prop:"display"}),VAe=Be({prop:"overflow"}),jAe=Be({prop:"textOverflow"}),HAe=Be({prop:"visibility"}),WAe=Be({prop:"whiteSpace"}),A4=Ua(GAe,zAe,VAe,jAe,HAe,WAe),QAe=Be({prop:"flexBasis"}),$Ae=Be({prop:"flexDirection"}),XAe=Be({prop:"flexWrap"}),JAe=Be({prop:"justifyContent"}),KAe=Be({prop:"alignItems"}),YAe=Be({prop:"alignContent"}),qAe=Be({prop:"order"}),ZAe=Be({prop:"flex"}),efe=Be({prop:"flexGrow"}),tfe=Be({prop:"flexShrink"}),nfe=Be({prop:"alignSelf"}),rfe=Be({prop:"justifyItems"}),ife=Be({prop:"justifySelf"}),sfe=Ua(QAe,$Ae,XAe,JAe,KAe,YAe,qAe,ZAe,efe,tfe,nfe,rfe,ife),f4=sfe,OE=t=>{if(t.gap!==void 0&&t.gap!==null){const e=ud(t.theme,"spacing",8),n=r=>({gap:Ad(e,r)});return Na(t,t.gap,n)}return null};OE.propTypes={};OE.filterProps=["gap"];const DE=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=ud(t.theme,"spacing",8),n=r=>({columnGap:Ad(e,r)});return Na(t,t.columnGap,n)}return null};DE.propTypes={};DE.filterProps=["columnGap"];const FE=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=ud(t.theme,"spacing",8),n=r=>({rowGap:Ad(e,r)});return Na(t,t.rowGap,n)}return null};FE.propTypes={};FE.filterProps=["rowGap"];const ofe=Be({prop:"gridColumn"}),afe=Be({prop:"gridRow"}),lfe=Be({prop:"gridAutoFlow"}),cfe=Be({prop:"gridAutoColumns"}),ufe=Be({prop:"gridAutoRows"}),Afe=Be({prop:"gridTemplateColumns"}),ffe=Be({prop:"gridTemplateRows"}),hfe=Be({prop:"gridTemplateAreas"}),dfe=Be({prop:"gridArea"}),pfe=Ua(OE,DE,FE,ofe,afe,lfe,cfe,ufe,Afe,ffe,hfe,dfe),h4=pfe,gfe=Be({prop:"color",themeKey:"palette"}),mfe=Be({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),yfe=Be({prop:"backgroundColor",themeKey:"palette"}),vfe=Ua(gfe,mfe,yfe),d4=vfe,_fe=Be({prop:"position"}),bfe=Be({prop:"zIndex",themeKey:"zIndex"}),wfe=Be({prop:"top"}),Efe=Be({prop:"right"}),Tfe=Be({prop:"bottom"}),Sfe=Be({prop:"left"}),p4=Ua(_fe,bfe,wfe,Efe,Tfe,Sfe),xfe=Be({prop:"boxShadow",themeKey:"shadows"}),g4=xfe;function Ga(t){return t<=1&&t!==0?`${t*100}%`:t}const Cfe=Be({prop:"width",transform:Ga}),m4=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,i,s;return{maxWidth:((r=t.theme)==null||(i=r.breakpoints)==null||(s=i.values)==null?void 0:s[n])||BE[n]||Ga(n)}};return Na(t,t.maxWidth,e)}return null};m4.filterProps=["maxWidth"];const Pfe=Be({prop:"minWidth",transform:Ga}),Mfe=Be({prop:"height",transform:Ga}),Ife=Be({prop:"maxHeight",transform:Ga}),Bfe=Be({prop:"minHeight",transform:Ga});Be({prop:"size",cssProperty:"width",transform:Ga});Be({prop:"size",cssProperty:"height",transform:Ga});const Lfe=Be({prop:"boxSizing"}),Rfe=Ua(Cfe,m4,Pfe,Mfe,Ife,Bfe,Lfe),y4=Rfe,Ofe=Be({prop:"fontFamily",themeKey:"typography"}),Dfe=Be({prop:"fontSize",themeKey:"typography"}),Ffe=Be({prop:"fontStyle",themeKey:"typography"}),kfe=Be({prop:"fontWeight",themeKey:"typography"}),Nfe=Be({prop:"letterSpacing"}),Ufe=Be({prop:"textTransform"}),Gfe=Be({prop:"lineHeight"}),zfe=Be({prop:"textAlign"}),Vfe=Be({prop:"typography",cssProperty:!1,themeKey:"typography"}),jfe=Ua(Vfe,Ofe,Dfe,Ffe,kfe,Nfe,Gfe,zfe,Ufe),v4=jfe,FM={borders:u4.filterProps,display:A4.filterProps,flexbox:f4.filterProps,grid:h4.filterProps,positions:p4.filterProps,palette:d4.filterProps,shadows:g4.filterProps,sizing:y4.filterProps,spacing:Jm.filterProps,typography:v4.filterProps},_4={borders:u4,display:A4,flexbox:f4,grid:h4,positions:p4,palette:d4,shadows:g4,sizing:y4,spacing:Jm,typography:v4},Hfe=Object.keys(FM).reduce((t,e)=>(FM[e].forEach(n=>{t[n]=_4[e]}),t),{});function Wfe(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function Qfe(t,e){return typeof t=="function"?t(e):t}function $fe(t=_4){const e=Object.keys(t).reduce((i,s)=>(t[s].filterProps.forEach(o=>{i[o]=t[s]}),i),{});function n(i,s,o){const a={[i]:s,theme:o},l=e[i];return l?l(a):{[i]:s}}function r(i){const{sx:s,theme:o={}}=i||{};if(!s)return null;function a(l){let f=l;if(typeof l=="function")f=l(o);else if(typeof l!="object")return l;if(!f)return null;const d=yAe(o.breakpoints),g=Object.keys(d);let y=d;return Object.keys(f).forEach(b=>{const E=Qfe(f[b],o);if(E!=null)if(typeof E=="object")if(e[b])y=Cf(y,n(b,E,o));else{const S=Na({theme:o},E,M=>({[b]:M}));Wfe(S,E)?y[b]=r({sx:E,theme:o}):y=Cf(y,S)}else y=Cf(y,n(b,E,o))}),vAe(g,y)}return Array.isArray(s)?s.map(a):a(s)}return r}const b4=$fe();b4.filterProps=["sx"];const w4=b4;function _a(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const Xfe=["sx"],Jfe=t=>{const e={systemProps:{},otherProps:{}};return Object.keys(t).forEach(n=>{Hfe[n]?e.systemProps[n]=t[n]:e.otherProps[n]=t[n]}),e};function Kfe(t){const{sx:e}=t,n=_a(t,Xfe),{systemProps:r,otherProps:i}=Jfe(n);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return of(a)?Mr({},r,a):r}:s=Mr({},r,e),Mr({},i,{sx:s})}function E4(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=E4(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function Bi(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=E4(t))&&(r&&(r+=" "),r+=e);return r}const Yfe=["values","unit","step"],qfe=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>Mr({},n,{[r.key]:r.val}),{})};function Zfe(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=t,i=_a(t,Yfe),s=qfe(e),o=Object.keys(s);function a(y){return`@media (min-width:${typeof e[y]=="number"?e[y]:y}${n})`}function l(y){return`@media (max-width:${(typeof e[y]=="number"?e[y]:y)-r/100}${n})`}function f(y,b){const E=o.indexOf(b);return`@media (min-width:${typeof e[y]=="number"?e[y]:y}${n}) and (max-width:${(E!==-1&&typeof e[o[E]]=="number"?e[o[E]]:b)-r/100}${n})`}function d(y){return o.indexOf(y)+1<o.length?f(y,o[o.indexOf(y)+1]):a(y)}function g(y){const b=o.indexOf(y);return b===0?a(o[1]):b===o.length-1?l(o[b]):f(y,o[o.indexOf(y)+1]).replace("@media","@media not all and")}return Mr({keys:o,values:s,up:a,down:l,between:f,only:d,not:g,unit:n},i)}const ehe={borderRadius:4},the=ehe;function nhe(t=8){if(t.mui)return t;const e=c4({spacing:t}),n=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}const rhe=["breakpoints","palette","spacing","shape"];function kE(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:s={}}=t,o=_a(t,rhe),a=Zfe(n),l=nhe(i);let f=mo({breakpoints:a,direction:"ltr",components:{},palette:Mr({mode:"light"},r),spacing:l,shape:Mr({},the,s)},o);return f=e.reduce((d,g)=>mo(d,g),f),f}const ihe=ie.exports.createContext(null),she=ihe;function ohe(){return ie.exports.useContext(she)}function ahe(t){return Object.keys(t).length===0}function lhe(t=null){const e=ohe();return!e||ahe(e)?t:e}const che=kE();function NE(t=che){return lhe(t)}const uhe=["className","component"];function Ahe(t={}){const{defaultTheme:e,defaultClassName:n="MuiBox-root",generateClassName:r,styleFunctionSx:i=w4}=t,s=r4("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(i);return ie.exports.forwardRef(function(l,f){const d=NE(e),g=Kfe(l),{className:y,component:b="div"}=g,E=_a(g,uhe);return Gt(s,Mr({as:b,ref:f,className:Bi(y,r?r(n):n),theme:d},E))})}const fhe=["variant"];function kM(t){return t.length===0}function T4(t){const{variant:e}=t,n=_a(t,fhe);let r=e||"";return Object.keys(n).sort().forEach(i=>{i==="color"?r+=kM(r)?t[i]:Ar(t[i]):r+=`${kM(r)?i:Ar(i)}${Ar(t[i].toString())}`}),r}const hhe=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],dhe=["theme"],phe=["theme"];function QA(t){return Object.keys(t).length===0}function ghe(t){return typeof t=="string"&&t.charCodeAt(0)>96}const mhe=(t,e)=>e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null,yhe=(t,e)=>{let n=[];e&&e.components&&e.components[t]&&e.components[t].variants&&(n=e.components[t].variants);const r={};return n.forEach(i=>{const s=T4(i.props);r[s]=i.style}),r},vhe=(t,e,n,r)=>{var i,s;const{ownerState:o={}}=t,a=[],l=n==null||(i=n.components)==null||(s=i[r])==null?void 0:s.variants;return l&&l.forEach(f=>{let d=!0;Object.keys(f.props).forEach(g=>{o[g]!==f.props[g]&&t[g]!==f.props[g]&&(d=!1)}),d&&a.push(e[T4(f.props)])}),a};function Pf(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const _he=kE();function bhe(t={}){const{defaultTheme:e=_he,rootShouldForwardProp:n=Pf,slotShouldForwardProp:r=Pf,styleFunctionSx:i=w4}=t,s=o=>{const a=QA(o.theme)?e:o.theme;return i(Mr({},o,{theme:a}))};return s.__mui_systemSx=!0,(o,a={})=>{tAe(o,L=>L.filter(F=>!(F!=null&&F.__mui_systemSx)));const{name:l,slot:f,skipVariantsResolver:d,skipSx:g,overridesResolver:y}=a,b=_a(a,hhe),E=d!==void 0?d:f&&f!=="Root"||!1,S=g||!1;let M,C=Pf;f==="Root"?C=n:f?C=r:ghe(o)&&(C=void 0);const P=r4(o,Mr({shouldForwardProp:C,label:M},b)),I=(L,...F)=>{const z=F?F.map(N=>typeof N=="function"&&N.__emotion_real!==N?k=>{let{theme:te}=k,oe=_a(k,dhe);return N(Mr({theme:QA(te)?e:te},oe))}:N):[];let X=L;l&&y&&z.push(N=>{const k=QA(N.theme)?e:N.theme,te=mhe(l,k);if(te){const oe={};return Object.entries(te).forEach(([ae,Re])=>{oe[ae]=typeof Re=="function"?Re(Mr({},N,{theme:k})):Re}),y(N,oe)}return null}),l&&!E&&z.push(N=>{const k=QA(N.theme)?e:N.theme;return vhe(N,yhe(l,k),k,l)}),S||z.push(s);const Y=z.length-F.length;if(Array.isArray(L)&&Y>0){const N=new Array(Y).fill("");X=[...L,...N],X.raw=[...L.raw,...N]}else typeof L=="function"&&L.__emotion_real!==L&&(X=N=>{let{theme:k}=N,te=_a(N,phe);return L(Mr({theme:QA(k)?e:k},te))});return P(X,...z)};return P.withConfig&&(I.withConfig=P.withConfig),I}}function whe(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:hAe(e.components[n].defaultProps,r)}function Ehe({props:t,name:e,defaultTheme:n}){const r=NE(n);return whe({theme:r,name:e,props:t})}function UE(t,e=0,n=1){return Math.min(Math.max(e,t),n)}function The(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Fl(t){if(t.type)return t;if(t.charAt(0)==="#")return Fl(The(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(Lu(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error(Lu(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:n,values:r,colorSpace:i}}function Km(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.indexOf("rgb")!==-1?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function She(t){t=Fl(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),o=(f,d=(f+n/30)%12)=>i-s*Math.max(Math.min(d-3,9-d,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),Km({type:a,values:l})}function NM(t){t=Fl(t);let e=t.type==="hsl"?Fl(She(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function xhe(t,e){const n=NM(t),r=NM(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function UM(t,e){return t=Fl(t),e=UE(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,Km(t)}function S4(t,e){if(t=Fl(t),e=UE(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return Km(t)}function x4(t,e){if(t=Fl(t),e=UE(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return Km(t)}function ct(){return ct=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ct.apply(this,arguments)}function hd(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function xt(){return xt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xt.apply(this,arguments)}function Mf(t){return typeof t=="string"}function Che(t,e={},n){return Mf(t)?e:xt({},e,{ownerState:xt({},e.ownerState,n)})}function Phe(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function Mhe(t,e){return typeof t=="function"?t(e):t}function C4(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function GM(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function Ihe(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:s}=t;if(!e){const b=Bi(i==null?void 0:i.className,r==null?void 0:r.className,s,n==null?void 0:n.className),E=xt({},n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),S=xt({},n,i,r);return b.length>0&&(S.className=b),Object.keys(E).length>0&&(S.style=E),{props:S,internalRef:void 0}}const o=Phe(xt({},i,r)),a=GM(r),l=GM(i),f=e(o),d=Bi(f==null?void 0:f.className,n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),g=xt({},f==null?void 0:f.style,n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),y=xt({},f,n,l,a);return d.length>0&&(y.className=d),Object.keys(g).length>0&&(y.style=g),{props:y,internalRef:f.ref}}const Bhe=["elementType","externalSlotProps","ownerState"];function Yo(t){var e;const{elementType:n,externalSlotProps:r,ownerState:i}=t,s=C4(t,Bhe),o=Mhe(r,i),{props:a,internalRef:l}=Ihe(xt({},s,{externalSlotProps:o})),f=Gg(l,Gg(o==null?void 0:o.ref,(e=t.additionalProps)==null?void 0:e.ref));return Che(n,xt({},a,{ref:f}),i)}function af(t){return o4("MuiSlider",t)}const Lhe=a4("MuiSlider",["root","active","focusVisible","disabled","dragging","marked","vertical","trackInverted","trackFalse","rail","track","mark","markActive","markLabel","markLabelActive","thumb","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel"]),Bp=Lhe,Rhe=t=>{const{open:e}=t;return{offset:Bi(e&&Bp.valueLabelOpen),circle:Bp.valueLabelCircle,label:Bp.valueLabelLabel}};function P4(t){const{children:e,className:n,value:r,theme:i}=t,s=Rhe(t);return ie.exports.cloneElement(e,{className:Bi(e.props.className)},Xf(ie.exports.Fragment,{children:[e.props.children,Gt("span",{className:Bi(s.offset,n),theme:i,"aria-hidden":!0,children:Gt("span",{className:s.circle,children:Gt("span",{className:s.label,children:r})})})]}))}const Ohe=2;function M4(t,e){return t-e}function $A(t,e,n){return t==null?e:Math.min(Math.max(e,t),n)}function zM(t,e){var n;const{index:r}=(n=t.reduce((i,s,o)=>{const a=Math.abs(e-s);return i===null||a<i.distance||a===i.distance?{distance:a,index:o}:i},null))!=null?n:{};return r}function H0(t,e){if(e.current!==void 0&&t.changedTouches){const n=t;for(let r=0;r<n.changedTouches.length;r+=1){const i=n.changedTouches[r];if(i.identifier===e.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:t.clientX,y:t.clientY}}function zg(t,e,n){return(t-e)*100/(n-e)}function Dhe(t,e,n){return(n-e)*t+e}function Fhe(t){if(Math.abs(t)<1){const n=t.toExponential().split("e-"),r=n[0].split(".")[1];return(r?r.length:0)+parseInt(n[1],10)}const e=t.toString().split(".")[1];return e?e.length:0}function khe(t,e,n){const r=Math.round((t-n)/e)*e+n;return Number(r.toFixed(Fhe(e)))}function VM({values:t,newValue:e,index:n}){const r=t.slice();return r[n]=e,r.sort(M4)}function W0({sliderRef:t,activeIndex:e,setActive:n}){var r,i;const s=Ip(t.current);if(!((r=t.current)!=null&&r.contains(s.activeElement))||Number(s==null||(i=s.activeElement)==null?void 0:i.getAttribute("data-index"))!==e){var o;(o=t.current)==null||o.querySelector(`[type="range"][data-index="${e}"]`).focus()}n&&n(e)}const Nhe={horizontal:{offset:t=>({left:`${t}%`}),leap:t=>({width:`${t}%`})},"horizontal-reverse":{offset:t=>({right:`${t}%`}),leap:t=>({width:`${t}%`})},vertical:{offset:t=>({bottom:`${t}%`}),leap:t=>({height:`${t}%`})}},Uhe=t=>t;let Q0;function v_(){return Q0===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?Q0=CSS.supports("touch-action","none"):Q0=!0),Q0}function Ghe(t){const{"aria-labelledby":e,defaultValue:n,disabled:r=!1,disableSwap:i=!1,isRtl:s=!1,marks:o=!1,max:a=100,min:l=0,name:f,onChange:d,onChangeCommitted:g,orientation:y="horizontal",ref:b,scale:E=Uhe,step:S=1,tabIndex:M,value:C}=t,P=ie.exports.useRef(),[I,L]=ie.exports.useState(-1),[F,z]=ie.exports.useState(-1),[X,Y]=ie.exports.useState(!1),Q=ie.exports.useRef(0),[N,k]=rAe({controlled:C,default:n!=null?n:l,name:"Slider"}),te=d&&((ye,De,Ke)=>{const ot=ye.nativeEvent||ye,et=new ot.constructor(ot.type,ot);Object.defineProperty(et,"target",{writable:!0,value:{value:De,name:f}}),d(et,De,Ke)}),oe=Array.isArray(N);let ae=oe?N.slice().sort(M4):[N];ae=ae.map(ye=>$A(ye,l,a));const Re=o===!0&&S!==null?[...Array(Math.floor((a-l)/S)+1)].map((ye,De)=>({value:l+S*De})):o||[],Oe=Re.map(ye=>ye.value),{isFocusVisibleRef:He,onBlur:le,onFocus:be,ref:Pe}=uAe(),[Fe,Ge]=ie.exports.useState(-1),lt=ie.exports.useRef(),kn=Gg(Pe,lt),Yr=Gg(b,kn),rr=ye=>De=>{var Ke;const ot=Number(De.currentTarget.getAttribute("data-index"));be(De),He.current===!0&&Ge(ot),z(ot),ye==null||(Ke=ye.onFocus)==null||Ke.call(ye,De)},Dt=ye=>De=>{var Ke;le(De),He.current===!1&&Ge(-1),z(-1),ye==null||(Ke=ye.onBlur)==null||Ke.call(ye,De)};i4(()=>{if(r&&lt.current.contains(document.activeElement)){var ye;(ye=document.activeElement)==null||ye.blur()}},[r]),r&&I!==-1&&L(-1),r&&Fe!==-1&&Ge(-1);const nn=ye=>De=>{var Ke;(Ke=ye.onChange)==null||Ke.call(ye,De);const ot=Number(De.currentTarget.getAttribute("data-index")),et=ae[ot],dt=Oe.indexOf(et);let Bt=De.target.valueAsNumber;if(Re&&S==null&&(Bt=Bt<et?Oe[dt-1]:Oe[dt+1]),Bt=$A(Bt,l,a),Re&&S==null){const Nn=Oe.indexOf(ae[ot]);Bt=Bt<ae[ot]?Oe[Nn-1]:Oe[Nn+1]}if(oe){i&&(Bt=$A(Bt,ae[ot-1]||-1/0,ae[ot+1]||1/0));const Nn=Bt;Bt=VM({values:ae,newValue:Bt,index:ot});let Wt=ot;i||(Wt=Bt.indexOf(Nn)),W0({sliderRef:lt,activeIndex:Wt})}k(Bt),Ge(ot),te&&te(De,Bt,ot),g&&g(De,Bt)},Nt=ie.exports.useRef();let rn=y;s&&y==="horizontal"&&(rn+="-reverse");const sn=({finger:ye,move:De=!1,values:Ke})=>{const{current:ot}=lt,{width:et,height:dt,bottom:Bt,left:Nn}=ot.getBoundingClientRect();let Wt;rn.indexOf("vertical")===0?Wt=(Bt-ye.y)/dt:Wt=(ye.x-Nn)/et,rn.indexOf("-reverse")!==-1&&(Wt=1-Wt);let Cn;if(Cn=Dhe(Wt,l,a),S)Cn=khe(Cn,S,l);else{const za=zM(Oe,Cn);Cn=Oe[za]}Cn=$A(Cn,l,a);let _i=0;if(oe){De?_i=Nt.current:_i=zM(Ke,Cn),i&&(Cn=$A(Cn,Ke[_i-1]||-1/0,Ke[_i+1]||1/0));const za=Cn;Cn=VM({values:Ke,newValue:Cn,index:_i}),i&&De||(_i=Cn.indexOf(za),Nt.current=_i)}return{newValue:Cn,activeIndex:_i}},ir=m_(ye=>{const De=H0(ye,P);if(!De)return;if(Q.current+=1,ye.type==="mousemove"&&ye.buttons===0){sr(ye);return}const{newValue:Ke,activeIndex:ot}=sn({finger:De,move:!0,values:ae});W0({sliderRef:lt,activeIndex:ot,setActive:L}),k(Ke),!X&&Q.current>Ohe&&Y(!0),te&&te(ye,Ke,ot)}),sr=m_(ye=>{const De=H0(ye,P);if(Y(!1),!De)return;const{newValue:Ke}=sn({finger:De,move:!0,values:ae});L(-1),ye.type==="touchend"&&z(-1),g&&g(ye,Ke),P.current=void 0,Er()}),Dr=m_(ye=>{if(r)return;v_()||ye.preventDefault();const De=ye.changedTouches[0];De!=null&&(P.current=De.identifier);const Ke=H0(ye,P);if(Ke!==!1){const{newValue:et,activeIndex:dt}=sn({finger:Ke,values:ae});W0({sliderRef:lt,activeIndex:dt,setActive:L}),k(et),te&&te(ye,et,dt)}Q.current=0;const ot=Ip(lt.current);ot.addEventListener("touchmove",ir),ot.addEventListener("touchend",sr)}),Er=ie.exports.useCallback(()=>{const ye=Ip(lt.current);ye.removeEventListener("mousemove",ir),ye.removeEventListener("mouseup",sr),ye.removeEventListener("touchmove",ir),ye.removeEventListener("touchend",sr)},[sr,ir]);ie.exports.useEffect(()=>{const{current:ye}=lt;return ye.addEventListener("touchstart",Dr,{passive:v_()}),()=>{ye.removeEventListener("touchstart",Dr,{passive:v_()}),Er()}},[Er,Dr]),ie.exports.useEffect(()=>{r&&Er()},[r,Er]);const $n=ye=>De=>{var Ke;if((Ke=ye.onMouseDown)==null||Ke.call(ye,De),r||De.defaultPrevented||De.button!==0)return;De.preventDefault();const ot=H0(De,P);if(ot!==!1){const{newValue:dt,activeIndex:Bt}=sn({finger:ot,values:ae});W0({sliderRef:lt,activeIndex:Bt,setActive:L}),k(dt),te&&te(De,dt,Bt)}Q.current=0;const et=Ip(lt.current);et.addEventListener("mousemove",ir),et.addEventListener("mouseup",sr)},vn=zg(oe?ae[0]:l,l,a),qr=zg(ae[ae.length-1],l,a)-vn,bs=(ye={})=>{const De={onMouseDown:$n(ye||{})},Ke=xt({},ye,De);return xt({ref:Yr},Ke)},Wi=ye=>De=>{var Ke;(Ke=ye.onMouseOver)==null||Ke.call(ye,De);const ot=Number(De.currentTarget.getAttribute("data-index"));z(ot)},Ut=ye=>De=>{var Ke;(Ke=ye.onMouseLeave)==null||Ke.call(ye,De),z(-1)};return{active:I,axis:rn,axisProps:Nhe,dragging:X,focusedThumbIndex:Fe,getHiddenInputProps:(ye={})=>{var De;const Ke={onChange:nn(ye||{}),onFocus:rr(ye||{}),onBlur:Dt(ye||{})},ot=xt({},ye,Ke);return xt({tabIndex:M,"aria-labelledby":e,"aria-orientation":y,"aria-valuemax":E(a),"aria-valuemin":E(l),name:f,type:"range",min:t.min,max:t.max,step:(De=t.step)!=null?De:void 0,disabled:r},ot,{style:xt({},fAe,{direction:s?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:bs,getThumbProps:(ye={})=>{const De={onMouseOver:Wi(ye||{}),onMouseLeave:Ut(ye||{})};return xt({},ye,De)},marks:Re,open:F,range:oe,trackLeap:qr,trackOffset:vn,values:ae}}const zhe=["aria-label","aria-valuetext","className","component","classes","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","scale","step","tabIndex","track","value","valueLabelDisplay","valueLabelFormat","isRtl","components","componentsProps"],jM=t=>t,Vhe=t=>{const{disabled:e,dragging:n,marked:r,orientation:i,track:s,classes:o}=t;return dAe({root:["root",e&&"disabled",n&&"dragging",r&&"marked",i==="vertical"&&"vertical",s==="inverted"&&"trackInverted",s===!1&&"trackFalse"],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",e&&"disabled"],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]},af,o)},jhe=({children:t})=>t,Hhe=ie.exports.forwardRef(function(e,n){var r,i,s,o,a,l,f;const{"aria-label":d,"aria-valuetext":g,className:y,component:b,classes:E,disableSwap:S=!1,disabled:M=!1,getAriaLabel:C,getAriaValueText:P,marks:I=!1,max:L=100,min:F=0,orientation:z="horizontal",scale:X=jM,step:Y=1,track:Q="normal",valueLabelDisplay:N="off",valueLabelFormat:k=jM,isRtl:te=!1,components:oe={},componentsProps:ae={}}=e,Re=C4(e,zhe),Oe=xt({},e,{marks:I,classes:E,disabled:M,isRtl:te,max:L,min:F,orientation:z,scale:X,step:Y,track:Q,valueLabelDisplay:N,valueLabelFormat:k}),{axisProps:He,getRootProps:le,getHiddenInputProps:be,getThumbProps:Pe,open:Fe,active:Ge,axis:lt,range:kn,focusedThumbIndex:Yr,dragging:rr,marks:Dt,values:nn,trackOffset:Nt,trackLeap:rn}=Ghe(xt({},Oe,{ref:n}));Oe.marked=Dt.length>0&&Dt.some(et=>et.label),Oe.dragging=rr,Oe.focusedThumbIndex=Yr;const sn=Vhe(Oe),ir=(r=b!=null?b:oe.Root)!=null?r:"span",sr=Yo({elementType:ir,getSlotProps:le,externalSlotProps:ae.root,externalForwardedProps:Re,ownerState:Oe,className:[sn.root,y]}),Dr=(i=oe.Rail)!=null?i:"span",Er=Yo({elementType:Dr,externalSlotProps:ae.rail,ownerState:Oe,className:sn.rail}),$n=(s=oe.Track)!=null?s:"span",vn=Yo({elementType:$n,externalSlotProps:ae.track,additionalProps:{style:xt({},He[lt].offset(Nt),He[lt].leap(rn))},ownerState:Oe,className:sn.track}),qr=(o=oe.Thumb)!=null?o:"span",bs=Yo({elementType:qr,getSlotProps:Pe,externalSlotProps:ae.thumb,ownerState:Oe}),Wi=(a=oe.ValueLabel)!=null?a:P4,Ut=Yo({elementType:Wi,externalSlotProps:ae.valueLabel,ownerState:Oe}),ws=(l=oe.Mark)!=null?l:"span",to=Yo({elementType:ws,externalSlotProps:ae.mark,ownerState:Oe,className:sn.mark}),ye=(f=oe.MarkLabel)!=null?f:"span",De=Yo({elementType:ye,externalSlotProps:ae.markLabel,ownerState:Oe}),Ke=oe.Input||"input",ot=Yo({elementType:Ke,getSlotProps:be,externalSlotProps:ae.input,ownerState:Oe});return Xf(ir,xt({},sr,{children:[Gt(Dr,xt({},Er)),Gt($n,xt({},vn)),Dt.filter(et=>et.value>=F&&et.value<=L).map((et,dt)=>{const Bt=zg(et.value,F,L),Nn=He[lt].offset(Bt);let Wt;return Q===!1?Wt=nn.indexOf(et.value)!==-1:Wt=Q==="normal"&&(kn?et.value>=nn[0]&&et.value<=nn[nn.length-1]:et.value<=nn[0])||Q==="inverted"&&(kn?et.value<=nn[0]||et.value>=nn[nn.length-1]:et.value>=nn[0]),Xf(ie.exports.Fragment,{children:[Gt(ws,xt({"data-index":dt},to,!Mf(ws)&&{markActive:Wt},{style:xt({},Nn,to.style),className:Bi(to.className,Wt&&sn.markActive)})),et.label!=null?Gt(ye,xt({"aria-hidden":!0,"data-index":dt},De,!Mf(ye)&&{markLabelActive:Wt},{style:xt({},Nn,De.style),className:Bi(sn.markLabel,De.className,Wt&&sn.markLabelActive),children:et.label})):null]},et.value)}),nn.map((et,dt)=>{const Bt=zg(et,F,L),Nn=He[lt].offset(Bt),Wt=N==="off"?jhe:Wi;return Gt(ie.exports.Fragment,{children:Gt(Wt,xt({},!Mf(Wt)&&{valueLabelFormat:k,valueLabelDisplay:N,value:typeof k=="function"?k(X(et),dt):k,index:dt,open:Fe===dt||Ge===dt||N==="on",disabled:M},Ut,{className:Bi(sn.valueLabel,Ut.className),children:Gt(qr,xt({"data-index":dt,"data-focusvisible":Yr===dt},bs,{className:Bi(sn.thumb,bs.className,Ge===dt&&sn.active,Yr===dt&&sn.focusVisible),style:xt({},Nn,{pointerEvents:S&&Ge!==dt?"none":void 0},bs.style),children:Gt(Ke,xt({"data-index":dt,"aria-label":C?C(dt):d,"aria-valuenow":X(et),"aria-valuetext":P?P(X(et),dt):g,value:nn[dt]},ot))}))}))},dt)})]}))}),Whe=Hhe;function Qhe(t,e){return ct({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}const $he={black:"#000",white:"#fff"},vh=$he,Xhe={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Jhe=Xhe,Khe={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},mc=Khe,Yhe={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},yc=Yhe,qhe={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},XA=qhe,Zhe={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},vc=Zhe,ede={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},_c=ede,tde={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},bc=tde,nde=["mode","contrastThreshold","tonalOffset"],HM={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:vh.white,default:vh.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},__={text:{primary:vh.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:vh.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function WM(t,e,n,r){const i=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=x4(t.main,i):e==="dark"&&(t.dark=S4(t.main,s)))}function rde(t="light"){return t==="dark"?{main:vc[200],light:vc[50],dark:vc[400]}:{main:vc[700],light:vc[400],dark:vc[800]}}function ide(t="light"){return t==="dark"?{main:mc[200],light:mc[50],dark:mc[400]}:{main:mc[500],light:mc[300],dark:mc[700]}}function sde(t="light"){return t==="dark"?{main:yc[500],light:yc[300],dark:yc[700]}:{main:yc[700],light:yc[400],dark:yc[800]}}function ode(t="light"){return t==="dark"?{main:_c[400],light:_c[300],dark:_c[700]}:{main:_c[700],light:_c[500],dark:_c[900]}}function ade(t="light"){return t==="dark"?{main:bc[400],light:bc[300],dark:bc[700]}:{main:bc[800],light:bc[500],dark:bc[900]}}function lde(t="light"){return t==="dark"?{main:XA[400],light:XA[300],dark:XA[700]}:{main:"#ed6c02",light:XA[500],dark:XA[900]}}function cde(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,i=hd(t,nde),s=t.primary||rde(e),o=t.secondary||ide(e),a=t.error||sde(e),l=t.info||ode(e),f=t.success||ade(e),d=t.warning||lde(e);function g(S){return xhe(S,__.text.primary)>=n?__.text.primary:HM.text.primary}const y=({color:S,name:M,mainShade:C=500,lightShade:P=300,darkShade:I=700})=>{if(S=ct({},S),!S.main&&S[C]&&(S.main=S[C]),!S.hasOwnProperty("main"))throw new Error(Lu(11,M?` (${M})`:"",C));if(typeof S.main!="string")throw new Error(Lu(12,M?` (${M})`:"",JSON.stringify(S.main)));return WM(S,"light",P,r),WM(S,"dark",I,r),S.contrastText||(S.contrastText=g(S.main)),S},b={dark:__,light:HM};return mo(ct({common:ct({},vh),mode:e,primary:y({color:s,name:"primary"}),secondary:y({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:y({color:a,name:"error"}),warning:y({color:d,name:"warning"}),info:y({color:l,name:"info"}),success:y({color:f,name:"success"}),grey:Jhe,contrastThreshold:n,getContrastText:g,augmentColor:y,tonalOffset:r},b[e]),i)}const ude=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function Ade(t){return Math.round(t*1e5)/1e5}const QM={textTransform:"uppercase"},$M='"Roboto", "Helvetica", "Arial", sans-serif';function fde(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:r=$M,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:f=16,allVariants:d,pxToRem:g}=n,y=hd(n,ude),b=i/14,E=g||(C=>`${C/f*b}rem`),S=(C,P,I,L,F)=>ct({fontFamily:r,fontWeight:C,fontSize:E(P),lineHeight:I},r===$M?{letterSpacing:`${Ade(L/P)}em`}:{},F,d),M={h1:S(s,96,1.167,-1.5),h2:S(s,60,1.2,-.5),h3:S(o,48,1.167,0),h4:S(o,34,1.235,.25),h5:S(o,24,1.334,0),h6:S(a,20,1.6,.15),subtitle1:S(o,16,1.75,.15),subtitle2:S(a,14,1.57,.1),body1:S(o,16,1.5,.15),body2:S(o,14,1.43,.15),button:S(a,14,1.75,.4,QM),caption:S(o,12,1.66,.4),overline:S(o,12,2.66,1,QM)};return mo(ct({htmlFontSize:f,pxToRem:E,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},M),y,{clone:!1})}const hde=.2,dde=.14,pde=.12;function Yt(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${hde})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${dde})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${pde})`].join(",")}const gde=["none",Yt(0,2,1,-1,0,1,1,0,0,1,3,0),Yt(0,3,1,-2,0,2,2,0,0,1,5,0),Yt(0,3,3,-2,0,3,4,0,0,1,8,0),Yt(0,2,4,-1,0,4,5,0,0,1,10,0),Yt(0,3,5,-1,0,5,8,0,0,1,14,0),Yt(0,3,5,-1,0,6,10,0,0,1,18,0),Yt(0,4,5,-2,0,7,10,1,0,2,16,1),Yt(0,5,5,-3,0,8,10,1,0,3,14,2),Yt(0,5,6,-3,0,9,12,1,0,3,16,2),Yt(0,6,6,-3,0,10,14,1,0,4,18,3),Yt(0,6,7,-4,0,11,15,1,0,4,20,3),Yt(0,7,8,-4,0,12,17,2,0,5,22,4),Yt(0,7,8,-4,0,13,19,2,0,5,24,4),Yt(0,7,9,-4,0,14,21,2,0,5,26,4),Yt(0,8,9,-5,0,15,22,2,0,6,28,5),Yt(0,8,10,-5,0,16,24,2,0,6,30,5),Yt(0,8,11,-5,0,17,26,2,0,6,32,5),Yt(0,9,11,-5,0,18,28,2,0,7,34,6),Yt(0,9,12,-6,0,19,29,2,0,7,36,6),Yt(0,10,13,-6,0,20,31,3,0,8,38,7),Yt(0,10,13,-6,0,21,33,3,0,8,40,7),Yt(0,10,14,-6,0,22,35,3,0,8,42,7),Yt(0,11,14,-7,0,23,36,3,0,9,44,8),Yt(0,11,15,-7,0,24,38,3,0,9,46,8)],mde=gde,yde=["duration","easing","delay"],vde={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},_de={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function XM(t){return`${Math.round(t)}ms`}function bde(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function wde(t){const e=ct({},vde,t.easing),n=ct({},_de,t.duration);return ct({getAutoHeightDuration:bde,create:(i=["all"],s={})=>{const{duration:o=n.standard,easing:a=e.easeInOut,delay:l=0}=s;return hd(s,yde),(Array.isArray(i)?i:[i]).map(f=>`${f} ${typeof o=="string"?o:XM(o)} ${a} ${typeof l=="string"?l:XM(l)}`).join(",")}},t,{easing:e,duration:n})}const Ede={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Tde=Ede,Sde=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function I4(t={},...e){const{mixins:n={},palette:r={},transitions:i={},typography:s={}}=t,o=hd(t,Sde);if(t.vars)throw new Error(Lu(18));const a=cde(r),l=kE(t);let f=mo(l,{mixins:Qhe(l.breakpoints,n),palette:a,shadows:mde.slice(),typography:fde(a,s),transitions:wde(i),zIndex:ct({},Tde)});return f=mo(f,o),f=e.reduce((d,g)=>mo(d,g),f),f}const xde=I4(),GE=xde;function Cde(){return NE(GE)}function Pde({props:t,name:e}){return Ehe({props:t,name:e,defaultTheme:GE})}const Mde=t=>Pf(t)&&t!=="classes",B4=Pf,Ide=bhe({defaultTheme:GE,rootShouldForwardProp:Mde}),Wl=Ide,Bde=I4(),Lde=Ahe({defaultTheme:Bde,defaultClassName:"MuiBox-root",generateClassName:s4.generate}),Rde=Lde,Ode=t=>!t||!Mf(t),$0=Ode,Dde=["component","components","componentsProps","color","size"],ca=ct({},Bp,a4("MuiSlider",["colorPrimary","colorSecondary","thumbColorPrimary","thumbColorSecondary","sizeSmall","thumbSizeSmall"])),Fde=Wl("span",{name:"MuiSlider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${Ar(n.color)}`],n.size!=="medium"&&e[`size${Ar(n.size)}`],n.marked&&e.marked,n.orientation==="vertical"&&e.vertical,n.track==="inverted"&&e.trackInverted,n.track===!1&&e.trackFalse]}})(({theme:t,ownerState:e})=>ct({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:(t.vars||t).palette[e.color].main,WebkitTapHighlightColor:"transparent"},e.orientation==="horizontal"&&ct({height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}},e.size==="small"&&{height:2},e.marked&&{marginBottom:20}),e.orientation==="vertical"&&ct({height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}},e.size==="small"&&{width:2},e.marked&&{marginRight:44}),{"@media print":{colorAdjust:"exact"},[`&.${ca.disabled}`]:{pointerEvents:"none",cursor:"default",color:(t.vars||t).palette.grey[400]},[`&.${ca.dragging}`]:{[`& .${ca.thumb}, & .${ca.track}`]:{transition:"none"}}})),kde=Wl("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(t,e)=>e.rail})(({ownerState:t})=>ct({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38},t.orientation==="horizontal"&&{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"},t.orientation==="vertical"&&{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"},t.track==="inverted"&&{opacity:1})),Nde=Wl("span",{name:"MuiSlider",slot:"Track",overridesResolver:(t,e)=>e.track})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?x4(t.palette[e.color].main,.62):S4(t.palette[e.color].main,.5);return ct({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest})},e.size==="small"&&{border:"none"},e.orientation==="horizontal"&&{height:"inherit",top:"50%",transform:"translateY(-50%)"},e.orientation==="vertical"&&{width:"inherit",left:"50%",transform:"translateX(-50%)"},e.track===!1&&{display:"none"},e.track==="inverted"&&{backgroundColor:t.vars?t.vars.palette.Slider[`${e.color}Track`]:n,borderColor:t.vars?t.vars.palette.Slider[`${e.color}Track`]:n})}),Ude=Wl("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.thumb,e[`thumbColor${Ar(n.color)}`],n.size!=="medium"&&e[`thumbSize${Ar(n.size)}`]]}})(({theme:t,ownerState:e})=>ct({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:t.transitions.create(["box-shadow","left","bottom"],{duration:t.transitions.duration.shortest})},e.size==="small"&&{width:12,height:12},e.orientation==="horizontal"&&{top:"50%",transform:"translate(-50%, -50%)"},e.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 50%)"},{"&:before":ct({position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(t.vars||t).shadows[2]},e.size==="small"&&{boxShadow:"none"}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&:hover, &.${ca.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.16)`:UM(t.palette[e.color].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${ca.active}`]:{boxShadow:`0px 0px 0px 14px ${t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.16)`:UM(t.palette[e.color].main,.16)}`},[`&.${ca.disabled}`]:{"&:hover":{boxShadow:"none"}}})),Gde=Wl(P4,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(t,e)=>e.valueLabel})(({theme:t,ownerState:e})=>ct({[`&.${ca.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"},zIndex:1,whiteSpace:"nowrap"},t.typography.body2,{fontWeight:500,transition:t.transitions.create(["transform"],{duration:t.transitions.duration.shortest}),transform:"translateY(-100%) scale(0)",position:"absolute",backgroundColor:(t.vars||t).palette.grey[600],borderRadius:2,color:(t.vars||t).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem"},e.orientation==="horizontal"&&{top:"-10px",transformOrigin:"bottom center","&:before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"}},e.orientation==="vertical"&&{right:"30px",top:"24px",transformOrigin:"right center","&:before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",right:"-20%",top:"25%"}},e.size==="small"&&{fontSize:t.typography.pxToRem(12),padding:"0.25rem 0.5rem"})),zde=Wl("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:t=>B4(t)&&t!=="markActive",overridesResolver:(t,e)=>e.mark})(({theme:t,ownerState:e,markActive:n})=>ct({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},e.orientation==="horizontal"&&{top:"50%",transform:"translate(-1px, -50%)"},e.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 1px)"},n&&{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8})),Vde=Wl("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:t=>B4(t)&&t!=="markLabelActive",overridesResolver:(t,e)=>e.markLabel})(({theme:t,ownerState:e,markLabelActive:n})=>ct({},t.typography.body2,{color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap"},e.orientation==="horizontal"&&{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}},e.orientation==="vertical"&&{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}},n&&{color:(t.vars||t).palette.text.primary})),jde=t=>{const{color:e,size:n,classes:r={}}=t;return ct({},r,{root:Bi(r.root,af(`color${Ar(e)}`),r[`color${Ar(e)}`],n&&[af(`size${Ar(n)}`),r[`size${Ar(n)}`]]),thumb:Bi(r.thumb,af(`thumbColor${Ar(e)}`),r[`thumbColor${Ar(e)}`],n&&[af(`thumbSize${Ar(n)}`),r[`thumbSize${Ar(n)}`]])})},Hde=ie.exports.forwardRef(function(e,n){var r,i,s,o;const a=Pde({props:e,name:"MuiSlider"}),f=Cde().direction==="rtl",{component:d="span",components:g={},componentsProps:y={},color:b="primary",size:E="medium"}=a,S=hd(a,Dde),M=ct({},a,{color:b,size:E}),C=jde(M);return Gt(Whe,ct({},S,{isRtl:f,components:ct({Root:Fde,Rail:kde,Track:Nde,Thumb:Ude,ValueLabel:Gde,Mark:zde,MarkLabel:Vde},g),componentsProps:ct({},y,{root:ct({},y.root,$0(g.Root)&&{as:d,ownerState:ct({},(r=y.root)==null?void 0:r.ownerState,{color:b,size:E})}),thumb:ct({},y.thumb,$0(g.Thumb)&&{ownerState:ct({},(i=y.thumb)==null?void 0:i.ownerState,{color:b,size:E})}),track:ct({},y.track,$0(g.Track)&&{ownerState:ct({},(s=y.track)==null?void 0:s.ownerState,{color:b,size:E})}),valueLabel:ct({},y.valueLabel,$0(g.ValueLabel)&&{ownerState:ct({},(o=y.valueLabel)==null?void 0:o.ownerState,{color:b,size:E})})}),classes:C,ref:n}))}),Wde=Hde;var Qde=Object.defineProperty,$de=(t,e,n)=>e in t?Qde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Le=(t,e,n)=>($de(t,typeof e!="symbol"?e+"":e,n),n),L4,JM,KM,YM,qM,ZM;const Xde=new Map;function Jde(t,e,n){Xde.set(t,{modelClass:e,fnName:n})}var Pr;(function(t){t.ApplyPatches="$$applyPatches",t.ApplySnapshot="$$applySnapshot",t.Detach="$$detach",t.ApplySet="$$applySet",t.ApplyDelete="$$applyDelete",t.ApplyMethodCall="$$applyMethodCall"})(Pr||(Pr={}));new Set(Object.values(Pr));var Vn;(function(t){t.Sync="sync",t.Async="async"})(Vn||(Vn={}));var ea;(function(t){t.Spawn="spawn",t.Return="return",t.Resume="resume",t.ResumeError="resumeError",t.Throw="throw"})(ea||(ea={}));let R4;function Ym(){return R4}function eI(t){R4=t}const O4=Symbol("modelAction");function zE(t){return typeof t=="function"&&O4 in t}const Pt="$modelType",pi="$modelId";function D4(t){return t===Pt}class VE extends Error{constructor(e){super(e),Object.setPrototypeOf(this,VE.prototype)}}function de(t){return new VE(t)}const Kde={enumerable:!1,writable:!0,configurable:!1,value:void 0};function F4(t,e,n,r=!0){r?(Object.defineProperty(t,e,Kde),t[e]=n):Object.defineProperty(t,e,{enumerable:!1,writable:r,configurable:!0,value:n})}function Ws(t){if(!Ni(t))return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null}function Ni(t){return t!==null&&typeof t=="object"}function er(t){switch(typeof t){case"number":case"string":case"boolean":case"undefined":case"bigint":return!0}return t===null}function jE(t){return t instanceof Map||Qn(t)}function HE(t){return t instanceof Set||wr(t)}function Br(t){return Array.isArray(t)||nr(t)}function k4(){return!1}function nA(t,e){if(!Ni(t))throw de(`${e} must be an object`)}function N4(t,e){if(typeof t!="function")throw de(`${e} must be a function`)}function Yde(t,e){if(!er(t))throw de(`${e} must be a primitive`)}const U4=Symbol("runAfterNew"),qde=Symbol("runBeforeOnInit");function G4(t,e,n){let r=t[e];(!r||!Object.prototype.hasOwnProperty.call(t,e))&&(r=r?r.slice():[],F4(t,e,r)),r.push(n)}const b_=Symbol("unboundMethod");function Zde(t,e,n){const{target:r,propertyKey:i,baseDescriptor:s}=e,o=()=>{G4(r,U4,a=>{const l=n(e,a[i]),f=b_ in l?l[b_]:l,d=f.bind(a);Object.getOwnPropertySymbols(f).forEach(g=>{d[g]=f[g]}),d[b_]=f,a[i]=d})};if(s){if(s.get!==void 0)throw de(`@${t} cannot be used with getters`);if(s.value)return{enumerable:!1,writable:!0,configurable:!0,value:n(e,s.value)};o()}else o()}function w_(t,e){const n=t[e];if(n)for(const r of n)r(t)}const tI=new Set;function z4(t,e,n){if(n){if(tI.has(n))return;tI.add(n)}switch(e="[mobx-keystone] "+e,t){case"warn":console.warn(e);break;case"error":console.error(e);break;default:throw de(`unknown log type - ${t}`)}}function Vi(t){let e,n=!1;return(...r)=>(n||(e=t(...r),n=!0),e)}const vs=t=>t,WE={makeObservable:jce[String.fromCharCode("l".charCodeAt(0)+1)+"akeObservable"]};function e0e(t){return`set${t[0].toUpperCase()}${t.slice(1)}`}function dd(){return WE.makeObservable?6:5}const pd="mobx-keystone",Vg=Symbol("propsType"),nI=Symbol("fromSnapshotOverrideType"),rI=Symbol("toSnapshotOverrideType"),V4=Symbol("modelInitialized"),B2={},Ui=new Map;function gd(t){return B2[t]}function Gi(t,e,n){let r=t.get(e);return r===void 0&&(r=n(),t.set(e,r)),r}const L2=new WeakMap,t0e=new WeakMap;function n0e(t,e,n=!0){return!t&&!e?!0:!t||!e||!(t.parent===e.parent)?!1:n?t.path===e.path:!0}function j4(t){return Gi(t0e,t,()=>Fa("parentAtom"))}function r0e(t){j4(t).reportObserved()}function iI(t){j4(t).reportChanged()}const rA=new WeakMap;function Ru(t){const e=rA.get(t);return e!=null?e:t}function _h(t){return tr(t)?t.$:t}const kl=new WeakMap;function Ca(t,e){return!e&&rA.has(t)?!1:kl.has(t)}function R2(t){return!er(t)&&Ca(t,!1)}function mn(t,e,n=!1){if(!n&&rA.has(t))throw de(`${e} must be the model object instance instead of the '$' sub-object`);if(er(t)||!Ca(t,!0))throw de(`${e} must be a tree node (usually a model or a shallow / deep child part of a model 'data' object)`)}function i0e(t,e="argument"){mn(t,e,!1)}let If=!1;function s0e(t){const e=If;If=!0;try{E2(()=>{t()})}finally{If=e}}const Ou=Symbol("modelMetadata"),O2=Symbol("modelUnwrappedClass"),H4=Symbol("runAfterModelDecorator");function Du(t){if(tr(t))return t.constructor[Ou];if(aA(t))return t[Ou];throw de("modelClassOrInstance must be a model class or instance")}const o0e=new WeakMap;function Nl(t){return Gi(o0e,t,()=>Du(t).modelIdProperty)}const W4=Symbol("modelProperties");function iA(t){return t[W4]}function a0e(t,e){t[W4]=e}const Kn=Symbol("noDefaultValue"),Q4={_internal:{setter:!1,isId:!0},withSetter(t){return{...this,_internal:{...this._internal,setter:t!=null?t:!0}}}};function jg(t){let e=!1;arguments.length>=1&&(e=!0);const n=typeof t=="function";return{_internal:{$valueType:null,$creationValueType:null,$transformedValueType:null,$transformedCreationValueType:null,$isRequired:null,$isId:null,$hasSetter:null,$fromSnapshotOverride:null,$toSnapshotOverride:null,defaultFn:e&&n?t:Kn,defaultValue:e&&!n?t:Kn,typeChecker:void 0,setter:!1,isId:!1,transform:void 0,fromSnapshotProcessor:void 0,toSnapshotProcessor:void 0},withSetter(i){return{...this,_internal:{...this._internal,setter:i!=null?i:!0}}},withTransform(i){return{...this,_internal:{...this._internal,transform:c0e(i)}}},withSnapshotProcessor({fromSnapshot:i,toSnapshot:s}){let o;if(this._internal.fromSnapshotProcessor&&i){const l=this._internal.fromSnapshotProcessor,f=i;o=d=>l(f(d))}else i?o=i:o=this._internal.fromSnapshotProcessor;let a;if(this._internal.toSnapshotProcessor&&s){const l=this._internal.toSnapshotProcessor,f=s;a=d=>f(l(d))}else s?a=s:a=this._internal.toSnapshotProcessor;return{...this,_internal:{...this._internal,fromSnapshotProcessor:o,toSnapshotProcessor:a}}}}}let D2=!1;const l0e=()=>{D2=!0};function c0e(t){const e=new WeakMap,n=i=>i.originalValue==null?i.originalValue:t.transform(i),r=i=>i.transformedValue==null?i.transformedValue:t.untransform(i);return{transform(i,s,o,a){const l=Gi(e,s,()=>new Map);let f=l.get(o);(f==null?void 0:f.originalValue)!==i&&(l.delete(o),f=void 0);const d=n({originalValue:i,cachedTransformedValue:f==null?void 0:f.transformedValue,setOriginalValue:a});return l.set(o,{originalValue:i,transformedValue:d}),d},untransform(i,s,o){const a=Gi(e,s,()=>new Map);D2=!1;const l=r({transformedValue:i,cacheTransformedValue:l0e});return D2?a.set(o,{originalValue:l,transformedValue:i}):a.delete(o),l}}}function Hg(t){return t._internal.defaultFn!==Kn?t._internal.defaultFn():t._internal.defaultValue!==Kn?t._internal.defaultValue:Kn}function Ql(t){const n=$l(t).typeInfo;if(!n)throw de(`type info not found for ${t}`);return n}class _s{constructor(e,n,r){Le(this,"path"),Le(this,"expectedTypeName"),Le(this,"actualValue"),this.path=e,this.expectedTypeName=n,this.actualValue=r}throw(e){let n="TypeCheckError: ",r=[];throw Ca(e,!0)&&(r=kpe(e).path),n+="[/"+[...r,...this.path].join("/")+"] ",n+="Expected: "+this.expectedTypeName,de(n)}}const u0e=[],F2=new WeakMap;var jn;(function(t){t.Object="object",t.Array="array",t.Primitive="primitive",t.Any="any"})(jn||(jn={}));function A0e(t){return Br(t)?jn.Array:Ni(t)?jn.Object:er(t)?jn.Primitive:jn.Any}function f0e(t){let e=t;for(;e;){const n=F2.get(e);if(n){for(const r of n)r.invalidateCachedResult(e);F2.delete(e)}e=Fpe(e)}}const k2=new WeakMap;function h0e(t){const e=k2.get(t);e&&(e.forEach(n=>n.invalidateSnapshotProcessorCachedResult(t)),k2.delete(t))}class Or{constructor(e,n,r,i,s,o,a){Le(this,"baseType"),Le(this,"_check"),Le(this,"getTypeName"),Le(this,"typeInfoGen"),Le(this,"snapshotType"),Le(this,"_fromSnapshotProcessor"),Le(this,"_toSnapshotProcessor"),Le(this,"checkResultCache"),Le(this,"unchecked"),Le(this,"_cachedTypeInfoGen"),Le(this,"fromSnapshotProcessor",l=>this._fromSnapshotProcessor(l)),Le(this,"_toSnapshotProcessorCache",new WeakMap),Le(this,"toSnapshotProcessor",l=>{if(typeof l!="object"||l===null)return this._toSnapshotProcessor(l);if(this._toSnapshotProcessorCache.has(l))return this._toSnapshotProcessorCache.get(l);const f=this._toSnapshotProcessor(l);return this._toSnapshotProcessorCache.set(l,f),Gi(k2,l,()=>new Set).add(this),f}),this.baseType=e,this._check=n,this.getTypeName=r,this.typeInfoGen=i,this.snapshotType=s,this._fromSnapshotProcessor=o,this._toSnapshotProcessor=a,this.unchecked=!n,this._cachedTypeInfoGen=Vi(i)}createCacheIfNeeded(){return this.checkResultCache||(this.checkResultCache=new WeakMap),this.checkResultCache}setCachedResult(e,n){this.createCacheIfNeeded().set(e,n),Gi(F2,e,()=>new Set).add(this)}invalidateCachedResult(e){var n;(n=this.checkResultCache)==null||n.delete(e)}getCachedResult(e){var n;return(n=this.checkResultCache)==null?void 0:n.get(e)}check(e,n){if(this.unchecked)return null;if(!Ca(e,!0))return this._check(e,n);let r=this.getCachedResult(e);return r===void 0&&(r=this._check(e,u0e),this.setCachedResult(e,r)),r?new _s([...n,...r.path],r.expectedTypeName,r.actualValue):null}get typeInfo(){return this._cachedTypeInfoGen(this)}invalidateSnapshotProcessorCachedResult(e){this._toSnapshotProcessorCache.delete(e)}}const $4=Symbol("lateTypeCheker");function Bo(t,e){let n;const r=function(){return n||(n=t(),n)};r[$4]=!0;const i=Vi(e);return Object.defineProperty(r,"typeInfo",{enumerable:!0,configurable:!0,get(){return i(r)}}),r}function QE(t){return typeof t=="function"&&$4 in t}class ji{constructor(e){Le(this,"thisType"),this.thisType=e}}const sI=new WeakMap;function $E(t){if(!aA(t)&&typeof t=="function"){const e=t;return Bo(()=>$E(e()),r=>new oI(r,e()))}else{const e=t,n=sI.get(e);if(n)return n;const r=s=>new oI(s,e),i=Bo(()=>{const s=Ui.get(e),o=`Model(${s.name})`,a=Du(e).dataType,l=a?Yn(a):void 0,f=new Or(jn.Object,(d,g)=>d instanceof e?l?l.check(d.$,g):null:new _s(g,o,d),()=>o,r,d=>Ni(d)?d[Pt]!==void 0?d[Pt]===s.name?f:null:l&&l.snapshotType(d)?f:null:null,d=>d[Pt]?d:{...d,[Pt]:s.name},d=>d);return f},r);return sI.set(e,i),i}}class oI extends ji{constructor(e,n){super(e),Le(this,"modelClass"),Le(this,"_props",Vi(()=>{const r=iA(this.modelClass),i={};return Object.keys(r).forEach(s=>{const o=r[s],a=o._internal.typeChecker;let l;a&&(l=Ql(a));let f=!1,d;o._internal.defaultFn!==Kn?(d=o._internal.defaultFn,f=!0):o._internal.defaultValue!==Kn&&(d=o._internal.defaultValue,f=!0),i[s]={type:a,typeInfo:l,hasDefault:f,default:d}}),i})),this.modelClass=n}get props(){return this._props()}get modelType(){return Ui.get(this.modelClass).name}}function d0e(){q4(t=>aA(t)?$E(t):void 0)}const sA=[];function X4(t){Yde(t,"literal");let e;switch(t){case void 0:e="undefined";break;case null:e="null";break;default:e=JSON.stringify(t);break}const n=i=>new p0e(i,t),r=new Or(jn.Primitive,(i,s)=>i===t?null:new _s(s,e,i),()=>e,n,i=>i===t?r:null,vs,vs);return r}class p0e extends ji{constructor(e,n){super(e),Le(this,"literal"),this.literal=n}}const J4=X4(void 0);sA.push(t=>t===void 0?J4:void 0);const K4=X4(null);sA.push(t=>t===null?K4:void 0);const XE=new Or(jn.Primitive,(t,e)=>typeof t=="boolean"?null:new _s(e,"boolean",t),()=>"boolean",t=>new g0e(t),t=>typeof t=="boolean"?XE:null,vs,vs);sA.push(t=>t===Boolean?XE:void 0);class g0e extends ji{}const qm=new Or(jn.Primitive,(t,e)=>typeof t=="number"?null:new _s(e,"number",t),()=>"number",t=>new m0e(t),t=>typeof t=="number"?qm:null,vs,vs);sA.push(t=>t===Number?qm:void 0);class m0e extends ji{}const oA=new Or(jn.Primitive,(t,e)=>typeof t=="string"?null:new _s(e,"string",t),()=>"string",t=>new y0e(t),t=>typeof t=="string"?oA:null,vs,vs);sA.push(t=>t===String?oA:void 0);class y0e extends ji{}function v0e(){sA.forEach(t=>{q4(t)})}let aI=!1;function _0e(){aI||(aI=!0,d0e(),v0e())}const Y4=[];function q4(t){Y4.push(t)}function Z4(t){_0e();for(const e of Y4){const n=e(t);if(n)return n}}function Yn(t){let e=t;for(;;){if(e instanceof Or)return e;if(QE(e))e=e();else{const n=Z4(t);if(n)return Yn(n);throw de("type checker could not be resolved")}}}function eN(t){if(t instanceof Or||QE(t))return t;{const e=Z4(t);return e||void 0}}function $l(t){const e=eN(t);if(e)return e;throw de("standard type could not be resolved")}const JE=new WeakMap,gl=new WeakMap;function hs(t){return JE.get(t)}function b0e(t,e){if(!e||!t)return;const n=hs(e.parent);if(!!n)return{parentSnapshot:n,parentPath:e}}const w0e=Ve("unsetInternalSnapshot",t=>{const e=hs(t);e&&(JE.delete(t),e.atom.reportChanged())}),KE=Ve("setNewInternalSnapshot",(t,e,n,r=!1)=>{const i={untransformed:e,transformFn:n,transformed:n?n(e):e,atom:Fa("snapshot")};gl.set(i.untransformed,r),gl.set(i.transformed,r),JE.set(t,i),i.atom.reportChanged()}),YE=Ve("updateInternalSnapshot",(t,e)=>{const n=hs(t);let r=n.untransformed;gl.get(r)?Array.isArray(r)?r=r.slice():r=Object.assign({},r):h0e(r),e(r),n.untransformed=r,n.transformed=n.transformFn?n.transformFn(r):r,gl.set(n.untransformed,!1),gl.set(n.transformed,!1),n.atom.reportChanged();const s=b0e(n,Ma(t));if(s){const{parentSnapshot:o,parentPath:a}=s;if(o){const l=a.path;YE(a.parent,f=>{f[l]=n.transformed})}}});function E0e(t){t.atom.reportObserved()}function li(t){if(er(t))return t;const e=gl.get(t);if(e===void 0||e===!0)return t;if(Array.isArray(t))for(let n=0;n<t.length;n++)li(t[n]);else{const n=Object.keys(t);for(let r=0;r<n.length;r++)li(t[n[r]])}return gl.set(t,!0),t}function jr(t,e){let n=vs,r;if(arguments.length>=2?(n=Yn(t).toSnapshotProcessor,r=e):r=t,er(r))return n(r);mn(r,"nodeOrPrimitive");const i=hs(r);if(!i)throw de("getSnapshot is not supported for this kind of object");return li(i.transformed),E0e(i),n(i.transformed)}function qE(t,e){const n=Yn(t);return n.unchecked?null:n.check(e,[])}let T0e="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",S0e=(t=21)=>{let e="",n=t;for(;n--;)e+=T0e[Math.random()*64|0];return e};var lu;(function(t){t.DevModeOnly="devModeOnly",t.AlwaysOn="alwaysOn",t.AlwaysOff="alwaysOff"})(lu||(lu={}));let lI=0;const x0e=S0e();function C0e(){const t=lI.toString(36)+"-"+x0e;return lI++,t}let tN={modelAutoTypeChecking:lu.DevModeOnly,modelIdGenerator:C0e,allowUndefinedArrayElements:!1,showDuplicateModelNameWarnings:!0};function ZE(){return tN}function Zm(){switch(ZE().modelAutoTypeChecking){case lu.DevModeOnly:return k4();case lu.AlwaysOff:return!1;case lu.AlwaysOn:return!0;default:throw de(`invalid 'modelAutoTypeChecking' config value - ${tN.modelAutoTypeChecking}`)}}const N2=Symbol("modelInitializers");function P0e(t){return t[N2]}function nN(t,e){const n=P0e(t);if(n){const r=n.length;for(let i=0;i<r;i++){const s=n[i];s(e)}}}function M0e(){return!!Ym()}function rN(){if(!M0e())throw de("data changes must be performed inside model actions")}const U2=[];function iN(){return Ym()}function I0e(t){iN()?U2.push(t):t()}let E_=!1;function B0e(){if(!(iN()||E_)){E_=!0;try{for(;U2.length>0;)U2.shift()()}finally{E_=!1}}}var Ul;(function(t){t.OnInit="$$onInit",t.OnLazyInit="$$onLazyInit",t.OnAttachedToRootStore="$$onAttachedToRootStore",t.OnAttachedToRootStoreDisposer="$$onAttachedToRootStoreDisposer"})(Ul||(Ul={}));new Set(Object.values(Ul));const L0e={deep:!1},Pa=new WeakMap;function R0e(t){Pa.has(t)||Pa.set(t,{shallow:gt.set(void 0,L0e),deep:new Set,extensionsData:aN(),deepDirty:!0,deepAtom:Fa("deepChildrenAtom")})}function md(t){return Pa.get(t).shallow}function O0e(t){const e=Pa.get(t);return e.deepDirty&&sN(t),e.deepAtom.reportObserved(),e}function cI(t,e){e.deep.add(t),tT.forEach((n,r)=>{n.addNode(t,e.extensionsData.get(r))})}const sN=Ve(t=>{const e=Pa.get(t);if(!e.deepDirty)return e;const n={deep:new Set,extensionsData:aN()},r=md(t).values();let i=r.next();for(;!i.done;){cI(i.value,n);const o=sN(i.value).deep.values();let a=o.next();for(;!a.done;)cI(a.value,n),a=o.next();i=r.next()}return Object.assign(e,n),e.deepDirty=!1,e.deepAtom.reportChanged(),e}),D0e=Ve((t,e)=>{Pa.get(t).shallow.add(e),eT(t)}),F0e=Ve((t,e)=>{Pa.get(t).shallow.delete(e),eT(t)});function eT(t){const e=Pa.get(t);e.deepDirty||(e.deepDirty=!0,e.deepAtom.reportChanged());const n=Eh(t);n&&eT(n)}const tT=new Map;function oN(t){const e=Symbol("deepObjectChildrenExtension");return tT.set(e,t),n=>n.extensionsData.get(e)}function aN(){const t=new Map;return tT.forEach((e,n)=>{t.set(n,e.initData())}),t}var bh;(function(t){t.ParentFirst="parentFirst",t.ChildrenFirst="childrenFirst"})(bh||(bh={}));function lN(t,e,n){return mn(t,"root"),n===bh.ParentFirst?k0e(t,e):cN(t,e)}function k0e(t,e){const n=[t];for(;n.length>0;){const r=n.pop(),i=e(r);if(i!==void 0)return i;const s=md(r);n.length+=s.size;let o=n.length-1;const a=s.values();let l=a.next();for(;!l.done;)n[o--]=l.value,l=a.next()}}function cN(t,e){const n=md(t).values();let r=n.next();for(;!r.done;){const s=cN(r.value,e);if(s!==void 0)return s;r=n.next()}const i=e(t);if(i!==void 0)return i}function uN(t,e,n){let r=t.get(n);return r||(r=yn(()=>U0e(n,e,i=>uN(t,e,i))),t.set(n,r)),r.get()}function N0e(t){const e=new WeakMap;return{walk:n=>uN(e,t,n)}}function U0e(t,e,n){let r;const i=e(t),s=md(t),o=s.values();let a=o.next();if(i===void 0&&s.size===1)return n(a.value);for(;!a.done;){const l=n(a.value);if(l){r||(r=new Map);const f=l.keys();let d=f.next();for(;!d.done;){const g=d.value,y=l.get(g);r.set(g,y),d=f.next()}}a=o.next()}return i!==void 0&&(r||(r=new Map),r.set(i,t)),r}const G2=new WeakMap,z2=new WeakSet,AN=Ve("attachToRootStore",(t,e)=>{const n=[];lN(e,i=>{z2.has(i)||(z2.add(i),i instanceof yo&&i.onAttachedToRootStore&&(H2(i,"onAttachedToRootStore",Ul.OnAttachedToRootStore),n.push(i)))},bh.ParentFirst);const r=n.length;for(let i=0;i<r;i++){const s=n[i],o=s.onAttachedToRootStore(t);o&&G2.set(s,o)}}),fN=Ve("detachFromRootStore",t=>{const e=[];lN(t,r=>{if(!z2.delete(r))return;const i=G2.get(r);if(i){const s=pr({nameOrNameFn:Ul.OnAttachedToRootStoreDisposer,fn:i,actionType:Vn.Sync}).bind(r);G2.delete(r),e.push(s)}},bh.ChildrenFirst);const n=e.length;for(let r=0;r<n;r++)e[r]()}),Wg=new WeakSet,G0e=new WeakMap,z0e=Ve("registerRootStore",t=>{if(mn(t,"node"),Wg.has(t))throw de("object already registered as root store");if(!Gpe(t))throw de("a root store must not have a parent");return Wg.add(t),AN(t,t),nT(t).reportChanged(),t});Ve("unregisterRootStore",t=>{if(!Lp(t))throw de("not a root store");Wg.delete(t),fN(t),nT(t).reportChanged()});function Lp(t){return mn(t,"node"),V0e(t)}function V0e(t){return nT(t).reportObserved(),Wg.has(t)}function nT(t){return Gi(G0e,t,()=>Fa("rootStore"))}class hN{constructor(){Le(this,"patches"),Le(this,"invPatches")}record(e,n){this.patches=e,this.invPatches=n}emit(e){dN(e,this.patches,this.invPatches,!0)}}const j0e=new WeakMap,uI=[];function dN(t,e,n,r){if(e.length<=0&&n.length<=0)return;if(r)for(let o=0;o<uI.length;o++){const a=uI[o];a(t,e,n)}const i=j0e.get(t);if(i)for(let o=0;o<i.length;o++){const a=i[o];a(e,n)}const s=Ma(t);if(s){const o=s.path,a=e.map(f=>AI(f,o)),l=n.map(f=>AI(f,o));dN(s.parent,a,l,!1)}}function AI(t,e){return{...t,path:[e,...t.path]}}function pN(t){if(rT(t))return t.constructor[Ou];if(Fu(t))return t[Ou];throw de("modelClassOrInstance must be a model class or instance")}const fI=new WeakMap;function gN(t){if(!Fu(t)&&typeof t=="function"){const e=t;return Bo(()=>gN(e()),r=>new hI(r,e()))}else{const e=t,n=fI.get(e);if(n)return n;const r=s=>new hI(s,e),i=Bo(()=>{const s=Ui.get(e),o=`DataModelData(${s.name})`,a=pN(e).dataType;if(!a)throw de(`type checking cannot be performed over data model data of type '${s.name}' since that model type has no data type declared, consider adding a data type or using types.unchecked() instead`);const l=Yn(a),f=new Or(jn.Object,(d,g)=>l.check(d,g),()=>o,r,d=>l.snapshotType(d)?f:null,d=>l.fromSnapshotProcessor(d),d=>l.toSnapshotProcessor(d));return f},r);return fI.set(e,i),i}}class hI extends ji{constructor(e,n){super(e),Le(this,"modelClass"),Le(this,"_props",Vi(()=>{const r=iA(this.modelClass),i={};return Object.keys(r).forEach(s=>{const o=r[s],a=o._internal.typeChecker;let l;a&&(l=Ql(a));let f=!1,d;o._internal.defaultFn!==Kn?(d=o._internal.defaultFn,f=!0):o._internal.defaultValue!==Kn&&(d=o._internal.defaultValue,f=!0),i[s]={type:a,typeInfo:l,hasDefault:f,default:d}}),i})),this.modelClass=n}get props(){return this._props()}get modelType(){return Ui.get(this.modelClass).name}}const H0e=Ve("newModel",(t,e,n)=>{const{modelClass:r}=n,i=r,s=t;if(!Ui.get(i))throw de(`no model info for class ${i.name} could be found - did you forget to add the @model decorator?`);if(s.$=e,Zm()&&pN(i).dataType){const a=s.typeCheck();a&&a.throw(s)}return nN(i,s),s}),W0e=new WeakMap;class ml{constructor(e){if(Le(this,L4),Le(this,"$"),!Ni(e))throw de("data models can only work over data objects");const{modelClass:n}=arguments[1],r=n;let i;if(R2(e))i=e;else{if(!Ui.get(r))throw de(`no model info for class ${r.name} could be found - did you forget to add the @model decorator?`);const f=iA(r),d=Object.assign({},e),g=Object.keys(f);for(let y=0;y<g.length;y++){const b=g[y],E=f[b];let S=d[b],M=!1;E._internal.transform&&(M=!0,S=E._internal.transform.untransform(S,this,b)),S==null&&(E._internal.defaultFn!==Kn?(M=!0,S=E._internal.defaultFn()):E._internal.defaultValue!==Kn&&(M=!0,S=E._internal.defaultValue)),M&&(d[b]=S)}i=lT(d)}const s=Gi(W0e,r,()=>new WeakMap),o=s.get(i);if(o)return o;s.set(i,this),Object.setPrototypeOf(this,r.prototype);const a=this;delete a[Vg],H0e(this,i,{modelClass:r})}typeCheck(){const e=gN(this.constructor);return qE(e,this.$)}toString(e){const n={withData:!0,...e},r=Ui.get(this.constructor),i=`${this.constructor.name}#${r.name}`;return n.withData?`[${i} ${JSON.stringify(jr(this))}]`:`[${i}]`}}L4=Vg;const Q0e=new Set(["onLazyInit","$","typeCheck"]);function rT(t){return t instanceof ml}function Fu(t){return!(typeof t!="function"||t!==ml&&!(t.prototype instanceof ml))}var cu;(function(t){t.DevModeOnly="devModeOnly",t.On="on",t.Off="off"})(cu||(cu={}));const mN="$frozen";class ey{constructor(e,n=cu.DevModeOnly){Le(this,"data");const r=n===cu.On||n===cu.DevModeOnly&&k4();r&&Rp(e),this.data=e,r&&Object.freeze(this.data),Li(this,void 0)}}function yN(t,e=cu.DevModeOnly){return new ey(t,e)}function Rp(t){if(!er(t)){if(Array.isArray(t)){const e=t.length;for(let n=0;n<e;n++){const r=t[n];if(r===void 0&&!ZE().allowUndefinedArrayElements)throw de("undefined is not supported inside arrays since it is not serializable in JSON, consider using null instead");Rp(r)}Object.freeze(t);return}if(Ws(t)){const e=Object.keys(t),n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[i];Rp(i),Rp(s)}Object.freeze(t);return}throw de(`frozen data must be plainly serializable to JSON, but ${t} is not`)}}function iT(t){return Ws(t)&&mN in t}var ku;(function(t){t[t.Model=0]="Model",t[t.Array=1]="Array",t[t.PlainObject=2]="PlainObject",t[t.Frozen=3]="Frozen"})(ku||(ku={}));function $0e(t,e){return kl.set(t,void 0),Lo({value:t,parentPath:e,indexChangeAllowed:!1,isDataObject:!1,cloneIfApplicable:!1}),KE(t,{[mN]:!0,data:t.data},void 0,!0),t}function X0e(){ny(ku.Frozen,(t,e)=>{if(t instanceof ey)return $0e(t,e)})}function J0e(t,e,n=0){const r=K0e(t,e,n);return r?r.parent:void 0}function K0e(t,e,n=0){mn(t,"child");const r=[];let i=t,s=0,o;for(;o=Ma(i);){if(r.unshift(o.path),i=o.parent,e(i))return{parent:i,path:r};if(s++,n>0&&s===n)break}}let Op=!0;function sT(t){let e=Op;Op=!1;try{t()}finally{Op=e}}function Y0e(){return Op}var Ks;(function(t){t[t.Array=0]="Array",t[t.Frozen=1]="Frozen",t[t.Model=2]="Model",t[t.PlainObject=3]="PlainObject"})(Ks||(Ks={}));function q0e(t,e,n){if(!Br(t))return yl(e);const r=jr(t);return sT(()=>{t.length>e.length&&t.splice(e.length,t.length-e.length);for(let i=0;i<t.length;i++){const s=t[i],o=Ao(s,e[i],n,t);oT(o,s,n),tn(t,i,o)}for(let i=t.length;i<e.length;i++)t.push(Ao(void 0,e[i],n,t))}),yd(t,void 0,r),t}function Z0e(){ty(Ks.Array,(t,e,n)=>{if(Br(e))return q0e(t,e,n)})}function epe(t,e){return t instanceof ey&&t.data===e.data?t:yN(e.data)}function tpe(){ty(Ks.Frozen,(t,e)=>{if(iT(e))return epe(t,e)})}var npe=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n};function vN(t,e){return t+" "+e}class _N{constructor(e){Le(this,"pool");var n;e=(n=rA.get(e))!=null?n:e,this.pool=rpe(O0e(e))}findModelByTypeAndId(e,n){return n?this.pool.get(vN(e,n)):void 0}findModelForSnapshot(e){if(!sy(e))return;const n=e[Pt],r=gd(n),i=Nl(r.class);return i?this.findModelByTypeAndId(e[Pt],e[i]):void 0}}const rpe=oN({initData(){return new Map},addNode(t,e){if(tr(t)){const n=t[pi];n&&e.set(vN(t[Pt],n),t)}}});function V2(t,e){mn(t,"node"),nA(e,"snapshot"),ipe().call(t,e)}function bN(t){const e=this,n=()=>{const r=new _N(e);Ao(e,t,r,void 0)};if(Br(t)){if(!Br(e))throw de("if the snapshot is an array the target must be an array too");return n()}if(iT(t))throw de("applySnapshot cannot be used over frozen objects");if(Ws(t)&&t[Pt]===void 0&&tr(e)){const r=Ui.get(e.constructor);t={...t,[Pt]:r.name}}if(sy(t)){const r=t[Pt],i=gd(r);if(!i)throw de(`model with name "${r}" not found in the registry`);if(!tr(e))throw de("the target for a model snapshot must be a model instance");if(e[Pt]!==r)throw de(`snapshot model type '${r}' does not match target model type '${e[Pt]}'`);const s=Nl(i.class);if(s){const o=t[s];if(e[pi]!==o)throw de(`snapshot model id '${o}' does not match target model id '${e[pi]}'`)}return n()}if(Ws(t)){if(!Ws(e)&&!pn(e))throw de("if the snapshot is an object the target must be an object too");return n()}throw de(`unsupported snapshot - ${t}`)}const ipe=Vi(()=>pr({nameOrNameFn:Pr.ApplySnapshot,fn:bN,actionType:Vn.Sync}));function j2(t,e){return t===e?!0:(R2(t)?t=jr(t):Mo(t)&&(t=T2(t)),R2(e)?e=jr(e):Mo(e)&&(e=T2(e)),npe(t,e))}dd()>=6;function spe(t,e,n,r){const i=e[Pt],s=gd(i);if(!s)throw de(`model with name "${i}" not found in the registry`);const o=n.findModelForSnapshot(e);if(o&&(t=o),!tr(t)||t[Pt]!==i)return yl(e);const a=s.class,l=iA(a),f=Nl(a);if(f){const y=e[f];if(t[pi]!==y)return yl(e)}else if(Br(r)&&!j2(t,e))return yl(e);const d=t,g=jr(d);return sT(()=>{const y=d.constructor,b=y.fromSnapshotProcessor?y.fromSnapshotProcessor(e):e,E=d.$,S=Object.keys(E),M=S.length;for(let I=0;I<M;I++){const L=S[I];if(!(L in b)){const F=l[L],z=F?Hg(F):Kn;z===Kn?ms(E,L):tn(E,L,z)}}const C=Object.keys(b),P=C.length;for(let I=0;I<P;I++){const L=C[I];if(!D4(L)){const F=b[L],z=E[L];let X=Ao(z,F,n,d);if(X==null){const Y=l[L],Q=Y?Hg(Y):Kn;Q!==Kn&&(X=Q)}oT(X,z,n),tn(E,L,X)}}}),yd(d,void 0,g),d}function ope(){ty(Ks.Model,(t,e,n,r)=>{if(sy(e))return spe(t,e,n,r)})}function ape(t,e,n){if(!Ws(t)&&!pn(t))return yl(e);const r=t,i=jr(r);return sT(()=>{const s=Object.keys(r),o=s.length;for(let f=0;f<o;f++){const d=s[f];d in e||ms(r,d)}const a=Object.keys(e),l=a.length;for(let f=0;f<l;f++){const d=a[f],g=e[d],y=r[d],b=Ao(y,g,n,r);oT(b,y,n),tn(r,d,b)}}),yd(r,void 0,i),r}function lpe(){ty(Ks.PlainObject,(t,e,n)=>{if(Ws(e))return ape(t,e,n)})}let dI=!1;function cpe(){dI||(dI=!0,Z0e(),tpe(),ope(),lpe())}const Qg=[];function ty(t,e){Qg.push({priority:t,reconciler:e}),Qg.sort((n,r)=>n.priority-r.priority)}function Ao(t,e,n,r){if(er(e))return e;if(jr(t)===e)return t;cpe();const i=Qg.length;for(let s=0;s<i;s++){const{reconciler:o}=Qg[s],a=o(t,e,n,r);if(a!==void 0)return a}throw jE(e)?de("a snapshot must not contain maps"):HE(e)?de("a snapshot must not contain sets"):de(`unsupported snapshot - ${e}`)}function oT(t,e,n){if(t!==e&&tr(t)&&n.findModelByTypeAndId(t[Pt],t[pi])){const r=uT(t);r&&tn(r.parent,r.path,null)}}function wh(t,e,n=!1){mn(t,"node"),!(e.length<=0)&&upe().call(t,e,n)}function wN(t,e=!1){const n=this,r=new _N(n);if(e){let i=t.length;for(;i--;){const s=t[i];if(!Br(s))X0(n,s,r);else{let o=s.length;for(;o--;)X0(n,s[o],r)}}}else{const i=t.length;for(let s=0;s<i;s++){const o=t[s];if(!Br(o))X0(n,o,r);else{const a=o.length;for(let l=0;l<a;l++)X0(n,o[l],r)}}}}const upe=Vi(()=>pr({nameOrNameFn:Pr.ApplyPatches,fn:wN,actionType:Vn.Sync}));function X0(t,e,n){const{target:r,prop:i}=Ape(t,e.path);if(Br(r))switch(e.op){case"add":{const s=+i,o=Ao(void 0,e.value,n,r);r.splice(s,0,o);break}case"remove":{const s=+i;r.splice(s,1);break}case"replace":{if(i==="length")r.length=e.value;else{const s=+i,o=Ao(r[s],e.value,n,r);tn(r,s,o)}break}default:throw de(`unsupported patch operation: ${e.op}`)}else switch(e.op){case"add":{const s=Ao(void 0,e.value,n,r);tn(r,i,s);break}case"remove":{ms(r,i);break}case"replace":{const s=Ao(r[i],e.value,n,r);tn(r,i,s);break}default:throw de(`unsupported patch operation: ${e.op}`)}}function Ape(t,e){let n=_h(t);if(e.length===0)return{target:n};for(let r=0;r<=e.length-2;r++)n=_h(n[e[r]]);return{target:n,prop:e[e.length-1]}}function yd(t,e,n){if(!!Y0e()&&(f0e(t),Zm())){const r=fpe(t);if(r){const i=r.typeCheck();i&&(s0e(()=>{e?wN.call(t,e.invPatches,!0):n&&bN.call(t,n)}),i.throw(r))}}}function fpe(t){const e=Ru(t);return t!==e&&(t=e,tr(t)&&!!Du(t).dataType)?t:J0e(t,n=>tr(n)&&!!Du(n).dataType)}function aT(t,e,n,r,i){const s=t,o=pn(s)?s:gt.object({},void 0,hpe);let a,l;const f=()=>{a(),l()};kl.set(o,f),Lo({value:o,parentPath:e,indexChangeAllowed:!1,isDataObject:i,cloneIfApplicable:!1});let d={};const g=Object.keys(s),y=g.length;for(let E=0;E<y;E++){const S=g[E],M=s[S];if(er(M))r||tn(o,S,M),d[S]=M;else{const C={parent:o,path:S};let P;r?(P=M,Lo({value:P,parentPath:C,indexChangeAllowed:!1,isDataObject:!1,cloneIfApplicable:!1})):(P=Li(M,C),tn(o,S,P));const I=hs(P);d[S]=I.transformed}}let b;if(n){d[Pt]=n;const E=gd(n);if(!E)throw de(`model with name "${n}" not found in the registry`);const S=E.class.toSnapshotProcessor;S&&(b=M=>S(M,Ru(o)))}return KE(i?Ru(o):o,d,b),a=Zu(o,ppe),l=eA(o,dpe),o}const hpe={deep:!1};function dpe(t){const e=t.object,n=Ru(e);let{untransformed:r}=hs(n);const i=new hN;let s;switch(t.type){case"add":case"update":{const o=t.name,a=t.newValue,l=r[o];let f;er(a)?f=a:f=hs(a).transformed,s=g=>{g[o]=f};const d=[o];t.type==="add"?i.record([{op:"add",path:d,value:li(f)}],[{op:"remove",path:d}]):i.record([{op:"replace",path:d,value:li(f)}],[{op:"replace",path:d,value:li(l)}])}break;case"remove":{const o=t.name,a=r[o];s=f=>{delete f[o]};const l=[o];i.record([{op:"remove",path:l}],[{op:"add",path:l,value:li(a)}])}break}yd(e,i),!If&&s&&(YE(n,s),i.emit(n))}function ppe(t){if(rN(),typeof t.name=="symbol")throw de("symbol properties are not supported");switch(t.type){case"add":t.newValue=Li(t.newValue,{parent:t.object,path:""+t.name});break;case"remove":{const e=t.object[t.name];Li(e,void 0),Xg(e);break}case"update":{const e=t.object[t.name];Li(e,void 0),Xg(e),t.newValue=Li(t.newValue,{parent:t.object,path:""+t.name});break}}return t}function gpe(){ny(ku.PlainObject,(t,e)=>{if(pn(t)||Ws(t))return aT(t,e,void 0,!1,!1)})}let pI=!1;function mpe(){pI||(pI=!0,bpe(),X0e(),Ope(),gpe())}function lT(t,e){let n,r,i;if(arguments.length===1?(i=!1,n=t):(r=t,i=!0,n=e),!Ni(n))throw de("only objects can be turned into tree nodes");if(i&&Zm()){const s=qE(r,n);s&&s.throw(n)}return Ca(n,!0)?n:Li(n,void 0)}const $g=[];function ny(t,e){$g.push({priority:t,tweaker:e}),$g.sort((n,r)=>n.priority-r.priority)}function ype(t,e){if(er(t))return t;if(Ca(t,!0))return t=Lo({value:t,parentPath:e,indexChangeAllowed:!1,isDataObject:!1,cloneIfApplicable:!0}),t;if(rT(t))throw de("data models are not directly supported. you may insert the data in the tree instead ('$' property).");mpe();const n=$g.length;for(let r=0;r<n;r++){const{tweaker:i}=$g[r],s=i(t,e);if(s!==void 0)return s}throw jE(t)?de("maps are not directly supported. consider using 'ObjectMap' / 'asMap' instead."):HE(t)?de("sets are not directly supported. consider using 'ArraySet' / 'asSet' instead."):de(`tweak can only work over models, observable objects/arrays, or primitives, but got ${t} instead`)}const Li=Ve("tweak",ype);function Xg(t){if(er(t))return!0;const e=kl.get(t);if(!e)return!1;const n=[],r=md(t).values();let i=r.next();for(;!i.done;)n.push(i.value),i=r.next();for(let s=0;s<n.length;s++)Lo({value:n[s],parentPath:void 0,indexChangeAllowed:!1,isDataObject:!1,cloneIfApplicable:!1});return e(),kl.delete(t),w0e(t),!0}function EN(t,e,n){const r=t,i=r.length,s=nr(r)?r:gt.array([],wpe);s!==r&&(s.length=r.length);let o,a;const l=()=>{o(),a()};kl.set(s,l),Lo({value:s,parentPath:e,indexChangeAllowed:!1,isDataObject:!1,cloneIfApplicable:!1});const f=[];f.length=i;for(let d=0;d<i;d++){const g=r[d];if(er(g))n||tn(s,d,g),f[d]=g;else{const y={parent:s,path:d};let b;n?(b=g,Lo({value:b,parentPath:y,indexChangeAllowed:!1,isDataObject:!1,cloneIfApplicable:!1})):(b=Li(g,y),tn(s,d,b));const E=hs(b);f[d]=E.transformed}}return KE(s,f,void 0),o=Zu(s,_pe.bind(void 0,s)),a=eA(s,vpe),s}function vpe(t){const e=t.object;let{untransformed:n}=hs(e);const r=new hN;let i;switch(t.type){case"splice":{const s=t.index,o=t.addedCount,a=t.removedCount;let l=[];l.length=o;for(let y=0;y<o;y++){const b=t.added[y];er(b)?l[y]=b:l[y]=hs(b).transformed}const f=n.length;i=y=>{y.splice(s,a,...l)};const d=[],g=[];if(o===a){const y=[],b=[];let E=0;for(let S=0;S<o;S++){const M=s+S,C=gI(n,M,s,a,l),P=n[M];if(C!==P){const I=[M-E];d.push({op:"remove",path:I}),g.push({op:"remove",path:I}),E++;const L=[M];y.push({op:"add",path:L,value:li(C)}),b.push({op:"add",path:L,value:li(P)})}}d.push(...y),g.push(...b),g.reverse()}else{const y=f-a;if(a>0){const b=s>=y;b&&d.push({op:"replace",path:["length"],value:y});for(let E=a-1;E>=0;E--){const S=s+E,M=[S];b||d.push({op:"remove",path:M}),g.push({op:"add",path:M,value:li(n[S])})}}if(o>0){const b=s>=y;b&&g.push({op:"replace",path:["length"],value:y});for(let E=0;E<o;E++){const S=s+E,M=[S];d.push({op:"add",path:M,value:li(gI(n,S,s,a,l))}),b||g.push({op:"remove",path:M})}}}r.record(d,g)}break;case"update":{const s=t.index,o=t.newValue,a=n[s];let l;er(o)?l=o:l=hs(o).transformed,i=d=>{d[s]=l};const f=[s];r.record([{op:"replace",path:f,value:li(l)}],[{op:"replace",path:f,value:li(a)}])}break}yd(e,r),!If&&i&&(YE(e,i),r.emit(e))}function _pe(t,e){switch(rN(),e.type){case"splice":{for(let s=0;s<e.removedCount;s++){const o=e.object[e.index+s];Li(o,void 0),Xg(o)}for(let s=0;s<e.added.length;s++)e.added[s]=Li(e.added[s],{parent:e.object,path:e.index+s});const r=e.index+e.removedCount,i=e.index+e.added.length;if(r!==i)for(let s=r,o=i;s<e.object.length;s++,o++)Lo({value:e.object[s],parentPath:{parent:e.object,path:o},indexChangeAllowed:!0,isDataObject:!1,cloneIfApplicable:!1})}break;case"update":const n=t[e.index];Li(n,void 0),Xg(n),e.newValue=Li(e.newValue,{parent:t,path:e.index});break}return e}function bpe(){ny(ku.Array,(t,e)=>{if(Br(t))return EN(t,e,!1)})}const wpe={deep:!1};function gI(t,e,n,r,i){const s=e-n;return s<0?t[e]:s<i.length?i[s]:t[e-i.length+r]}function Epe(t,e){const n=gt.array([],cT),r=t.length;for(let i=0;i<r;i++)n.push(iy(t[i],e));return EN(n,void 0,!0)}function Tpe(){ry(Ks.Array,(t,e)=>{if(Br(t))return Epe(t,e)})}function Spe(){ry(Ks.Frozen,t=>{if(iT(t))return yN(t.data)})}function xpe(t,e){const n=t[Pt];if(!n)throw de(`a model snapshot must contain a type key (${Pt}), but none was found`);const r=gd(n);if(!r)throw de(`model with name "${n}" not found in the registry`);const i=Nl(r.class);if(i&&t[i]===void 0)throw de(`a model snapshot of type '${n}' must contain an id key (${i}), but none was found`);return new r.class(void 0,{snapshotInitialData:{unprocessedSnapshot:t,snapshotToInitialData:e.snapshotToInitialData},generateNewIds:e.options.generateNewIds})}function Cpe(){ry(Ks.Model,(t,e)=>{if(sy(t))return xpe(t,e)})}function Ppe(t,e){const n=gt.object({},void 0,cT),r=Object.keys(t),i=r.length;for(let s=0;s<i;s++){const o=r[s],a=t[o];tn(n,o,iy(a,e))}return aT(n,void 0,void 0,!0,!1)}function Mpe(){ry(Ks.PlainObject,(t,e)=>{if(Ws(t))return Ppe(t,e)})}let mI=!1;function Ipe(){mI||(mI=!0,Tpe(),Spe(),Cpe(),Mpe())}const Jg=[];function ry(t,e){Jg.push({priority:t,snapshotter:e}),Jg.sort((n,r)=>n.priority-r.priority)}function yl(t,e,n){let r,i;if(QE(t)||t instanceof Or||aA(t)){const s=Yn(t);r=s.fromSnapshotProcessor?s.fromSnapshotProcessor(e):e,i=n}else r=t,i=e;return Bpe(r,i)}const Bpe=Ve("fromSnapshot",(t,e)=>{const r={options:{generateNewIds:!1,overrideRootModelId:void 0,...e}};return r.snapshotToInitialData=Lpe.bind(void 0,r),iy(t,r)});function iy(t,e){if(er(t))return t;Ipe();const n=Jg.length;for(let r=0;r<n;r++){const{snapshotter:i}=Jg[r],s=i(t,e);if(s!==void 0)return s}throw jE(t)?de("a snapshot must not contain maps"):HE(t)?de("a snapshot must not contain sets"):de(`unsupported snapshot - ${t}`)}function Lpe(t,e){const n=gt.object({},void 0,cT),r=Object.keys(e),i=r.length;for(let s=0;s<i;s++){const o=r[s];if(!D4(o)){const a=e[o];tn(n,o,iy(a,t))}}return n}const cT={deep:!1};function Rpe(t,e){mn(t,"node");const n={generateNewIds:!0,...e},r=jr(t);return yl(r,n)}const Lo=Ve("setParent",({value:t,parentPath:e,indexChangeAllowed:n,isDataObject:r,cloneIfApplicable:i})=>{if(er(t))return t;if(r)return rA.set(t,e.parent),t;if(R0e(t),e){const a=Ru(e.parent);e.parent!==a&&(e={parent:a,path:e.path})}let s=Ma(t);if(n0e(s,e))return t;if(Lp(t))throw de("root stores cannot be attached to any parents");if(i&&(e==null?void 0:e.parent)&&(s==null?void 0:s.parent)&&tr(t)&&Du(t).valueType&&(t=Rpe(t,{generateNewIds:!0}),s=Ma(t)),s&&e){if(s.parent===e.parent&&n)return L2.set(t,e),iI(t),t;throw de("an object cannot be assigned a new parent when it already has one")}const o=()=>{s!=null&&s.parent&&F0e(s.parent,t),L2.set(t,e),e!=null&&e.parent&&D0e(e.parent,t),iI(t)};if(t instanceof yo){const a=Kg(t),l=Lp(a)?a:void 0;o();const f=Kg(t),d=Lp(f)?f:void 0;l!==d&&(l||d)&&I0e(()=>{l&&fN(t),d&&AN(d,t)})}else o();return t});function TN(t,e){return kl.set(t,void 0),Lo({value:t,parentPath:e,indexChangeAllowed:!1,isDataObject:!1,cloneIfApplicable:!0}),t}function Ope(){ny(ku.Model,(t,e)=>{if(tr(t))return TN(t,e)})}const yI=Ve("newModel",(t,e,n)=>{const r=e?"new":"fromSnapshot",{modelClass:i,snapshotInitialData:s,generateNewIds:o}=n,a=i,l=t,f=Ui.get(a);if(!f)throw de(`no model info for class ${a.name} could be found - did you forget to add the @model decorator?`);const d=Nl(a),g=iA(a),y=d?g[d]:void 0;let b;if(s){let M=s.unprocessedSnapshot;y&&d&&(o?b=y._internal.defaultFn():b=M[d]),a.fromSnapshotProcessor&&(M=a.fromSnapshotProcessor(M)),e=s.snapshotToInitialData(M)}else y&&d&&(e[d]?b=e[d]:b=y._internal.defaultFn());l[Pt]=f.name;const E=Object.keys(g);for(let M=0;M<E.length;M++){const C=E[M];if(C===d)continue;const P=g[C];let I=e[C],L=!1;if(r==="new"&&P._internal.transform&&(L=!0,I=P._internal.transform.untransform(I,l,C)),I==null){const F=Hg(P);F!==Kn?(L=!0,I=F):"k"in e||(L=!0)}L&&tn(e,C,I)}d&&tn(e,d,b),TN(l,void 0);let S=aT(e,{parent:l,path:"$"},l[Pt],!1,!0);if(l.$=S,Zm()&&Du(a).dataType){const M=l.typeCheck();M&&M.throw(l)}return nN(a,l),l}),vI=Symbol("modelIdPropertyName");class yo{constructor(e){Le(this,JM),Le(this,KM),Le(this,YM),Le(this,qM),Le(this,ZM),Le(this,"$");let n=e;const{snapshotInitialData:r,modelClass:i,generateNewIds:s}=arguments[1];Object.setPrototypeOf(this,i.prototype);const o=this;delete o[Vg],delete o[nI],delete o[rI],delete o[vI],r?yI(this,void 0,{modelClass:i,snapshotInitialData:r,generateNewIds:s}):(nA(n,"initialData"),yI(this,gt.object(n,void 0,{deep:!1}),{modelClass:i,generateNewIds:!0}))}get[(JM=Vg,KM=nI,YM=rI,qM=vI,ZM=Pt,pi)](){const e=Nl(this.constructor);return e?this.$[e]:void 0}set[pi](e){const n=Nl(this.constructor);if(!n)throw de("$modelId cannot be set when there is no idProp set in the model");this.$[n]=e}getRefId(){return this[pi]}typeCheck(){const e=$E(this.constructor);return qE(e,this)}toString(e){const n={withData:!0,...e},r=`${this.constructor.name}#${this[Pt]}`;return n.withData?`[${r} ${JSON.stringify(jr(this))}]`:`[${r}]`}}const Dpe=new Set([Pt,pi,"onInit","$","getRefId","onAttachedToRootStore","typeCheck"]);function tr(t){return t instanceof yo}function aA(t){return!(typeof t!="function"||t!==yo&&!(t.prototype instanceof yo))}function sy(t){return Ws(t)&&Pt in t}function Ma(t){return r0e(t),L2.get(t)}function uT(t){const e=rA.get(t);if(e)return{parent:e,path:"$"};const n=Ma(t);return n&&tr(n.parent)?{parent:n.parent.$,path:n.path}:n}function Eh(t){const e=Ma(t);return e?e.parent:void 0}function Fpe(t){const e=uT(t);return e?e.parent:void 0}function kpe(t){return mn(t,"value"),SN(t)}const Npe=new WeakMap;function Upe(t){const e={root:t,path:[],pathObjects:[t]};let n;for(;n=Ma(e.root);)e.root=n.parent,e.path.unshift(n.path),e.pathObjects.unshift(n.parent);return e}function SN(t){return Gi(Npe,t,()=>yn(()=>Upe(t))).get()}function Kg(t){return SN(t).root}function Gpe(t){return mn(t,"value"),!Eh(t)}const T_={resolved:!1};function S_(t,e){let n=t,r=e.length;for(let i=0;i<r;i++){if(!Ni(n))return T_;const s=e[i];if(Br(n)&&+s>=n.length)return T_;if(tr(n)){const o=_h(n);if(s in o)n=o;else if(!(s in n))return T_}n=n[s]}return{resolved:!0,value:n}}const xN=Symbol("skipIdChecking");function x_(t,e,n){var r;let i=_h(t),s=e.length;for(let o=0;o<s;o++){if(!Ni(i))return{resolved:!1};const a=e[o];if(Br(i)&&+a>=i.length)return{resolved:!1};const l=i[a];i=_h(l);const f=n[o];if(f!==xN){const d=tr(l)&&(r=l[pi])!=null?r:null;if(f!==d)return{resolved:!1}}}return{resolved:!0,value:Ru(i)}}const zpe=new WeakMap,_I=new WeakMap;function Vpe(t){let e=_I.get(t);return e||(e={[Symbol.iterator](){let n=t;function r(){const a=n?zpe.get(n):void 0;if(!(!a||a.length<=0))return a[Symbol.iterator]()}function i(){let a;for(;n&&!a;)n=Eh(n),a=r();return a}let s=r();return s||(s=i()),{next(){if(!s)return{value:void 0,done:!0};let a=s.next();return a.done?(s=i(),this.next()):a}}}},_I.set(t,e)),e}function pr({nameOrNameFn:t,fn:e,actionType:n,overrideContext:r,isFlowFinisher:i=!1}){let s=!1;const o=function(){const a=typeof t=="function"?t():t;s||(s=!0,e=Ve(a,e));const l=this,f=Ym(),d={actionName:a,type:n,target:l,args:Array.from(arguments),parentContext:f,data:{},rootContext:void 0};r&&r(d,this),d.rootContext||(d.previousAsyncStepContext?d.rootContext=d.previousAsyncStepContext.rootContext:d.parentContext?d.rootContext=d.parentContext.rootContext:d.rootContext=d),eI(d);let g=e.bind(l,...arguments);const y=Vpe(d.target)[Symbol.iterator]();let b=y.next();for(;!b.done;){const E=b.value;(E.filter?E.filter(d):!0)&&(g=E.middleware.bind(void 0,d,g)),b=y.next()}try{const E=g();if(i){const S=E,M=S.value;return S.resolution==="accept"?S.accepter(M):S.rejecter(M),M}else return E}finally{eI(d.parentContext),B0e()}};return o[O4]=!0,o}function H2(t,e,n){const r=t[e];if(zE(r))return;const i=pr({nameOrNameFn:n,fn:r,actionType:Vn.Sync}),s=Object.getPrototypeOf(t);s[e]===r?s[e]=i:t[e]=i}function jpe(t){mn(t,"node"),Hpe().call(t)}const Hpe=Vi(()=>pr({nameOrNameFn:Pr.Detach,fn:Wpe,actionType:Vn.Sync}));function Wpe(){const e=uT(this);if(!e)return;const{parent:n,path:r}=e;if(nr(n))n.splice(+r,1);else if(pn(n))ms(n,""+r);else throw de("parent must be an observable object or an observable array")}function Qpe(t,e,n){if(typeof n!="string")throw de(`${t} cannot be used over symbol properties`);const r=`${t} must be used over model classes or instances`;if(!e)throw de(r);if(!(e instanceof yo||e===yo||e.prototype instanceof yo||e instanceof ml||e===ml||e.prototype instanceof ml))throw de(r)}function $pe(t,e){let n=e,r;if(Fu(t)||rT(t)){r=(o,a)=>{o.target=a.$};let i;n=()=>i;const s=Fu(t)?t:t.constructor;G4(s,H4,o=>{const a=Ui.get(o);i=`fn::${a.name}::${e}`,Jde(i,a.class,e)})}return{actionName:n,overrideContext:r}}const CN=Symbol("modelFlow");function Xpe({nameOrNameFn:t,generator:e,overrideContext:n}){const r=function(...i){const s=typeof t=="function"?t():t,o=this;let a;const l=E=>(S,M)=>{n&&n(S,M),S.previousAsyncStepContext=a,S.spawnAsyncStepContext=a?a.spawnAsyncStepContext:S,S.asyncStepType=E,S.args=i,a=S};let f=!1;const d=pr({nameOrNameFn:s,fn:()=>(f=!0,e.apply(o,i)),actionType:Vn.Async,overrideContext:l(ea.Spawn)}).apply(o);if(!f)return d instanceof Promise?d:Promise.resolve(d);const g=d.next.bind(d),y=d.throw.bind(d);return new Promise(function(E,S){function M(I){let L;try{L=pr({nameOrNameFn:s,fn:g,actionType:Vn.Async,overrideContext:l(ea.Resume)}).call(o,I)}catch(F){pr({nameOrNameFn:s,fn:z=>({value:z,resolution:"reject",accepter:E,rejecter:S}),actionType:Vn.Async,overrideContext:l(ea.Throw),isFlowFinisher:!0}).call(o,F);return}P(L)}function C(I){let L;try{L=pr({nameOrNameFn:s,fn:y,actionType:Vn.Async,overrideContext:l(ea.ResumeError)}).call(o,I)}catch(F){pr({nameOrNameFn:s,fn:z=>({value:z,resolution:"reject",accepter:E,rejecter:S}),actionType:Vn.Async,overrideContext:l(ea.Throw),isFlowFinisher:!0}).call(o,F);return}P(L)}function P(I){I&&typeof I.then=="function"?I.then(P,S):I.done?pr({nameOrNameFn:s,fn:L=>({value:L,resolution:"accept",accepter:E,rejecter:S}),actionType:Vn.Async,overrideContext:l(ea.Return),isFlowFinisher:!0}).call(o,I.value):Promise.resolve(I.value).then(M,C)}M(void 0)})};return r[CN]=!0,r}function Jpe(t){return typeof t=="function"&&CN in t}const bI=new Map;function Kpe(t,e,n){if(N4(e,t),bI.has(t)&&z4("warn",`an standalone action with name "${t}" already exists (if you are using hot-reloading you may safely ignore this warning)`,`duplicateActionName - ${t}`),zE(e))throw de("the standalone action must not be previously marked as an action");if(Jpe(e))throw de("the standalone action must not be previously marked as a flow action");const r=n?Xpe({nameOrNameFn:t,generator:e}):pr({nameOrNameFn:t,fn:e,actionType:Vn.Sync}),i=(s,...o)=>(i0e(s,"target"),r.call(s,s,...o));return bI.set(t,i),i}function Ype(t,e){mn(t,"node",!0),Zpe().call(t,e)}function qpe(t){ms(this,""+t)}const Zpe=Vi(()=>pr({nameOrNameFn:Pr.ApplyDelete,fn:qpe,actionType:Vn.Sync}));function ege(t,e,...n){return mn(t,"node"),nge().call(t,e,n)}function tge(t,e){return this[t](...e)}const nge=Vi(()=>pr({nameOrNameFn:Pr.ApplyMethodCall,fn:tge,actionType:Vn.Sync}));function AT(t,e,n){mn(t,"node",!0),ige().call(t,e,n)}function rge(t,e){!tr(this)&&Mo(this)?tn(this,t,e):this[t]=e}const ige=Vi(()=>pr({nameOrNameFn:Pr.ApplySet,fn:rge,actionType:Vn.Sync}));Pr.ApplySnapshot+"",Pr.ApplyPatches+"",Pr.Detach+"",Pr.ApplySet+"",Pr.ApplyDelete+"",Pr.ApplyMethodCall+"";function sge(t,e,n){if(typeof n!="function")throw de("modelAction has to be used over functions");Qpe("modelAction",t,e)}function Hi(t,e,n){const{actionName:r,overrideContext:i}=$pe(t,e);return Zde("modelAction",{target:t,propertyKey:e,baseDescriptor:n},(s,o)=>zE(o)?o:(sge(s.target,s.propertyKey,o),pr({nameOrNameFn:r,fn:o,actionType:Vn.Sync,overrideContext:i})))}function oge(t,e){var n;const r=[];let i=t;for(let s=0;s<e.length;s++){i=i[e[s]];const o=tr(i)&&(n=i[pi])!=null?n:null;r.push(o)}return r}var wI;(function(t){t.Return="return",t.Throw="throw"})(wI||(wI={}));function ht(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function age(t,e,n){return N4(t,"objFn"),Bo(()=>{const r=t();nA(r,"objectSchema");const i=Object.entries(r),s=(...l)=>{const f=[];for(const[d,g]of i){const y=Yn(g);let b="...";l.includes(y)||(b=y.getTypeName(...l,y)),f.push(`${d}: ${b};`)}return`{ ${f.join(" ")} }`},o=(l,f)=>{const d={},g=Object.keys(l);for(let y=0;y<g.length;y++){const b=g[y],E=r[b];if(E){const S=Yn(E);d[b]=f==="from"?S.fromSnapshotProcessor(l[b]):S.toSnapshotProcessor(l[b])}else d[b]=l[b]}return d},a=new Or(jn.Object,(l,f)=>{if(!Ni(l)||e&&!(l instanceof ey))return new _s(f,s(a),l);for(const[d,g]of i){const y=Yn(g),b=l[d],E=y.check(b,[...f,d]);if(E)return E}return null},s,n,l=>{if(!Ni(l))return null;for(const[f,d]of i){const g=Yn(d),y=l[f];if(!g.snapshotType(y))return null}return a},l=>o(l,"from"),l=>o(l,"to"));return a},n)}function lge(t){return age(t,!1,n=>new cge(n,t))}class cge extends ji{constructor(e,n){super(e),Le(this,"_objTypeFn"),Le(this,"_props",Vi(()=>{const r=this._objTypeFn(),i={};return Object.keys(r).forEach(s=>{const o=$l(r[s]);i[s]={type:o,typeInfo:Ql(o)}}),i})),this._objTypeFn=n}get props(){return this._props()}}const PN=new Or(jn.Any,null,()=>"any",t=>new uge(t),()=>PN,vs,vs);function Nu(){return PN}class uge extends ji{}function Age(t,...e){const n=e.slice();let r;const i=eN(t);if(i)n.unshift(i);else{const o=t;r=a=>{const l=o(a);return Yn(l)}}if(n.length<=0)throw de("or type must have at least 1 possible type");const s=o=>new fge(o,n.map($l));return Bo(()=>{const o=n.map(Yn);if(o.some(d=>d.unchecked))return Nu();const a=(...d)=>o.map(y=>d.includes(y)?"...":y.getTypeName(...d,y)).join(" | ");let l;o.some(d=>d.baseType!==o[0].baseType)?l=jn.Any:l=o[0].baseType;const f=new Or(l,(d,g)=>o.some(b=>!b.check(d,g))?null:new _s(g,a(f),d),a,s,d=>{const g=A0e(d),y=o.filter(b=>b.baseType===g||b.baseType===jn.Any);if(y.length===1&&y[0].baseType===g)return y[0];for(let b=0;b<y.length;b++){const E=y[b].snapshotType(d);if(E)return E}return null},d=>{const g=r?r(d):f.snapshotType(d);if(!g)throw de(`snapshot '${JSON.stringify(d)}' does not match the following type: ${a(f)}`);return g.fromSnapshotProcessor(d)},d=>{const g=r?r(d):f.snapshotType(d);if(!g)throw de(`snapshot '${JSON.stringify(d)}' does not match the following type: ${a(f)}`);return g.toSnapshotProcessor(d)});return f},s)}class fge extends ji{constructor(e,n){super(e),Le(this,"orTypes"),Le(this,"_orTypeInfos",Vi(()=>this.orTypes.map(Ql))),this.orTypes=n}get orTypeInfos(){return this._orTypeInfos()}}function vo(t,e){let n=!1;switch(typeof t){case"string":return vo(oA,t);case"number":return vo(qm,t);case"boolean":return vo(XE,t)}arguments.length>=2&&(n=!0);const r=n?jg(e):jg(),i=$l(t),s=n?Age(i,J4,K4):i;return{...r,_internal:{...r._internal,typeChecker:i,fromSnapshotProcessor:o=>{const a=Yn(s).fromSnapshotProcessor;return a?a(o):o},toSnapshotProcessor:o=>{const a=Yn(i).toSnapshotProcessor;return a?a(o):o}}}}function EI(...t){const e=t.filter(r=>!!r);return e.length<=0?void 0:(r,...i)=>{let s=r;for(let o=0;o<e.length;o++)s=e[o](s,...i);return s}}function TI(t,e,n="must be a class or data model class"){if(!aA(t)&&!Fu(t))throw de(`${e} ${n}`)}function hge(t,e){Object.setPrototypeOf(t,e);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}function dge(t,e,n){return{enumerable:n,configurable:!0,get(){return pge(this,e,t)},set(r){V4 in this&&gge(this,e,t,r)}}}function pge(t,e,n){const r=t.$[n];return e!=null&&e._internal.transform?e._internal.transform.transform(r,t,n,i=>{AT(t.$,n,i)}):r}function gge(t,e,n,r){if((e==null?void 0:e._internal.setter)==="assign"&&!Ym()){AT(t,n,r);return}let i=e!=null&&e._internal.transform?e._internal.transform.untransform(r,t,n):r;if(e&&i==null){const s=Hg(e);s!==Kn&&(i=s)}t.$[n]=i}const MN=()=>ZE().modelIdGenerator(),IN=vo(oA,MN);IN._internal.isId=!0;const BN=jg(MN);BN._internal.isId=!0;function mge({modelProps:t,baseModel:e,type:n,valueType:r,fromSnapshotProcessor:i,toSnapshotProcessor:s}){if(nA(t,"modelProps"),e){TI(e,"baseModel");const L=e[O2];L&&(e=L,TI(e,"baseModel"))}const o={},a=t;if(e){const L=iA(e);for(const F of Object.keys(L)){if(t[F])throw de(`extended model cannot redeclare base model property named '${F}'`);a[F]=L[F]}}const l=Object.keys(a).filter(L=>a[L]._internal.isId);if(n==="class"){if(l.length>1)throw de(`expected at most one idProp but got many: ${JSON.stringify(l)}`)}else if(l.length>=1)throw de(`expected no idProp but got some: ${JSON.stringify(l)}`);const f=Object.values(a).some(L=>!!L._internal.typeChecker);let d;if(l.length>=1){d=l[0];const L=a[d];let F=f?IN:BN;switch(L==null?void 0:L._internal.setter){case!0:F=F.withSetter();break;case"assign":F=F.withSetter("assign");break}a[d]=F}let g;if(f){const L={};for(const[F,z]of Object.entries(a))L[F]=z._internal.typeChecker?z._internal.typeChecker:Nu();g=lge(()=>L)}const y=n==="class"?Dpe:Q0e;for(const L of Object.keys(t).filter(F=>!y.has(F)))o[L]=dge(L,t[L],!1);const b=Object.keys(o),E=b.length,S=e!=null?e:n==="class"?yo:ml,M=function(L){hge(F,L);function F(z,X){var Y;const Q=(Y=X==null?void 0:X.modelClass)!=null?Y:this.constructor,N=new L(z,{...X,modelClass:Q});for(let k=0;k<E;k++){const te=b[k];Object.getOwnPropertyDescriptor(N,te)&&delete N[te]}return N}return F}(S),C=S[N2];if(C&&(M[N2]=C.slice()),a0e(M,a),n==="class"){const L={dataType:g,modelIdProperty:d,valueType:r};M[Ou]=L}else{const L={dataType:g};M[Ou]=L}Object.defineProperties(M.prototype,o);for(const[L,F]of Object.entries(t))if(F._internal.setter===!0){const z=e0e(L);M.prototype[z]=function(Y){this[L]=Y};const X=Hi(M.prototype,z,Object.getOwnPropertyDescriptor(M.prototype,z));Object.defineProperty(M.prototype,z,X)}const P=yge(a),I=vge(a);if(i){const L=i;i=F=>({...L(F),[Pt]:F[Pt]})}if(s){const L=s;s=(F,z)=>({...L(F,z),[Pt]:F[Pt]})}return M.fromSnapshotProcessor=EI(i,P),M.toSnapshotProcessor=EI(I,s),M}function yge(t){const e=Object.entries(t).filter(([n,r])=>r._internal.fromSnapshotProcessor);if(!(e.length<=0))return n=>{const r={...n};for(const[i,s]of e)s._internal.fromSnapshotProcessor&&(r[i]=s._internal.fromSnapshotProcessor(n[i]));return r}}function vge(t){const e=Object.entries(t).filter(([n,r])=>r._internal.toSnapshotProcessor);if(!(e.length<=0))return n=>{const r={...n};for(const[i,s]of e)s._internal.toSnapshotProcessor&&(r[i]=s._internal.toSnapshotProcessor(n[i]));return r}}function vd(t,e){const n=typeof t=="function"?t():t;return _ge(n,void 0,e)}function _ge(t,e,n){var r;return mge({modelProps:t,baseModel:e,type:"class",valueType:(r=n==null?void 0:n.valueType)!=null?r:!1,fromSnapshotProcessor:n==null?void 0:n.fromSnapshotProcessor,toSnapshotProcessor:n==null?void 0:n.toSnapshotProcessor})}const _d=t=>e=>bge(t)(e),bge=t=>e=>{const n=aA(e)?"class":Fu(e)?"data":void 0;if(!n)throw de("clazz must be a class that extends from Model/DataModel");if(B2[t]&&z4("warn",`a model with name "${t}" already exists (if you are using hot-reloading you may safely ignore this warning)`,`duplicateModelName - ${t}`),O2 in e)throw de("a class already decorated with `@model` cannot be re-decorated");let r=!1;const i=function(o,a){const l=new e(o,a);if(Object.defineProperty(l,"constructor",{configurable:!0,writable:!0,enumerable:!1,value:i}),w_(l,U4),!r&&dd()>=6)try{WE.makeObservable(l)}catch(f){r=!0;const d=f;if(d.message!=="[MobX] No annotations were passed to makeObservable, but no decorator members have been found either"&&d.message!=="[MobX] No annotations were passed to makeObservable, but no decorated members have been found either")throw d}return F4(l,V4,!0,!1),w_(l,qde),n==="class"&&l.onInit&&(H2(l,"onInit",Ul.OnInit),l.onInit()),n==="data"&&l.onLazyInit&&(H2(l,"onLazyInit",Ul.OnLazyInit),l.onLazyInit()),l};e.toString=()=>`class ${e.name}#${t}`,n==="class"&&(e[Pt]=t),Object.setPrototypeOf(i,e),i.prototype=e.prototype,Object.defineProperty(i,"name",{...Object.getOwnPropertyDescriptor(i,"name"),value:e.name}),i[O2]=e;const s={name:t,class:i};return B2[t]=s,Ui.set(i,s),Ui.set(e,s),w_(e,H4),i};function W2(t){const e=n=>new wge(n,$l(t));return Bo(()=>{const n=Yn(t),r=(...s)=>`Array<${n.getTypeName(...s,n)}>`,i=new Or(jn.Array,(s,o)=>{if(!Br(s))return new _s(o,r(i),s);if(!n.unchecked)for(let a=0;a<s.length;a++){const l=n.check(s[a],[...o,a]);if(l)return l}return null},r,e,s=>{if(!Br(s))return null;if(!n.unchecked){for(let o=0;o<s.length;o++)if(!n.snapshotType(s[o]))return null}return i},s=>n.unchecked?s:s.map(o=>n.fromSnapshotProcessor(o)),s=>n.unchecked?s:s.map(o=>n.toSnapshotProcessor(o)));return i},e)}class wge extends ji{constructor(e,n){super(e),Le(this,"itemType"),this.itemType=n}get itemTypeInfo(){return Ql(this.itemType)}}var Yg;(function(t){t.Single="single",t.Group="group"})(Yg||(Yg={}));function qg(t,e){if(t.type===Yg.Single)return[t];{const n=[];for(const r of t.events)e?n.unshift(...qg(r,!0)):n.push(...qg(r,!1));return n}}let Ia=class extends vd({undoEvents:vo(W2(Nu()),()=>[]),redoEvents:vo(W2(Nu()),()=>[])}){constructor(){super(...arguments),Le(this,"_groupStack",[])}_clearUndo(){il(()=>{this.undoEvents.length=0})}_clearRedo(){il(()=>{this.redoEvents.length=0})}_undo(){il(()=>{const e=this.undoEvents.pop();this.redoEvents.push(e)})}_redo(){il(()=>{const e=this.redoEvents.pop();this.undoEvents.push(e)})}_addUndo(e){il(()=>{this.undoEvents.push(e),this.redoEvents.length=0})}_addUndoToParentGroup(e,n){e.events.push(n)}get _currentGroup(){return this._groupStack[this._groupStack.length-1]}_startGroup(e,n,r){var i;let s=!1,o=!1;const a=this._currentGroup,l={type:Yg.Group,groupName:e,events:[]},f=a||(i=r==null?void 0:r.attachedState)==null?void 0:i.save(),d={pause:()=>{if(o)throw de("cannot pause a group when it is already ended");if(!s)throw de("cannot pause a group when it is not running");if(this._currentGroup!==l)throw de("group out of order");this._groupStack.pop(),s=!1},resume:()=>{if(o)throw de("cannot resume a group when it is already ended");if(s)throw de("cannot resume a group when it is already running");this._groupStack.push(l),s=!0},end:()=>{var g;s&&d.pause(),o=!0,a?this._addUndoToParentGroup(a,l):this._addUndo({...l,attachedState:{beforeEvent:f,afterEvent:(g=r==null?void 0:r.attachedState)==null?void 0:g.save()}})}};return n&&d.resume(),d}};ht([Hi],Ia.prototype,"_clearUndo",null);ht([Hi],Ia.prototype,"_clearRedo",null);ht([Hi],Ia.prototype,"_undo",null);ht([Hi],Ia.prototype,"_redo",null);ht([Hi],Ia.prototype,"_addUndo",null);Ia=ht([_d(`${pd}/UndoStore`)],Ia);class eo{constructor(e,n,r,i){Le(this,"disposer"),Le(this,"subtreeRoot"),Le(this,"options"),Le(this,"store"),Le(this,"_isUndoRecordingDisabled",!1),this.disposer=e,this.subtreeRoot=n,this.options=i,dd()>=6&&WE.makeObservable(this),this.store=r!=null?r:new Ia({})}get undoQueue(){return this.store.undoEvents}get redoQueue(){return this.store.redoEvents}get undoLevels(){return this.undoQueue.length}get canUndo(){return this.undoLevels>0}clearUndo(){this.store._clearUndo()}get redoLevels(){return this.redoQueue.length}get canRedo(){return this.redoLevels>0}clearRedo(){this.store._clearRedo()}undo(){if(!this.canUndo)throw de("nothing to undo");const e=this.undoQueue[this.undoQueue.length-1];il(()=>{var n,r,i;qg(e,!0).forEach(s=>{wh(this.subtreeRoot,s.inversePatches,!0)}),(n=e.attachedState)!=null&&n.beforeEvent&&((i=(r=this.options)==null?void 0:r.attachedState)==null||i.restore(e.attachedState.beforeEvent))}),this.store._undo()}redo(){if(!this.canRedo)throw de("nothing to redo");const e=this.redoQueue[this.redoQueue.length-1];il(()=>{var n,r,i;qg(e,!1).forEach(s=>{wh(this.subtreeRoot,s.patches)}),(n=e.attachedState)!=null&&n.afterEvent&&((i=(r=this.options)==null?void 0:r.attachedState)==null||i.restore(e.attachedState.afterEvent))}),this.store._redo()}dispose(){this.disposer()}get isUndoRecordingDisabled(){return this._isUndoRecordingDisabled}withoutUndo(e){const n=this._isUndoRecordingDisabled;this._isUndoRecordingDisabled=!0;try{return e()}finally{this._isUndoRecordingDisabled=n}}createGroup(e){const n=this.store._startGroup(e,!1,this.options);return{continue(r){n.resume();try{return r()}finally{n.pause()}},end(){n.end()}}}withGroup(e,n){let r,i;typeof e=="string"?(r=e,i=n):i=e;const s=this.store._startGroup(r,!0,this.options);try{return i()}finally{s.end()}}withGroupFlow(e,n){let r,i;typeof e=="string"?(r=e,i=n):i=e;const s=i(),o=this.store._startGroup(r,!1,this.options),a=s.next.bind(s),l=s.throw.bind(s);return new Promise(function(d,g){function y(S){o.resume();let M;try{M=a(S)}catch(C){o.end(),g(C);return}o.pause(),E(M)}function b(S){o.resume();let M;try{M=l(S)}catch(C){o.end(),g(C);return}o.pause(),E(M)}function E(S){S&&typeof S.then=="function"?S.then(E,g):S.done?(o.end(),d(S.value)):Promise.resolve(S.value).then(y,b)}y(void 0)})}}ht([yn],eo.prototype,"undoQueue",null);ht([yn],eo.prototype,"redoQueue",null);ht([yn],eo.prototype,"undoLevels",null);ht([yn],eo.prototype,"canUndo",null);ht([Ve],eo.prototype,"clearUndo",null);ht([yn],eo.prototype,"redoLevels",null);ht([yn],eo.prototype,"canRedo",null);ht([Ve],eo.prototype,"clearRedo",null);ht([Ve],eo.prototype,"undo",null);ht([Ve],eo.prototype,"redo",null);let C_=!1;function il(t){const e=C_;C_=!0;try{return t()}finally{C_=e}}function P_(t){return t.type==="value"?t.value:t.value.get()}class Ege{constructor(e){Le(this,"defaultContextValue",gt.box(void 0,{deep:!1})),Le(this,"overrideContextValue",gt.box(void 0,{deep:!1})),Le(this,"nodeContextValue",new WeakMap),Le(this,"nodeAtom",new WeakMap),Le(this,"setDefault",Ve(n=>{this.defaultContextValue.set({type:"value",value:n})})),Le(this,"setDefaultComputed",Ve(n=>{this.defaultContextValue.set({type:"computed",value:yn(n)})})),Le(this,"set",Ve((n,r)=>{mn(n,"node"),this.nodeContextValue.set(n,{type:"value",value:r}),this.getNodeAtom(n).reportChanged()})),Le(this,"setComputed",Ve((n,r)=>{this._setComputed(n,yn(r))})),Le(this,"unset",Ve(n=>{mn(n,"node"),this.nodeContextValue.delete(n),this.getNodeAtom(n).reportChanged()})),Le(this,"apply",Ve((n,r)=>{const i=this.overrideContextValue.get();this.overrideContextValue.set({type:"value",value:r});try{const s=n();return Ca(s,!0)&&this.set(s,r),s}finally{this.overrideContextValue.set(i)}})),Le(this,"applyComputed",Ve((n,r)=>{const i=yn(r),s=this.overrideContextValue.get();this.overrideContextValue.set({type:"computed",value:i});try{const o=n();return Ca(o,!0)&&this._setComputed(o,i),o}finally{this.overrideContextValue.set(s)}})),this.setDefault(e)}getNodeAtom(e){return Gi(this.nodeAtom,e,()=>Fa("contextValue"))}fastGet(e){this.getNodeAtom(e).reportObserved();const n=this.nodeContextValue.get(e);if(n)return P_(n);const r=Eh(e);if(!r){const i=this.overrideContextValue.get();return i?P_(i):this.getDefault()}return this.fastGet(r)}get(e){return mn(e,"node"),this.fastGet(e)}fastGetProviderNode(e){if(this.getNodeAtom(e).reportObserved(),this.nodeContextValue.get(e))return e;const r=Eh(e);if(!!r)return this.fastGetProviderNode(r)}getProviderNode(e){return mn(e,"node"),this.fastGetProviderNode(e)}getDefault(){return P_(this.defaultContextValue.get())}_setComputed(e,n){mn(e,"node"),this.nodeContextValue.set(e,{type:"computed",value:n}),this.getNodeAtom(e).reportChanged()}}function LN(t){return new Ege(t)}LN(!1);class bd extends vd({id:vo(oA)}){get maybeCurrent(){return this.resolve()}get isValid(){return!!this.maybeCurrent}get current(){const e=this.maybeCurrent;if(!e)throw de(`a reference of type '${this[Pt]}' could not resolve an object with id '${this.id}'`);return e}}ht([yn],bd.prototype,"maybeCurrent",null);ht([yn],bd.prototype,"isValid",null);ht([yn],bd.prototype,"current",null);const SI=new WeakMap;function RN(t,e,n,r){let i=class extends bd{constructor(){super(...arguments),Le(this,"resolver"),Le(this,"savedOldTarget")}resolve(){return this.resolver||(this.resolver=e(this)),this.resolver(this)}internalForceUpdateBackRefs(l){const f=this.savedOldTarget;this.savedOldTarget=l,xge(this,o,l,f)}forceUpdateBackRefs(){this.internalForceUpdateBackRefs(this.maybeCurrent)}onInit(){let l,f=!0;yk(()=>this.maybeCurrent,d=>{this.internalForceUpdateBackRefs(d);const g=l,y=f;l=d,f=!1,!y&&r&&d!==g&&r(this,d,g)},{fireImmediately:!0})}};ht([Ve],i.prototype,"forceUpdateBackRefs",null),i=ht([_d(t)],i);const s=a=>{let l;if(typeof a=="string"?l=a:(nA(a,"target"),l=n(a)),typeof l!="string")throw de("ref target object must have an id of string type");return new i({id:l})};s.refClass=i;const o=s;return o}function fT(t){if(tr(t)&&t.getRefId){const e=t.getRefId();if(e!==void 0&&typeof e!="string")throw de("'getRefId()' must return a string or undefined when present");return e}}const Tge=new WeakMap;function Sge(t,e,n=fT){const i=Gi(Tge,n,()=>N0e(s=>n(s))).walk(t);return i?i.get(e):void 0}function J0(t,e){let n=SI.get(t);if(n||(n={all:gt.set(void 0,{deep:!1}),byType:new WeakMap},SI.set(t,n)),e){let r=n.byType.get(e);return r||(r=gt.set(void 0,{deep:!1}),n.byType.set(e,r)),r}else return n.all}const xge=Ve("updateBackRefs",(t,e,n,r)=>{n!==r&&(r&&(J0(r).delete(t),J0(r,e).delete(t)),n&&(J0(n).add(t),J0(n,e).add(t)))});oN({initData(){return{all:new Set,byType:new WeakMap}},addNode(t,e){t instanceof bd&&(e.all.add(t),Gi(e.byType,t.constructor,()=>new Set).add(t))}});Ve("customRef",(t,e)=>{var n;const r=(n=e.getId)!=null?n:fT;return RN(t,()=>e.resolve,r,e.onResolvedValueChange)});Ve("rootRef",(t,e)=>{var n;const r=(n=e==null?void 0:e.getId)!=null?n:fT,i=e==null?void 0:e.onResolvedValueChange;return RN(t,o=>{let a;return()=>{const l=Kg(o);if(Cge(o,l,a,r))return a;const f=Sge(l,o.id,r);return f&&(a=f),f}},r,i)});function Cge(t,e,n,r){return!(!n||t.id!==r(n)||e!==Kg(n))}function Bn(t,e){return Kpe(t,e,!1)}function Pge(t,...e){return t.splice(...e)}const Sr=`${pd}/arrayActions`;Bn(`${Sr}::set`,(t,e,n)=>{tn(t,e,n)}),Bn(`${Sr}::delete`,(t,e)=>ms(t,""+e)),Bn(`${Sr}::setLength`,(t,e)=>{t.length=e}),Bn(`${Sr}::concat`,(t,...e)=>t.concat(...e)),Bn(`${Sr}::copyWithin`,(t,e,n,r)=>t.copyWithin(e,n,r)),Bn(`${Sr}::fill`,(t,e,n,r)=>t.fill(e,n,r)),Bn(`${Sr}::pop`,t=>t.pop()),Bn(`${Sr}::push`,(t,...e)=>t.push(...e)),Bn(`${Sr}::reverse`,t=>t.reverse()),Bn(`${Sr}::shift`,t=>t.shift()),Bn(`${Sr}::slice`,(t,e,n)=>t.slice(e,n)),Bn(`${Sr}::sort`,(t,e)=>t.sort(e)),Bn(`${Sr}::splice`,Pge),Bn(`${Sr}::unshift`,(t,...e)=>t.unshift(...e)),Bn(`${Sr}::swap`,(t,e,n)=>{if(e<0||n<0||e>=t.length||n>=t.length)return!1;n<e&&([e,n]=[n,e]);const[r]=t.splice(e,1),[i]=t.splice(n-1,1);return t.splice(e,0,i),t.splice(n,0,r),!0});const K0=`${pd}/objectActions`;Bn(`${K0}::set`,(t,e,n)=>{Mo(t)?tn(t,e,n):t[e]=n}),Bn(`${K0}::assign`,(t,e)=>{nA(e,"partialObject");const n=Object.keys(e);if(Mo(t))for(const r of n)tn(t,r,e[r]);else for(const r of n)t[r]=e[r]}),Bn(`${K0}::delete`,(t,e)=>ms(t,e)),Bn(`${K0}::call`,(t,e,...n)=>t[e](...n));Ve(t=>{const e=gt.map();e.dataObject=t;const n=Object.keys(t);for(let s=0;s<n.length;s++){const o=n[s];e.set(o,t[o])}let r=!1,i=!1;return eA(t,Ve(s=>{if(!r){i=!0;try{switch(s.type){case"add":case"update":{e.set(s.name,s.newValue);break}case"remove":{e.delete(s.name);break}}}finally{i=!1}}})),Zu(e,Ve(s=>{if(r)return null;if(i)return s;r=!0;try{switch(s.type){case"add":case"update":{tn(t,s.name,s.newValue);break}case"delete":{ms(t,s.name);break}}return s}finally{r=!1}})),e});Ve(t=>{let e;if(dd()>=6?e=gt.map(t):(e=gt.map(),t.forEach(([i,s])=>{e.set(i,s)})),e.dataObject=t,e.size!==t.length)throw de("arrays backing a map cannot contain duplicate keys");let n=!1,r=!1;return eA(t,Ve(i=>{if(!n){r=!0;try{switch(i.type){case"splice":{{const s=i.removed;for(let o=0;o<s.length;o++)e.delete(s[o][0])}{const s=i.added;for(let o=0;o<s.length;o++)e.set(s[o][0],s[o][1])}break}case"update":{e.delete(i.oldValue[0]),e.set(i.newValue[0],i.newValue[1]);break}}}finally{r=!1}}})),Zu(e,Ve(i=>{if(n)return null;if(r)return i;n=!0;try{switch(i.type){case"update":{const s=t.findIndex(o=>o[0]===i.name);t[s]=[i.name,i.newValue];break}case"add":{t.push([i.name,i.newValue]);break}case"delete":{const s=t.findIndex(o=>o[0]===i.name);s>=0&&t.splice(s,1);break}}return i}finally{n=!1}})),e});Ve(t=>{let e;if(dd()>=6?e=gt.set(t):(e=gt.set(),t.forEach(i=>{e.add(i)})),e.dataObject=t,e.size!==t.length)throw de("arrays backing a set cannot contain duplicate values");let n=!1,r=!1;return eA(t,Ve(i=>{if(!n){r=!0;try{switch(i.type){case"splice":{{const s=i.removed;for(let o=0;o<s.length;o++)e.delete(s[o])}{const s=i.added;for(let o=0;o<s.length;o++)e.add(s[o])}break}case"update":{e.delete(i.oldValue),e.add(i.newValue);break}}}finally{r=!1}}})),Zu(e,Ve(i=>{if(n)return null;if(r)return i;n=!0;try{switch(i.type){case"add":{t.push(i.newValue);break}case"delete":{const s=t.indexOf(i.oldValue);s>=0&&t.splice(s,1);break}}return i}finally{n=!1}})),e});class lA{constructor(e){Le(this,"data"),Le(this,"originalData"),mn(e,"original"),this.originalData=e,this.data=yl(this.originalSnapshot,{generateNewIds:!1})}commit(){V2(this.originalData,jr(this.data))}commitByPath(e){const n=S_(this.data,e);if(!n.resolved)throw de(`path ${JSON.stringify(e)} could not be resolved in draft object`);const r=M_(this.data,e);if(!x_(this.originalData,e,r).resolved)throw de(`path ${JSON.stringify(e)} could not be resolved in original object`);wh(this.originalData,[{path:e,op:"replace",value:jr(n.value)}])}reset(){V2(this.data,this.originalSnapshot)}resetByPath(e){const n=S_(this.originalData,e);if(!n.resolved)throw de(`path ${JSON.stringify(e)} could not be resolved in original object`);const r=M_(this.originalData,e);if(!x_(this.data,e,r).resolved)throw de(`path ${JSON.stringify(e)} could not be resolved in draft object`);wh(this.data,[{path:e,op:"replace",value:jr(n.value)}])}get isDirty(){return!j2(jr(this.data),this.originalSnapshot)}isDirtyByPath(e){const n=S_(this.data,e);if(!n.resolved)throw de(`path ${JSON.stringify(e)} could not be resolved in draft object`);const r=M_(this.data,e),i=x_(this.originalData,e,r);return i.resolved?!j2(n.value,i.value):!0}get originalSnapshot(){return jr(this.originalData)}}ht([Ve],lA.prototype,"commit",null);ht([Ve],lA.prototype,"commitByPath",null);ht([Ve],lA.prototype,"reset",null);ht([Ve],lA.prototype,"resetByPath",null);ht([yn],lA.prototype,"isDirty",null);ht([yn],lA.prototype,"originalSnapshot",null);function M_(t,e){const n=oge(t,e);return n.length>=1&&(n[n.length-1]=xN),n}LN();let Th=class extends vd({[pi]:Q4,items:vo(W2(Nu()),()=>[])}){add(e){const n=this.items;return n.includes(e)||n.push(e),this}clear(){this.items.length=0}delete(e){const n=this.items,r=n.findIndex(i=>i===e);return r>=0?(n.splice(r,1),!0):!1}forEach(e,n){const r=this.items,i=r.length;for(let s=0;s<i;s++){const o=r[s];e.call(n,o,o,this)}}has(e){return this.items.includes(e)}get size(){return this.items.length}keys(){return this.values()}values(){const e=this.items;return bE(e)[Symbol.iterator]()}entries(){return this.items.map(n=>[n,n]).values()}[Symbol.iterator](){return this.values()}get[Symbol.toStringTag](){return"ArraySet"}};ht([Hi],Th.prototype,"add",null);ht([Hi],Th.prototype,"clear",null);ht([Hi],Th.prototype,"delete",null);Th=ht([_d(`${pd}/ArraySet`)],Th);function Mge(t){const e=n=>new Ige(n,$l(t));return Bo(()=>{const n=Yn(t),r=(...o)=>`Record<${n.getTypeName(...o,n)}>`,i=(o,a)=>{if(n.unchecked)return o;const l={},f=Object.keys(o);for(let d=0;d<f.length;d++){const g=f[d],y=a==="from"?n.fromSnapshotProcessor(o[g]):n.toSnapshotProcessor(o[g]);l[g]=y}return l},s=new Or(jn.Object,(o,a)=>{if(!Ni(o))return new _s(a,r(s),o);if(!n.unchecked){const l=Object.keys(o);for(let f=0;f<l.length;f++){const d=l[f],g=o[d],y=n.check(g,[...a,d]);if(y)return y}}return null},r,e,o=>{if(!Ni(o))return null;if(!n.unchecked){const a=Object.keys(o);for(let l=0;l<a.length;l++){const f=a[l],d=o[f];if(!n.snapshotType(d))return null}}return s},o=>i(o,"from"),o=>i(o,"to"));return s},e)}class Ige extends ji{constructor(e,n){super(e),Le(this,"valueType"),this.valueType=n}get valueTypeInfo(){return Ql(this.valueType)}}let Sh=class extends vd({[pi]:Q4,items:vo(Mge(Nu()),()=>({}))}){clear(){const e=this.items,n=Object.keys(e),r=n.length;for(let i=0;i<r;i++){const s=n[i];ms(e,s)}}delete(e){return this.has(e)?(ms(this.items,e),!0):!1}forEach(e,n){const r=this.items,i=Object.keys(r),s=i.length;for(let o=0;o<s;o++){const a=i[o];e.call(n,r[a],a,this)}}get(e){return Pk(this.items,e)}has(e){return wE(this.items,e)}set(e,n){return tn(this.items,e,n),this}get size(){return Dl(this.items).length}keys(){return Dl(this.items)[Symbol.iterator]()}values(){return bE(this.items)[Symbol.iterator]()}entries(){return Ck(this.items)[Symbol.iterator]()}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return"ObjectMap"}};ht([Hi],Sh.prototype,"clear",null);ht([Hi],Sh.prototype,"delete",null);ht([Hi],Sh.prototype,"set",null);Sh=ht([_d(`${pd}/ObjectMap`)],Sh);function ON(t,e,n){const r=i=>new Bge(i,$l(t),e,n);return Bo(()=>{const i=Yn(t),s=(...a)=>{const l=i.getTypeName(...a,i);return`${n||"refinementOf"}<${l}>`},o=new Or(i.baseType,(a,l)=>{const f=i.check(a,l);if(f)return f;const d=e(a);return d===!0?null:d===!1?new _s(l,s(o),a):d!=null?d:null},s,r,a=>i.snapshotType(a),a=>i.fromSnapshotProcessor(a),a=>i.toSnapshotProcessor(a));return o},r)}class Bge extends ji{constructor(e,n,r,i){super(e),Le(this,"baseType"),Le(this,"checkFunction"),Le(this,"typeName"),this.baseType=n,this.checkFunction=r,this.typeName=i}get baseTypeInfo(){return Ql(this.baseType)}}ON(qm,t=>Number.isInteger(t),"integer");ON(oA,t=>t!=="","nonEmpty");var Lge=Object.defineProperty,Rge=Object.getOwnPropertyDescriptor,Oge=(t,e,n,r)=>{for(var i=r>1?void 0:r?Rge(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&Lge(e,n,i),i};let Q2=class extends vd({timeRange:jg().withSetter()}){};Q2=Oge([_d("railwayMap/RootStore")],Q2);function Dge(){const t=new Q2({timeRange:[+new Date("2022-07-31T05:00:00.000+08:00"),+new Date("2022-07-31T23:59:00.000+08:00")]});return z0e(t),window.rootStore=t,t}const Fge=Dge(),DN=ie.exports.createContext(null);function FN(){return ie.exports.useContext(DN)}const kge=Wk(()=>{const t=FN(),e=ie.exports.useRef(t.timeRange),n=(r,i)=>{t.setTimeRange(i)};return Gt("div",{className:"timeline",children:Gt(Rde,{sx:{width:"98%"},children:Gt(Wde,{min:e.current[0],max:e.current[1],value:t.timeRange,onChange:n,valueLabelDisplay:"auto"})})})});const Nge=()=>Gt("div",{className:"info-pane"});const Uge=Wk(()=>{const t=FN();return Xf(R5,{children:[Xf("div",{className:"map-container",children:[Gt(jae,{timeRange:t.timeRange}),Gt(Nge,{})]}),Gt(kge,{})]})});I_.createRoot(document.getElementById("root")).render(Gt(rl.StrictMode,{children:Gt(DN.Provider,{value:Fge,children:Gt(Uge,{})})}));export{s6 as c};
